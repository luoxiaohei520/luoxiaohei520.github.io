<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Miaow.Y.Huçš„åšå®¢ğŸ¥</title>
  
  
  <link href="https://www.blog.909111.xyz/atom.xml" rel="self"/>
  
  <link href="https://www.blog.909111.xyz/"/>
  <updated>2024-04-19T18:00:00.000Z</updated>
  <id>https://www.blog.909111.xyz/</id>
  
  <author>
    <name>Miaow.Y.HuğŸ¥</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>éŸ³ä¹</title>
    <link href="https://www.blog.909111.xyz/posts/b7fb4495.html"/>
    <id>https://www.blog.909111.xyz/posts/b7fb4495.html</id>
    <published>2024-04-19T18:00:00.000Z</published>
    <updated>2024-04-19T18:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="music"><a href="#music" class="headerlink" title="music"></a>music</h1><div class="audio"><audio controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3' type='audio/mp3'>Your browser does not support the audio tag.</audio></div><div class="audio"><audio controls preload><source src='https://cdn.jsdelivr.net/gh/luoxiaohei520/MyPics@img/img/202404221626482.mp3' type='audio/mp3'>Your browser does not support the audio tag.</audio></div>]]></content>
    
    
    <summary type="html">ğŸ¥§æƒ³è¦å¬æ­Œå—?,æœ¬é¡µé¢å°†é›†æˆéƒ¨åˆ†åœ¨çº¿éŸ³ä¹ä¾›ä½ å€¾å¬ã€‚</summary>
    
    
    
    <category term="music" scheme="https://www.blog.909111.xyz/categories/music/"/>
    
    
    <category term="music" scheme="https://www.blog.909111.xyz/tags/music/"/>
    
  </entry>
  
  <entry>
    <title>IDEAå…¨å®¶æ¡¶æ¿€æ´»æ¿€æ´»ç </title>
    <link href="https://www.blog.909111.xyz/posts/fd5ae9cb.html"/>
    <id>https://www.blog.909111.xyz/posts/fd5ae9cb.html</id>
    <published>2024-04-02T09:00:00.000Z</published>
    <updated>2024-04-02T09:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="IDEAæ¿€æ´»æ–¹å¼"><a href="#IDEAæ¿€æ´»æ–¹å¼" class="headerlink" title="IDEAæ¿€æ´»æ–¹å¼"></a>IDEAæ¿€æ´»æ–¹å¼</h1><ol><li>å…ˆä»å®˜ç½‘[<a href="https://www.jetbrains.com/]ä¸‹è½½2022.1çš„IDEAç³»åˆ—å®‰è£…åŒ…ã€‚">https://www.jetbrains.com/]ä¸‹è½½2022.1çš„IDEAç³»åˆ—å®‰è£…åŒ…ã€‚</a></li><li>ä¸‹è½½ç›¸å…³ç ´è§£åŒ…ç ´è§£å·¥å…·<ol><li>è¡¥ä¸ï¼š<a href="https://pan.baidu.com/s/1KK7351Xjagc09klN-BaGYw">https://pan.baidu.com/s/1KK7351Xjagc09klN-BaGYw</a>  æå–ç : 6t6t  </li><li>æ— é™é€Ÿè“å¥äº‘ç½‘ç›˜é“¾æ¥ï¼š<a href="https://wwe.lanzoul.com/ikV6Szw3mre">https://wwe.lanzoul.com/ikV6Szw3mre</a> </li><li>æ³¨æ„è¿™ä¸ªæ¿€æ´»åŒ…æ˜¯å…¨å®¶æ¡¶æ¿€æ´»</li><li>å®‰è£…ç›¸å…³è½¯ä»¶ï¼Œé€‰æ‹©ä¸è¦ç«‹å³å¯åŠ¨ï¼Œä¹‹åè§£å‹è¡¥ä¸æ–‡ä»¶ï¼Œæ¨èè§£å‹åˆ°éä¸­æ–‡æ–‡ä»¶ç›®å½•ä¸‹ï¼Œæ³¨æ„è¿™ä¸ªæ–‡ä»¶ä¸è¦åˆ é™¤ï¼Œå› ä¸ºideaæ¿€æ´»å…¨é è¿™ä¸ªæ–‡ä»¶ã€‚</li><li>è¿›å…¥<code>ja-netfilter-all\scripts</code>é€‰æ‹©<code>install-current-user.vbs</code>è¿è¡Œï¼Œç‚¹å‡»ç¡®è®¤çª—å£ï¼Œç„¶åç­‰å¾…done</li><li>å‡ºç°doneçª—å£åï¼Œè¿›å…¥è½¯ä»¶ï¼Œè¾“å…¥æ¿€æ´»ç ï¼Œä¸€èˆ¬åˆ°è¿™éƒ¨å°±æ¿€æ´»æˆåŠŸäº†ã€‚</li><li>å‚è€ƒé¡µé¢ï¼š<a href="http://www.itmind.net/14363.html">http://www.itmind.net/14363.html</a></li><li>å‚è€ƒé¡µé¢ï¼š<a href="http://www.itmind.net/14605.html">http://www.itmind.net/14605.html</a></li></ol></li></ol><ol><li><p>IDEA-pyæ¿€æ´»ç </p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">IHMWLMSEAL-eyJsaWNlbnNlSWQiOiJJSE1XTE1TRUFMIiwibGljZW5zZWVOYW1lIjoidHJlbmRzIHJhYmJpcyIsImFzc2lnbmVlTmFtZSI6IiIsImFzc2lnbmVlRW1haWwiOiIiLCJsaWNlbnNlUmVzdHJpY3Rpb24iOiIiLCJjaGVja0NvbmN1cnJlbnRVc2UiOmZhbHNlLCJwcm9kdWN0cyI6W3siY29kZSI6IlBDIiwiZmFsbGJhY2tEYXRlIjoiMjAyMy0wMi0wOCIsInBhaWRVcFRvIjoiMjAyMy0wMi0wOCIsImV4dGVuZGVkIjpmYWxzZX0seyJjb2RlIjoiUFBDIiwiZmFsbGJhY2tEYXRlIjoiMjAyMy0wMi0wOCIsInBhaWRVcFRvIjoiMjAyMy0wMi0wOCIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQV1MiLCJmYWxsYmFja0RhdGUiOiIyMDIzLTAyLTA4IiwicGFpZFVwVG8iOiIyMDIzLTAyLTA4IiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBTSSIsImZhbGxiYWNrRGF0ZSI6IjIwMjMtMDItMDgiLCJwYWlkVXBUbyI6IjIwMjMtMDItMDgiLCJleHRlbmRlZCI6dHJ1ZX0seyJjb2RlIjoiUENXTVAiLCJmYWxsYmFja0RhdGUiOiIyMDIzLTAyLTA4IiwicGFpZFVwVG8iOiIyMDIzLTAyLTA4IiwiZXh0ZW5kZWQiOnRydWV9XSwibWV0YWRhdGEiOiIwMTIwMjIwMjA4UFNBTjAwMDAwNSIsImhhc2giOiJUUklBTDozMzQzMzQ3ODMiLCJncmFjZVBlcmlvZERheXMiOjcsImF1dG9Qcm9sb25nYXRlZCI6ZmFsc2UsImlzQXV0b1Byb2xvbmdhdGVkIjpmYWxzZX0</span>=<span class="string">-TT/mvlYqIE07j8qgnrhSSVpMtD4buKsRuntPuB17Zb8KodU2SUcb8byLpLG1pU+xEIIyG3Scu/ypjXmQ9w4iyvOT+NYGmeeHFMHnknQVEhhUvDZjTMNXPct03KeHcjxJX8jMSsuRkTooePx1beXjHTuxcyiO8qJcNOOl/97pT45kGTqSJohat0Xe7oiwrE6u3JZhfSdmYV9iJxz6XGNeoPMPnXbH17yoP75eXUqQJzUGxqdeHyKVHSUUJTGfO3IHgjN9y2TwYET5oFjRy1qSMRf4vXpPCK7tnfqhCGISQiDCm+ETB133CcmArxlRVlKdbAIM/7W++eOn5AfW/CNvgg==-MIIETDCCAjSgAwIBAgIBDTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTIwMTAxOTA5MDU1M1oXDTIyMTAyMTA5MDU1M1owHzEdMBsGA1UEAwwUcHJvZDJ5LWZyb20tMjAyMDEwMTkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCUlaUFc1wf+CfY9wzFWEL2euKQ5nswqb57V8QZG7d7RoR6rwYUIXseTOAFq210oMEe++LCjzKDuqwDfsyhgDNTgZBPAaC4vUU2oy+XR+Fq8nBixWIsH668HeOnRK6RRhsr0rJzRB95aZ3EAPzBuQ2qPaNGm17pAX0Rd6MPRgjp75IWwI9eA6aMEdPQEVN7uyOtM5zSsjoj79Lbu1fjShOnQZuJcsV8tqnayeFkNzv2LTOlofU/Tbx502Ro073gGjoeRzNvrynAP03pL486P3KCAyiNPhDs2z8/COMrxRlZW5mfzo0xsK0dQGNH3UoG/9RVwHG4eS8LFpMTR9oetHZBAgMBAAGjgZkwgZYwCQYDVR0TBAIwADAdBgNVHQ4EFgQUJNoRIpb1hUHAk0foMSNM9MCEAv8wSAYDVR0jBEEwP4AUo562SGdCEjZBvW3gubSgUouX8bOhHKQaMBgxFjAUBgNVBAMMDUpldFByb2ZpbGUgQ0GCCQDSbLGDsoN54TATBgNVHSUEDDAKBggrBgEFBQcDATALBgNVHQ8EBAMCBaAwDQYJKoZIhvcNAQELBQADggIBAB2J1ysRudbkqmkUFK8xqhiZaYPd30TlmCmSAaGJ0eBpvkVeqA2jGYhAQRqFiAlFC63JKvWvRZO1iRuWCEfUMkdqQ9VQPXziE/BlsOIgrL6RlJfuFcEZ8TK3syIfIGQZNCxYhLLUuet2HE6LJYPQ5c0jH4kDooRpcVZ4rBxNwddpctUO2te9UU5/FjhioZQsPvd92qOTsV+8Cyl2fvNhNKD1Uu9ff5AkVIQn4JU23ozdB/R5oUlebwaTE6WZNBs+TA/qPj+5/we9NH71WRB0hqUoLI2AKKyiPw++FtN4Su1vsdDlrAzDj9ILjpjJKA1ImuVcG329/WTYIKysZ1CWK3zATg9BeCUPAV1pQy8ToXOq+RSYen6winZ2OO93eyHv2Iw5kbn1dqfBw1BuTE29V2FJKicJSu8iEOpfoafwJISXmz1wnnWL3V/0NxTulfWsXugOoLfv0ZIBP1xH9kmf22jjQ2JiHhQZP7ZDsreRrOeIQ/c4yR8IQvMLfC0WKQqrHu5ZzXTH4NO3CwGWSlTY74kE91zXB5mwWAx1jig+UXYc2w4RkVhy0//lOmVya/PEepuuTTI4+UJwC7qbVlh5zfhj8oTNUXgN0AOc+Q0/WFPl1aw5VV/VrO8FCoB15lFVlpKaQ1Yh+DVU8ke+rt9Th0BCHXe0uZOEmH0nOnH/0onD</span></span><br></pre></td></tr></table></figure></li><li><p>IDEA-javaæ¿€æ´»ç </p></li></ol><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">4W9NP3KV9E-eyJsaWNlbnNlSWQiOiI0VzlOUDNLVjlFIiwibGljZW5zZWVOYW1lIjoic2NyaXAgd2FuZSIsImFzc2lnbmVlTmFtZSI6IiIsImFzc2lnbmVlRW1haWwiOiIiLCJsaWNlbnNlUmVzdHJpY3Rpb24iOiIiLCJjaGVja0NvbmN1cnJlbnRVc2UiOmZhbHNlLCJwcm9kdWN0cyI6W3siY29kZSI6IklJIiwiZmFsbGJhY2tEYXRlIjoiMjAyMy0wMS0yNCIsInBhaWRVcFRvIjoiMjAyMy0wMS0yNCIsImV4dGVuZGVkIjpmYWxzZX0seyJjb2RlIjoiUERCIiwiZmFsbGJhY2tEYXRlIjoiMjAyMy0wMS0yNCIsInBhaWRVcFRvIjoiMjAyMy0wMS0yNCIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQV1MiLCJmYWxsYmFja0RhdGUiOiIyMDIzLTAxLTI0IiwicGFpZFVwVG8iOiIyMDIzLTAxLTI0IiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBHTyIsImZhbGxiYWNrRGF0ZSI6IjIwMjMtMDEtMjQiLCJwYWlkVXBUbyI6IjIwMjMtMDEtMjQiLCJleHRlbmRlZCI6dHJ1ZX0seyJjb2RlIjoiUFBTIiwiZmFsbGJhY2tEYXRlIjoiMjAyMy0wMS0yNCIsInBhaWRVcFRvIjoiMjAyMy0wMS0yNCIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQUEMiLCJmYWxsYmFja0RhdGUiOiIyMDIzLTAxLTI0IiwicGFpZFVwVG8iOiIyMDIzLTAxLTI0IiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBSQiIsImZhbGxiYWNrRGF0ZSI6IjIwMjMtMDEtMjQiLCJwYWlkVXBUbyI6IjIwMjMtMDEtMjQiLCJleHRlbmRlZCI6dHJ1ZX0seyJjb2RlIjoiUFNXIiwiZmFsbGJhY2tEYXRlIjoiMjAyMy0wMS0yNCIsInBhaWRVcFRvIjoiMjAyMy0wMS0yNCIsImV4dGVuZGVkIjp0cnVlfSx7ImNvZGUiOiJQU0kiLCJmYWxsYmFja0RhdGUiOiIyMDIzLTAxLTI0IiwicGFpZFVwVG8iOiIyMDIzLTAxLTI0IiwiZXh0ZW5kZWQiOnRydWV9LHsiY29kZSI6IlBDV01QIiwiZmFsbGJhY2tEYXRlIjoiMjAyMy0wMS0yNCIsInBhaWRVcFRvIjoiMjAyMy0wMS0yNCIsImV4dGVuZGVkIjp0cnVlfV0sIm1ldGFkYXRhIjoiMDEyMDIyMDEyMVBTQU4wMDAwMDUiLCJoYXNoIjoiVFJJQUw6LTYyNTA2MDI4NyIsImdyYWNlUGVyaW9kRGF5cyI6NywiYXV0b1Byb2xvbmdhdGVkIjpmYWxzZSwiaXNBdXRvUHJvbG9uZ2F0ZWQiOmZhbHNlfQ</span>=<span class="string">=-WlwI3NBiapY7em4MmP7qdZcTK2wvAt5f7FNwaH65H6SBvWnFGpe8M2VrSWCEBIGFQpv+VFJLghJKLjaRUcVOY6ttC6G4uKTpuPzELgcckez+/9DPrYj+alvLYFpS6UWy4uqzsjC/sHgcbNiCQjZQMVhj8Wflv9ts8SfWUqTwtciG8eBrzbyipXOVrRn5Wpk3l6ifL71HZsMy3bDLU8Lkt3UQBNVFZhXWBcNyY/WB9CQGX+6aXtbFA9p/hjbTZL050UoeM30rz0UkzPmfiIupbb3KNPKPArQkU8gw6pF7AcRSLuU3HNqq8RDbrXDYSXY9vtoD3Oi18ijlagVANrhjpQ==-MIIETDCCAjSgAwIBAgIBDTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTIwMTAxOTA5MDU1M1oXDTIyMTAyMTA5MDU1M1owHzEdMBsGA1UEAwwUcHJvZDJ5LWZyb20tMjAyMDEwMTkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCUlaUFc1wf+CfY9wzFWEL2euKQ5nswqb57V8QZG7d7RoR6rwYUIXseTOAFq210oMEe++LCjzKDuqwDfsyhgDNTgZBPAaC4vUU2oy+XR+Fq8nBixWIsH668HeOnRK6RRhsr0rJzRB95aZ3EAPzBuQ2qPaNGm17pAX0Rd6MPRgjp75IWwI9eA6aMEdPQEVN7uyOtM5zSsjoj79Lbu1fjShOnQZuJcsV8tqnayeFkNzv2LTOlofU/Tbx502Ro073gGjoeRzNvrynAP03pL486P3KCAyiNPhDs2z8/COMrxRlZW5mfzo0xsK0dQGNH3UoG/9RVwHG4eS8LFpMTR9oetHZBAgMBAAGjgZkwgZYwCQYDVR0TBAIwADAdBgNVHQ4EFgQUJNoRIpb1hUHAk0foMSNM9MCEAv8wSAYDVR0jBEEwP4AUo562SGdCEjZBvW3gubSgUouX8bOhHKQaMBgxFjAUBgNVBAMMDUpldFByb2ZpbGUgQ0GCCQDSbLGDsoN54TATBgNVHSUEDDAKBggrBgEFBQcDATALBgNVHQ8EBAMCBaAwDQYJKoZIhvcNAQELBQADggIBAB2J1ysRudbkqmkUFK8xqhiZaYPd30TlmCmSAaGJ0eBpvkVeqA2jGYhAQRqFiAlFC63JKvWvRZO1iRuWCEfUMkdqQ9VQPXziE/BlsOIgrL6RlJfuFcEZ8TK3syIfIGQZNCxYhLLUuet2HE6LJYPQ5c0jH4kDooRpcVZ4rBxNwddpctUO2te9UU5/FjhioZQsPvd92qOTsV+8Cyl2fvNhNKD1Uu9ff5AkVIQn4JU23ozdB/R5oUlebwaTE6WZNBs+TA/qPj+5/we9NH71WRB0hqUoLI2AKKyiPw++FtN4Su1vsdDlrAzDj9ILjpjJKA1ImuVcG329/WTYIKysZ1CWK3zATg9BeCUPAV1pQy8ToXOq+RSYen6winZ2OO93eyHv2Iw5kbn1dqfBw1BuTE29V2FJKicJSu8iEOpfoafwJISXmz1wnnWL3V/0NxTulfWsXugOoLfv0ZIBP1xH9kmf22jjQ2JiHhQZP7ZDsreRrOeIQ/c4yR8IQvMLfC0WKQqrHu5ZzXTH4NO3CwGWSlTY74kE91zXB5mwWAx1jig+UXYc2w4RkVhy0//lOmVya/PEepuuTTI4+UJwC7qbVlh5zfhj8oTNUXgN0AOc+Q0/WFPl1aw5VV/VrO8FCoB15lFVlpKaQ1Yh+DVU8ke+rt9Th0BCHXe0uZOEmH0nOnH/0onD</span></span><br></pre></td></tr></table></figure><p>å…¶ä»–è½¯ä»¶ï¼š</p><p><a href="http://www.itmind.net/collect">http://www.itmind.net/collect</a></p>]]></content>
    
    
    <summary type="html">æœ¬æ–‡å°†é‡ç‚¹ä»‹ç»IDEAå…¨å®¶æ¡¶æ¿€æ´»æ–¹å¼å’Œç›¸å…³çš„å…¨å®¶æ¡¶æ¿€æ´»ç ï¼Œæœ¬ç³»åˆ—å…¨éƒ¨ä½¿ç”¨çš„æ˜¯2022.1æœˆä»½çš„æ¿€æ´»ç </summary>
    
    
    
    <category term="ç¼–ç¨‹å·¥å…·" scheme="https://www.blog.909111.xyz/categories/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="IDEA" scheme="https://www.blog.909111.xyz/tags/IDEA/"/>
    
  </entry>
  
  <entry>
    <title>Mybatisæ¡†æ¶å­¦ä¹ </title>
    <link href="https://www.blog.909111.xyz/posts/afe2faba.html"/>
    <id>https://www.blog.909111.xyz/posts/afe2faba.html</id>
    <published>2024-04-02T09:00:00.000Z</published>
    <updated>2024-04-02T09:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><p>æ¯”ä¼ ç»Ÿçš„æ–¹å¼æ›´åŠ æ–¹ä¾¿ï¼Œä½†æ˜¯æŠ€æœ¯æ²¡æœ‰é«˜ä½ä¹‹åˆ†;</p><p>mybatisæ˜¯ä¸€ä¸ªç‰ˆOrmçš„æ¡†æ¶ï¼Œä»–å†…éƒ¨å°è£…äº†JDBCï¼›</p><p>å¼€å‘æ—¶å€™åªéœ€è¦å…³æ³¨sqlè¯­å¥æœ¬èº«,ä¸éœ€è¦èŠ±è´¹ç²¾åŠ›å»åŠ è½½é©±åŠ¨ï¼Œåˆ›å»ºé“¾æ¥ï¼Œåˆ›å»ºstatementç­‰ç¹çè¿‡ç¨‹ã€‚</p><p><strong>ä¼˜ç‚¹</strong>ï¼š</p><ol><li>åŸºäºsqlç¼–ç¨‹ï¼Œçµæ´»ï¼Œä¸ä¼šå¯¹åº”ç”¨ç¨‹åºæˆ–è€…æ•°æ®åº“çš„ç°æœ‰è®¾è®¡é€ æˆä»»ä½•å½±å“ï¼ŒSQLå†™åœ¨xmlä¸­ã€‚è§£é™¤äº†ä»£ç å’Œsqlè¯­å¥çš„è€¦åˆåº¦ï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†ï¼Œæä¾›xmlæ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€sqlè¯­å¥ï¼Œå¯ä»¥é‡ç”¨é«˜ã€‚</li><li>ä¸jdbcæ¯”ï¼Œå‡å°‘äº†50%çš„ä»£ç é‡ï¼Œæ¶ˆé™¤äº†å¤§é‡çš„JDBCå¤§é‡æ²‰ä½™çš„ä»£ç ï¼Œä¸éœ€è¦æ‰‹åŠ¨å¼€å…³é“¾æ¥ã€‚</li><li>ä¸æ•°æ®åº“å…·æœ‰å¾ˆå¥½çš„å…¼å®¹æ€§</li><li>èƒ½å’Œspringå¾ˆå¥½çš„é›†æˆ</li><li>æä¾›æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒä¸æ•°æ®åº“çš„ormå­—æ®µå…³ç³»æ˜ å°„ï¼›æä¾›å¯¹è±¡å…³ç³»æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡å…³ç³»ç»„ä»¶ç»´æŠ¤ã€‚</li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li>æ³¨é‡äºsqlæœ¬èº«ï¼Œå½“å­æ®µå¤šï¼Œå…³è”è¡¨å¤šæ—¶ï¼Œå¯¹å¼€å‘äººå‘˜ç¼–å†™sqlè¯­å¥æœ‰ä¸€å®šåŠŸåº•ã€‚</li><li>sqlè¯­å¥ä¾èµ–äºæ•°æ®åº“ï¼Œå¯¼è‡´æ•°æ®åº“ç§»æ¤æ€§å·®ï¼Œä¸èƒ½éšæ„æ›´æ”¹æ•°æ®åº“ã€‚</li></ol><p>mybatisæ¡†æ¶é€‚åˆåœºæ™¯ï¼š</p><ol><li><p>é€‚åˆäºdaoå±‚</p><p>â€‹    å¦‚æœå®‰è£…æ ‡å‡†æ¥çš„è¯ é‚£ä¹ˆ </p><p>â€‹    bin  â€”&gt; binImpl   </p><pre><code> dao --&gt; daoImpl  mybatisä¸­å°†dao  æ”¹æˆ**mapper.java</code></pre></li></ol><ol><li>å¯¹æ€§èƒ½è¦æ±‚æ¯”è¾ƒé«˜çš„è¯ï¼Œæˆ–è€…éœ€æ±‚æ¯”è¾ƒå¤šä¸”æ”¹åŠ¨è¾ƒå¤šçš„æƒ…å†µä¹‹ä¸‹é€‚ç”¨mybatis</li></ol><h2 id="ç®€å•ä»‹ç»å®Œäº†ï¼Œå¼€å§‹é‡å¤´æˆ"><a href="#ç®€å•ä»‹ç»å®Œäº†ï¼Œå¼€å§‹é‡å¤´æˆ" class="headerlink" title="ç®€å•ä»‹ç»å®Œäº†ï¼Œå¼€å§‹é‡å¤´æˆ"></a>ç®€å•ä»‹ç»å®Œäº†ï¼Œå¼€å§‹é‡å¤´æˆ</h2><h3 id="ç¬¬ä¸€æ­¥ï¼Œå…ˆæ‹¿åˆ°æ•°æ®åº“ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªå®ä¾‹æ•°æ®åº“ï¼š"><a href="#ç¬¬ä¸€æ­¥ï¼Œå…ˆæ‹¿åˆ°æ•°æ®åº“ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªå®ä¾‹æ•°æ®åº“ï¼š" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼Œå…ˆæ‹¿åˆ°æ•°æ®åº“ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªå®ä¾‹æ•°æ®åº“ï¼š"></a>ç¬¬ä¸€æ­¥ï¼Œå…ˆæ‹¿åˆ°æ•°æ®åº“ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªå®ä¾‹æ•°æ®åº“ï¼š</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database if <span class="keyword">not</span> <span class="keyword">exists</span> MyBatis_stu <span class="keyword">default</span> <span class="type">character</span> <span class="keyword">set</span> utf8 <span class="keyword">collate</span> utf8_bin; </span><br><span class="line"></span><br><span class="line">use MyBatis_stu ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> classinfo(</span><br><span class="line">  cid <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">  cname <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span> comment <span class="string">&#x27;ç­çº§ç¼–å·&#x27;</span> </span><br><span class="line">)ENGINE<span class="operator">=</span>InnoDB auto_increment<span class="operator">=</span><span class="number">101</span> <span class="keyword">default</span> charset<span class="operator">=</span>utf8 <span class="keyword">collate</span><span class="operator">=</span>utf8_bin;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> stuinfo (</span><br><span class="line">   sid <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">   sname <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;å­¦ç”Ÿå§“å&#x27;</span>,</span><br><span class="line">   cid <span class="type">int</span> comment <span class="string">&#x27;æ‰€åœ¨ç­çº§ç¼–å·&#x27;</span>,</span><br><span class="line">   tel <span class="type">varchar</span>(<span class="number">15</span>) <span class="keyword">unique</span> comment <span class="string">&#x27;è”ç³»æ–¹å¼&#x27;</span>,</span><br><span class="line">   addr <span class="type">varchar</span>(<span class="number">100</span>) comment <span class="string">&#x27;å®¶åº­ä½å€&#x27;</span>,</span><br><span class="line">   <span class="keyword">constraint</span> FK_stuinfo_cid <span class="keyword">foreign</span> key(cid) <span class="keyword">references</span> classinfo(cid)</span><br><span class="line">)ENGINE<span class="operator">=</span>InnoDB auto_increment<span class="operator">=</span><span class="number">101</span> <span class="keyword">default</span> charset<span class="operator">=</span>utf8 <span class="keyword">collate</span><span class="operator">=</span>utf8_bin;</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ­¥ï¼Œæˆ‘è§‰å¾—ä¸è¦å¤šè¯´äº†ï¼Œæ¯•ç«Ÿä½ å­¦javaåˆ°ç°åœ¨ï¼Œè¿™ä¸€æ­¥è¿˜æ˜¯æ²¡çœ‹æ‡‚çš„è¯ï¼Œæˆ‘è§‰å¾—ä½ å¯ä»¥å‡†å¤‡è€ƒè™‘è€ƒè™‘å…¶ä»–è·¯äº†ã€‚</p><p>==ç¬¬äºŒæ­¥å‰å°æ¡ä»¶ï¼Œä½ è¦åˆ›å»ºå¥½ä¸€ä¸ªmavené¡¹ç›®ï¼Œå¹¶å¯¼å…¥ç›¸å…³ä¾èµ–ï¼Œåˆ«å‘Šè¯‰æˆ‘ä½ å¿˜è®°äº†mavenå·¥ç¨‹å¦‚ä½•åˆ›å»ºäº†ï¼Ÿ==</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xh<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Maven<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>Maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!--å¯¼å…¥mavené“¾æ¥ï¼Œè®©mavenå»ä¸‹è½½</span></span><br><span class="line"><span class="comment">   https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.28<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-slf4j-impl --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-slf4j-impl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.17.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¬¬äºŒæ­¥ï¼Œæ ¹æ®æˆ‘ä»¬çš„æ•°æ®åº“åˆ›å»ºBeanç±»ï¼Œä»€ä¹ˆï¼Ÿä½ å‘Šè¯‰æˆ‘ä½ ä¸çŸ¥é“ä»€ä¹ˆäº‹Beanç±»ï¼Ÿé¢ï¼Œä½ è¯¥æ¶è¡¥ä¸€ä¸‹javaäº†ã€‚"><a href="#ç¬¬äºŒæ­¥ï¼Œæ ¹æ®æˆ‘ä»¬çš„æ•°æ®åº“åˆ›å»ºBeanç±»ï¼Œä»€ä¹ˆï¼Ÿä½ å‘Šè¯‰æˆ‘ä½ ä¸çŸ¥é“ä»€ä¹ˆäº‹Beanç±»ï¼Ÿé¢ï¼Œä½ è¯¥æ¶è¡¥ä¸€ä¸‹javaäº†ã€‚" class="headerlink" title="ç¬¬äºŒæ­¥ï¼Œæ ¹æ®æˆ‘ä»¬çš„æ•°æ®åº“åˆ›å»ºBeanç±»ï¼Œä»€ä¹ˆï¼Ÿä½ å‘Šè¯‰æˆ‘ä½ ä¸çŸ¥é“ä»€ä¹ˆäº‹Beanç±»ï¼Ÿé¢ï¼Œä½ è¯¥æ¶è¡¥ä¸€ä¸‹javaäº†ã€‚"></a>ç¬¬äºŒæ­¥ï¼Œæ ¹æ®æˆ‘ä»¬çš„æ•°æ®åº“åˆ›å»ºBeanç±»ï¼Œä»€ä¹ˆï¼Ÿä½ å‘Šè¯‰æˆ‘ä½ ä¸çŸ¥é“ä»€ä¹ˆäº‹Beanç±»ï¼Ÿé¢ï¼Œä½ è¯¥æ¶è¡¥ä¸€ä¸‹javaäº†ã€‚</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassInfo</span> &#123;</span><br><span class="line"><span class="keyword">private</span> Integer cid;</span><br><span class="line"><span class="keyword">private</span> String cname;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Integer <span class="title function_">getCid</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> cid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCid</span><span class="params">(Integer cid)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.cid = cid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getCname</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> cname;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCname</span><span class="params">(String cname)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.cname = cname;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">final</span> <span class="type">int</span> <span class="variable">prime</span> <span class="operator">=</span> <span class="number">31</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">result = prime * result + ((cid == <span class="literal">null</span>) ? <span class="number">0</span> : cid.hashCode());</span><br><span class="line">result = prime * result + ((cname == <span class="literal">null</span>) ? <span class="number">0</span> : cname.hashCode());</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">this</span> == obj)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span> (obj == <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (getClass() != obj.getClass())</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="type">ClassInfo</span> <span class="variable">other</span> <span class="operator">=</span> (ClassInfo) obj;</span><br><span class="line"><span class="keyword">if</span> (cid == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (other.cid != <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!cid.equals(other.cid))</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (cname == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (other.cname != <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!cname.equals(other.cname))</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;ClassInfo [cid=&quot;</span> + cid + <span class="string">&quot;, cname=&quot;</span> + cname + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®°å¾—è¿™é‡Œæˆ‘çš„éœ€è¦åˆ›å»ºçš„æ„é€ æ–¹æ³•ï¼Œä½ å¯ä»¥é€‰æ‹©è·Ÿæˆ‘ä¹Ÿå¯ä»¥é€‰æ‹©ä¸è·Ÿ</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ClassInfo</span><span class="params">( String cname)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.cname = cname;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ClassInfo</span><span class="params">(Integer cid, String cname)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line"><span class="built_in">this</span>.cid = cid;</span><br><span class="line"><span class="built_in">this</span>.cname = cname;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ClassInfo</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>==æ³¨æ„ï¼Œè¿™ä¸ªç±»ï¼Œæˆ‘å®é™…ä¸Šåœ¨æœ¬ç¯‡æ²¡ç”¨ä¸Šï¼Œæˆ‘ä¼šåœ¨ä¸‹ç¯‡æ‰ç”¨åˆ°ï¼Œä½ å¯ä»¥è‡ªè¡Œé€‰æ‹©åˆ›å»ºæˆ–è€…ä¸åˆ›å»º==</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentInfo</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer sid;<span class="comment">//å­¦ç”Ÿid</span></span><br><span class="line"><span class="keyword">private</span> String sname;<span class="comment">//å­¦ç”Ÿå§“å</span></span><br><span class="line"><span class="keyword">private</span> Integer cid; <span class="comment">//å¤–é”®ç®¡ç†ï¼Œç±»id</span></span><br><span class="line"><span class="keyword">private</span> String tel; <span class="comment">//ç”µè¯å·ç </span></span><br><span class="line"><span class="keyword">private</span> String addr;<span class="comment">//åœ°å€</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Integer <span class="title function_">getSid</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> sid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSid</span><span class="params">(Integer sid)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.sid = sid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getSname</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> sname;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSname</span><span class="params">(String sname)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.sname = sname;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> Integer <span class="title function_">getCid</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> cid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCid</span><span class="params">(Integer cid)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.cid = cid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getTel</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> tel;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTel</span><span class="params">(String tel)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.tel = tel;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getAddr</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> addr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddr</span><span class="params">(String addr)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.addr = addr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">final</span> <span class="type">int</span> <span class="variable">prime</span> <span class="operator">=</span> <span class="number">31</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">result = prime * result + ((addr == <span class="literal">null</span>) ? <span class="number">0</span> : addr.hashCode());</span><br><span class="line">result = prime * result + ((cid == <span class="literal">null</span>) ? <span class="number">0</span> : cid.hashCode());</span><br><span class="line">result = prime * result + ((sid == <span class="literal">null</span>) ? <span class="number">0</span> : sid.hashCode());</span><br><span class="line">result = prime * result + ((sname == <span class="literal">null</span>) ? <span class="number">0</span> : sname.hashCode());</span><br><span class="line">result = prime * result + ((tel == <span class="literal">null</span>) ? <span class="number">0</span> : tel.hashCode());</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">this</span> == obj)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span> (obj == <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (getClass() != obj.getClass())</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="type">StudentInfo</span> <span class="variable">other</span> <span class="operator">=</span> (StudentInfo) obj;</span><br><span class="line"><span class="keyword">if</span> (addr == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (other.addr != <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!addr.equals(other.addr))</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (cid == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (other.cid != <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!cid.equals(other.cid))</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (sid == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (other.sid != <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!sid.equals(other.sid))</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (sname == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (other.sname != <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!sname.equals(other.sname))</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (tel == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (other.tel != <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!tel.equals(other.tel))</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;StudentInfo [sid=&quot;</span> + sid + <span class="string">&quot;, sname=&quot;</span> + sname + <span class="string">&quot;, cid=&quot;</span> + cid + <span class="string">&quot;, tel=&quot;</span> + tel + <span class="string">&quot;, addr=&quot;</span> + addr</span><br><span class="line">+ <span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">StudentInfo</span><span class="params">(Integer sid, String sname, Integer cid, String tel, String addr)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line"><span class="built_in">this</span>.sid = sid;</span><br><span class="line"><span class="built_in">this</span>.sname = sname;</span><br><span class="line"><span class="built_in">this</span>.cid = cid;</span><br><span class="line"><span class="built_in">this</span>.tel = tel;</span><br><span class="line"><span class="built_in">this</span>.addr = addr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">StudentInfo</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬ä¸‰æ­¥ï¼Œæˆ‘ä»¬è¦å‡†å¤‡æ•°æ®åº“é…ç½®æ–‡ä»¶"><a href="#ç¬¬ä¸‰æ­¥ï¼Œæˆ‘ä»¬è¦å‡†å¤‡æ•°æ®åº“é…ç½®æ–‡ä»¶" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼Œæˆ‘ä»¬è¦å‡†å¤‡æ•°æ®åº“é…ç½®æ–‡ä»¶"></a>ç¬¬ä¸‰æ­¥ï¼Œæˆ‘ä»¬è¦å‡†å¤‡æ•°æ®åº“é…ç½®æ–‡ä»¶</h3><p>è¿™ä¸ªè‡ªè¡Œç¡®å®šï¼Œè´¦å·å¯†ç è¯·ä½ æ›´æ”¹ä¸ºè‡ªå·±å®‰è£…æ•°æ®åº“çš„è´¦å·å¯†ç ï¼Œæˆ‘ç»™å‡ºæˆ‘çš„å®ä¾‹==db.properties==</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/mybatis_stu?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=GMT%2B8&amp;useOldAliasMetadataBehavior=true</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure><h3 id="ç¬¬å››æ­¥ï¼Œåˆ›å»ºmybatisé…ç½®æ–‡ä»¶"><a href="#ç¬¬å››æ­¥ï¼Œåˆ›å»ºmybatisé…ç½®æ–‡ä»¶" class="headerlink" title="ç¬¬å››æ­¥ï¼Œåˆ›å»ºmybatisé…ç½®æ–‡ä»¶"></a>ç¬¬å››æ­¥ï¼Œåˆ›å»ºmybatisé…ç½®æ–‡ä»¶</h3><p>æœ‰äº†ä¸Šè¾¹ä¸‰æ­¥çš„åŸºç¡€ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦é…ç½®<code>mybatis-config.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"> <span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span> </span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥é…ç½®æ–‡ä»¶ è¯·å¥½å¥½çš„çœ‹æˆ‘  æˆ‘æ˜¯db.properties --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®ç¯å¢ƒå˜é‡ development :å¼€å‘ç¯å¢ƒ work :å·¥ä½œç¯å¢ƒ --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- äº‹åŠ¡ç®¡ç† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ POOLED UNPOOLED --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- åŠ è½½mapperæŒ‡å‘ä½ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/ClassInfoMapper.xml&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/StudentInfoMapper.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œç¬¬å››æ­¥å°±å®Œæˆã€‚</p><h3 id="ç¬¬äº”æ­¥-é…ç½®æ˜ å°„"><a href="#ç¬¬äº”æ­¥-é…ç½®æ˜ å°„" class="headerlink" title="ç¬¬äº”æ­¥,é…ç½®æ˜ å°„"></a>ç¬¬äº”æ­¥,é…ç½®æ˜ å°„</h3><p>æˆ‘æƒ³è¯´çš„è¿™ä¸Šé¢çš„æ¯ä¸€æ­¥éƒ½å¾ˆé‡è¦ï¼Œä½†æ˜¯è¿™ä¸€æ­¥ä¹Ÿå¾ˆé‡è¦ï¼Œæˆ‘ä»¬å°†ç›¸å…³SQLè¯­å¥å…¨éƒ¨å†™åœ¨è¿™é‡Œï¼Œè¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥è¯´æ˜¯ç›´æ¥å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œ,æˆ‘çš„ç†è§£æ˜¯è¿™æ ·çš„ï¼Œä½†æ˜¯ä¸åŒçš„äººæœ‰ä¸åŒçš„ç†è§£ï¼Œæˆ‘ä¹Ÿä¸èƒ½å»æŠŠæˆ‘çš„æ€æƒ³å¼ºåŠ ç»™åˆ«äººï¼Œå¯¹å§ï¼Ÿ</p><p>==å¯¹äº†ï¼Œå¦‚æœä½ æ˜¯åˆå­¦è€…ï¼Œæˆ‘æ¨èä½ äº†è§£ä¸€ä¸‹æˆ‘åœ¨æœ¬é¡¹ç›®çš„æ³¨é‡Š==<br>==ClassInfoMapper.xml==</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"> <span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> </span></span><br><span class="line"><span class="meta">  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- namespace :å‘½åç©ºé—´ ï¼Œå°±æ˜¯ç”¨æ¥é¿å…å‘½åå†²çªçš„ï¼ŒåŒä¸€ä¸ªå‘½åç©ºé—´ä¸‹é¢éƒ½ä¸èƒ½å‡ºç°ç›¸åŒçš„id</span></span><br><span class="line"><span class="comment">æ—¶é—´ä¸Šè¿™ä¸ªå°±æ˜¯æŒ‡å‘ &quot;ClassInfo.findAll&quot; æµ‹è¯•ç±»çš„è¿™ä¸ªå±æ€§çš„ClassInfoä»£è¡¨å‘½åç©ºé—´ï¼ŒfindAllä»£è¡¨id</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;ClassInfo&quot;</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å†™insert delete update select è¯­å¥ æ¯ä¸€ä¸ªè¯­å¥éƒ½æœ‰ä¸€ä¸ªid,åˆ°æ—¶å€™é€šè¿‡å‘½åç©ºé—´.id æ¥è·å–å¯¹åº”çš„sqlè¯­å¥æ‰§è¡Œ </span></span><br><span class="line"><span class="comment">é€šè¿‡paramenterType å±æ€§æ¥æŒ‡å®šè¿™ä¸ªsqlæ‰§è¡Œè¯­å¥çš„å‚æ•° é€šè¿‡resultTypeå±æ€§æŒ‡å®šè¿™ä¸ªsqlè¯­å¥åè¿”å›å€¼çš„ç±»å‹ï¼Œæ˜¯æ¯æ¡ç»“æœå¯¹åº”çš„ç±»å‹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.xh.mybatis.bean.ClassInfo&quot;</span>&gt;</span></span><br><span class="line">select cid,cname from classinfo;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å‡è®¾æˆ‘ä»¬è¦æŸ¥è¯¢æŸå•ä¸€çš„å­—æ®µï¼Œæˆ‘ä»¬éœ€è¦çš„æ“ä½œæ˜¯å¦‚ä¸‹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;find&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.xh.mybatis.bean.ClassInfo&quot;</span>&gt;</span></span><br><span class="line">select cid,cname from classinfo</span><br><span class="line">where cname=#&#123;cname&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;add&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.xh.mybatis.bean.ClassInfo&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--#&#123;&#125; é‡‡ç”¨é¢„ç¼–è¯‘çš„æ–¹å¼ $&#123;&#125; é‡‡ç”¨å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹æ³• --&gt;</span></span><br><span class="line">insert into classinfo values(0,#&#123;cname&#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ¨¡ç³ŠæŸ¥è¯¢ vague &#x27;%$&#123;parameters&#125;%&#x27; %#&#123;parameters&#125;%æ­¤æ—¶è¿™ä¸ªè¯­å¥æ˜¯æœ‰é—®é¢˜çš„ï¼Œä¸èƒ½è¿™ä¹ˆå†™ åº”è¯¥æ˜¯ &#x27;%#&#123;parameters&#125;%&#x27; </span></span><br><span class="line"><span class="comment">_$&#123;parameters&#125;è¿™ç§æ¨¡ç³ŠæŸ¥è¯¢ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æ²¡æœ‰%é‚£ä¹ˆçµæ´»ï¼Œä¸è¿‡ä½ è§‰å¾—ä½ ä½¿ç”¨å“ªä¸ªèˆ’æœå°±ä½¿ç”¨å“ªä¸ª --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByVague&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">resultType</span>=<span class="string">&quot;com.xh.mybatis.bean.ClassInfo&quot;</span>&gt;</span></span><br><span class="line">select cid,cname from classinfo where cname like</span><br><span class="line">&#x27;_$&#123;parameters&#125;&#x27;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ›´æ–°è¡¨ä¸­çš„æ•°æ® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">parameterType</span>=<span class="string">&quot;com.xh.mybatis.bean.ClassInfo&quot;</span>&gt;</span></span><br><span class="line">update classinfo set cname = #&#123;cname&#125; where cid =</span><br><span class="line">#&#123;cid&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åˆ é™¤è¡¨ä¸­çš„æ•°æ® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;delete&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">parameterType</span>=<span class="string">&quot;com.xh.mybatis.bean.ClassInfo&quot;</span>&gt;</span></span><br><span class="line">delete from classinfo where cid = #&#123;cid&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦ä¸€ä¸ªæ–‡ä»¶StudentInfoMapper.xmlæˆ‘ä¸ä¼šåœ¨æœ¬ç¯‡ä½¿ç”¨ï¼Œæ•…è€Œæˆ‘ä¸åœ¨æœ¬ç¯‡å±•ç¤ºï¼Œå¦‚æœä½ æ„Ÿå…´è¶£çš„è¯ï¼Œè¯·æŸ¥çœ‹ä¸‹ç¯‡ã€‚</p><h3 id="ç¬¬å…­æ­¥ï¼Œæµ‹è¯•ç±»çš„ç¼–å†™"><a href="#ç¬¬å…­æ­¥ï¼Œæµ‹è¯•ç±»çš„ç¼–å†™" class="headerlink" title="ç¬¬å…­æ­¥ï¼Œæµ‹è¯•ç±»çš„ç¼–å†™"></a>ç¬¬å…­æ­¥ï¼Œæµ‹è¯•ç±»çš„ç¼–å†™</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xh.mybatis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xh.mybatis.bean.ClassInfo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * classinfoä¸­çš„æ‰€æœ‰çš„å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> (<span class="type">InputStream</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>)</span><br><span class="line">)&#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºsqlSessionå·¥å‚</span></span><br><span class="line"></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line">System.out.println(<span class="string">&quot;-----------&quot;</span>);</span><br><span class="line"><span class="comment">//ä»sqlsessionå·¥å‚ä¸­è·å–ä¸€ä¸ªsqlä¼šè¯</span></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡è¿™ä¸ªå›è¯æ‰§è¡Œä¸sqlè¯­å¥ </span></span><br><span class="line"><span class="comment">//å°†ä»è¡¨ä¸­æŸ¥è¯¢çš„å¤šæ¡æ•°æ®ä»¥ä½œä¸ºå¯¹è±¡çš„æ–¹å¼æ·»åŠ åˆ°listä¸­</span></span><br><span class="line">List&lt;ClassInfo&gt; cls = sqlSession.selectList(<span class="string">&quot;ClassInfo.findAll&quot;</span>);</span><br><span class="line"><span class="comment">//éå†listä¸­çš„æ‰€æœ‰çš„å€¼</span></span><br><span class="line">cls.forEach(System.out::println);</span><br><span class="line">sqlSession.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åœ¨classinfoè¡¨ä¸­æ·»åŠ å€¼ ï¼ŒéåŠ¨æ€æ·»åŠ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="keyword">try</span> (<span class="type">InputStream</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>))&#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºsqlSessionå·¥å‚</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line"></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡è¿™ä¸ªå›è¯æ‰§è¡Œä¸sqlè¯­å¥ï¼Œ      </span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿™é‡Œçš„new ClassInfoå¯¹è±¡æ˜¯ç”±äºæˆ‘ä»¬åˆ›å»ºçš„è¡¨æ˜¯ä¸»é”®å­˜åœ¨ä¸»é”®è‡ªå¢ï¼Œæ•…è€Œåœ¨æ„é€ æ–¹æ³•ä¸­ä¸éœ€è¦æ·»åŠ cid</span></span><br><span class="line"><span class="comment"> * æˆ‘ä»¬å¯ä»¥é€‰æ‹©å‡ ç§æ–¹å¼ï¼Œè¿™è¾¹æˆ‘ä»¬å¯¹æ„é€ æ–¹æ³•å¯ä»¥è¿›è¡Œå¤šç§æ„é€ ï¼Œè®©æ„é€ æ–¹æ³•å»é€‰æ‹©æ·»åŠ ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨å…¨éƒ¨æ„é€ </span></span><br><span class="line"><span class="comment"> * ä¸å¤Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦å¯¹æ„é€ æ–¹æ³•è¿›è¡Œç½®ç©ºå¤„ç†</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;ClassInfo.add&quot;</span>,<span class="keyword">new</span> <span class="title class_">ClassInfo</span>(<span class="string">&quot;ç›¸å…³&quot;</span>));</span><br><span class="line">System.out.println(result);</span><br><span class="line">sqlSession.commit();</span><br><span class="line">sqlSession.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ClassInfoè¡¨ä¸­</span></span><br><span class="line"><span class="comment"> * mybatisæŸ¥è¯¢æŸæ•°æ®åº“ä¸­æŸä¸ªå€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">InputStream</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºSqlSessionå·¥å‚</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line"></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹åˆ°å½“å‰æŸ¥åˆ°çš„å¯¹è±¡å¯ä»¥è¢«æŸ¥å‡ºæ¥</span></span><br><span class="line"><span class="comment">//ClassInfo obj = sqlSession.selectOne(&quot;ClassInfo.find&quot;,new ClassInfo(&quot;å››ç­&quot;));</span></span><br><span class="line"><span class="comment">//ClassInfo.findè¡¨ç¤ºè°ƒç”¨Mybatisä¸­çš„com.xh.bean.ClassInfoä¸‹çš„id=findçš„sqlè¯­å¥</span></span><br><span class="line"><span class="comment">//å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯MVCæ¶æ„è¿›è¡Œå¼€å‘ï¼Œè¿™ä¸ªè¯­å¥åº”è¯¥æ˜¯å±äºserviceImplå±‚è°ƒç”¨daoæ¥å£çš„æ—¶å€™</span></span><br><span class="line"><span class="type">ClassInfo</span> <span class="variable">obj</span> <span class="operator">=</span> sqlSession.selectOne(<span class="string">&quot;ClassInfo.find&quot;</span>,<span class="string">&quot;å››ç­&quot;</span>);</span><br><span class="line"><span class="comment">//æŸ¥æ‰¾å•ä¸ª</span></span><br><span class="line"><span class="comment">//int result = sqlSession.selectOne(&quot;Classinfo.find&quot;,&quot;å››ç­&quot;);</span></span><br><span class="line">System.out.println(obj);</span><br><span class="line">sqlSession.commit();</span><br><span class="line">sqlSession.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨æ¨¡ç³ŠæŸ¥è¯¢classInfoä¸­çš„æ•°æ®</span></span><br><span class="line"><span class="comment"> * æ²¡åšåŠ¨æ€æŸ¥è¯¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">InputStream</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºsqlSessionå·¥å‚</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line">System.out.println(<span class="string">&quot;-----------&quot;</span>);</span><br><span class="line"><span class="comment">//ä»sqlsessionå·¥å‚ä¸­è·å–ä¸€ä¸ªsqlä¼šè¯</span></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡è¿™ä¸ªå›è¯æ‰§è¡Œä¸sqlè¯­å¥ </span></span><br><span class="line"><span class="comment">//å°†ä»è¡¨ä¸­æŸ¥è¯¢çš„å¤šæ¡æ•°æ®ä»¥ä½œä¸ºå¯¹è±¡çš„æ–¹å¼æ·»åŠ åˆ°listä¸­</span></span><br><span class="line">List&lt;ClassInfo&gt; cls = sqlSession.selectList(<span class="string">&quot;ClassInfo.findByVague&quot;</span>,<span class="string">&quot;ç­&quot;</span>);</span><br><span class="line"><span class="comment">//éå†listä¸­çš„æ‰€æœ‰çš„å€¼</span></span><br><span class="line">cls.forEach(System.out::println);</span><br><span class="line">sqlSession.commit();</span><br><span class="line">sqlSession.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ›´æ–°è¡¨ä¸­æ•°æ®ï¼Œå…ˆä»ç®€å•çš„å¼€å§‹ï¼ŒClassInfoè¡¨ä¸­çš„æ•°æ®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test5</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">InputStream</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºsqlSessionå·¥å‚</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line">System.out.println(<span class="string">&quot;-----------&quot;</span>);</span><br><span class="line"><span class="comment">//ä»sqlsessionå·¥å‚ä¸­è·å–ä¸€ä¸ªsqlä¼šè¯</span></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡è¿™ä¸ªå›è¯æ‰§è¡Œä¸sqlè¯­å¥ </span></span><br><span class="line"><span class="comment">//å°†ä»è¡¨ä¸­æŸ¥è¯¢çš„å¤šæ¡æ•°æ®ä»¥ä½œä¸ºå¯¹è±¡çš„æ–¹å¼æ·»åŠ åˆ°listä¸­</span></span><br><span class="line"><span class="type">ClassInfo</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassInfo</span>();</span><br><span class="line"></span><br><span class="line">obj.setCid(<span class="number">1</span>);</span><br><span class="line">obj.setCname(<span class="string">&quot;ä¸€ç­&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> sqlSession.update(<span class="string">&quot;ClassInfo.update&quot;</span>,obj);</span><br><span class="line"><span class="keyword">if</span>(result &gt; <span class="number">0</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ›´æ–°æˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ›´æ–°å¤±è´¥&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">List&lt;ClassInfo&gt; cls = sqlSession.selectList(<span class="string">&quot;ClassInfo.findAll&quot;</span>);</span><br><span class="line"><span class="comment">//éå†listä¸­çš„æ‰€æœ‰çš„å€¼</span></span><br><span class="line">cls.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨æ„åœ¨å¼€å¯äº‹åŠ¡çš„æƒ…å†µä¸‹ï¼Œä½ ä¸æäº¤æ•°æ®åº“æ˜¯æŸ¥ä¸åˆ°å€¼çš„</span></span><br><span class="line">sqlSession.commit();</span><br><span class="line"></span><br><span class="line">sqlSession.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ é™¤</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test6</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºsqlSessionå·¥å‚</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»sqlsessionå·¥å‚ä¸­è·å–ä¸€ä¸ªsqlä¼šè¯</span></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line">List&lt;ClassInfo&gt; cls = sqlSession.selectList(<span class="string">&quot;ClassInfo.findAll&quot;</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;åˆ é™¤ä¹‹å‰çš„æ•°æ®&quot;</span>);</span><br><span class="line">cls.forEach(System.out::println);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * ClassInfo obj = new ClassInfo(); obj.setCid(7);</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> sqlSession.delete(<span class="string">&quot;ClassInfo.delete&quot;</span>,<span class="number">8</span>);</span><br><span class="line"><span class="keyword">if</span>(result &gt; <span class="number">0</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;åˆ é™¤å¤±è´¥&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ³¨æ„åœ¨å¼€å¯äº‹åŠ¡çš„æƒ…å†µä¸‹ï¼Œä½ ä¸æäº¤æ•°æ®åº“æ˜¯æŸ¥ä¸åˆ°å€¼çš„</span></span><br><span class="line">sqlSession.commit();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;åˆ é™¤ä¹‹åçš„æ•°æ®&quot;</span>);</span><br><span class="line">List&lt;ClassInfo&gt; cls1 = sqlSession.selectList(<span class="string">&quot;ClassInfo.findAll&quot;</span>);</span><br><span class="line"><span class="comment">//éå†listä¸­çš„æ‰€æœ‰çš„å€¼</span></span><br><span class="line">cls1.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">sqlSession.close();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡³æ­¤ï¼Œä¸Šè¾¹å¯¹mybatisçš„ç®€å•æ“ä½œåˆ°æ­¤ç»“æŸ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="mybatis-æ³¨æ„äº‹é¡¹ï¼š"><a href="#mybatis-æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="mybatis æ³¨æ„äº‹é¡¹ï¼š"></a>mybatis æ³¨æ„äº‹é¡¹ï¼š</h3><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">### #&#123;&#125; å’Œ $&#123;&#125; çš„åŒºåˆ«</span><br></pre></td></tr></table></figure><p> æ³¨æ„ï¼š#{}æ˜¯é¢„ç¼–è¯‘å¤„ç†ï¼Œ${}æ˜¯å­—ç¬¦æ›¿æ¢</p><p>æ³¨æ„ï¼š#{}ä¼šåœ¨mybatisè¿è¡Œçš„è¿‡ç¨‹ä¸­æ›¿æ¢ä¸ºï¼Ÿï¼Œè°ƒç”¨PreparedStatementçš„setæ–¹æ³•æ¥èµ‹å€¼ã€‚</p><p>mybatis åœ¨å¤„ç†$()ä¼šå°†ä»–æ›¿æ¢ä¸ºå˜é‡çš„å€¼ã€‚</p><p>å¤šä½¿ç”¨#{}å¯ä»¥é˜²æ­¢sqlæ³¨å…¥ï¼Œæé«˜ç³»ç»Ÿå®‰å…¨æ€§ã€‚</p><p>mybatis æ¨èè¿˜æ˜¯ä½¿ç”¨åˆ†é¡µæ’ä»¶</p><p>ä¸€èˆ¬mybatisæ˜¯ä½¿ç”¨RowBoundså¯¹è±¡è¿›è¡Œåˆ†é¡µï¼Œä»–æ˜¯é’ˆå¯¹ResultSetç»“æœé›†æ‰§è¡Œçš„å†…å­˜åˆ†é¡µï¼Œè€Œéç‰©ç†åˆ†é¡µï¼Œå¯ä»¥åœ¨sqlå†…ç›´æ¥ä¹¦å†™å¸¦æœ‰ç‰©ç†åˆ†é¡µçš„å‚æ•°æ¥å®Œæˆç‰©ç†åˆ†é¡µåŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åˆ†é¡µæ’ä»¶æ¥å®Œæˆç‰©ç†åˆ†é¡µã€‚</p><p>åˆ†é¡µæ’ä»¶çš„åŸç†æ˜¯ï¼Œåœ¨mybatisæä¾›çš„æ¥å£ï¼Œå®ç°è‡ªå®šä¹‰æ’ä»¶ï¼Œåœ¨å°†æ’ä»¶çš„æ‹¦æˆªæ–¹æ³•å†…æ‹¦æˆªæ‰§è¡Œçš„sqlï¼Œç„¶åé‡å†™sqlï¼Œæ ¹æ®dialectæ–¹è¨€ï¼Œæ·»åŠ å¯¹åº”çš„ç‰©ç†åˆ†é¡µè¯­å¥å’Œç‰©ç†åˆ†é¡µæŸ¥è¯¢ã€‚</p><p>å¦‚æœä½¿ç”¨mysqlçš„limitçš„è¯ä¼šå¯èƒ½ä¼šå‡ºç°æ•°æ®ä¸¢å¤±ï¼Œç´¢å¼•å¤±æ•ˆç­‰é”™è¯¯ã€‚</p><h2 id="åŠ¨æ€æŸ¥è¯¢å’ŒåŠ¨æ€æ·»åŠ ä»¥åŠåŠ¨æ€ä¿®æ”¹"><a href="#åŠ¨æ€æŸ¥è¯¢å’ŒåŠ¨æ€æ·»åŠ ä»¥åŠåŠ¨æ€ä¿®æ”¹" class="headerlink" title="åŠ¨æ€æŸ¥è¯¢å’ŒåŠ¨æ€æ·»åŠ ä»¥åŠåŠ¨æ€ä¿®æ”¹"></a>åŠ¨æ€æŸ¥è¯¢å’ŒåŠ¨æ€æ·»åŠ ä»¥åŠåŠ¨æ€ä¿®æ”¹</h2><p>æ¥ä¸Šä¸€èŠ‚ï¼Œæ³¨æ„æœ¬åšå®¢æ‰€æœ‰çš„ä»£ç éƒ½æ˜¯å»ºç«‹åœ¨ä¸Šä¸€è®²ä¹‹ä¸Šçš„ï¼Œå¦‚æœä½ æ²¡æœ‰ä¸Šä¸€è®²çš„é…ç½®ï¼Œè¿™ä¸€è®²ä»£ç æˆ‘æ¨èä½ è¿˜æ˜¯çœ‹çœ‹ï¼Œç›´æ¥æ­å»ºç¯å¢ƒéœ€è¦ä½ æœ‰ä¸Šä¸€è®²é…ç½®å®Œæ¯•ï¼Œå¦åˆ™ä¼šå‡ºç°è®¸å¤šé”™è¯¯ï¼Œå¦å¤–æœ¬ç¯‡å¹¶æ²¡æœ‰å®ŒæˆMybatisåŠ¨æ€SQLæ‹¼æ¥çš„å…¨éƒ¨ï¼Œåªæ˜¯ä¸¾ä¾‹ä¸€éƒ¨åˆ†è¿›è¡Œè¯´æ˜ï¼Œæˆ‘ä»¬åœ¨å·¥ä½œä¸Šæˆ–è€…å®é™…ç”Ÿæ´»ä¸­ä½¿ç”¨Mybatisï¼Œä¹Ÿæ˜¯ç»™æˆ‘è‡ªå·±è®°å½•ç¬”è®°ï¼Œå°†æ¥å¯ä»¥è¿›è¡Œé‡æ„ï¼Œç„¶åæ…¢æ…¢å®Œå–„ã€‚</p><p>åºŸè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬å¼€å§‹ï¼š</p><p>ç¬¬ä¸€æ­¥ï¼Œå®Œå–„ä¸Šä¸€ç¯‡æ²¡å®Œå–„çš„ä»£ç ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentInfo</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer sid;<span class="comment">//å­¦ç”Ÿid</span></span><br><span class="line"><span class="keyword">private</span> String sname;<span class="comment">//å­¦ç”Ÿå§“å</span></span><br><span class="line"><span class="keyword">private</span> Integer cid; <span class="comment">//å¤–é”®ç®¡ç†ï¼Œç±»id</span></span><br><span class="line"><span class="keyword">private</span> String tel; <span class="comment">//ç”µè¯å·ç </span></span><br><span class="line"><span class="keyword">private</span> String addr;<span class="comment">//åœ°å€</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ·»åŠ ä¸€ä¸ªå¤šå€¼ä¼ å…¥çš„æ–¹æ³• åœ¨å®ä½“ç±»ä¸­åˆ›å»ºä¸€ä¸ªListç”¨äºå­˜æ”¾è¦åˆ é™¤çš„sid</span></span><br><span class="line"><span class="keyword">private</span> List&lt;Integer&gt; sidList;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">getSidList</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> sidList;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSidList</span><span class="params">(List&lt;Integer&gt; sidList)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.sidList = sidList;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">StudentInfo</span><span class="params">(List&lt;Integer&gt; sidList)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line"><span class="built_in">this</span>.sidList = sidList;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Integer <span class="title function_">getSid</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> sid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSid</span><span class="params">(Integer sid)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.sid = sid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getSname</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> sname;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSname</span><span class="params">(String sname)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.sname = sname;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> Integer <span class="title function_">getCid</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> cid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCid</span><span class="params">(Integer cid)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.cid = cid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getTel</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> tel;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTel</span><span class="params">(String tel)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.tel = tel;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getAddr</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> addr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddr</span><span class="params">(String addr)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.addr = addr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">final</span> <span class="type">int</span> <span class="variable">prime</span> <span class="operator">=</span> <span class="number">31</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">result = prime * result + ((addr == <span class="literal">null</span>) ? <span class="number">0</span> : addr.hashCode());</span><br><span class="line">result = prime * result + ((cid == <span class="literal">null</span>) ? <span class="number">0</span> : cid.hashCode());</span><br><span class="line">result = prime * result + ((sid == <span class="literal">null</span>) ? <span class="number">0</span> : sid.hashCode());</span><br><span class="line">result = prime * result + ((sname == <span class="literal">null</span>) ? <span class="number">0</span> : sname.hashCode());</span><br><span class="line">result = prime * result + ((tel == <span class="literal">null</span>) ? <span class="number">0</span> : tel.hashCode());</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">this</span> == obj)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span> (obj == <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (getClass() != obj.getClass())</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="type">StudentInfo</span> <span class="variable">other</span> <span class="operator">=</span> (StudentInfo) obj;</span><br><span class="line"><span class="keyword">if</span> (addr == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (other.addr != <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!addr.equals(other.addr))</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (cid == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (other.cid != <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!cid.equals(other.cid))</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (sid == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (other.sid != <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!sid.equals(other.sid))</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (sname == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (other.sname != <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!sname.equals(other.sname))</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (tel == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (other.tel != <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!tel.equals(other.tel))</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;StudentInfo [sid=&quot;</span> + sid + <span class="string">&quot;, sname=&quot;</span> + sname + <span class="string">&quot;, cid=&quot;</span> + cid + <span class="string">&quot;, tel=&quot;</span> + tel + <span class="string">&quot;, addr=&quot;</span> + addr</span><br><span class="line">+ <span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">StudentInfo</span><span class="params">(Integer sid, String sname, Integer cid, String tel, String addr)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line"><span class="built_in">this</span>.sid = sid;</span><br><span class="line"><span class="built_in">this</span>.sname = sname;</span><br><span class="line"><span class="built_in">this</span>.cid = cid;</span><br><span class="line"><span class="built_in">this</span>.tel = tel;</span><br><span class="line"><span class="built_in">this</span>.addr = addr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">StudentInfo</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ä½“beanç±»ï¼Œä½œä¸ºæˆ‘ä»¬mybatisçš„æ˜ å°„æ–‡ä»¶ï¼Œ==æ³¨æ„ï¼Œæœ¬ç¯‡å’Œä¸Šç¯‡éƒ½æ˜¯ç®€å•çš„è¿›è¡ŒMybatisçš„ç†è§£ï¼Œåœ¨æ­£å¼ç”Ÿäº§ç¯å¢ƒä¼šæœ‰æ‰€å·®åˆ«==ï¼Œæœ¬æ–‡æ¡£å¹¶æ²¡æœ‰ååˆ†è§„èŒƒçš„æŒ‰ç…§MVCæ¨¡å¼è¿›è¡Œï¼Œæ•…è€Œè¯·å„ä½ä½“è°…ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"> <span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> </span></span><br><span class="line"><span class="meta">  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- namespace :å‘½åç©ºé—´ ï¼Œå°±æ˜¯ç”¨æ¥é¿å…å‘½åå†²çªçš„ï¼ŒåŒä¸€ä¸ªå‘½åç©ºé—´ä¸‹é¢éƒ½ä¸èƒ½å‡ºç°ç›¸åŒçš„id --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;StudentInfo&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- mybatis-config.xml ä¸­ &lt;typeAlias type=&quot;com.someapp.model.User&quot; alias=&quot;User&quot;/&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å†™insert delete update select è¯­å¥ æ¯ä¸€ä¸ªè¯­å¥éƒ½æœ‰ä¸€ä¸ªid,åˆ°æ—¶å€™é€šè¿‡å‘½åç©ºé—´.id æ¥è·å–å¯¹åº”çš„sqlè¯­å¥æ‰§è¡Œ </span></span><br><span class="line"><span class="comment">é€šè¿‡paramenterType å±æ€§æ¥æŒ‡å®šè¿™ä¸ªsqlæ‰§è¡Œè¯­å¥çš„å‚æ•° é€šè¿‡resultTypeå±æ€§æŒ‡å®šè¿™ä¸ªsqlè¯­å¥åè¿”å›å€¼çš„ç±»å‹ï¼Œæ˜¯æ¯æ¡ç»“æœå¯¹åº”çš„ç±»å‹ --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">resultType</span>=<span class="string">&quot;com.xh.mybatis.bean.StudentInfo&quot;</span>&gt;</span></span><br><span class="line">select sid,sname,cname,tel,addr from classinfo c, stuinfo s</span><br><span class="line">where c.cid = s.cid order by sid asc;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è®©æˆ‘ä»¬å¯¹å…·ä½“å¤šä¸ªå€¼è¿›è¡ŒæŸ¥æ‰¾ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByValue&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">resultType</span>=<span class="string">&quot;com.xh.mybatis.bean.StudentInfo&quot;</span>&gt;</span></span><br><span class="line">select sid,sname,tel,addr from stuinfo</span><br><span class="line"><span class="comment">&lt;!-- åŠ¨æ€SQLä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæŠŠæœ€è‰°ç®€å•çš„sqlè¯­å¥æ·»åŠ ä¸Šæ¥ æ³¨æ„ï¼Œåœ¨æ¡ä»¶è¯­å¥ä¸Šï¼Œæˆ‘ä»¬å¿…é¡»æ¥ä¸€ä¸ªä¸€å®šæˆç«‹çš„æ¡ä»¶ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹æ•°æ®è¿›è¡Œè¯»å–å’Œåˆ¤æ–­ï¼Œæˆ–è€…ä½ ç¡®å®šäº†ç”¨æˆ·ä¸€å®šä¼šè¾“å…¥å€¼ï¼Œå¦åˆ™ä¸è¦è½»æ˜“åœ¨è¿™é‡Œç•™å‘ --&gt;</span></span><br><span class="line"></span><br><span class="line">where sid != 0</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sname != null&quot;</span>&gt;</span></span><br><span class="line">and sname = #&#123;sname&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ³¨æ„ï¼Œæˆ‘è¿™è¾¹ç¼ºä¸€ç‚¹ä¸œè¥¿ï¼Œå°±æ˜¯åˆ¤æ–­çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæœ‰ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦å­˜åœ¨,çš„è¯­å¥ï¼Œå¦‚æœå­˜åœ¨å¤šä½™çš„æˆ‘è¿˜è¦å°†å…¶åˆ†ç¦»å‡ºæ¥ æ³¨æ„æ­£ç¡®çš„sqlè¯­å¥ä¹¦å†™ </span></span><br><span class="line"><span class="comment">and tel = #&#123;tel&#125; , addr = #&#123;addr&#125;æ˜¯é”™è¯¯çš„å†™æ³• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;tel != null and addr != null&quot;</span>&gt;</span></span><br><span class="line">and tel = #&#123;tel&#125; and addr = #&#123;addr&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">order by sid asc;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æˆ‘è§‰å¾—åŠ¨æ€æ·»åŠ å…¶å®æ²¡å¿…è¦ï¼Œè™½ç„¶æˆ‘å¯»æ€ä¹Ÿæœ‰ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯è§‰å¾—ï¼ŒåŠ¨æ€æ·»åŠ çœŸçš„æ²¡å¿…è¦ï¼Œæ¯•ç«Ÿè¿™ç‰¹ä¹ˆæœ‰ç‚¹åäººç±»ï¼Œæˆ‘å¯»æ€ï¼Œè®©ä½ æ·»åŠ æ•°æ®ï¼Œä½ ç‰¹ä¹ˆ è€è€å®å®ç»™æˆ‘æŠŠæ•°æ®å¡«å†™å®Œæ¯•ä¸å°±è¡Œäº†å—ï¼Ÿ </span></span><br><span class="line"><span class="comment">è¿˜æœ‰å°±æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸šåŠ¡å±‚ç›´æ¥å¤„ç†ï¼Œåœ¨å‰ç«¯ä¼ æ•°æ®è¿‡æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ¤æ–­ç„¶åå°†æ²¡ä¼ çš„å€¼ç½®ç©ºå¤„ç† å¦‚æœä½ éè¦åšï¼Œæˆ‘ç»™ä½ è¿™ä¸ªå‚è€ƒä¸€ä¸‹ æ•°æ®åº“æ”¯æŒå¤šè¡Œæ’å…¥ </span></span><br><span class="line"><span class="comment">&lt;insert id=&quot;insertTable&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot; parameterType </span></span><br><span class="line"><span class="comment">= &quot;com.***&quot;&gt; </span></span><br><span class="line"><span class="comment">insert into table (username, password, email, bio) values </span></span><br><span class="line"><span class="comment">&lt;foreach item=&quot;item&quot; collection=&quot;list&quot; separator=&quot;,&quot;&gt;</span></span><br><span class="line"><span class="comment"> (#&#123;item.username&#125;, #&#123;item.password&#125;, </span></span><br><span class="line"><span class="comment">#&#123;item.email&#125;, #&#123;item.bio&#125;) </span></span><br><span class="line"><span class="comment">&lt;/foreach&gt; </span></span><br><span class="line"><span class="comment">&lt;/insert&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;add&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.xh.mybatis.bean.StudentInfo&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--#&#123;&#125; é‡‡ç”¨é¢„ç¼–è¯‘çš„æ–¹å¼ $&#123;&#125; é‡‡ç”¨å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹æ³• --&gt;</span></span><br><span class="line">insert into stuinfo values(0,#&#123;sname&#125;,#&#123;cid&#125;,#&#123;tel&#125;,#&#123;addr&#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ¥ä¸‹æ¥å°±æ˜¯æˆ‘ä»¬çš„åˆ é™¤æ“ä½œäº†ï¼Œè¿™ä¸ªå°±å¾ˆç®€å•äº†ï¼ŒåŠ¨æ€åˆ é™¤ï¼Ÿ å¾—äº†å§ï¼Œæˆ‘è¿™è¾¹ç»™ä¸ªæ€è·¯ï¼Œä½†æ˜¯æˆ‘ä¸åšï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡ä¼ å¤šä¸ªå€¼ï¼Œç„¶ååˆ é™¤å¤šä¸ªå€¼ï¼Œ</span></span><br><span class="line"><span class="comment">1 delete from table where sid in( $&#123;sid&#125; ) è¿™ä¹Ÿæ˜¯ä¸€ç§æ–¹å¼</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> &lt;select id=&quot;deleteByIds&quot; parameterType=&quot;Integer&quot;&gt; </span></span><br><span class="line"><span class="comment">delete from accounts where id in </span></span><br><span class="line"><span class="comment">&lt;foreach collection=&quot;ids&quot; open=&quot;(&quot; close=&quot;)&quot; </span></span><br><span class="line"><span class="comment">separator=&quot;,&quot; item=&quot;id&quot;&gt; #&#123;id&#125; </span></span><br><span class="line"><span class="comment">&lt;/foreach&gt; </span></span><br><span class="line"><span class="comment">&lt;/select&gt; </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&lt;delete id=&quot;deleteValue&quot; </span></span><br><span class="line"><span class="comment">parameterType=&quot;com.xh.mybatis.bean.StudentInfo&quot;&gt; delete from stuinfo where </span></span><br><span class="line"><span class="comment">sid != 0 and sid = #&#123;sid&#125;; </span></span><br><span class="line"><span class="comment">&lt;/delete&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteValue&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">parameterType</span>=<span class="string">&quot;com.xh.mybatis.bean.StudentInfo&quot;</span>&gt;</span></span><br><span class="line">delete from stuinfo where cid != 0 and sid = #&#123;sid&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é‡å¤´æˆæ¥äº†ï¼Œæˆ‘ä»¬æœ‰äº›æ—¶å€™ä¼šæ¶‰åŠåˆ°æ”¹æ“ä½œï¼Œä½†æ˜¯æ”¹æ“ä½œåªå¯¹ç”¨æˆ·çš„æŸä¸€ä¸ªæ•°æ®è¿›è¡Œæ›´æ”¹ ä¹Ÿå¯èƒ½å¯¹å¤šä¸ªæ•°æ®è¿›è¡Œæ›´æ”¹ï¼Œæ•…è€Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­ç”¨æˆ·ä¼ è¿‡æ¥çš„æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™å°±å¾ˆé‡è¦äº† --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">parameterType</span>=<span class="string">&quot;com.xh.mybatis.bean.StudentInfo&quot;</span>&gt;</span></span><br><span class="line">update stuinfo set</span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sname != null&quot;</span>&gt;</span></span><br><span class="line">sname = #&#123;sname&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;cid != null&quot;</span>&gt;</span></span><br><span class="line">, cid = #&#123;cid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;tel != null&quot;</span>&gt;</span></span><br><span class="line">, tel = #&#123;tel&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;addr != null&quot;</span>&gt;</span></span><br><span class="line">, addr = #&#123;addr&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">where sid = #&#123;sid&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line">     </span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬ä¸»è¦ä½¿ç”¨ifè¯­å¥æ¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ä¼ å€¼ï¼Œå¦‚æœä¼ å€¼ï¼Œæˆ‘ä»¬é‡‡ç”¨mybatisåˆ¤æ–­è¿›è¡ŒåŠ¨æ€æ‹¼æ¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StuTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰æ•°æ®ï¼ŒstudentInfoï¼Œå…ˆä»ä¸€ä¸ªç®€å•çš„è¡¨å¼€å§‹å§ï¼Œç„¶åé€å±‚åŠ éš¾</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="comment">//åŠ è½½mybatis-config.xmlé…ç½®æ–‡ä»¶</span></span><br><span class="line">   <span class="type">InputStream</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºsqlSessionå·¥å‚</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">List&lt;StudentInfo&gt; cls = sqlSession.selectList(<span class="string">&quot;StudentInfo.findAll&quot;</span>);</span><br><span class="line"><span class="comment">//éå†listä¸­çš„æ‰€æœ‰çš„å€¼</span></span><br><span class="line">cls.forEach(System.out::println);</span><br><span class="line">sqlSession.commit();</span><br><span class="line">sqlSession.close();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¤šå€¼æŸ¥è¯¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="comment">//åŠ è½½mybatis-config.xmlé…ç½®æ–‡ä»¶</span></span><br><span class="line">   <span class="type">InputStream</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºsqlSessionå·¥å‚</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"><span class="comment">//å¤šå€¼æŸ¥è¯¢ï¼Œä¸ºäº†é¿å…æˆ‘ä½¿ç”¨new StudentInfo(****)</span></span><br><span class="line"><span class="type">StudentInfo</span> <span class="variable">stu</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StudentInfo</span>();</span><br><span class="line"><span class="comment">//æ³¨æ„ï¼Œè¿™é‡Œæˆ‘å°±å¼€å§‹ä½¿ç”¨åŠ¨æ€sqlè¿›è¡Œåˆ¤æ–­äº†</span></span><br><span class="line">stu.setSname(<span class="string">&quot;ç‹è€äº”&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//stu.setTel(&quot;15973121101&quot;);</span></span><br><span class="line"><span class="comment">//stu.setAddr(&quot;æ¹–å—è¡¡é˜³&quot;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ‘ä»¬æŸ¥è¯¢çš„æ—¶å€™å¯ä»¥æ˜¯ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªå€¼ï¼Œæ•…è€Œæˆ‘ä»¬é€šå¸¸å°†æŸ¥åˆ°çš„å€¼å­˜åˆ°é›†åˆä¸­ï¼Œè‡³äºæ˜¯å“ªç§é›†åˆï¼Œä½ é€‰æ‹©</span></span><br><span class="line">List&lt;StudentInfo&gt; cls = sqlSession.selectList(<span class="string">&quot;StudentInfo.findByValue&quot;</span>, stu);</span><br><span class="line"></span><br><span class="line"><span class="comment">//éå†listä¸­çš„æ‰€æœ‰çš„å€¼</span></span><br><span class="line">cls.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">sqlSession.commit();</span><br><span class="line">sqlSession.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¤šå€¼æ·»åŠ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="comment">//åŠ è½½mybatis-config.xmlé…ç½®æ–‡ä»¶</span></span><br><span class="line">   <span class="type">InputStream</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºsqlSessionå·¥å‚</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"><span class="comment">//å…ˆæŸ¥è¯¢æ‰€æœ‰æ•°æ®</span></span><br><span class="line">List&lt;StudentInfo&gt; cls = sqlSession.selectList(<span class="string">&quot;StudentInfo.findAll&quot;</span>);</span><br><span class="line">cls.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"><span class="type">StudentInfo</span> <span class="variable">stu</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StudentInfo</span>();</span><br><span class="line"></span><br><span class="line">stu.setSname(<span class="string">&quot;ç‹è€äº”&quot;</span>);</span><br><span class="line">stu.setCid(<span class="number">1</span>);</span><br><span class="line">stu.setTel(<span class="string">&quot;16682187574&quot;</span>);</span><br><span class="line">stu.setAddr(<span class="string">&quot;æ¹–å—é•¿æ²™&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;StudentInfo.add&quot;</span>,stu);</span><br><span class="line"><span class="keyword">if</span>(result &gt; <span class="number">0</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ·»åŠ æˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ·»åŠ å¤±è´¥&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//éå†listä¸­çš„æ‰€æœ‰çš„å€¼</span></span><br><span class="line">sqlSession.commit();</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥åæäº¤æˆåŠŸä¹‹åå†æ¬¡æŸ¥è¯¢</span></span><br><span class="line">List&lt;StudentInfo&gt; cls1 = sqlSession.selectList(<span class="string">&quot;StudentInfo.findAll&quot;</span>);</span><br><span class="line">cls1.forEach(System.out::println);</span><br><span class="line">sqlSession.close();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="comment">//åŠ è½½mybatis-config.xmlé…ç½®æ–‡ä»¶</span></span><br><span class="line">   <span class="type">InputStream</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºsqlSessionå·¥å‚</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"><span class="comment">//åœ¨åˆ é™¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæŸ¥è¯¢è¡¨ä¸­æ•°æ®</span></span><br><span class="line">List&lt;StudentInfo&gt; cls = sqlSession.selectList(<span class="string">&quot;StudentInfo.findAll&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//éå†listä¸­çš„æ‰€æœ‰çš„å€¼</span></span><br><span class="line">cls.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"><span class="type">StudentInfo</span> <span class="variable">stu</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StudentInfo</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//System.out.println(sidList);</span></span><br><span class="line"><span class="comment">//System.out.println(stu.getSidList());</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½ è¦åˆ é™¤çš„idå·</span></span><br><span class="line">stu.setSid(<span class="number">8</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> sqlSession.delete(<span class="string">&quot;StudentInfo.deleteValue&quot;</span>,stu);</span><br><span class="line"><span class="keyword">if</span>(result &gt; <span class="number">0</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;åˆ é™¤å¤±è´¥&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sqlSession.commit();</span><br><span class="line"></span><br><span class="line">List&lt;StudentInfo&gt; cls1 = sqlSession.selectList(<span class="string">&quot;StudentInfo.findAll&quot;</span>);</span><br><span class="line"><span class="comment">//éå†listä¸­çš„æ‰€æœ‰çš„å€¼</span></span><br><span class="line">cls1.forEach(System.out::println);</span><br><span class="line">sqlSession.close();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test5</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="comment">//åŠ è½½mybatis-config.xmlé…ç½®æ–‡ä»¶</span></span><br><span class="line">   <span class="type">InputStream</span> <span class="variable">reader</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºsqlSessionå·¥å‚</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"><span class="comment">//å¤šå€¼æŸ¥è¯¢ï¼Œä¸ºäº†é¿å…æˆ‘ä½¿ç”¨new StudentInfo(****)</span></span><br><span class="line"><span class="type">StudentInfo</span> <span class="variable">stu</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StudentInfo</span>();</span><br><span class="line"><span class="comment">//æ³¨æ„ï¼Œè¿™é‡Œæˆ‘å°±å¼€å§‹ä½¿ç”¨åŠ¨æ€sqlè¿›è¡Œåˆ¤æ–­äº†</span></span><br><span class="line"><span class="comment">//cidä¸ºç©ºåªæ˜¯å› ä¸ºæˆ‘æ²¡æŸ¥ï¼Œä¸è¦è¯¯ä¼šã€‚</span></span><br><span class="line">stu.setSname(<span class="string">&quot;ç‹è€å…­&quot;</span>);  <span class="comment">//StudentInfo [sid=9, sname=ç‹è€å…­, cid=null, tel=16682187574, addr=æ¹–å—é•¿æ²™]</span></span><br><span class="line">stu.setCid(<span class="number">2</span>);  <span class="comment">//æ›´æ”¹ç­çº§ç¼–å·ï¼Œå‰å°æ¡ä»¶ç­çº§å¿…é¡»å­˜åœ¨</span></span><br><span class="line">stu.setSid(<span class="number">9</span>);  <span class="comment">//æ›´æ–°è¯­å¥çš„æ¡ä»¶</span></span><br><span class="line"></span><br><span class="line">stu.setTel(<span class="string">&quot;15973121103&quot;</span>);</span><br><span class="line">stu.setAddr(<span class="string">&quot;æ¹–å—è¡¡é˜³&quot;</span>);</span><br><span class="line"><span class="comment">// æ›´æ–°åçš„æ•°æ® StudentInfo [sid=9, sname=ç‹è€å…­, cid=null, tel=15973121103, addr=æ¹–å—è¡¡é˜³]</span></span><br><span class="line"><span class="comment">//æˆ‘ä»¬æŸ¥è¯¢çš„æ—¶å€™å¯ä»¥æ˜¯ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªå€¼ï¼Œæ•…è€Œæˆ‘ä»¬é€šå¸¸å°†æŸ¥åˆ°çš„å€¼å­˜åˆ°é›†åˆä¸­ï¼Œè‡³äºæ˜¯å“ªç§é›†åˆï¼Œä½ é€‰æ‹©</span></span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> sqlSession.update(<span class="string">&quot;StudentInfo.update&quot;</span>,stu);</span><br><span class="line"><span class="keyword">if</span>(result &gt; <span class="number">0</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ›´æ–°æˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ›´æ–°å¤±è´¥&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">List&lt;StudentInfo&gt; cls = sqlSession.selectList(<span class="string">&quot;StudentInfo.findByValue&quot;</span>, stu);</span><br><span class="line"></span><br><span class="line">cls.forEach(System.out::println);</span><br><span class="line">sqlSession.commit();</span><br><span class="line">sqlSession.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="mybatis-Springæ¡†æ¶"><a href="#mybatis-Springæ¡†æ¶" class="headerlink" title="mybatis + Springæ¡†æ¶"></a>mybatis + Springæ¡†æ¶</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºä¸€ä¸ªç®€å•çš„æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">create</span> database mybatis if <span class="keyword">not</span> <span class="keyword">exists</span> ;</span><br><span class="line">use mybatis;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span>(</span><br><span class="line">id <span class="type">int</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key ,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">default</span> <span class="keyword">null</span>,</span><br><span class="line">    pwd <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">default</span> <span class="keyword">null</span></span><br><span class="line">)engine<span class="operator">=</span>innoDB <span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å®‰è£…mybatis</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¿«é€Ÿä¸Šæ‰‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisConfig</span> &#123;</span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="keyword">public</span> SqlSessionFactory <span class="title function_">sqlSessionFactory</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">SqlSessionFactoryBean</span> <span class="variable">factoryBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBean</span>();</span><br><span class="line">    factoryBean.setDataSource(dataSource());</span><br><span class="line">    <span class="keyword">return</span> factoryBean.getObject();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š<code>SqlSessionFactory</code> éœ€è¦ä¸€ä¸ª <code>DataSource</code>ï¼ˆæ•°æ®æºï¼‰ã€‚è¿™å¯ä»¥æ˜¯ä»»æ„çš„ <code>DataSource</code>ï¼Œåªéœ€è¦å’Œé…ç½®å…¶å®ƒ Spring æ•°æ®åº“è¿æ¥ä¸€æ ·é…ç½®å®ƒå°±å¯ä»¥äº†ã€‚ </p><p>å‡è®¾ä½ å®šä¹‰äº†ä¸€ä¸ªå¦‚ä¸‹çš„ mapper æ¥å£ï¼š </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">  <span class="meta">@Select(&quot;SELECT * FROM users WHERE id = #&#123;userId&#125;&quot;)</span></span><br><span class="line">  User <span class="title function_">getUser</span><span class="params">(<span class="meta">@Param(&quot;userId&quot;)</span> String userId)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆå¯ä»¥é€šè¿‡ <code>MapperFactoryBean</code> å°†æ¥å£åŠ å…¥åˆ° Spring ä¸­: </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userMapper&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperFactoryBean&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperInterface&quot;</span> <span class="attr">value</span>=<span class="string">&quot;org.mybatis.spring.sample.mapper.UserMapper&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæ‰€æŒ‡å®šçš„æ˜ å°„å™¨ç±»<strong>å¿…é¡»</strong>æ˜¯ä¸€ä¸ªæ¥å£ï¼Œè€Œä¸æ˜¯å…·ä½“çš„å®ç°ç±»ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œé€šè¿‡æ³¨è§£æ¥æŒ‡å®š SQL è¯­å¥ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ä½¿ç”¨ MyBatis æ˜ å°„å™¨çš„ XML é…ç½®æ–‡ä»¶ã€‚</p><p>é…ç½®å¥½ä¹‹åï¼Œä½ å°±å¯ä»¥åƒ Spring ä¸­æ™®é€šçš„ bean æ³¨å…¥æ–¹æ³•é‚£æ ·ï¼Œå°†æ˜ å°„å™¨æ³¨å…¥åˆ°ä½ çš„ä¸šåŠ¡æˆ–æœåŠ¡å¯¹è±¡ä¸­ã€‚<code>MapperFactoryBean</code> å°†ä¼šè´Ÿè´£ <code>SqlSession</code> çš„åˆ›å»ºå’Œå…³é—­ã€‚ å¦‚æœä½¿ç”¨äº† Spring çš„äº‹åŠ¡åŠŸèƒ½ï¼Œé‚£ä¹ˆå½“äº‹åŠ¡å®Œæˆæ—¶ï¼Œsession å°†ä¼šè¢«æäº¤æˆ–å›æ»šã€‚æœ€ç»ˆä»»ä½•å¼‚å¸¸éƒ½ä¼šè¢«è½¬æ¢æˆ Spring çš„ <code>DataAccessException</code> å¼‚å¸¸ã€‚</p><p>ä½¿ç”¨ Java ä»£ç æ¥é…ç½®çš„æ–¹å¼å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisConfig</span> &#123;</span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="keyword">public</span> UserMapper <span class="title function_">userMapper</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">SqlSessionTemplate</span> <span class="variable">sqlSessionTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionTemplate</span>(sqlSessionFactory());</span><br><span class="line">    <span class="keyword">return</span> sqlSessionTemplate.getMapper(UserMapper.class);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¦è°ƒç”¨ MyBatis çš„æ•°æ®æ–¹æ³•ï¼Œåªéœ€ä¸€è¡Œä»£ç ï¼š </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FooServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">FooService</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">FooServiceImpl</span><span class="params">(UserMapper userMapper)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.userMapper = userMapper;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> User <span class="title function_">doSomeBusinessStuff</span><span class="params">(String userId)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.userMapper.getUser(userId);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Mybatis-Spring"><a href="#Mybatis-Spring" class="headerlink" title="Mybatis-Spring"></a>Mybatis-Spring</h3><p>MyBatis-Spring ä¼šå¸®åŠ©ä½ å°† MyBatis ä»£ç æ— ç¼åœ°æ•´åˆåˆ° Spring ä¸­ã€‚å®ƒå°†å…è®¸ MyBatis å‚ä¸åˆ° Spring çš„äº‹åŠ¡ç®¡ç†ä¹‹ä¸­ï¼Œåˆ›å»ºæ˜ å°„å™¨ mapper å’Œ <code>SqlSession</code> å¹¶æ³¨å…¥åˆ° bean ä¸­ï¼Œä»¥åŠå°† Mybatis çš„å¼‚å¸¸è½¬æ¢ä¸º Spring çš„ <code>DataAccessException</code>ã€‚ æœ€ç»ˆï¼Œå¯ä»¥åšåˆ°åº”ç”¨ä»£ç ä¸ä¾èµ–äº MyBatisï¼ŒSpring æˆ– MyBatis-Springã€‚ </p><div class="table-container"><table><thead><tr><th>MyBatis-Spring</th><th>MyBatis</th><th>Spring Framework</th><th>Spring Batch</th><th>Java</th></tr></thead><tbody><tr><td><strong>2.0</strong></td><td>3.5+</td><td>5.0+</td><td>4.0+</td><td>Java 8+</td></tr><tr><td><strong>1.3</strong></td><td>3.4+</td><td>3.2.2+</td><td>2.1+</td><td>Java 6+</td></tr></tbody></table></div><p>åˆå§‹é…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta"> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æšä¸¾ç±»å‹é…ç½®æ¡ˆä¾‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">    <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;org.apache.ibatis.submitted.rounding.Mapper&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;org.apache.ibatis.submitted.rounding.User&quot;</span> <span class="attr">id</span>=<span class="string">&quot;usermap&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;funkyNumber&quot;</span> <span class="attr">property</span>=<span class="string">&quot;funkyNumber&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;roundingMode&quot;</span> <span class="attr">property</span>=<span class="string">&quot;roundingMode&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUser&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;usermap&quot;</span>&gt;</span></span><br><span class="line">select * from users</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span>&gt;</span></span><br><span class="line">    insert into users (id, name, funkyNumber, roundingMode) values (</span><br><span class="line">    #&#123;id&#125;, #&#123;name&#125;, #&#123;funkyNumber&#125;, #&#123;roundingMode&#125;</span><br><span class="line">    )</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;org.apache.ibatis.submitted.rounding.User&quot;</span> <span class="attr">id</span>=<span class="string">&quot;usermap2&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;funkyNumber&quot;</span> <span class="attr">property</span>=<span class="string">&quot;funkyNumber&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;roundingMode&quot;</span> <span class="attr">property</span>=<span class="string">&quot;roundingMode&quot;</span> <span class="attr">typeHandler</span>=<span class="string">&quot;org.apache.ibatis.type.EnumTypeHandler&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUser2&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;usermap2&quot;</span>&gt;</span></span><br><span class="line">select * from users2</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert2&quot;</span>&gt;</span></span><br><span class="line">    insert into users2 (id, name, funkyNumber, roundingMode) values (</span><br><span class="line">    #&#123;id&#125;, #&#123;name&#125;, #&#123;funkyNumber&#125;, #&#123;roundingMode, typeHandler=org.apache.ibatis.type.EnumTypeHandler&#125;</span><br><span class="line">    )</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>mybatisé“¾æ¥æ•°æ®åº“çš„xmlä¹¦å†™</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--è¿™æ˜¯ä¸€ç§å†™æ³•å¯ä»¥å°†é©±åŠ¨å†™åœ¨ç±»é‡Œè¾¹ï¼Œç„¶åé€šè¿‡å°†ä¾èµ–æ³¨å…¥å€¼@Value--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/example/BlogMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é“¾æ¥mysqlé“¾æ¥ä¾èµ–url</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=true<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æœ¬æ–‡å°†ä»0åˆ°1æ­å»ºMybatisé¡¹ç›®ï¼Œå¹¶å®ç°ä½¿ç”¨mybatiså®Œæˆç®€å•çš„å¯¹æ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥æ“ä½œ</summary>
    
    
    
    <category term="æ¡†æ¶å­¦ä¹ " scheme="https://www.blog.909111.xyz/categories/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="java" scheme="https://www.blog.909111.xyz/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Gitå®ç°æ–‡ä»¶ä¸Šä¼ åˆ°githubæˆ–è€…gitee</title>
    <link href="https://www.blog.909111.xyz/posts/8d32597a.html"/>
    <id>https://www.blog.909111.xyz/posts/8d32597a.html</id>
    <published>2024-04-02T09:00:00.000Z</published>
    <updated>2024-04-22T08:14:16.144Z</updated>
    
    <content type="html"><![CDATA[<ol><li>åœ¨æœ¬åœ°é¡¹ç›®ç›®å½•åˆ›å»ºæœ¬åœ°ä»“åº“</li></ol><p>â€‹      <code>git init</code></p><p>â€‹        è¾“å…¥å®Œå‘½ä»¤åé¡¹ç›®ç›®å½•ä¼šæœ‰ä¸€ä¸ªéšè—çš„.gitæ–‡ä»¶å¤¹</p><ol><li>ä¸Šä¼ æ‰€æœ‰ä»£ç åˆ°æœ¬åœ°ä»“åº“</li></ol><p>â€‹       <code>git add .</code> (æ³¨:åé¢ç‚¹ä¸èƒ½å°‘)</p><ol><li>ä»£ç ä¸Šä¼ åˆ°æœ¬åœ°ä»“åº“åæ‰§è¡Œæäº¤å‘½ä»¤</li></ol><p>â€‹      <code>git commit -m &quot;é¡¹ç›®åç§°&quot;</code></p><ol><li><p>åœ¨GitHubä¸Šæ–°å»ºä¸€ä¸ªrepository ï¼ˆæ­¥éª¤1ï¼‰</p></li><li><p>å…³è”æœ¬åœ°ä»“åº“å¹¶ä¸Šä¼ ä»£ç </p></li></ol><p>â€‹      <code>git remote add origin [https://github.com/xxx.git(æ–°å»ºrepositoryåä¼šæœ‰ä¸€ä¸ªåœ°å€)]</code></p><ol><li>æœ€åæ‰§è¡Œä¸Šä¼ æ¨é€å‘½ä»¤</li></ol><p>â€‹     <code>git push origin master</code></p><p>å®Œæˆä»£ç çš„ä¸Šä¼ </p><p>äºŒï¼Œæ›´æ–°ä¿®æ”¹ä»£ç </p><p>1ï¼Œå…ˆè¿›å…¥åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹:cd xx:\ æŸ¥çœ‹æ˜¯å¦æœ‰å†²çªï¼š<br>ã€€ã€€ã€€<code>git status</code></p><p>2ã€å°†å½“å‰å·¥ä½œç›®å½•ä¸­æ›´æ”¹æˆ–è€…æ–°å¢çš„æ–‡ä»¶åŠ å…¥åˆ°Gitçš„ç´¢å¼•ä¸­ï¼ŒåŠ å…¥åˆ°Gitçš„ç´¢å¼•ä¸­å°±è¡¨ç¤ºè®°å…¥äº†ç‰ˆæœ¬å†å²ä¸­<br>ã€€ã€€ã€€<code>git add .</code><br>3ã€æ·»åŠ æ³¨é‡Šï¼ˆå¿…å¡«ï¼‰ï¼š<br>ã€€ã€€ã€€<code>git commit -m â€œæ³¨é‡Šå†…å®¹â€</code><br>4ã€æäº¤æœ¬æ¬¡ä¿®æ”¹åˆ°è¿œç¨‹ä»“åº“</p><p>ã€€ã€€ã€€<code>git push https://github.com/vofill/test.git</code></p><p>ä¸‰ã€ä»GitHubä¸Šé€šè¿‡å‘½ä»¤downä»£ç </p><p>ã€€ã€€1ã€æ‰“å¼€gitï¼Œè¿›å…¥è¦å­˜æ”¾é¡¹ç›®ä»£ç çš„gitç›®å½•</p><p>ã€€ã€€2ã€ä½¿ç”¨å‘½ä»¤</p><p>ã€€ã€€ã€€ã€€<code>git clone git://github.com/xxx.git</code></p><p>ã€€ã€€ã€€ã€€æˆ–è€…<code>git clone https://github.com/xxx.git</code></p><p>å››ã€ä»GitHubä¸Šé€šè¿‡å‘½ä»¤updateä»£ç </p><p>ã€€ã€€1ã€æ‰“å¼€gitï¼Œè¿›å…¥è¦å­˜æ”¾é¡¹ç›®ä»£ç çš„gitç›®å½•</p><p>ã€€ã€€2ã€ä½¿ç”¨å‘½ä»¤    <code>git pull</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br><span class="line"></span><br><span class="line">hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy  // Git BASHç»ˆç«¯</span><br><span class="line">hexo clean; hexo generate; hexo deploy  // VSCODEç»ˆç«¯</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Gitå®ç°æ–‡ä»¶ä¸Šä¼ åˆ°githubæˆ–è€…gitee</summary>
    
    
    
    <category term="æ“ä½œ" scheme="https://www.blog.909111.xyz/categories/%E6%93%8D%E4%BD%9C/"/>
    
    
    <category term="Git" scheme="https://www.blog.909111.xyz/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>javaå¤šçº¿ç¨‹é¢è¯•é¢˜</title>
    <link href="https://www.blog.909111.xyz/posts/42904f32.html"/>
    <id>https://www.blog.909111.xyz/posts/42904f32.html</id>
    <published>2024-04-02T09:00:00.000Z</published>
    <updated>2024-04-02T09:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="javaå¤šçº¿ç¨‹é¢è¯•é¢˜"><a href="#javaå¤šçº¿ç¨‹é¢è¯•é¢˜" class="headerlink" title="javaå¤šçº¿ç¨‹é¢è¯•é¢˜"></a>javaå¤šçº¿ç¨‹é¢è¯•é¢˜</h1><h3 id="javaä¸­å®ˆæŠ¤çº¿ç¨‹å’Œæœ¬åœ°çº¿ç¨‹çš„åŒºåˆ«ï¼Ÿ"><a href="#javaä¸­å®ˆæŠ¤çº¿ç¨‹å’Œæœ¬åœ°çº¿ç¨‹çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="javaä¸­å®ˆæŠ¤çº¿ç¨‹å’Œæœ¬åœ°çº¿ç¨‹çš„åŒºåˆ«ï¼Ÿ"></a>javaä¸­å®ˆæŠ¤çº¿ç¨‹å’Œæœ¬åœ°çº¿ç¨‹çš„åŒºåˆ«ï¼Ÿ</h3><p>javaå®ˆæŠ¤çº¿ç¨‹ï¼ˆDaemonï¼‰ä¹Ÿç§°ä½œç²¾çµçº¿ç¨‹ï¼Œæœ¬åœ°çº¿ç¨‹ä¹Ÿå«åšç”¨æˆ·çº¿ç¨‹ï¼ˆuserï¼‰</p><p>,ä»»ä½•çº¿ç¨‹éƒ½å¯ä»¥è¢«è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼Œåä¹‹å…¨ä¸ºç”¨æˆ·çº¿ç¨‹ï¼Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Thread.setDeamon(<span class="literal">true</span>);<span class="comment">//è®¾ç½®ä¸ºç²¾çµè¥¿çº¿ç¨‹</span></span><br></pre></td></tr></table></figure><p>å¿…é¡»åœ¨Thread.start()ä¹‹å‰è°ƒç”¨ï¼Œå¦åˆ™è¿è¡Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼ŒäºŒè€…å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œåˆ¤æ–­jvmä½•æ—¶ç¦»å¼€ï¼ŒDaemonä¸ºå…¶ä»–çº¿ç¨‹æœåŠ¡ï¼Œå½“å…¨éƒ¨çš„ç”¨æˆ·çº¿ç¨‹å…¨éƒ¨æ’¤ç¦»ï¼Œé‚£ä¹ˆDaemonæ²¡æœ‰å¯ä»¥æœåŠ¡çš„çº¿ç¨‹ï¼Œjvmå°±å¯ä»¥æ’¤ç¦»ã€‚</p><p>æ¯”å¦‚Jvmä¸­çš„åƒåœ¾å›æ”¶çº¿ç¨‹æ˜¯ä¸€ä¸ªå®ˆæŠ¤çº¿ç¨‹ï¼Œå½“æ‰€æœ‰çš„çº¿ç¨‹å·²ç»æ’¤é”€ï¼Œä¸åœ¨ç”Ÿæˆåƒåœ¾ï¼Œé‚£ä¹ˆå®ˆæŠ¤çº¿ç¨‹æ²¡äº‹æƒ…å¯å¹²ï¼Œå½“ä½ åƒåœ¾å›æ”¶çº¿ç¨‹æ˜¯javaè™šæ‹Ÿæœºä¸Šä»…å­˜çš„çº¿ç¨‹æ—¶å€™ï¼Œjavaè™šæ‹Ÿæœºä¼šè‡ªåŠ¨ç¦»å¼€ã€‚</p><h3 id="çº¿ç¨‹ä¸è¿›ç¨‹çš„åŒºåˆ«"><a href="#çº¿ç¨‹ä¸è¿›ç¨‹çš„åŒºåˆ«" class="headerlink" title="çº¿ç¨‹ä¸è¿›ç¨‹çš„åŒºåˆ«"></a>çº¿ç¨‹ä¸è¿›ç¨‹çš„åŒºåˆ«</h3><p>è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„æœ€å°å•å…ƒï¼Œçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè°ƒåº¦çš„æœ€å°å•å…ƒã€‚</p><p>ä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘ä¸€ä¸ªçº¿ç¨‹ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢"><a href="#ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢" class="headerlink" title="ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢"></a>ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢</h3><p>å¤šçº¿ç¨‹ä¼šå…±åŒä½¿ç”¨ä¸€ç»„è®¡ç®—æœºçš„CPUï¼Œè€Œçº¿ç¨‹æ•°å¤§äºç»™ç¨‹åºåˆ†é…çš„CPUæ•°é‡ï¼Œä¸ºäº†è®©å„ä¸ªçº¿ç¨‹éƒ½æœ‰æ‰§è¡Œçš„æœºä¼šï¼Œå°±éœ€è¦è½®è½¬ä½¿ç”¨cpu,ä¸åŒçš„çº¿ç¨‹åˆ‡æ¢ä½¿ç”¨cpuå‘ç”Ÿçš„åˆ‡æ¢æ•°æ®ç­‰å°±æ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p><h3 id="æ­»é”å’Œæ´»é”çš„åŒºåˆ«ï¼Œæ­»é”å’Œé¥¥é¥¿çš„åŒºåˆ«"><a href="#æ­»é”å’Œæ´»é”çš„åŒºåˆ«ï¼Œæ­»é”å’Œé¥¥é¥¿çš„åŒºåˆ«" class="headerlink" title="æ­»é”å’Œæ´»é”çš„åŒºåˆ«ï¼Œæ­»é”å’Œé¥¥é¥¿çš„åŒºåˆ«"></a>æ­»é”å’Œæ´»é”çš„åŒºåˆ«ï¼Œæ­»é”å’Œé¥¥é¥¿çš„åŒºåˆ«</h3><p>æ­»é”ï¼šæŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­äº‰æŠ¢èµ„æºé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…çš„æƒ…å†µï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œä»–ä»¬å°†ä¼šæ— æ³•æ¨è¿›ä¸‹å»ã€‚</p><p><strong>äº§ç”Ÿæ­»é”çš„å¿…è¦æ¡ä»¶ï¼š</strong></p><ol><li>äº’æ–¥æ¡ä»¶ï¼šæ‰€è°“äº’æ–¥ï¼Œè¿›ç¨‹åœ¨æŸä¸€æ—¶é—´å†…ç‹¬å èµ„æºã€‚</li><li>è¯·æ±‚å’Œä¿æŒæ¡ä»¶ï¼š ä¸€ä¸ªè¿›ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚</li><li>ä¸å‰¥å¤ºæ¡ä»¶ï¼šè¿›ç¨‹å·²è·å¾—èµ„æºï¼Œåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½å¼ºè¡Œå‰¥å¤ºã€‚</li><li>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šè‹¥å¹²è¿›ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸è¿çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»ã€‚</li></ol><p><strong>æ´»é”ï¼š</strong> ä»»åŠ¡æˆ–è€…æ‰§è¡Œè€…æ²¡æœ‰è¢«é˜»å¡ï¼Œç”±äºæŸäº›æ¡ä»¶æ²¡æœ‰æ»¡è¶³ï¼Œå¯¼è‡´ä¸€ç§é‡å¤å°è¯•ï¼Œå¤±è´¥ï¼Œå°è¯•ï¼Œå¤±è´¥ã€‚</p><p>æ´»é”å’Œæ­»é”çš„åŒºåˆ«åœ¨äºï¼šå¤„äºæ´»é”çš„å®ä½“æ˜¯åœ¨ä¸æ–­æ”¹å˜çŠ¶æ€ï¼Œæ‰€è°“æ´»ï¼Œè€Œå¤„äºæ­»é”çš„å®ä½“è¡¨ç°ä¸ºç­‰å¾…ï¼›æ´»é”æœ‰å¯èƒ½è‡ªè¡Œè§£å¼€ï¼Œæ­»é”ä¸èƒ½ã€‚</p><p><strong>é¥¥é¥¿ï¼š</strong> ä¸€ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹å› ä¸ºç§ç§åŸå› æ— æ³•è·å¾—æ‰€éœ€è¦çš„èµ„æºï¼Œå¯¼è‡´ä¸€ç›´æ— æ³•æ‰§è¡Œçš„çŠ¶æ€ã€‚</p><p><strong>javaå¯¼è‡´é¥¥é¥¿çš„åŸå› ï¼š</strong></p><ol><li>é«˜ä¼˜å…ˆçº§åå™¬æ‰€æœ‰çš„ä½ä¼˜å…ˆçº§çº¿ç¨‹CPUæ—¶é—´ã€‚</li><li>çº¿ç¨‹è¢«æ°¸ä¹…å µå¡åœ¨ä¸€ä¸ªç­‰å¾…è¿›å…¥åŒæ­¥å—çš„çŠ¶æ€ï¼Œå› ä¸ºå…¶å®ƒçš„çº¿ç¨‹æ€»æ˜¯èƒ½åœ¨ä»–ä¹‹å‰æŒç»­åœ°å¯¹è¯¥åŒæ­¥å—è¿›è¡Œè®¿é—®ã€‚</li><li>çº¿ç¨‹åœ¨ç­‰å¾…ä¸€ä¸ªæœ¬èº«ä¹Ÿå¤„äºæ°¸ä¹…ç­‰å¾…å®Œæˆçš„å¯¹è±¡ï¼ˆæ¯”å¦‚è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„waitæ–¹æ³•ï¼‰ï¼Œå› ä¸ºå…¶å®ƒçº¿ç¨‹æ€»æ˜¯è¢«æŒç»­çš„è·å¾—å”¤é†’ã€‚</li></ol><h3 id="javaä¸­çº¿ç¨‹è°ƒåº¦çš„ç®—æ³•æ˜¯ä»€ä¹ˆï¼š"><a href="#javaä¸­çº¿ç¨‹è°ƒåº¦çš„ç®—æ³•æ˜¯ä»€ä¹ˆï¼š" class="headerlink" title="javaä¸­çº¿ç¨‹è°ƒåº¦çš„ç®—æ³•æ˜¯ä»€ä¹ˆï¼š"></a>javaä¸­çº¿ç¨‹è°ƒåº¦çš„ç®—æ³•æ˜¯ä»€ä¹ˆï¼š</h3><p>é‡‡ç”¨æ—¶é—´ç‰‡è½®è½¬çš„æ–¹å¼ï¼Œå¯ä»¥è®¾ç½®çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œä¼šæ˜ å°„åˆ°ä¸‹å±‚çš„ç³»ç»Ÿä¸Šé¢çš„ä¼˜å…ˆçº§ï¼Œå¦‚éç‰¹åˆ«éœ€è¦ï¼Œå°½é‡ä¸è¦ä½¿ç”¨ã€‚å¯èƒ½ä¼šé€ æˆçº¿ç¨‹é¥¥é¥¿ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯çº¿ç¨‹ç»„ï¼Œä¸ºä»€ä¹ˆåœ¨javaä¸æ¨èä½¿ç”¨"><a href="#ä»€ä¹ˆæ˜¯çº¿ç¨‹ç»„ï¼Œä¸ºä»€ä¹ˆåœ¨javaä¸æ¨èä½¿ç”¨" class="headerlink" title="ä»€ä¹ˆæ˜¯çº¿ç¨‹ç»„ï¼Œä¸ºä»€ä¹ˆåœ¨javaä¸æ¨èä½¿ç”¨"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹ç»„ï¼Œä¸ºä»€ä¹ˆåœ¨javaä¸æ¨èä½¿ç”¨</h3><p>ThreadGroupç±»ï¼Œå¯ä»¥æŠŠçº¿ç¨‹å½’å±åˆ°æŸä¸€ä¸ªçº¿ç¨‹ç»„ä¸­ï¼Œçº¿ç¨‹ç»„å¯ä»¥æœ‰çº¿ç¨‹å¯¹è±¡ä¹Ÿå¯ä»¥æœ‰çº¿ç¨‹ç»„ï¼Œç»„ä¸­è¿˜å¯ä»¥æœ‰çº¿ç¨‹ï¼Œè¿™æ ·çš„ç»„ç»‡ç»“æ„æœ‰ç‚¹ç±»ä¼¼äºæ ‘çš„å½¢å¼ã€‚</p><p>ä¸ºä»€ä¹ˆä¸æ¨èï¼Ÿ</p><ol><li>çº¿ç¨‹ç»„ThreadGroupç°è±¡ä¸­æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•stop,resume,suspendç­‰æ–¹æ³•ï¼Œç”±äºè¿™å‡ ä¸ªæ–¹æ³•ä¼šå¯¼è‡´çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæ•…è€Œè¢«å®˜æ–¹åºŸå¼ƒæ‰äº†ï¼Œæ‰€ä»¥çº¿ç¨‹æœ¬èº«çš„åº”ç”¨ä»·å€¼å°±å¤§æ‰“æŠ˜æ‰£äº†ã€‚</li><li>å…¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨ï¼Œè¿™åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­è·å–çš„ä¿¡æ¯ä¸æ˜¯å…¨éƒ¨åŠæ—¶æœ‰æ•ˆçš„ï¼Œè¿™æ ·å°±é™ä½äº†å…¶ç»Ÿè®¡ä»·å€¼ã€‚</li></ol><h3 id="ä»€ä¹ˆæ˜¯-Executors-æ¡†æ¶ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Executors-æ¡†æ¶ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Executors æ¡†æ¶ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Executors æ¡†æ¶ï¼Ÿ</h3><p>Executor æ¡†æ¶æ˜¯ä¸€ä¸ªæ ¹æ®ä¸€ç»„æ‰§è¡Œç­–ç•¥è°ƒç”¨ï¼Œè°ƒåº¦ï¼Œæ‰§è¡Œå’Œæ§åˆ¶çš„å¼‚æ­¥ä»»åŠ¡çš„æ¡† </p><p>æ¶ã€‚ </p><p>æ— é™åˆ¶çš„åˆ›å»ºçº¿ç¨‹ä¼šå¼•èµ·åº”ç”¨ç¨‹åºå†…å­˜æº¢å‡ºã€‚æ‰€ä»¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± æ˜¯ä¸ªæ›´å¥½çš„çš„ </p><p>è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºå¯ä»¥é™åˆ¶çº¿ç¨‹çš„æ•°é‡å¹¶ä¸”å¯ä»¥å›æ”¶å†åˆ©ç”¨è¿™äº›çº¿ç¨‹ã€‚åˆ©ç”¨ </p><p>Executors æ¡†æ¶å¯ä»¥éå¸¸æ–¹ä¾¿çš„åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ã€‚</p><h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨Executoræ¡†æ¶"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨Executoræ¡†æ¶" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨Executoræ¡†æ¶"></a>ä¸ºä»€ä¹ˆä½¿ç”¨Executoræ¡†æ¶</h3><p>æ¯æ¬¡æ‰§è¡Œä»»åŠ¡çº¿ç¨‹ï¼Œnew Thread(ï¼‰æ¯”è¾ƒæ¶ˆè€—æ€§èƒ½ï¼Œåˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ˜¯æ¯”è¾ƒè€—æ—¶çš„ï¼Œè€—èµ„æºçš„ã€‚</p><p>è°ƒç”¨new Thread()åˆ›å»ºçš„çº¿ç¨‹ç¼ºä¹ç®¡ç†ï¼Œè¢«ç§°ä¸ºé‡çº¿ç¨‹ï¼Œè€Œä¸”å¯ä»¥æ— é™åˆ¶åˆ›å»ºï¼Œçº¿ç¨‹ä¸çº¿ç¨‹ä¹‹é—´çš„ç›¸äº’ç«äº‰ä¹Ÿä¼šå¯¼è‡´å ç”¨è¿‡å¤šç³»ç»Ÿèµ„æºè€Œå¯¼è‡´ç³»ç»Ÿç˜«ç—ªï¼Œè€Œä¸”çº¿ç¨‹ä¹‹é—´çš„é¢‘ç¹äº¤æ›¿ä¹Ÿä¼šæ¶ˆè€—å¾ˆå¤šçš„ç³»ç»Ÿèµ„æºã€‚</p><p>è€Œä¸”ä½¿ç”¨ new Thread()å¯åŠ¨çš„çº¿ç¨‹ä¸åˆ©äºæ‹“å±•ï¼Œæ¯”å¦‚å®šæ—¶æ‰§è¡Œï¼Œå®šæœŸæ‰§è¡Œï¼Œå®šæ—¶å®šæœŸæ‰§è¡Œï¼Œçº¿ç¨‹ä¸­æ–­éƒ½ä¸ä¾¿å®ç°ã€‚</p><h3 id="javaä¸­Executorå’ŒExecutorsçš„åŒºåˆ«"><a href="#javaä¸­Executorå’ŒExecutorsçš„åŒºåˆ«" class="headerlink" title="javaä¸­Executorå’ŒExecutorsçš„åŒºåˆ«"></a>javaä¸­Executorå’ŒExecutorsçš„åŒºåˆ«</h3><p>Executor å·¥å…·ç±»çš„ä¸åŒæ–¹æ³•æŒ‰ç…§æˆ‘ä»¬çš„éœ€æ±‚å»åˆ›å»ºä¸åŒçš„çº¿ç¨‹æ± ï¼Œæ¥æ»¡è¶³ä¸šåŠ¡çš„éœ€æ±‚ï¼Œ</p><p>Executoræ¥å£å¯¹è±¡èƒ½æ‰§è¡Œæˆ‘ä»¬çš„çº¿ç¨‹ä»»åŠ¡</p><p>ExecutorServiceæ¥å£ç»§æ‰¿Executoræ¥å£å¹¶è¿›è¡Œæ‹“å±•ï¼Œæä¾›äº†æ›´å¤šçš„æ–¹æ³•ï¼Œæˆ‘ä»¬èƒ½è·å¾—ä»»åŠ¡æ‰§è¡Œçš„çŠ¶æ€ï¼Œå¹¶ä¸”å¯ä»¥è·å¾—ä»»åŠ¡çš„è¿”å›å€¼ã€‚</p><p>ä½¿ç”¨ThreadPoolExecutorå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çº¿ç¨‹æ± ã€‚</p><p>Euture è¡¨ç¤ºå¼‚æ­¥è®¡ç®—çš„ç»“æœï¼Œä»–æä¾›äº†æ£€æŸ¥è®¡ç®—æ˜¯å¦å®Œæˆçš„æ–¹æ³•ï¼Œä»¥ç­‰å¾…è®¡ç®—çš„å®Œæˆï¼Œå¹¶å¯ä»¥get()æ–¹æ³•æˆ–çš„è®¡ç®—çš„ç»“æœã€‚</p><h3 id="ä»€ä¹ˆæ˜¯åŸå­æ“ä½œï¼Ÿjavaä¸­Concurrency-APIä¸­æœ‰å“ªäº›åŸå­ç±»"><a href="#ä»€ä¹ˆæ˜¯åŸå­æ“ä½œï¼Ÿjavaä¸­Concurrency-APIä¸­æœ‰å“ªäº›åŸå­ç±»" class="headerlink" title="ä»€ä¹ˆæ˜¯åŸå­æ“ä½œï¼Ÿjavaä¸­Concurrency APIä¸­æœ‰å“ªäº›åŸå­ç±»"></a>ä»€ä¹ˆæ˜¯åŸå­æ“ä½œï¼Ÿjavaä¸­Concurrency APIä¸­æœ‰å“ªäº›åŸå­ç±»</h3><p>åŸå­æ“ä½œï¼šä¸å¯ä¸­æ–­çš„ä¸€ä¸ªæˆ–ä¸€ç³»åˆ—æ“ä½œ</p><p>å¤„ç†å™¨ä½¿ç”¨åŸºäºç¼“å­˜åŠ é”æˆ–æ€»çº¿åŠ é”çš„æ–¹å¼æ¥å®ç°å¤šå¤„ç†å™¨ä¹‹é—´çš„åŸå­æ“ä½œ</p><p>javaä¸­å¯ä»¥é€šè¿‡é”å’Œå¾ªç¯CASçš„æ–¹å¼æ¥å®ç°åŸå­æ“ä½œï¼ŒCASæ“ä½œ â€” Compare &amp; Set ï¼Œæˆ–æ˜¯</p><p>Compare &amp; Swap,ç°åœ¨å‡ ä¹æ‰€æœ‰çš„CPUæŒ‡ä»¤éƒ½æ”¯æŒCASçš„åŸå­æ“ä½œã€‚</p><p>åŸå­æ“ä½œæ—¶æ˜¯ä¸€ä¸ªä¸å—å…¶ä»–æ“ä½œå½±å“çš„ä»»åŠ¡å•å…ƒï¼ŒåŸå­æ“ä½œæ˜¯åœ¨å¤šçº¿ç¨‹ä¸‹é¿å…æ•°æ®ä¸ä¸€è‡´çš„æ‰‹æ®µã€‚</p><p>int ++ å¹¶ä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œæ‰€ä»¥å½“ä¸€ä¸ªçº¿ç¨‹è¯»åˆ°ä»–çš„å€¼å¹¶åŠ ä¸€çš„æ—¶å€™ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯èƒ½è¯»åˆ°ä¹‹å‰çš„å€¼ï¼Œè¿™å°±ä¼šå¯¼è‡´å¼•å‘é”™è¯¯ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œjdk1.5ä¹‹å‰ä½¿ç”¨åŒæ­¥æŠ€æœ¯æ¥è§£å†³è¿™ä¸€ç‚¹ï¼Œåˆ°JDK1.5å‡ºç°äº†java.util.concurrent.atomicåŒ…æä¾›äº†intå’Œlongç±»å‹çš„åŸå­åŒ…è£…ã€‚å®ƒå¯ä»¥è‡ªåŠ¨çš„ä¿è¯å¯¹äºä»–ä»¬çš„æ“ä½œæ—¶åŸå­çš„å¹¶ä¸”ä¸éœ€è¦åŒæ­¥ã€‚</p><p>java.util.concurrent è¿™ä¸ªåŒ…é‡Œè¾¹æä¾›äº†ä¸€ç»„çš„åŸå­ç±»ï¼ŒåŸºæœ¬ç‰¹æ€§æ˜¯å¤šçº¿ç¨‹ä¸‹ï¼Œæœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶ç½®ä¿¡ä½ ä¸ªè¿™äº›ç±»çš„å®ä¾‹åŒ…å«çš„åå¤ï¼Œå…·æœ‰æ’ä»–æ€§ï¼Œå½“æŸä¸ªçº¿ç¨‹è¿›å…¥æ–¹æ³•ï¼Œæ‰§è¡Œå…¶ä¸­çš„æŒ‡ä»¤ï¼Œä¸ä¼šè¢«å…¶ä»–çš„çº¿ç¨‹æ‰“æ–­ï¼Œè€Œåˆ«çš„çº¿ç¨‹å°±åƒè‡ªæ—‹é”ä¸€æ ·ï¼Œä¸€ç›´ç­‰å¾…è¯¥æ–¹æ³•çš„æ‰§è¡Œå®Œæˆï¼Œæ‰ç”±JVMä»ç­‰å¾…é˜Ÿåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªå¦ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ã€‚</p><p>åŸå­ç±»ï¼šAtomicBooleanï¼ŒAtomicIntegerï¼ŒAtomicLongï¼ŒAtomicReference </p><p>åŸå­æ•°ç»„ï¼šAtomicIntegerArrayï¼ŒAtomicLongArrayï¼ŒAtomicReferenceArray </p><p>åŸå­å±æ€§æ›´æ–°å™¨ï¼šï¼šAtomicLongFieldUpdaterï¼ŒAtomicIntegerFieldUpdaterï¼Œ </p><p>AtomicReferenceFieldUpdater</p><p>è§£å†³ABAé—®é¢˜çš„åŸå­ç±»ï¼šAtomicMarkableReferenceï¼ˆé€šè¿‡å¼•å…¥ä¸€ä¸ª boolean </p><p>æ¥åæ˜ ä¸­é—´æœ‰æ²¡æœ‰å˜è¿‡ï¼‰ï¼ŒAtomicStampedReferenceï¼ˆé€šè¿‡å¼•å…¥ä¸€ä¸ª int æ¥ç´¯ </p><p>åŠ æ¥åæ˜ ä¸­é—´æœ‰æ²¡æœ‰å˜è¿‡ï¼‰</p><h3 id="å¹¶å‘ç¼–ç¨‹çš„ä¸‰è¦ç´ "><a href="#å¹¶å‘ç¼–ç¨‹çš„ä¸‰è¦ç´ " class="headerlink" title="å¹¶å‘ç¼–ç¨‹çš„ä¸‰è¦ç´ "></a>å¹¶å‘ç¼–ç¨‹çš„ä¸‰è¦ç´ </h3><ol><li>åŸå­æ€§</li></ol><p>æŒ‡ä¸€Â·ä¸ªæˆ–å¤šä¸ªæ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œ</p><ol><li>å¯è§æ€§</li></ol><p>å¯è§æ€§æŒ‡å¤šä¸ªçº¿ç¨‹æ“ä½œä¸€ä¸ªå…±äº«å˜é‡æ—¶ï¼Œå…¶ä¸­ä¸€ä¸ªçº¿ç¨‹å¯¹å˜é‡è¿›è¡Œä¿®æ”¹åï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥ç«‹å³çœ‹åˆ°ä¿®æ”¹çš„ç»“æœ</p><ol><li>æœ‰åºæ€§</li></ol><p>å³ç¨‹åºçš„æ‰§è¡Œé¡ºåºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ¥æ‰§è¡Œ</p><h3 id="åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ä¸‰ç§ï¼š"><a href="#åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ä¸‰ç§ï¼š" class="headerlink" title="åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ä¸‰ç§ï¼š"></a>åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ä¸‰ç§ï¼š</h3><p>ä¸€èˆ¬ä¸Šçº¿ç¨‹æ˜¯ä¸‰ç§</p><ol><li><p>ç»§æ‰¿Threadç±»</p><p>ç®€å•ä½¿ç”¨æ–¹ä¾¿</p></li><li><p>å®ç°runnableæ–¹æ³•</p><p>çº¿ç¨‹ç±»å®ç°äº†Runnableæ¥å£ï¼ŒCallableæ¥å£ï¼Œè¿˜å¯ä»¥ç»§æ‰¿å…¶ä»–ç±»</p><p>åœ¨è¿™ç§æ–¹å¼ä¹‹ä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«åŒä¸€ä¸ªtargetå¯¹è±¡ï¼Œæ•…è€Œé€‚åˆå¤šä¸ªç›¸åŒçº¿ç¨‹æ¥å¤„ç†åŒä¸€ä»½èµ„æºçš„æƒ…å†µï¼Œä»è€Œå¯ä»¥å°†CPUå’Œä»£ç å’Œæ•°æ®åˆ†å¼€ã€‚å½¢æˆæ¸…æ™°çš„æ¨¡å‹ï¼Œè¾ƒå¥½çš„ä½“ç°äº†é¢å‘å¯¹è±¡çš„æ€æƒ³ã€‚</p></li><li><p>é€šè¿‡Callableå’ŒFutureåˆ›å»ºçº¿ç¨‹ä¸€èˆ¬ä½¿ç”¨Callableå°†ä¼šå¸¦è¿”å›å€¼ï¼Œå¦‚æœä½ å¸Œæœ›æœ‰è¿”å›å€¼çš„é‚£å°±ä½¿ç”¨Callable</p><p>Callableé‡å†™çš„æ˜¯call()æ–¹æ³•ï¼ŒRunableé‡å†™çš„æ˜¯runæ–¹æ³•</p></li><li><p>é€šè¿‡çº¿ç¨‹æ± åˆ›å»º</p></li></ol>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡ä¸»è¦ä»‹ç»å¯¹å¤šçº¿ç¨‹é¢è¯•é¢˜çš„æ€»ç»“</summary>
    
    
    
    <category term="é¢è¯•é¢˜" scheme="https://www.blog.909111.xyz/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    
    <category term="javaé¢è¯•é¢˜" scheme="https://www.blog.909111.xyz/tags/java%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>çº¿ç¨‹æ± å­¦ä¹ </title>
    <link href="https://www.blog.909111.xyz/posts/ac133265.html"/>
    <id>https://www.blog.909111.xyz/posts/ac133265.html</id>
    <published>2024-04-02T09:00:00.000Z</published>
    <updated>2024-04-02T09:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ¶‰åŠåˆ°çº¿ç¨‹æ± ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“åˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹å¼ï¼Œåœ¨çº¿ç¨‹çš„åŸºç¡€ä¹‹ä¸Šï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥å­¦ä¹ çº¿ç¨‹æ± ã€‚</p><h2 id="çº¿ç¨‹æ± "><a href="#çº¿ç¨‹æ± " class="headerlink" title="çº¿ç¨‹æ± "></a>çº¿ç¨‹æ± </h2><h4 id="çº¿ç¨‹æ± æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#çº¿ç¨‹æ± æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="çº¿ç¨‹æ± æ˜¯ä»€ä¹ˆï¼Ÿ"></a>çº¿ç¨‹æ± æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>çº¿ç¨‹æ± æ˜¯ä¸€ç§æ± åŒ–æŠ€æœ¯ï¼Œä½¿ç”¨æ± åŒ–æŠ€æœ¯ç®¡ç†å’Œä½¿ç”¨çº¿ç¨‹çš„ä¸€ç§æœºåˆ¶ã€‚</p><p>æ± åŒ–æŠ€æœ¯ï¼šåœ¨åˆ©ç”¨èµ„æºä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æå‰å‡†å¤‡ä¸€äº›èµ„æºï¼Œåœ¨éœ€è¦æ—¶å€™é‡å¤ä½¿ç”¨æå‰å‡†å¤‡çš„èµ„æºã€‚</p><p>æ± åŒ–æŠ€æœ¯ï¼ˆPoolingï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„ä¼˜åŒ–æŠ€æœ¯ï¼Œå®ƒçš„ç›®çš„æ˜¯é€šè¿‡<strong>é‡å¤ä½¿ç”¨å·²ç»åˆ›å»ºçš„å¯¹è±¡æˆ–è€…èµ„æºï¼Œæ¥é¿å…é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯å¯¹è±¡æˆ–è€…èµ„æºæ‰€å¸¦æ¥çš„å¼€é”€</strong>ã€‚é€šè¿‡æ± åŒ–æŠ€æœ¯ï¼Œå¯ä»¥å‡å°‘åˆ›å»ºå’Œé”€æ¯å¯¹è±¡çš„å¼€é”€ï¼Œä»è€Œæé«˜ç¨‹åºçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚åœ¨è®¡ç®—æœºé¢†åŸŸä¸­ï¼Œæ± åŒ–æŠ€æœ¯é€šå¸¸ç”¨äºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol><li><p>æ•°æ®åº“è¿æ¥æ± ï¼š<strong>é€šè¿‡é‡å¤ä½¿ç”¨å·²ç»åˆ›å»ºçš„æ•°æ®åº“è¿æ¥</strong>ï¼Œé¿å…é¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯æ•°æ®åº“è¿æ¥æ‰€å¸¦æ¥çš„å¼€é”€ã€‚</p></li><li><p>çº¿ç¨‹æ± ï¼š<strong>é€šè¿‡é‡å¤ä½¿ç”¨å·²ç»åˆ›å»ºçš„çº¿ç¨‹</strong>ï¼Œé¿å…é¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹æ‰€å¸¦æ¥çš„å¼€é”€ã€‚</p></li><li><p>å¯¹è±¡æ± ï¼š<strong>é€šè¿‡é‡å¤ä½¿ç”¨å·²ç»åˆ›å»ºçš„å¯¹è±¡</strong>ï¼Œé¿å…é¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯å¯¹è±¡æ‰€å¸¦æ¥çš„å¼€é”€ã€‚</p></li><li><p>å†…å­˜æ± ï¼š<strong>é€šè¿‡é‡å¤ä½¿ç”¨å·²ç»åˆ†é…çš„å†…å­˜</strong>ï¼Œé¿å…é¢‘ç¹åœ°åˆ†é…å’Œé‡Šæ”¾å†…å­˜æ‰€å¸¦æ¥çš„å¼€é”€ã€‚</p></li></ol><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ± åŒ–æŠ€æœ¯å¯ä»¥å¸®åŠ©æˆ‘ä»¬æé«˜ç¨‹åºçš„æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œå› æ­¤åœ¨è®¾è®¡å’Œå¼€å‘ç¨‹åºæ—¶ï¼Œå¯ä»¥è€ƒè™‘é‡‡ç”¨æ± åŒ–æŠ€æœ¯æ¥ä¼˜åŒ–ç¨‹åºçš„æ€§èƒ½ã€‚</p><h4 id="çº¿ç¨‹æ± çš„ä½¿ç”¨æ–¹å¼"><a href="#çº¿ç¨‹æ± çš„ä½¿ç”¨æ–¹å¼" class="headerlink" title="çº¿ç¨‹æ± çš„ä½¿ç”¨æ–¹å¼"></a>çº¿ç¨‹æ± çš„ä½¿ç”¨æ–¹å¼</h4><ul><li>é€šè¿‡ThreadPoolExecutoråˆ›å»ºçš„çº¿ç¨‹æ± ï¼›</li><li>é€šè¿‡Executorsåˆ›å»ºçš„çº¿ç¨‹æ± ã€‚</li></ul><p><strong>çº¿ç¨‹æ± çš„åˆ›å»ºæ–¹å¼æ€»å…±åŒ…å«ä»¥ä¸‹7ç§ï¼ˆå…¶ä¸­6ç§æ˜¯é€šè¿‡Executors åˆ›å»ºçš„ï¼Œ1ç§æ˜¯é€šè¿‡<a href="https://so.csdn.net/so/search?q=ThreadPoolExecutor&amp;spm=1001.2101.3001.7020">ThreadPoolExecutor</a>åˆ›å»ºçš„ï¼‰ï¼š</strong></p><ul><li>Executors.<strong>newFixedThreadPool</strong>ï¼šåˆ›å»ºä¸€ä¸ª<strong>å›ºå®šå¤§å°</strong>çš„çº¿ç¨‹æ± ï¼Œå¯ä»¥æ§åˆ¶å¹¶å‘çš„çº¿ç¨‹æ•°ï¼Œè¶…å‡ºçš„çº¿ç¨‹ä¼šåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ï¼›</li><li>Executors.<strong>newCachedThreadPool</strong>ï¼šåˆ›å»ºä¸€ä¸ª<strong>å¯ç¼“å­˜</strong>çš„çº¿ç¨‹æ± ï¼Œè‹¥çº¿ç¨‹è¶…è¿‡å¤„ç†æ‰€éœ€ï¼Œç¼“å­˜ä¸€æ®µæ—¶é—´åä¼šå›æ”¶ï¼Œè‹¥çº¿ç¨‹æ•°ä¸å¤Ÿï¼Œåˆ™æ–°å»ºçº¿ç¨‹ï¼›</li><li>Executors.<strong>newScheduledThreadPool</strong>ï¼šåˆ›å»ºä¸€ä¸ªå¯ä»¥<strong>æ‰§è¡Œå»¶è¿Ÿä»»åŠ¡</strong>çš„çº¿ç¨‹æ± ï¼›</li><li>Executors.<strong>newSingleThreadExecutor</strong>ï¼šåˆ›å»º<strong>å•ä¸ªçº¿ç¨‹</strong>çš„çº¿ç¨‹æ± ï¼Œå®ƒå¯ä»¥ä¿è¯å…ˆè¿›å…ˆå‡ºçš„æ‰§è¡Œé¡ºåº</li><li>Executors.<strong>newSingleThreadScheduledExecutor</strong>ï¼šåˆ›å»ºä¸€ä¸ª<strong>å¯ä»¥æ‰§è¡Œå»¶è¿Ÿä»»åŠ¡</strong>çš„å•ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ï¼›</li><li>Executors.<strong>newWorkStealingPool</strong>ï¼šåˆ›å»ºä¸€ä¸ª<strong>æŠ¢å å¼æ‰§è¡Œ</strong>çš„çº¿ç¨‹æ± ï¼›</li><li>ThreadPoolExecutorï¼š<strong>æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹æ± </strong> çš„æ–¹å¼ï¼Œå®ƒæœ€å¤šåŒ…å«äº†7ä¸ªå‚æ•°å¯ä¾›è®¾ç½®ï¼Œæœ€å°‘å¯è®¾ç½®5ä¸ªå‚æ•°ã€‚</li></ul><h3 id="Executors"><a href="#Executors" class="headerlink" title="Executors"></a>Executors</h3><h4 id="åˆ›å»ºå›ºå®šæ•°é‡çš„çº¿ç¨‹æ± "><a href="#åˆ›å»ºå›ºå®šæ•°é‡çš„çº¿ç¨‹æ± " class="headerlink" title="åˆ›å»ºå›ºå®šæ•°é‡çš„çº¿ç¨‹æ± "></a>åˆ›å»ºå›ºå®šæ•°é‡çš„çº¿ç¨‹æ± </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªåŒ…å«5ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± </span></span><br><span class="line"><span class="type">ExecutorService</span> <span class="variable">threadPool</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">5</span>);</span><br><span class="line"><span class="comment">//ç»™äºˆ10ä¸ªèµ„æºåˆ†é…ç»™5ä¸ªçº¿ç¨‹å»åˆ†</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; <span class="number">10</span> ; i ++) &#123;</span><br><span class="line">threadPool.execute(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;çº¿ç¨‹åç§°:&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‰§è¡Œå®Œæ¯•åè®°å¾—å…³é—­ã€‚é¢„é˜²å ç”¨èµ„æº</span></span><br><span class="line">threadPool.shutdown();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException &#123;</span><br><span class="line"><span class="comment">//åˆ›å»º5ä¸ªçº¿ç¨‹</span></span><br><span class="line"><span class="type">ExecutorService</span> <span class="variable">threadPool</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">5</span>);</span><br><span class="line"><span class="comment">//ä½¿ç”¨çº¿ç¨‹æ± æ‰§è¡Œä»»åŠ¡ï¼Œä¹Ÿç»™çº¿ç¨‹æ± æ·»åŠ ä»»åŠ¡</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span> ; i ++) &#123;</span><br><span class="line"><span class="comment">//ä½¿ç”¨Callableæ®æ¥å£æ¥åˆ›å»ºçº¿ç¨‹</span></span><br><span class="line">Future&lt;Integer&gt; result = threadPool.submit(<span class="keyword">new</span> <span class="title class_">Callable</span>&lt;Integer&gt;() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Integer <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>().nextInt(<span class="number">9</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;éšæœºæ•°ï¼š&quot;</span> + num);</span><br><span class="line"><span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">System.out.println(<span class="string">&quot;çº¿ç¨‹æ± çš„è¿”å›ç»“æœï¼š&quot;</span> + result.get());</span><br><span class="line">&#125;</span><br><span class="line">        <span class="comment">//æ‰§è¡Œå®Œæ¯•åè®°å¾—å…³é—­ã€‚é¢„é˜²å ç”¨èµ„æº</span></span><br><span class="line">threadPool.shutdown();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šè¿°ä¸¤ç§æ–¹å¼ï¼Œæˆ‘å‘ç°å‘çº¿ç¨‹æ± ä¸­æ·»åŠ ä»»åŠ¡çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><ul><li>execute : åªæ‰§è¡Œä¸å¸¦è¿”å›å€¼çš„ä»»åŠ¡</li><li>submitï¼šå¯ä»¥æ‰§è¡Œåˆè¿”å›å€¼çš„ä»»åŠ¡æˆ–è€…æ²¡æœ‰è¿”å›å€¼çš„ä»»åŠ¡ã€‚</li></ul><h4 id="çº¿ç¨‹æ± å·¥å‚"><a href="#çº¿ç¨‹æ± å·¥å‚" class="headerlink" title="çº¿ç¨‹æ± å·¥å‚"></a>çº¿ç¨‹æ± å·¥å‚</h4><p>åœ¨ä¸Šé¢çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ²¡æœ‰è®¾ç½®çº¿ç¨‹åç§°æ—¶å€™ï¼Œä»–å°±ä¼šæ˜¯ä¸€ä¸ªé»˜è®¤åï¼Œçº¿ç¨‹å·¥å‚å¯ä»¥è®©æˆ‘ä»¬è‡ªå®šä¹‰çº¿ç¨‹åç§°æˆ–è€…ä¼˜å…ˆçº§ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="comment">//1.åˆ›å»ºçº¿ç¨‹å·¥å‚</span></span><br><span class="line">        ThreadFactory threadFactory=<span class="keyword">new</span> <span class="title class_">ThreadFactory</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Thread <span class="title function_">newThread</span><span class="params">(Runnable r)</span> &#123;</span><br><span class="line">                Thread thread=<span class="keyword">new</span> <span class="title class_">Thread</span>(r);</span><br><span class="line">                <span class="comment">//è®¾ç½®çº¿ç¨‹å‘½åè§„åˆ™</span></span><br><span class="line">                thread.setName(<span class="string">&quot;æˆ‘çš„çº¿ç¨‹-&quot;</span>+r.hashCode());</span><br><span class="line">                <span class="comment">//è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§</span></span><br><span class="line">                thread.setPriority(Thread.MAX_PRIORITY);</span><br><span class="line">                <span class="keyword">return</span> thread;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">threadPool</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">5</span>, threadFactory);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line">            threadPool.submit(()-&gt;&#123;</span><br><span class="line">                <span class="comment">//ä»»åŠ¡</span></span><br><span class="line">                <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> Thread.currentThread();</span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹æ± å¼€å§‹æ‰§è¡Œäº†ï¼š&quot;</span>+thread.getName()+<span class="string">&quot; &quot;</span>+thread.getPriority());</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å½“ç¨‹åºæ‰§è¡Œå®Œæ¯•åè®°å¾—å…³é—­çº¿ç¨‹æ± </span></span><br><span class="line">        threadPool.shutdown();</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>çº¿ç¨‹æ± å¼€å§‹æ‰§è¡Œäº†ï¼šæˆ‘çš„çº¿ç¨‹-1826771953 10<br>çº¿ç¨‹æ± å¼€å§‹æ‰§è¡Œäº†ï¼šæˆ‘çš„çº¿ç¨‹-455659002 10<br>çº¿ç¨‹æ± å¼€å§‹æ‰§è¡Œäº†ï¼šæˆ‘çš„çº¿ç¨‹-245257410 10<br>çº¿ç¨‹æ± å¼€å§‹æ‰§è¡Œäº†ï¼šæˆ‘çš„çº¿ç¨‹-1705736037 10<br>çº¿ç¨‹æ± å¼€å§‹æ‰§è¡Œäº†ï¼šæˆ‘çš„çº¿ç¨‹-1406718218 10</p></blockquote><h4 id="å¸¦ç¼“å­˜çš„çº¿ç¨‹æ± "><a href="#å¸¦ç¼“å­˜çš„çº¿ç¨‹æ± " class="headerlink" title="å¸¦ç¼“å­˜çš„çº¿ç¨‹æ± "></a>å¸¦ç¼“å­˜çš„çº¿ç¨‹æ± </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo4</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">threadPool</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">1000</span>; i++)&#123;</span><br><span class="line">            <span class="type">int</span> finalI=i;</span><br><span class="line">            threadPool.submit(()-&gt;&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;i:&quot;</span>+finalI+<span class="string">&quot;|çº¿ç¨‹åç§°ï¼š&quot;</span>+Thread.currentThread().getName());</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å½“ç¨‹åºæ‰§è¡Œå®Œæ¯•åè®°å¾—å…³é—­çº¿ç¨‹æ± </span></span><br><span class="line">        threadPool.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ­¤æˆ‘ä»¬å‘ç°ï¼Œæˆ‘ä»¬ç»™çº¿ç¨‹ä¸€åƒä¸ªä»»åŠ¡çš„æ—¶å€™ï¼Œä»–å¹¶ä¸ä¼šåˆ›å»º1000ä¸ªçº¿ç¨‹ï¼Œæˆ‘ä»¬é€šè¿‡æ‰§è¡Œå‘ç°æœ€å¤šä¼šåˆ›å»º100å¤šä¸ªçº¿ç¨‹ï¼Œç„¶åä¼šè¿›è¡Œå¤ç”¨ã€‚</p><p>æ•…æ­¤æˆ‘ä»¬åœ¨è¿™é‡Œæ€»ç»“ä¸€ä¸‹ï¼š</p><p>çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ä¹Ÿä¸èƒ½æ— é™åˆ¶åœ°è¢«åˆ›å»ºã€‚çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡åº”è¯¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œé€‚å½“çš„è®¾ç½®ï¼Œä»¥ä¾¿å……åˆ†åˆ©ç”¨ç³»ç»Ÿèµ„æºï¼Œæé«˜ç³»ç»Ÿçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚å¦‚æœçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡è¿‡å¤šï¼Œä¼šå¯¼è‡´ç³»ç»Ÿèµ„æºçš„è€—å°½ï¼Œä»è€Œå¯¼è‡´ç³»ç»Ÿçš„æ€§èƒ½ä¸‹é™æˆ–å´©æºƒã€‚å¦å¤–ï¼Œçº¿ç¨‹çš„åˆ›å»ºå’Œé”€æ¯ä¹Ÿä¼šå¸¦æ¥ä¸€å®šçš„å¼€é”€ï¼Œå¦‚æœçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡è¿‡å¤šï¼Œä¼šå¢åŠ çº¿ç¨‹çš„åˆ›å»ºå’Œé”€æ¯å¼€é”€ï¼Œä»è€Œé™ä½ç³»ç»Ÿçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</p><p>å› æ­¤ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µæ¥è®¾ç½®çº¿ç¨‹æ± çš„å¤§å°ï¼Œä»¥æ»¡è¶³åº”ç”¨çš„éœ€è¦ï¼Œå¹¶ä¿è¯ç³»ç»Ÿçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡åº”è¯¥æ ¹æ®ç³»ç»Ÿçš„ CPU æ ¸å¿ƒæ•°ã€å†…å­˜å¤§å°ã€ä»»åŠ¡ç±»å‹å’Œç³»ç»Ÿè´Ÿè½½ç­‰å› ç´ æ¥è¿›è¡Œè®¾ç½®ï¼Œä»¥è¾¾åˆ°æœ€ä¼˜çš„æ•ˆæœã€‚</p><h4 id="æ‰§è¡Œå®šæ—¶ä»»åŠ¡çš„çº¿ç¨‹æ± "><a href="#æ‰§è¡Œå®šæ—¶ä»»åŠ¡çš„çº¿ç¨‹æ± " class="headerlink" title="æ‰§è¡Œå®šæ—¶ä»»åŠ¡çš„çº¿ç¨‹æ± "></a>æ‰§è¡Œå®šæ—¶ä»»åŠ¡çš„çº¿ç¨‹æ± </h4><p>å»¶è¿Ÿæ‰§è¡Œä¸€æ¬¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo5</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ScheduledExecutorService</span> <span class="variable">service</span> <span class="operator">=</span> Executors.newScheduledThreadPool(<span class="number">5</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ·»åŠ ä»»åŠ¡çš„æ—¶é—´ï¼š&quot;</span>+ LocalDate.now());</span><br><span class="line">        scheduleTest(service);<span class="comment">//åªæ‰§è¡Œä¸€æ¬¡çš„å®šæ—¶ä»»åŠ¡</span></span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åªæ‰§è¡Œä¸€æ¬¡çš„å®šæ—¶ä»»åŠ¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> service</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">scheduleTest</span><span class="params">(ScheduledExecutorService service)</span> &#123;</span><br><span class="line">        <span class="comment">//æ‰§è¡Œå®šæ—¶ä»»åŠ¡(å»¶è¿Ÿ3ç§’æ‰§è¡Œ)</span></span><br><span class="line">        service.schedule(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æ‰§è¡Œäº†ä»»åŠ¡ï¼š&quot;</span>+LocalDateTime.now());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="number">3</span>, TimeUnit.SECONDS);</span><br><span class="line">        <span class="comment">//å½“å¾ªç¯æ‰§è¡Œå®Œæ¯•åè®°å¾—å…³é—­çº¿ç¨‹æ± </span></span><br><span class="line">        service.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ¬å»¶è¿Ÿæ‰§è¡Œä»»åŠ¡ï¼Œåªèƒ½æ‰§è¡Œä¸€æ¬¡ã€‚</p><p>åˆ›å»ºè¿™ä¸ªçº¿ç¨‹æ± æœ‰3ä¸ªå‚æ•°</p><ul><li>æ‰§è¡Œä»»åŠ¡</li><li>å»¶è¿Ÿnç§’æ‰§è¡Œ</li><li>é…åˆæ‰§è¡Œçš„æ—¶é—´å•ä½</li></ul><p><strong>å›ºå®šé¢‘ç‡æ‰§è¡Œ</strong></p><p>æˆ‘ä»¬å¯ä»¥è®©çº¿ç¨‹ä»¥ä»¥å›ºå®šé¢‘ç‡é—´éš”nç§’æ‰§è¡Œï¼Œåˆ›å»ºè¿™ä¸ªçº¿ç¨‹æ± æœ‰å››ä¸ªå‚æ•°ï¼š</p><ol><li>æ‰§è¡Œä»»åŠ¡</li><li>å»¶è¿Ÿnç§’æ‰§è¡Œ</li><li>æ‰§è¡Œå®šæ—¶ä»»åŠ¡çš„é¢‘ç‡</li><li>é…åˆ3æ‰§è¡Œçš„æ—¶é—´å•ä½</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo6</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ScheduledExecutorService</span> <span class="variable">service</span> <span class="operator">=</span> Executors.newScheduledThreadPool(<span class="number">5</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ·»åŠ ä»»åŠ¡çš„æ—¶é—´ï¼š&quot;</span>+ LocalDateTime.now());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2Sä¹‹åå¼€å§‹æ‰§è¡Œå®šæ—¶ä»»åŠ¡ï¼Œå®šæ—¶ä»»åŠ¡æ¯4sæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">        service.scheduleAtFixedRate(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æ‰§è¡Œä»»åŠ¡ï¼š&quot;</span>+LocalDateTime.now());</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="number">2</span>,<span class="number">4</span>,TimeUnit.SECONDS);</span><br><span class="line">        <span class="comment">//ç”±äºæ˜¯å®šæ—¶ä»»åŠ¡ï¼Œæ•…è€Œä¸èƒ½å¤Ÿè®©ä»–å…³é—­ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡å¾ªç¯æ¥æ§åˆ¶å…³é—­ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸åœ¨æè¿°</span></span><br><span class="line">        <span class="comment">// service.shutdown();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo7</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String [] args)</span> &#123;</span><br><span class="line"><span class="type">ScheduledExecutorService</span> <span class="variable">service</span> <span class="operator">=</span> Executors.newScheduledThreadPool(<span class="number">5</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;æ·»åŠ ä»»åŠ¡çš„æ—¶é—´ï¼š&quot;</span>+ LocalDateTime.now());</span><br><span class="line"><span class="comment">//    //2Sä¹‹åå¼€å§‹æ‰§è¡Œå®šæ—¶ä»»åŠ¡ï¼Œå®šæ—¶ä»»åŠ¡æ¯4sæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line"><span class="comment">//    service.scheduleAtFixedRate(new Runnable() &#123;</span></span><br><span class="line"><span class="comment">//        @Override</span></span><br><span class="line"><span class="comment">//        public void run() &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;æ‰§è¡Œä»»åŠ¡ï¼š&quot;+LocalDateTime.now());</span></span><br><span class="line"><span class="comment">//            try &#123;</span></span><br><span class="line"><span class="comment">//                Thread.sleep(1000);</span></span><br><span class="line"><span class="comment">//            &#125; catch (InterruptedException e) &#123;</span></span><br><span class="line"><span class="comment">//                e.printStackTrace();</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//    &#125;,2,4,TimeUnit.SECONDS);</span></span><br><span class="line">    <span class="comment">//2sä¹‹åå¼€å§‹æ‰§è¡Œï¼Œæ¯æ¬¡æ‰§è¡Œé—´éš”4s</span></span><br><span class="line">    service.scheduleWithFixedDelay(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ‰§è¡Œä»»åŠ¡ï¼š&quot;</span>+LocalDateTime.now());</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,<span class="number">2</span>,<span class="number">4</span>,TimeUnit.SECONDS);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ Java ä¸­ï¼ŒTimer ç±»æä¾›äº†ä¸¤ä¸ªæ–¹æ³•ç”¨äºå®šæ—¶æ‰§è¡Œä»»åŠ¡ï¼Œåˆ†åˆ«æ˜¯ <strong>scheduleAtFixedRate() å’Œ scheduleWithFixedDelay()</strong>ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥å®ç°å®šæ—¶æ‰§è¡Œä»»åŠ¡çš„åŠŸèƒ½ï¼Œä½†å®ƒä»¬çš„æ‰§è¡Œæ–¹å¼ç•¥æœ‰ä¸åŒï¼Œå…·ä½“åŒºåˆ«å¦‚ä¸‹ï¼š</p><ol><li><p>scheduleAtFixedRate() æ–¹æ³•ï¼šè¯¥æ–¹æ³•æ˜¯æŒ‰ç…§å›ºå®šçš„æ—¶é—´é—´éš”æ‰§è¡Œä»»åŠ¡ï¼Œå®ƒä¼šæŒ‰ç…§æŒ‡å®šçš„æ—¶é—´é—´éš”ä¸æ–­åœ°æ‰§è¡Œä»»åŠ¡ï¼Œæ— è®ºä¸Šä¸€æ¬¡ä»»åŠ¡æ˜¯å¦æ‰§è¡Œå®Œæˆï¼Œä¹Ÿä¸è€ƒè™‘ä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´ï¼Œå³ä½¿ä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´è¶…è¿‡äº†æ—¶é—´é—´éš”ï¼Œä¹Ÿä¼šæŒ‰ç…§æŒ‡å®šçš„æ—¶é—´é—´éš”å†æ¬¡æ‰§è¡Œä»»åŠ¡ã€‚</p></li><li><p>scheduleWithFixedDelay() æ–¹æ³•ï¼šè¯¥æ–¹æ³•æ˜¯åœ¨ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œç­‰å¾…æŒ‡å®šçš„æ—¶é—´é—´éš”å†æ¬¡æ‰§è¡Œä»»åŠ¡ï¼Œå®ƒä¼šåœ¨ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œç­‰å¾…æŒ‡å®šçš„æ—¶é—´é—´éš”ï¼Œç„¶åå†æ¬¡æ‰§è¡Œä»»åŠ¡ï¼Œè€ƒè™‘äº†ä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨ä¸Šä¸€æ¬¡ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œç­‰å¾…æŒ‡å®šçš„æ—¶é—´é—´éš”ï¼Œç„¶åå†æ¬¡æ‰§è¡Œä»»åŠ¡ã€‚</p></li></ol><p>å› æ­¤ï¼Œå¦‚æœéœ€è¦æŒ‰ç…§å›ºå®šçš„æ—¶é—´é—´éš”æ‰§è¡Œä»»åŠ¡ï¼Œæ— è®ºä»»åŠ¡æ˜¯å¦æ‰§è¡Œå®Œæˆï¼Œéƒ½éœ€è¦æŒ‰ç…§æŒ‡å®šçš„æ—¶é—´é—´éš”å†æ¬¡æ‰§è¡Œä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ scheduleAtFixedRate() æ–¹æ³•ï¼›å¦‚æœéœ€è¦åœ¨ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œç­‰å¾…æŒ‡å®šçš„æ—¶é—´é—´éš”å†æ¬¡æ‰§è¡Œä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ scheduleWithFixedDelay() æ–¹æ³•ã€‚</p><h4 id="å•çº¿ç¨‹çš„çº¿ç¨‹æ± "><a href="#å•çº¿ç¨‹çš„çº¿ç¨‹æ± " class="headerlink" title="å•çº¿ç¨‹çš„çº¿ç¨‹æ± "></a>å•çº¿ç¨‹çš„çº¿ç¨‹æ± </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo8</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newSingleThreadExecutor();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line"><span class="type">int</span> finalI=i;</span><br><span class="line">executorService.submit(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;ä»»åŠ¡åï¼š&quot;</span>+finalI+<span class="string">&quot;çº¿ç¨‹åï¼š&quot;</span>+Thread.currentThread().getName());</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è€æ ·å­æ‰§è¡Œå®Œæ¯•åè®°å¾—å…³é—­</span></span><br><span class="line">executorService.shutdown();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å•çº¿ç¨‹çš„çº¿ç¨‹æ± å’Œå•çº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä»¥åŠå…¶å„è‡ªçš„ä½œç”¨ï¼Ÿ</p><p>å•çº¿ç¨‹çš„çº¿ç¨‹æ± å’Œå•çº¿ç¨‹ä¹‹é—´æœ‰ä»¥ä¸‹å‡ ç‚¹åŒºåˆ«ï¼š</p><ol><li><p>çº¿ç¨‹æ± æ˜¯ä¸€ç§å¯ä»¥ç®¡ç†å’Œè°ƒåº¦å¤šä¸ªçº¿ç¨‹çš„æœºåˆ¶ï¼Œå¯ä»¥é‡å¤åˆ©ç”¨çº¿ç¨‹ï¼Œä»è€Œé¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„å¼€é”€ï¼Œæé«˜ç¨‹åºçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚è€Œå•çº¿ç¨‹åˆ™åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œæ— æ³•è¿›è¡Œä»»åŠ¡çš„å¹¶è¡Œå¤„ç†ã€‚</p></li><li><p>çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚è¿›è¡ŒåŠ¨æ€è°ƒæ•´ï¼Œå¯ä»¥å¢åŠ æˆ–å‡å°‘çº¿ç¨‹çš„æ•°é‡ï¼Œä»¥é€‚åº”ä¸åŒçš„è´Ÿè½½å’Œä»»åŠ¡ç±»å‹ã€‚è€Œå•çº¿ç¨‹åˆ™åªèƒ½å¤„ç†ä¸€ä¸ªä»»åŠ¡ï¼Œæ— æ³•è¿›è¡Œçº¿ç¨‹æ•°é‡çš„åŠ¨æ€è°ƒæ•´ã€‚</p></li><li>çº¿ç¨‹æ± å¯ä»¥ç®¡ç†å’Œè°ƒåº¦å¤šä¸ªä»»åŠ¡ã€‚</li></ol><h4 id="å®šæ—¶ä»»åŠ¡çš„å•çº¿ç¨‹çº¿ç¨‹æ± "><a href="#å®šæ—¶ä»»åŠ¡çš„å•çº¿ç¨‹çº¿ç¨‹æ± " class="headerlink" title="å®šæ—¶ä»»åŠ¡çš„å•çº¿ç¨‹çº¿ç¨‹æ± "></a>å®šæ—¶ä»»åŠ¡çš„å•çº¿ç¨‹çº¿ç¨‹æ± </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo9</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">ScheduledExecutorService</span> <span class="variable">service</span> <span class="operator">=</span> Executors.newSingleThreadScheduledExecutor();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;æ‰§è¡Œä»»åŠ¡çš„æ—¶é—´ï¼š&quot;</span> + LocalDateTime.now());</span><br><span class="line">service.schedule(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ‰§è¡Œä»»åŠ¡ï¼š&quot;</span> + LocalDateTime.now());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ‰§è¡Œä»»åŠ¡ 2ç§’åæ‰§è¡Œ ï¼Œå•ä½ TimeUnit.Secondsç§’</span></span><br><span class="line">&#125;, <span class="number">2</span>, TimeUnit.SECONDS);</span><br><span class="line"><span class="comment">//å½“å®šæ—¶ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åè®°å¾—å…³é—­</span></span><br><span class="line">service.shutdown();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ ¹æ®å½“å‰CPUç”Ÿæˆçº¿ç¨‹æ± "><a href="#æ ¹æ®å½“å‰CPUç”Ÿæˆçº¿ç¨‹æ± " class="headerlink" title="æ ¹æ®å½“å‰CPUç”Ÿæˆçº¿ç¨‹æ± "></a>æ ¹æ®å½“å‰CPUç”Ÿæˆçº¿ç¨‹æ± </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo10</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//æ ¹æ®å½“å‰ç”µè„‘çš„CPUæ¥åˆ›å»ºçº¿ç¨‹æ± </span></span><br><span class="line"><span class="type">ExecutorService</span> <span class="variable">service</span> <span class="operator">=</span> Executors.newWorkStealingPool();</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; <span class="number">100</span>; i ++ ) &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">finaIi</span>  <span class="operator">=</span> i ;</span><br><span class="line">service.submit(()-&gt;&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;ä»»åŠ¡ï¼š&quot;</span> + finaIi + <span class="string">&quot;çº¿ç¨‹åï¼š&quot;</span> + Thread.currentThread());</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­çº¿ç¨‹æ˜¯å¦</span></span><br><span class="line"><span class="keyword">while</span>(!service.isTerminated()) &#123;</span><br><span class="line"><span class="comment">//æ‰§è¡Œå®Œæ¯•åè®°å¾—å…³é—­çº¿ç¨‹æ± </span></span><br><span class="line">service.shutdown();</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ThreadPoolExecutor"><a href="#ThreadPoolExecutor" class="headerlink" title="ThreadPoolExecutor"></a>ThreadPoolExecutor</h3><h4 id="ThreadPoolExecutorå’ŒExecutorsæ¯”è¾ƒ"><a href="#ThreadPoolExecutorå’ŒExecutorsæ¯”è¾ƒ" class="headerlink" title="ThreadPoolExecutorå’ŒExecutorsæ¯”è¾ƒ"></a><strong>ThreadPoolExecutorå’ŒExecutors</strong>æ¯”è¾ƒ</h4><p>éƒ½æ˜¯Javaä¸­ç”¨äºç”Ÿæˆçº¿ç¨‹æ± çš„ç±»ï¼Œå®ƒä»¬æœ‰ä»¥ä¸‹å‡ ä¸ªåŒºåˆ«ï¼š</p><ol><li><p>ThreadPoolExecutoræ˜¯ä¸€ä¸ª<strong>æ›´åº•å±‚çš„ç±»</strong>ï¼Œå®ƒæä¾›äº†æ›´å¤šçš„é…ç½®é€‰é¡¹ï¼Œå¦‚çº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹æ•°ã€æœ€å¤§çº¿ç¨‹æ•°ã€ä»»åŠ¡é˜Ÿåˆ—ç­‰ï¼Œå¯ä»¥æ›´åŠ çµæ´»åœ°æ§åˆ¶çº¿ç¨‹æ± çš„è¡Œä¸ºã€‚<strong>è€ŒExecutorsåˆ™æ˜¯åœ¨ThreadPoolExecutoråŸºç¡€ä¸Šè¿›è¡Œäº†å°è£…</strong>ï¼Œ<strong>æä¾›äº†ä¸€äº›é¢„å®šä¹‰çš„çº¿ç¨‹æ± é…ç½®é€‰é¡¹ï¼Œå¦‚newFixedThreadPoolã€newCachedThreadPoolç­‰</strong>ï¼Œæ–¹ä¾¿ç”¨æˆ·å¿«é€Ÿåˆ›å»ºçº¿ç¨‹æ± ã€‚</p></li><li><p>ThreadPoolExecutorå¯ä»¥é€šè¿‡<strong>è‡ªå®šä¹‰RejectedExecutionHandleræ¥å¤„ç†ä»»åŠ¡è¢«æ‹’ç»æ‰§è¡Œçš„æƒ…å†µ</strong>ï¼Œè€Œ<strong>Executorsåªæä¾›äº†ä¸€äº›ç®€å•çš„æ‹’ç»ç­–ç•¥</strong>ï¼Œå¦‚æŠ›å‡ºå¼‚å¸¸ã€ä¸¢å¼ƒä»»åŠ¡ç­‰ã€‚</p></li><li><p><strong>Executorsç”Ÿæˆçš„çº¿ç¨‹æ± é€šå¸¸æ˜¯æ— ç•Œé˜Ÿåˆ—çš„</strong>ï¼Œå¦‚æœä»»åŠ¡æ•°é‡è¿‡å¤šï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æº¢å‡ºç­‰é—®é¢˜ã€‚è€Œ<strong>ThreadPoolExecutoråˆ™å¯ä»¥é€šè¿‡é…ç½®æœ‰ç•Œé˜Ÿåˆ—æˆ–è€…æ‹’ç»</strong>ç­–ç•¥æ¥é¿å…è¿™ç§æƒ…å†µã€‚</p></li><li><p>åœ¨Java 8ä¹‹å‰ï¼ŒExecutorsç”Ÿæˆçš„çº¿ç¨‹æ± ä¸­çš„å·¥ä½œçº¿ç¨‹éƒ½æ˜¯<strong>éå®ˆæŠ¤çº¿ç¨‹</strong>ï¼Œå³ä½¿ä¸»çº¿ç¨‹ç»“æŸï¼Œå·¥ä½œçº¿ç¨‹ä¹Ÿä¼šç»§ç»­æ‰§è¡Œã€‚è€ŒThreadPoolExecutoråˆ™å¯ä»¥é€šè¿‡è®¾ç½®å·¥ä½œçº¿ç¨‹ä¸ºå®ˆæŠ¤çº¿ç¨‹æ¥é¿å…è¿™ç§æƒ…å†µã€‚</p></li></ol><p>ThreadPoolExecutorå’ŒExecutorså„è‡ªå¯ä»¥è§£å†³çš„é—®é¢˜ä¹Ÿæœ‰æ‰€å·®å¼‚ã€‚ThreadPoolExecutoré€‚åˆäºéœ€è¦æ›´ç²¾ç»†çš„çº¿ç¨‹æ± é…ç½®ã€éœ€è¦è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥ã€éœ€è¦æœ‰ç•Œé˜Ÿåˆ—ç­‰æƒ…å†µã€‚è€ŒExecutorsåˆ™é€‚åˆäºå¿«é€Ÿåˆ›å»ºçº¿ç¨‹æ± ï¼Œä¸”ä»»åŠ¡æ•°é‡ä¸ä¼šè¿‡å¤šçš„æƒ…å†µã€‚éœ€è¦æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„ç±»æ¥ç”Ÿæˆçº¿ç¨‹æ± ã€‚</p><h4 id="Executorså­˜åœ¨çš„é—®é¢˜"><a href="#Executorså­˜åœ¨çš„é—®é¢˜" class="headerlink" title="Executorså­˜åœ¨çš„é—®é¢˜"></a>Executorså­˜åœ¨çš„é—®é¢˜</h4><p>è™½ç„¶Executorså¯ä»¥å¿«é€Ÿåˆ›å»ºçº¿ç¨‹æ± ï¼Œä½†åœ¨ä¸€äº›æƒ…å†µä¸‹å¯èƒ½ä¼šå­˜åœ¨é—®é¢˜ï¼Œå¦‚ä¸‹ï¼š</p><ol><li><p><strong>FixedThreadPool</strong>å’Œ<strong>SingleThreadExecutor</strong>çš„çº¿ç¨‹æ•°æ˜¯å›ºå®šçš„ï¼Œå¦‚æœä»»åŠ¡æ•°é‡è¿‡å¤šï¼Œä¼šå¯¼è‡´é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡å †ç§¯ï¼Œä»è€Œå ç”¨å¤§é‡å†…å­˜ï¼Œç”šè‡³å¯¼è‡´OOMå¼‚å¸¸ã€‚</p></li><li><p>CachedThreadPoolçš„æœ€å¤§çº¿ç¨‹æ•°æ˜¯<strong>Integer.MAX_VALUE</strong>ï¼Œå¦‚æœ<strong>ä»»åŠ¡æ•°é‡è¿‡å¤šï¼Œä¼šåˆ›å»ºå¤§é‡çº¿ç¨‹ï¼Œå ç”¨å¤§é‡ç³»ç»Ÿèµ„æºï¼Œå¯¼è‡´ç³»ç»Ÿå´©æºƒ</strong>ã€‚</p></li><li><p>Executorsç”Ÿæˆçš„çº¿ç¨‹æ± ä¸­çš„å·¥ä½œçº¿ç¨‹éƒ½æ˜¯<strong>éå®ˆæŠ¤çº¿ç¨‹</strong>ï¼Œå³ä½¿<strong>ä¸»çº¿ç¨‹ç»“æŸï¼Œå·¥ä½œçº¿ç¨‹ä¹Ÿä¼šç»§ç»­æ‰§è¡Œã€‚å¦‚æœåº”ç”¨ç¨‹åºæ²¡æœ‰æ˜¾å¼åœ°ç»ˆæ­¢çº¿ç¨‹æ± ï¼Œä¼šå¯¼è‡´åº”ç”¨ç¨‹åºæ— æ³•æ­£å¸¸é€€å‡ºï¼Œä»è€Œå¯¼è‡´å†…å­˜æ³„æ¼ç­‰é—®é¢˜ã€‚</strong></p></li><li><p>Executorsæä¾›çš„æ‹’ç»ç­–ç•¥æœ‰ä¸€äº›å±€é™æ€§ï¼Œ<strong>ä¾‹å¦‚åœ¨ä»»åŠ¡è¢«æ‹’ç»åï¼Œæ— æ³•é‡æ–°æäº¤ä»»åŠ¡ç­‰</strong>ã€‚</p></li></ol><p>å› æ­¤ï¼Œå¯¹äºä¸åŒçš„åº”ç”¨åœºæ™¯ï¼Œåº”è¯¥é€‰æ‹©åˆé€‚çš„çº¿ç¨‹æ± ç±»å‹æˆ–è€…ç›´æ¥ä½¿ç”¨ThreadPoolExecutoræ¥æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹æ± ï¼Œä»¥é¿å…å‡ºç°ä¸Šè¿°é—®é¢˜ã€‚</p><h4 id="ThreadPoolExecutorçš„ä»‹ç»"><a href="#ThreadPoolExecutorçš„ä»‹ç»" class="headerlink" title="ThreadPoolExecutorçš„ä»‹ç»"></a>ThreadPoolExecutorçš„ä»‹ç»</h4><p>ThreadPoolExecutoræ˜¯Javaä¸­ç”¨äºåˆ›å»ºçº¿ç¨‹æ± çš„ç±»ï¼Œå®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªå‚æ•°ï¼š</p><ol><li><p><strong>corePoolSize</strong>ï¼šçº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œå³çº¿ç¨‹æ± ä¸­å§‹ç»ˆå­˜åœ¨çš„çº¿ç¨‹æ•°ã€‚å¦‚æœçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°å°äºcorePoolSizeï¼Œåˆ™ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œç›´åˆ°çº¿ç¨‹æ•°ç­‰äºcorePoolSizeã€‚</p></li><li><p><strong>maximumPoolSize</strong>ï¼šçº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹æ•°ï¼Œå³çº¿ç¨‹æ± ä¸­æœ€å¤šèƒ½å­˜åœ¨çš„çº¿ç¨‹æ•°ã€‚å¦‚æœä»»åŠ¡æ•°é‡è¶…è¿‡äº†çº¿ç¨‹æ± çš„å®¹é‡ï¼Œåˆ™ä¼šæ ¹æ®æ‹’ç»ç­–ç•¥å¤„ç†è¿™äº›ä»»åŠ¡ã€‚</p></li><li><p><strong>keepAliveTime</strong>ï¼šçº¿ç¨‹æ± ä¸­éæ ¸å¿ƒçº¿ç¨‹çš„ç©ºé—²å­˜æ´»æ—¶é—´ã€‚å¦‚æœçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°å¤§äºcorePoolSizeï¼Œå¹¶ä¸”æŸä¸ªçº¿ç¨‹ç©ºé—²çš„æ—¶é—´è¶…è¿‡äº†keepAliveTimeï¼Œåˆ™è¯¥çº¿ç¨‹ä¼šè¢«é”€æ¯ç›´åˆ°çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ç­‰äºcorePoolSizeã€‚</p></li><li><p><strong>TimeUnit</strong>ï¼škeepAliveTimeçš„æ—¶é—´å•ä½ï¼Œä¾‹å¦‚TimeUnit.SECONDSã€‚</p></li><li><p><strong>workQueue</strong>ï¼šçº¿ç¨‹æ± ä¸­çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œç”¨äºå­˜å‚¨ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡ã€‚å¯ä»¥é€‰æ‹©ä¸åŒç±»å‹çš„é˜Ÿåˆ—ï¼Œå¦‚æœ‰ç•Œé˜Ÿåˆ—å’Œæ— ç•Œé˜Ÿåˆ—ã€‚</p></li><li><p><strong>threadFactory</strong>ï¼šçº¿ç¨‹å·¥å‚ï¼Œç”¨äºåˆ›å»ºæ–°çš„çº¿ç¨‹ã€‚å¯ä»¥è‡ªå®šä¹‰çº¿ç¨‹çš„åç§°ã€ä¼˜å…ˆçº§ç­‰å±æ€§ã€‚</p></li><li><p><strong>handler</strong>ï¼šæ‹’ç»ç­–ç•¥ï¼Œç”¨äºå¤„ç†æ— æ³•æ‰§è¡Œçš„ä»»åŠ¡ã€‚å¯ä»¥é€‰æ‹©ä¸åŒçš„ç­–ç•¥ï¼Œå¦‚æŠ›å‡ºå¼‚å¸¸ã€ä¸¢å¼ƒä»»åŠ¡ã€ç­‰å¾…ä¸€æ®µæ—¶é—´å†é‡è¯•ç­‰ã€‚</p></li></ol><p>è¿™äº›å‚æ•°çš„å…·ä½“ä½œç”¨å¦‚ä¸‹ï¼š</p><blockquote><ol><li>é€šè¿‡corePoolSizeå’ŒmaximumPoolSizeæ¥æ§åˆ¶çº¿ç¨‹æ± ä¸­çš„å·¥ä½œçº¿ç¨‹æ•°é‡ï¼Œä»¥è¾¾åˆ°æœ€ä¼˜çš„æ€§èƒ½å’Œèµ„æºåˆ©ç”¨æ•ˆç‡ã€‚</li><li>é€šè¿‡keepAliveTimeå’ŒworkQueueæ¥æ§åˆ¶çº¿ç¨‹æ± ä¸­çº¿ç¨‹çš„å­˜æ´»æ—¶é—´å’Œä»»åŠ¡çš„æ’é˜Ÿç­–ç•¥ï¼Œä»¥é¿å…ä»»åŠ¡å †ç§¯å’Œèµ„æºæµªè´¹ã€‚</li><li>é€šè¿‡threadFactoryå¯ä»¥è‡ªå®šä¹‰çº¿ç¨‹çš„å±æ€§ï¼Œå¦‚çº¿ç¨‹åç§°ç­‰ã€‚</li></ol></blockquote><p>å½“æˆ‘ä»¬ä½¿ç”¨ThreaPoolExecutoråˆ›å»ºçº¿ç¨‹æ± çš„æ—¶å€™ï¼Œé»˜è®¤æœ€å°‘ä½¿ç”¨5ä¸ªå‚æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue)</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">ThreadFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadFactory</span>() &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Thread <span class="title function_">newThread</span><span class="params">(Runnable r)</span> &#123;</span><br><span class="line"><span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(r);</span><br><span class="line"><span class="keyword">return</span> thread;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">ThreadPoolExecutor</span> <span class="variable">executor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(</span><br><span class="line"><span class="number">2</span>,</span><br><span class="line"><span class="number">5</span>,</span><br><span class="line"><span class="number">10</span>,</span><br><span class="line">TimeUnit.SECONDS,</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">LinkedBlockingDeque</span>&lt;Runnable&gt;(<span class="number">2</span>),</span><br><span class="line">factory,</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.DiscardPolicy());</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span> ; i &lt; <span class="number">6</span> ; i ++) &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">finaIi</span> <span class="operator">=</span> i ;</span><br><span class="line">executor.submit(()-&gt;&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Thread.sleep(<span class="number">10</span> * finaIi);</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;ä»»åŠ¡ï¼š&quot;</span> + finaIi);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line">        <span class="comment">//æ‰§è¡Œå¾ªç¯å®Œæ¯•åå…³é—­çº¿ç¨‹æ± </span></span><br><span class="line">executor.shutdown();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="çº¿ç¨‹æ± çš„æ‰§è¡Œæµç¨‹"><a href="#çº¿ç¨‹æ± çš„æ‰§è¡Œæµç¨‹" class="headerlink" title="çº¿ç¨‹æ± çš„æ‰§è¡Œæµç¨‹"></a>çº¿ç¨‹æ± çš„æ‰§è¡Œæµç¨‹</h4><p>çº¿ç¨‹æ± çš„æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p><ol><li><p>é¦–å…ˆï¼Œçº¿ç¨‹æ± ä¼šåˆ›å»ºä¸€äº›åˆå§‹çš„æ ¸å¿ƒçº¿ç¨‹ï¼Œå¹¶å°†å®ƒä»¬æ”¾å…¥å·¥ä½œé˜Ÿåˆ—ä¸­ã€‚</p></li><li><p>å½“æœ‰ä»»åŠ¡è¿›æ¥æ—¶ï¼Œçº¿ç¨‹æ± ä¼šä»å·¥ä½œé˜Ÿåˆ—ä¸­é€‰å–ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ã€‚</p></li><li><p>å¦‚æœæ­¤æ—¶çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°å°äºæ ¸å¿ƒçº¿ç¨‹æ•°(corePoolSize)ä¸”æœ‰ç©ºé—²çº¿ç¨‹ï¼Œåˆ™ä¼šç«‹å³åˆ›å»ºæ–°çš„çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ã€‚</p></li><li><p>å¦‚æœæ­¤æ—¶çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°å·²ç»è¾¾åˆ°äº†æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œä¸”å·¥ä½œé˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™ä¼šå°†ä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚</p></li><li><p>å¦‚æœæ­¤æ—¶ä»»åŠ¡é˜Ÿåˆ—å·²æ»¡ï¼Œä¸”çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°å°äºæœ€å¤§çº¿ç¨‹æ•°(maximumPoolSize)ï¼Œåˆ™ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ã€‚</p></li><li><p>å¦‚æœæ­¤æ—¶çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°å·²ç»è¾¾åˆ°äº†æœ€å¤§çº¿ç¨‹æ•°ï¼Œä¸”ä»»åŠ¡é˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™ä¼šæŒ‰ç…§æ‹’ç»ç­–ç•¥(RejectedExecutionHandler)æ¥å¤„ç†ä»»åŠ¡ã€‚å¸¸è§çš„æ‹’ç»ç­–ç•¥æœ‰ï¼šæŠ›å‡ºå¼‚å¸¸ã€ä¸¢å¼ƒä»»åŠ¡ã€ç­‰å¾…ä¸€æ®µæ—¶é—´å†é‡è¯•ç­‰ã€‚</p></li><li><p>å½“æŸä¸ªçº¿ç¨‹æ‰§è¡Œå®Œä»»åŠ¡åï¼Œä¼šä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä¸‹ä¸€ä¸ªä»»åŠ¡ç»§ç»­æ‰§è¡Œï¼Œç›´åˆ°çº¿ç¨‹æ± å…³é—­æˆ–è€…å‡ºç°å¼‚å¸¸ã€‚</p></li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œçº¿ç¨‹æ± çš„æ‰§è¡Œæµç¨‹æ˜¯å¼‚æ­¥çš„ï¼Œä»»åŠ¡çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚çº¿ç¨‹æ± åœ¨æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œä¼šæ ¹æ®ä»»åŠ¡çš„ä¼˜å…ˆçº§ã€æ‰§è¡Œæ—¶é—´ç­‰å› ç´ æ¥é€‰æ‹©æ‰§è¡Œé¡ºåºï¼Œå…·ä½“çš„æ‰§è¡Œæµç¨‹ä¼šæ ¹æ®ä¸åŒçš„çº¿ç¨‹æ± å®ç°è€Œæœ‰æ‰€å·®å¼‚ã€‚</p><h4 id="æ‹’ç»ç­–ç•¥"><a href="#æ‹’ç»ç­–ç•¥" class="headerlink" title="æ‹’ç»ç­–ç•¥"></a>æ‹’ç»ç­–ç•¥</h4><p>ç›®å‰çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥å…±è®¡æœ‰5ç§ï¼Œå…¶ä¸­æœ‰å››ç§JDKæä¾›çš„å’Œä¸€ç§è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥ã€‚</p><p>çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥æŒ‡çš„æ˜¯å½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹å·²ç»å…¨éƒ¨è¢«å ç”¨ï¼Œé˜Ÿåˆ—ä¹Ÿå·²æ»¡ï¼Œæ— æ³•ç»§ç»­æ¥å—æ–°çš„ä»»åŠ¡æ—¶ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†è¿™äº›è¢«æ‹’ç»çš„ä»»åŠ¡ã€‚å¸¸è§çš„çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥åŒ…æ‹¬ï¼š</p><ol><li><strong>AbortPolicyï¼ˆé»˜è®¤ç­–ç•¥ï¼‰</strong>ï¼šç›´æ¥æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸ï¼Œè¡¨ç¤ºæ‹’ç»æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚</li><li><strong>CallerRunsPolicy</strong>ï¼šç”±è°ƒç”¨çº¿ç¨‹å¤„ç†è¯¥ä»»åŠ¡ï¼Œå³åœ¨æäº¤ä»»åŠ¡çš„çº¿ç¨‹ä¸­ç›´æ¥æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚è¿™ç§ç­–ç•¥å¯èƒ½ä¼šé™ä½æ•´ä¸ªç³»ç»Ÿçš„ååé‡ï¼Œå› ä¸ºæäº¤ä»»åŠ¡çš„çº¿ç¨‹å¯èƒ½ä¸æ˜¯ä¸“é—¨ç”¨æ¥å¤„ç†ä»»åŠ¡çš„çº¿ç¨‹ï¼Œè€Œæ˜¯ä¸šåŠ¡çº¿ç¨‹ã€‚</li><li><strong>DiscardPolicy</strong>ï¼šç›´æ¥ä¸¢å¼ƒè¯¥ä»»åŠ¡ï¼Œä¸åšä»»ä½•å¤„ç†ã€‚</li><li><strong>DiscardOldestPolicy</strong>ï¼šæŠ›å¼ƒæœ€æ—©åŠ å…¥é˜Ÿåˆ—çš„ä»»åŠ¡ï¼Œå¹¶å°è¯•å†æ¬¡æäº¤å½“å‰ä»»åŠ¡ã€‚</li><li><strong>è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥</strong>ï¼šç”¨æˆ·å¯ä»¥æ ¹æ®ä¸šåŠ¡åœºæ™¯ï¼Œè‡ªå®šä¹‰æ‹’ç»ç­–ç•¥ï¼Œä¾‹å¦‚å°†ä»»åŠ¡è®°å½•åˆ°æ—¥å¿—ä¸­ã€å°†ä»»åŠ¡æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ç­‰ç­‰ã€‚</li></ol><p>é€‰æ‹©åˆé€‚çš„çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥ï¼Œå¯ä»¥æ›´å¥½åœ°ä¿éšœç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p><p>ç¬¬ä¸€ç§<strong>AbortPolicy</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">ThreadFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadFactory</span>() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Thread <span class="title function_">newThread</span><span class="params">(Runnable r)</span> &#123;</span><br><span class="line"><span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(r);</span><br><span class="line"><span class="keyword">return</span> thread;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">ThreadPoolExecutor</span> <span class="variable">executor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(</span><br><span class="line"><span class="number">2</span>,</span><br><span class="line"><span class="number">2</span>,</span><br><span class="line"><span class="number">10</span>,</span><br><span class="line">TimeUnit.SECONDS,</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">LinkedBlockingDeque</span>&lt;&gt;(<span class="number">2</span>),</span><br><span class="line">factory,</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.AbortPolicy() <span class="comment">//æ‹’ç»ç­–ç•¥</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; <span class="number">5</span>; i ++) &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">finaIi</span> <span class="operator">=</span> i;</span><br><span class="line">executor.submit(()-&gt;&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Thread.sleep(<span class="number">10</span>*finaIi);</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;ä»»åŠ¡ï¼š&quot;</span> + finaIi);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line">        <span class="comment">//æ‰§è¡Œå¾ªç¯å®Œæ¯•åå…³é—­çº¿ç¨‹æ± </span></span><br><span class="line">executor.shutdown();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§<strong>CallerRunsPolicy()</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰‹åŠ¨æ–¹å¼åˆ›å»ºçº¿ç¨‹æ± </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ThreadFactory factory=<span class="keyword">new</span> <span class="title class_">ThreadFactory</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Thread <span class="title function_">newThread</span><span class="params">(Runnable r)</span> &#123;</span><br><span class="line">                Thread thread=<span class="keyword">new</span> <span class="title class_">Thread</span>(r);</span><br><span class="line">                <span class="keyword">return</span> thread;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        ThreadPoolExecutor executor=<span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(</span><br><span class="line">            <span class="number">2</span>,</span><br><span class="line">            <span class="number">2</span>,</span><br><span class="line">            <span class="number">10</span>,</span><br><span class="line">            TimeUnit.SECONDS,</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">LinkedBlockingDeque</span>&lt;&gt;(<span class="number">2</span>),</span><br><span class="line">            factory,</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.CallerRunsPolicy());  <span class="comment">//æ‹’ç»ç­–ç•¥</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> finalI=i;</span><br><span class="line">            executor.submit(()-&gt;&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">10</span>*finalI);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="string">&quot;ä»»åŠ¡ï¼š&quot;</span>+finalI);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ‰§è¡Œå¾ªç¯å®Œæ¯•åå…³é—­çº¿ç¨‹æ± </span></span><br><span class="line">executor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰ç§ï¼š<strong>DiscardPolicy</strong> ()</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ThreadFactory factory=<span class="keyword">new</span> <span class="title class_">ThreadFactory</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Thread <span class="title function_">newThread</span><span class="params">(Runnable r)</span> &#123;</span><br><span class="line">                Thread thread=<span class="keyword">new</span> <span class="title class_">Thread</span>(r);</span><br><span class="line">                <span class="keyword">return</span> thread;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        ThreadPoolExecutor executor=<span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(</span><br><span class="line">        <span class="number">2</span>,</span><br><span class="line">        <span class="number">2</span>,</span><br><span class="line">        <span class="number">10</span>,</span><br><span class="line">                TimeUnit.SECONDS,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">LinkedBlockingDeque</span>&lt;&gt;(<span class="number">2</span>),</span><br><span class="line">                factory,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.DiscardPolicy()</span><br><span class="line">                );</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> finalI=i;</span><br><span class="line">            executor.submit(()-&gt;&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">10</span>*finalI);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="string">&quot;ä»»åŠ¡ï¼š&quot;</span>+finalI);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ‰§è¡Œå¾ªç¯å®Œæ¯•åå…³é—­çº¿ç¨‹æ± </span></span><br><span class="line">executor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬å››ç§ï¼š<strong>DiscardOldestPolicy()</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo5</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ThreadFactory factory=<span class="keyword">new</span> <span class="title class_">ThreadFactory</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Thread <span class="title function_">newThread</span><span class="params">(Runnable r)</span> &#123;</span><br><span class="line">                Thread thread=<span class="keyword">new</span> <span class="title class_">Thread</span>(r);</span><br><span class="line">                <span class="keyword">return</span> thread;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        ThreadPoolExecutor executor=<span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(</span><br><span class="line">        <span class="number">2</span>,</span><br><span class="line">        <span class="number">2</span>,</span><br><span class="line">        <span class="number">10</span>,</span><br><span class="line">                TimeUnit.SECONDS,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">LinkedBlockingDeque</span>&lt;&gt;(<span class="number">2</span>),</span><br><span class="line">                factory,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.DiscardOldestPolicy() <span class="comment">//æ‹’ç»ç­–ç•¥</span></span><br><span class="line">                );</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> finalI=i;</span><br><span class="line">            executor.submit(()-&gt;&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">10</span>*finalI);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="string">&quot;ä»»åŠ¡ï¼š&quot;</span>+finalI);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ‰§è¡Œå¾ªç¯å®Œæ¯•åå…³é—­çº¿ç¨‹æ± </span></span><br><span class="line">executor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äº”ç§ï¼šè‡ªå®šä¹‰æ‹’ç»ç­–ç•¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo6</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ThreadFactory factory=<span class="keyword">new</span> <span class="title class_">ThreadFactory</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Thread <span class="title function_">newThread</span><span class="params">(Runnable r)</span> &#123;</span><br><span class="line">                Thread thread=<span class="keyword">new</span> <span class="title class_">Thread</span>(r);</span><br><span class="line">                <span class="keyword">return</span> thread;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        ThreadPoolExecutor executor=<span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(</span><br><span class="line">        <span class="number">2</span>,</span><br><span class="line">        <span class="number">2</span>,</span><br><span class="line">        <span class="number">10</span>,</span><br><span class="line">                TimeUnit.SECONDS,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">LinkedBlockingDeque</span>&lt;&gt;(<span class="number">2</span>),</span><br><span class="line">                factory,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">RejectedExecutionHandler</span>() &#123;  <span class="comment">//è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rejectedExecution</span><span class="params">(Runnable r, ThreadPoolExecutor executor)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æˆ‘æ‰§è¡Œäº†è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> finalI=i;</span><br><span class="line">            executor.submit(()-&gt;&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">10</span>*finalI);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="string">&quot;ä»»åŠ¡ï¼š&quot;</span>+finalI);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ‰§è¡Œå¾ªç¯å®Œæ¯•åå…³é—­çº¿ç¨‹æ± </span></span><br><span class="line">executor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="çº¿ç¨‹æ± çš„çŠ¶æ€"><a href="#çº¿ç¨‹æ± çš„çŠ¶æ€" class="headerlink" title="çº¿ç¨‹æ± çš„çŠ¶æ€"></a>çº¿ç¨‹æ± çš„çŠ¶æ€</h3><p>çº¿ç¨‹æ± çš„çŠ¶æ€é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š</p><ol><li><p><strong>RUNNING</strong>ï¼šçº¿ç¨‹æ± å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œå¯ä»¥æ¥å—æ–°ä»»åŠ¡å¹¶å¤„ç†å·²æœ‰çš„ä»»åŠ¡ã€‚</p></li><li><p><strong>SHUTDOWN</strong>ï¼šçº¿ç¨‹æ± å¤„äºå…³é—­çŠ¶æ€ï¼Œä¸å†æ¥å—æ–°ä»»åŠ¡ï¼Œä½†ä¼šå¤„ç†å·²æœ‰çš„ä»»åŠ¡ã€‚</p></li><li><p><strong>STOP</strong>ï¼šçº¿ç¨‹æ± å¤„äºåœæ­¢çŠ¶æ€ï¼Œä¸å†æ¥å—æ–°ä»»åŠ¡ï¼Œä¹Ÿä¸ä¼šå¤„ç†å·²æœ‰çš„ä»»åŠ¡ï¼Œä¼šä¸­æ–­æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ã€‚</p></li><li><p><strong>TIDYING</strong>ï¼šçº¿ç¨‹æ± æ­£åœ¨æ•´ç†çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ï¼Œä¾‹å¦‚åˆ é™¤å·²ç»åœæ­¢çš„çº¿ç¨‹ã€‚</p></li><li><p><strong>TERMINATED</strong>ï¼šçº¿ç¨‹æ± å·²ç»ç»ˆæ­¢ï¼Œä¸å†æ¥å—ä»»ä½•ä»»åŠ¡ã€‚</p></li></ol><p>çº¿ç¨‹æ± çš„çŠ¶æ€å¯ä»¥é€šè¿‡ThreadPoolExecutorç±»çš„getState()æ–¹æ³•è·å–ï¼Œè¿”å›ä¸€ä¸ªæšä¸¾ç±»å‹çš„å€¼ï¼Œè¡¨ç¤ºå½“å‰çº¿ç¨‹æ± çš„çŠ¶æ€ã€‚åœ¨ä½¿ç”¨çº¿ç¨‹æ± çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ ¹æ®å½“å‰çº¿ç¨‹æ± çš„çŠ¶æ€ï¼Œé¿å…ä¸å¿…è¦çš„æ“ä½œï¼Œä¿è¯çº¿ç¨‹æ± çš„ç¨³å®šæ€§å’Œå¯é æ€§</p><ol><li><p>RUNNINGçŠ¶æ€çš„ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ThreadPoolExecutor</span> <span class="variable">executor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">5</span>, <span class="number">10</span>, <span class="number">60</span>, TimeUnit.SECONDS, <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;Runnable&gt;());</span><br><span class="line">executor.execute(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Task executed.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">System.out.println(<span class="string">&quot;Current thread pool state: &quot;</span> + executor.getState());</span><br><span class="line"><span class="comment">// è¾“å‡ºï¼šCurrent thread pool state: RUNNING</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œçº¿ç¨‹æ± å¤„äºRUNNINGçŠ¶æ€ï¼Œå› ä¸ºçº¿ç¨‹æ± å·²ç»åˆ›å»ºæˆåŠŸï¼Œå¯ä»¥æ¥å—æ–°ä»»åŠ¡å¹¶å¤„ç†å·²æœ‰çš„ä»»åŠ¡ã€‚</p></li><li><p>SHUTDOWNçŠ¶æ€çš„ä¾‹å­ï¼š</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ThreadPoolExecutor</span> <span class="variable">executor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">5</span>, <span class="number">10</span>, <span class="number">60</span>, TimeUnit.SECONDS, <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;Runnable&gt;());</span><br><span class="line">executor.shutdown();</span><br><span class="line">System.out.println(<span class="string">&quot;Current thread pool state: &quot;</span> + executor.getState());</span><br><span class="line"><span class="comment">// è¾“å‡ºï¼šCurrent thread pool state: SHUTDOWN</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œçº¿ç¨‹æ± å¤„äºSHUTDOWNçŠ¶æ€ï¼Œå› ä¸ºè°ƒç”¨äº†executor.shutdown()æ–¹æ³•ï¼Œçº¿ç¨‹æ± ä¸å†æ¥å—æ–°ä»»åŠ¡ï¼Œä½†ä¼šå¤„ç†å·²æœ‰çš„ä»»åŠ¡ã€‚</p><ol><li><p>STOPçŠ¶æ€çš„ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ThreadPoolExecutor</span> <span class="variable">executor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">5</span>, <span class="number">10</span>, <span class="number">60</span>, TimeUnit.SECONDS, <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;Runnable&gt;());</span><br><span class="line">executor.execute(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Task executed.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">executor.shutdown();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    executor.awaitTermination(<span class="number">1</span>, TimeUnit.SECONDS);</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;Current thread pool state: &quot;</span> + executor.getState());</span><br><span class="line"><span class="comment">// è¾“å‡ºï¼šCurrent thread pool state: STOP</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œçº¿ç¨‹æ± å¤„äºSTOPçŠ¶æ€ï¼Œå› ä¸ºè°ƒç”¨äº†executor.shutdown()æ–¹æ³•åï¼Œçº¿ç¨‹æ± ä¸å†æ¥å—æ–°ä»»åŠ¡ï¼Œå¹¶ä¸”ä¸­æ–­æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ã€‚</p></li><li><p>TIDYINGçŠ¶æ€çš„ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ThreadPoolExecutor</span> <span class="variable">executor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">5</span>, <span class="number">10</span>, <span class="number">60</span>, TimeUnit.SECONDS, <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;Runnable&gt;());</span><br><span class="line">executor.shutdown();</span><br><span class="line"><span class="keyword">while</span> (!executor.isTerminated()) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Current thread pool state: &quot;</span> + executor.getState());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">// Current thread pool state: TIDYING</span></span><br><span class="line"><span class="comment">// Current thread pool state: TERMINATED</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œçº¿ç¨‹æ± å¤„äºTIDYINGçŠ¶æ€ï¼Œå› ä¸ºè°ƒç”¨äº†executor.shutdown()æ–¹æ³•åï¼Œçº¿ç¨‹æ± æ­£åœ¨æ•´ç†çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ï¼Œä¾‹å¦‚åˆ é™¤å·²ç»åœæ­¢çš„çº¿ç¨‹ã€‚</p></li><li><p>TERMINATEDçŠ¶æ€çš„ä¾‹å­ï¼š</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ThreadPoolExecutor</span> <span class="variable">executor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">5</span>, <span class="number">10</span>, <span class="number">60</span>, TimeUnit.SECONDS, <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;Runnable&gt;());</span><br><span class="line">executor.shutdown();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    executor.awaitTermination(<span class="number">1</span>, TimeUnit.SECONDS);</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;Current thread pool state: &quot;</span> + executor.getState());</span><br><span class="line"><span class="comment">// è¾“å‡ºï¼šCurrent thread pool state: TERMINATED</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œçº¿ç¨‹æ± å¤„äºTERMINATEDçŠ¶æ€ï¼Œå› ä¸ºçº¿ç¨‹æ± å·²ç»ç»ˆæ­¢ï¼Œä¸å†æ¥å—ä»»ä½•ä»»åŠ¡ã€‚åœ¨è°ƒç”¨executor.shutdown()æ–¹æ³•åï¼Œç­‰å¾…æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•å¹¶ä¸”æ‰€æœ‰çº¿ç¨‹éƒ½è¢«å›æ”¶åï¼Œçº¿ç¨‹æ± è¿›å…¥TERMINATEDçŠ¶æ€ã€‚</p><h4 id="å…³é—­çº¿ç¨‹æ± çš„æ–¹æ³•"><a href="#å…³é—­çº¿ç¨‹æ± çš„æ–¹æ³•" class="headerlink" title="å…³é—­çº¿ç¨‹æ± çš„æ–¹æ³•"></a>å…³é—­çº¿ç¨‹æ± çš„æ–¹æ³•</h4><p>ThreadPoolExecutorç±»æä¾›äº†ä¸¤ç§å…³é—­çº¿ç¨‹æ± çš„æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯shutdown()å’ŒshutdownNow()ã€‚è¿™ä¸¤ç§æ–¹æ³•çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p><ol><li><p>shutdown()æ–¹æ³•ï¼šè°ƒç”¨è¯¥æ–¹æ³•åï¼Œçº¿ç¨‹æ± ä¼šæ‹’ç»æ–°çš„ä»»åŠ¡æäº¤ï¼Œä½†ä¼šç»§ç»­å¤„ç†å·²ç»æäº¤çš„ä»»åŠ¡ï¼Œç›´åˆ°æ‰€æœ‰ä»»åŠ¡éƒ½è¢«å®Œæˆã€‚åœ¨æ‰€æœ‰ä»»åŠ¡å®Œæˆåï¼Œçº¿ç¨‹æ± æ‰ä¼šçœŸæ­£å…³é—­ï¼Œå¹¶é‡Šæ”¾æ‰€æœ‰èµ„æºã€‚å¦‚æœåœ¨è°ƒç”¨shutdown()æ–¹æ³•ä¹‹åï¼Œç»§ç»­æäº¤æ–°çš„ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡ä¼šè¢«æ‹’ç»å¹¶æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸ã€‚</p></li><li><p>shutdownNow()æ–¹æ³•ï¼šè°ƒç”¨è¯¥æ–¹æ³•åï¼Œçº¿ç¨‹æ± ä¼šæ‹’ç»æ–°çš„ä»»åŠ¡æäº¤ï¼Œå¹¶å°è¯•ä¸­æ–­æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ã€‚åœ¨ä¸­æ–­ä»»åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä»»åŠ¡å“åº”ä¸­æ–­ï¼Œåˆ™ä»»åŠ¡ä¼šè¢«æˆåŠŸä¸­æ–­å¹¶ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­ç§»é™¤ã€‚å¦‚æœä»»åŠ¡æ— æ³•å“åº”ä¸­æ–­ï¼Œåˆ™ä»»åŠ¡ä¼šç»§ç»­æ‰§è¡Œã€‚åœ¨æ‰€æœ‰ä»»åŠ¡éƒ½è¢«ä¸­æ–­æˆ–å·²ç»å®Œæˆåï¼Œçº¿ç¨‹æ± ä¼šçœŸæ­£å…³é—­ï¼Œå¹¶é‡Šæ”¾æ‰€æœ‰èµ„æºã€‚å¦‚æœåœ¨è°ƒç”¨shutdownNow()æ–¹æ³•ä¹‹åï¼Œç»§ç»­æäº¤æ–°çš„ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡ä¼šè¢«æ‹’ç»å¹¶æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸ã€‚</p></li></ol><p>å› æ­¤ï¼Œshutdown()æ–¹æ³•æ˜¯<strong>ä¼˜é›…åœ°å…³é—­çº¿ç¨‹æ± ï¼Œç­‰å¾…æ‰€æœ‰ä»»åŠ¡éƒ½è¢«å®Œæˆåå†å…³é—­çº¿ç¨‹</strong>æ± ï¼Œè€ŒshutdownNow()æ–¹æ³•æ˜¯<strong>å¼ºåˆ¶å…³é—­çº¿ç¨‹æ± </strong>ï¼Œç«‹å³åœæ­¢æ‰€æœ‰ä»»åŠ¡çš„æ‰§è¡Œï¼Œå¹¶å°è¯•ä¸­æ–­æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ã€‚é€‰æ‹©å“ªä¸ªæ–¹æ³•å–å†³äºä¸šåŠ¡éœ€æ±‚ï¼Œå¦‚æœéœ€è¦ä¼˜é›…åœ°å…³é—­çº¿ç¨‹æ± ï¼Œå¯ä»¥ä½¿ç”¨shutdown()æ–¹æ³•ï¼Œå¦‚æœéœ€è¦ç«‹å³åœæ­¢æ‰€æœ‰ä»»åŠ¡çš„æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨shutdownNow()æ–¹æ³•ã€‚</p>]]></content>
    
    
    <summary type="html">ğŸ¥§æœ¬æ–‡å°†é‡ç‚¹ä»çº¿ç¨‹æ± è¿›è¡Œè®²è§£ï¼Œä»¥åŠå¦‚ä½•å®ç°çº¿ç¨‹æ± ï¼Œå¹¶ä¸”çº¿ç¨‹æ± çš„å®ç°æ–¹å¼ï¼Œä»¥åŠçº¿ç¨‹æ± çš„ä¸€äº›ç›¸å…³é—®é¢˜çš„è®²è§£</summary>
    
    
    
    <category term="javaå­¦ä¹ " scheme="https://www.blog.909111.xyz/categories/java%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="javaå­¦ä¹ " scheme="https://www.blog.909111.xyz/tags/java%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>pdfé˜…è¯»å™¨</title>
    <link href="https://www.blog.909111.xyz/posts/0.html"/>
    <id>https://www.blog.909111.xyz/posts/0.html</id>
    <published>2023-11-09T02:50:23.344Z</published>
    <updated>2023-11-09T02:50:23.344Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-æœ¬åœ°æ–‡ä»¶-åœ¨mdæ–‡ä»¶è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼Œå…¶å†…æ”¾pdfæ–‡ä»¶åä¸ºxxx-pdfçš„æ–‡ä»¶"><a href="#1-æœ¬åœ°æ–‡ä»¶-åœ¨mdæ–‡ä»¶è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼Œå…¶å†…æ”¾pdfæ–‡ä»¶åä¸ºxxx-pdfçš„æ–‡ä»¶" class="headerlink" title="1.æœ¬åœ°æ–‡ä»¶:åœ¨mdæ–‡ä»¶è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼Œå…¶å†…æ”¾pdfæ–‡ä»¶åä¸ºxxx.pdfçš„æ–‡ä»¶"></a>1.æœ¬åœ°æ–‡ä»¶:åœ¨mdæ–‡ä»¶è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼Œå…¶å†…æ”¾pdfæ–‡ä»¶åä¸ºxxx.pdfçš„æ–‡ä»¶</h1><div class="row">    <embed src="xxx.pdf" width="100%" height="550" type="application/pdf"></div><h1 id="2-åœ¨çº¿é“¾æ¥"><a href="#2-åœ¨çº¿é“¾æ¥" class="headerlink" title="2.åœ¨çº¿é“¾æ¥"></a>2.åœ¨çº¿é“¾æ¥</h1><div class="row">    <embed src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/å°ä½œæ–‡è®²ä¹‰.pdf" width="100%" height="550" type="application/pdf"></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-æœ¬åœ°æ–‡ä»¶-åœ¨mdæ–‡ä»¶è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼Œå…¶å†…æ”¾pdfæ–‡ä»¶åä¸ºxxx-pdfçš„æ–‡ä»¶&quot;&gt;&lt;a href=&quot;#1-æœ¬åœ°æ–‡ä»¶-åœ¨mdæ–‡ä»¶è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼Œå…¶å†…æ”¾pdfæ–‡ä»¶åä¸ºxxx-pdfçš„æ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;1.</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>æ•°æ®ç»“æ„ä¸ç®—æ³•2</title>
    <link href="https://www.blog.909111.xyz/posts/ba945d0d.html"/>
    <id>https://www.blog.909111.xyz/posts/ba945d0d.html</id>
    <published>2023-11-09T02:50:23.344Z</published>
    <updated>2023-11-09T02:50:23.344Z</updated>
    
    <content type="html"><![CDATA[<p>ç”±äºä¸Šä¸ªæ–‡ä»¶å­—æ•°åˆ°è¾¾2wä»¥ä¸Šï¼Œæœ¬è½¯ä»¶åŠ è½½æ¯”è¾ƒéº»çƒ¦ï¼Œæ•…è€Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ç”¨æ¥è®°å½•ã€‚</p><h1 id="æ•°æ®ç»“æ„ä¸ç®—æ³•"><a href="#æ•°æ®ç»“æ„ä¸ç®—æ³•" class="headerlink" title="æ•°æ®ç»“æ„ä¸ç®—æ³•"></a>æ•°æ®ç»“æ„ä¸ç®—æ³•</h1><h2 id="9-å“ˆå¸Œè¡¨"><a href="#9-å“ˆå¸Œè¡¨" class="headerlink" title="9 å“ˆå¸Œè¡¨"></a>9 å“ˆå¸Œè¡¨</h2><p>ä¸€ç§æ•°æ®ç»“æ„</p><p>ä¸€èˆ¬æœ‰hashMap,hashtable</p><p>å“ˆå¸Œè¡¨ï¼Œæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œä¸»è¦æ˜¯key ä¸valueçš„å…³ç³»ï¼Œäº†è§£hashè¡¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£çš„æ˜¯å“ˆå¸Œè¡¨ï¼Œéœ€è¦çŸ¥é“å“ˆå¸Œå‡½æ•°ï¼Œåœ¨jdk1.8ä¹‹åï¼Œé‡‡ç”¨çš„çº¢é»‘æ ‘è¿›è¡Œä¸€å®šçš„å­˜å‚¨ï¼Œå…¶æ˜¯æ ¹æ®å…³é”®ç å€¼è€Œè¿›è¡Œè®¿é—®çš„æ•°æ®ç»“æ„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>å…¶é€šè¿‡æŠŠå…³é”®ç æ˜ å°„åˆ°è¡¨ä¸­çš„ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œä»¥åŠ å¿«æŸ¥æ‰¾çš„é€Ÿåº¦ï¼Œè¿™ä¸ªæ˜ å°„å‡½æ•°æˆ‘ä»¬ç§°ä¹‹ä¸ºæ•£åˆ—å‡½æ•°ï¼Œå­˜æ”¾è®°å½•çš„æ•°ç»„å«åšæ•£åˆ—è¡¨ã€‚</strong></p><p>hashtableæ¥å­˜å‚¨é›‡å‘˜ä¿¡æ¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashtableDemo</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">hashTable</span> <span class="variable">hashtab</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">hashTable</span>(<span class="number">8</span>);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">Emp1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="number">10</span>,<span class="string">&quot;ç¤¾ä¼šè™&quot;</span>);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">Emp2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="number">18</span>,<span class="string">&quot;åºŸç‰©åˆ€&quot;</span>);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">Emp3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="number">26</span>,<span class="string">&quot;é»‘ç‰›&quot;</span>);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">Emp4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="number">3</span>,<span class="string">&quot;ç™½ç‰›&quot;</span>);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">Emp5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="number">193</span>,<span class="string">&quot;å°äº®&quot;</span>);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">Emp6</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="number">231</span>,<span class="string">&quot;å”è€é¸­&quot;</span>);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">Emp7</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="number">12</span>,<span class="string">&quot;ç™¾ç‰¹æ›¼&quot;</span>);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">Emp8</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="number">1</span>,<span class="string">&quot;ç‹¬çˆ±å°å°¹&quot;</span>);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">Emp9</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="number">123</span>,<span class="string">&quot;ä¸½ä¸½&quot;</span>);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">Emp10</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="number">126</span>,<span class="string">&quot;å¸¦ç¯®å­&quot;</span>);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">Emp11</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="number">29</span>,<span class="string">&quot;åˆ˜å¢‰&quot;</span>);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">Emp12</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="number">86</span>,<span class="string">&quot;ä¸çœŸ&quot;</span>);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">Emp13</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="number">800</span>,<span class="string">&quot;ç‹å†°å†°&quot;</span>);<span class="comment">//å®šä¹‰æ•°æ®</span></span><br><span class="line"></span><br><span class="line">        hashtab.add(Emp1);</span><br><span class="line">        hashtab.add(Emp2);</span><br><span class="line">        hashtab.add(Emp3);</span><br><span class="line">        hashtab.add(Emp4);</span><br><span class="line">        hashtab.add(Emp5);</span><br><span class="line">        hashtab.add(Emp6);</span><br><span class="line">        hashtab.add(Emp7);</span><br><span class="line">        hashtab.add(Emp8);</span><br><span class="line">        hashtab.add(Emp9);</span><br><span class="line">        hashtab.add(Emp10);</span><br><span class="line">        hashtab.add(Emp11);</span><br><span class="line">        hashtab.add(Emp12);</span><br><span class="line">        hashtab.add(Emp13);<span class="comment">//æ’å…¥æ•°æ®</span></span><br><span class="line">        </span><br><span class="line">        hashtab.list();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºhashtable</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">hashTable</span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"><span class="keyword">private</span> EmpLinkedList[] empLinkedLists;</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªæ„é€ å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">hashTable</span><span class="params">(<span class="type">int</span> size)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.size = size;</span><br><span class="line"><span class="comment">//åˆå§‹åŒ–empLinkedListArray</span></span><br><span class="line">empLinkedLists = <span class="keyword">new</span> <span class="title class_">EmpLinkedList</span>[size];</span><br><span class="line"><span class="comment">//ç»†èŠ‚ï¼Œå¼•ç”¨ç±»å‹çš„å˜é‡åœ¨å£°æ˜åå¦‚æœä¸åˆå§‹åŒ–é‚£ä¹ˆé»˜è®¤å€¼å°±æ˜¯null</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; size; i++) &#123;</span><br><span class="line"><span class="comment">//è¿™ä¸ªå¾ªç¯ä½“å°±æ˜¯åœ¨åˆå§‹åŒ–</span></span><br><span class="line">empLinkedLists[i] = <span class="keyword">new</span> <span class="title class_">EmpLinkedList</span>();<span class="comment">//åœ¨è¿™é‡Œå¿…é¡»è¦é€ä¸€ä¸ºæ¯ä¸ªå…ƒç´ å®ä¾‹åŒ–</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> id % size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ·»åŠ é›‡å‘˜</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Emp emp)</span>&#123;</span><br><span class="line"><span class="comment">//æ ¹æ®å‘˜å·¥çš„idå¾—åˆ°è¯¥å‘˜å·¥åº”è¯¥åŠ å…¥</span></span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> hash(emp.id);</span><br><span class="line">empLinkedLists[num].add(emp);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">list</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; size ; i ++ ) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;ç¬¬&quot;</span>+i+<span class="string">&quot;ä¸ªé“¾è¡¨çŠ¶å†µ&quot;</span>);</span><br><span class="line">empLinkedLists[i].list();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¡¨æ˜¯</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Emp</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> id;</span><br><span class="line"><span class="keyword">public</span> String name;</span><br><span class="line"><span class="keyword">public</span> Emp next;  <span class="comment">//next é»˜è®¤ä¸ºç©º</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Emp</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Emp</span><span class="params">(<span class="type">int</span> id, String name)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line"><span class="built_in">this</span>.id = id;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.id = id;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> Emp <span class="title function_">getNext</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNext</span><span class="params">(Emp next)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.next = next;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªEmpLinkList,è¡¨ç¤ºé“¾è¡¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmpLinkedList</span>&#123;</span><br><span class="line"><span class="comment">//æŠ•æŒ‡é’ˆï¼Œæ‰§è¡Œç¬¬ä¸€ä¸ªEmp,å› æ­¤æˆ‘ä»¬è¿™ä¸ªé“¾è¡¨çš„headæ˜¯ç›´æ¥æŒ‡å‘ç¬¬ä¸€ä¸ªEmp</span></span><br><span class="line"><span class="keyword">private</span> Emp head; <span class="comment">//é»˜è®¤ä¸ºç©º</span></span><br><span class="line"><span class="comment">//æ·»åŠ é›‡å‘˜åˆ°é“¾è¡¨</span></span><br><span class="line"><span class="comment">//è¯´æ˜</span></span><br><span class="line"><span class="comment">//å‡å®šï¼Œå½“æ·»åŠ é›‡å‘˜æ—¶å€™ï¼Œidæ˜¯è‡ªå¢é•¿ï¼Œå³idçš„åˆ†é…æ€»æ•°ä»å°åˆ°å¤§çš„</span></span><br><span class="line"><span class="comment">//å› æ­¤æˆ‘ä»¬å°†è¯¥é›‡å‘˜ç›´æ¥åŠ å…¥åˆ°æœ¬é“¾è¡¨çš„æœ€åå³å¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Emp emp)</span> &#123;</span><br><span class="line"><span class="comment">//å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªé›‡å‘˜</span></span><br><span class="line"><span class="keyword">if</span>(head == <span class="literal">null</span> ) &#123;</span><br><span class="line">head = emp;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœä¸æ˜¯ç¬¬ä¸€ä¸ªé›‡å‘˜ï¼Œåˆ™ä½¿ç”¨ä¸€ä¸ªè¾…åŠ©çš„æŒ‡é’ˆï¼Œå¸®åŠ©å®šä½åˆ°æœ€å</span></span><br><span class="line"><span class="type">Emp</span> <span class="variable">curEmp</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(curEmp.next == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">curEmp = curEmp.next; <span class="comment">//åç§»</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é€€å‡ºæ—¶ç›´æ¥å°†empåŠ å…¥é“¾è¡¨</span></span><br><span class="line">curEmp.next = emp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//éå†é“¾è¡¨çš„é›‡å‘˜ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">list</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(head == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="comment">//å¦‚æœé“¾è¡¨ä¸ºç©º</span></span><br><span class="line">System.out.println(<span class="string">&quot;å½“å‰é“¾è¡¨ä¸ºç©º&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;å½“å‰é“¾è¡¨çš„ä¿¡æ¯ä¸ºï¼š&quot;</span>);</span><br><span class="line"><span class="type">Emp</span> <span class="variable">cuEmp</span> <span class="operator">=</span> head ; <span class="comment">//è¾…åŠ©æŒ‡é’ˆ</span></span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">System.out.printf(<span class="string">&quot;id = %d name = %s\n&quot;</span>,cuEmp.id,cuEmp.name);</span><br><span class="line">count ++;</span><br><span class="line"><span class="keyword">if</span>(cuEmp.next == <span class="literal">null</span> ) &#123;</span><br><span class="line"><span class="comment">//è¯´æ˜cuEmpå·²ç»æ˜¯æœ€åçš„èŠ‚ç‚¹</span></span><br><span class="line">System.out.println(<span class="string">&quot;å…±è®¡æœ‰&quot;</span>+ count+ <span class="string">&quot;ä¸ª&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">cuEmp = cuEmp.next;<span class="comment">//åç§»ï¼Œéå†</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="10-æ•°æ®ç»“æ„çš„å­˜å‚¨æ–¹å¼"><a href="#10-æ•°æ®ç»“æ„çš„å­˜å‚¨æ–¹å¼" class="headerlink" title="10.æ•°æ®ç»“æ„çš„å­˜å‚¨æ–¹å¼"></a>10.æ•°æ®ç»“æ„çš„å­˜å‚¨æ–¹å¼</h2><h3 id="10-1äºŒå‰æ ‘"><a href="#10-1äºŒå‰æ ‘" class="headerlink" title="10.1äºŒå‰æ ‘"></a>10.1äºŒå‰æ ‘</h3><ol><li><p>æ•°ç»„çš„å­˜å‚¨æ–¹å¼çš„åˆ†æ<br><strong>ä¼˜ç‚¹ï¼š</strong>é€šè¿‡ä¸‹æ ‡æ–¹å¼è®¿é—®å…ƒç´ ï¼Œé€Ÿåº¦å¿«ã€‚å¯¹äºæœ‰åºæ•°ç»„ï¼Œè¿˜å¯ä»¥ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æé«˜æ£€ç´¢é€Ÿåº¦ã€‚</p><p><strong>ç¼ºç‚¹ï¼š</strong>å¦‚æœè¦æ£€ç´¢å…·ä½“æŸä¸ªå€¼ï¼Œæˆ–è€…æ’å…¥å€¼ï¼ˆæŒ‰ç…§ä¸€å®šé¡ºåºï¼‰ä¼šæ•´ä½“ç§»åŠ¨ï¼Œæ•ˆç‡è¾ƒä½ã€‚</p></li></ol><ol><li><p>é“¾å¼å­˜å‚¨æ–¹å¼çš„åˆ†æ</p><p><strong>ä¼˜ç‚¹ï¼š</strong>åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯¹æ•°ç»„çš„å­˜å‚¨æ–¹å¼æœ‰ä¼˜åŒ–ï¼ˆæ¯”å¦‚ï¼šæ’å…¥ä¸€ä¸ªæ•°å€¼èŠ‚ç‚¹ï¼Œåªéœ€è¦å°†æ’å…¥èŠ‚ç‚¹ï¼Œé“¾æ¥åˆ°é“¾è¡¨ä¸­å³å¯ï¼Œåˆ é™¤æ•ˆç‡ä¹Ÿå¾ˆå¥½ï¼‰</p><p><strong>ç¼ºç‚¹ï¼š</strong>åœ¨è¿›è¡Œ<strong>æ£€ç´¢</strong>æ—¶ï¼Œæ•ˆç‡ä»ç„¶æ¯”è¾ƒä½ï¼Œæ¯”å¦‚ï¼ˆæ£€ç´¢æŸä¸ªå€¼ï¼Œéœ€è¦ä»å¤´ç»“ç‚¹å¼€å§‹éå†ï¼‰</p></li><li><p>æ ‘å­˜å‚¨æ–¹å¼çš„åˆ†æ</p><p><strong>ä¼˜ç‚¹ï¼š</strong>å¯ä»¥æé«˜æ•°æ®å­˜å‚¨ï¼Œè¯»å–çš„æ•ˆç‡ï¼Œæ¯”å¦‚åˆ©ç”¨äºŒå‰æ’åºæ ‘ï¼Œæ—¢å¯ä»¥ä¿è¯æ•°æ®çš„æ£€ç´¢é€Ÿåº¦ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä¿è¯æ•°æ®çš„æ’å…¥ï¼Œåˆ é™¤ï¼Œä¿®æ”¹çš„é€Ÿåº¦ã€‚</p><p><strong>ç¼ºç‚¹ï¼š</strong>é¡ºåºå­˜å‚¨å¯èƒ½ä¼šæµªè´¹ç©ºé—´ï¼ˆåœ¨éå®Œå…¨äºŒå‰æ ‘çš„æ—¶å€™ï¼Œä½†æ˜¯è¯»å–æŸä¸ªç‰¹å®šçš„èŠ‚ç‚¹çš„æ—¶å€™æ•ˆç‡æ¯”è¾ƒé«˜O(0)ï¼‰;é“¾å¼å­˜å‚¨ç›¸å¯¹äºäºŒå‰æ ‘ï¼Œæµªè´¹ç©ºé—´è¾ƒå°‘ï¼Œä½†æ˜¯è¯»å–æŸä¸ªç»“ç‚¹æ—¶æ•ˆç‡åä½O(nlogn)ã€‚</p></li></ol><h3 id="10-2-äºŒå‰æ ‘çš„æ¦‚ç‡å’Œå¸¸ç”¨æœ¯è¯­"><a href="#10-2-äºŒå‰æ ‘çš„æ¦‚ç‡å’Œå¸¸ç”¨æœ¯è¯­" class="headerlink" title="10.2 äºŒå‰æ ‘çš„æ¦‚ç‡å’Œå¸¸ç”¨æœ¯è¯­"></a>10.2 äºŒå‰æ ‘çš„æ¦‚ç‡å’Œå¸¸ç”¨æœ¯è¯­</h3><p><strong>æ»¡äºŒå‰æ ‘ï¼š</strong>åœ¨ä¸€ä¸ªäºŒå‰æ ‘ä¸­ï¼Œå¦‚æœæ‰€æœ‰åˆ†æ”¯èŠ‚ç‚¹éƒ½æœ‰å·¦å­©å­èŠ‚ç‚¹å’Œå³å­©å­èŠ‚ç‚¹ï¼Œå¹¶ä¸”å¶èŠ‚ç‚¹éƒ½é›†ä¸­åœ¨äºŒå‰æ ‘ä¸­çš„æœ€ä¸‹ä¸€å±‚ï¼Œè¿™æ ·çš„äºŒå‰æ ‘è¢«ç§°ä¸ºæ»¡äºŒå‰æ ‘ã€‚</p><p><strong>å®Œå…¨äºŒå‰æ ‘ï¼š</strong>è‹¥äºŒå‰æ ‘ä¸­æœ€å¤šåªæœ‰æœ€ä¸‹é¢ä¸¤å±‚çš„ç»“ç‚¹çš„åº¦æ•°å¯ä»¥å°äº2ï¼Œå¹¶ä¸”æœ€ä¸‹é¢ä¸€å±‚çš„å¶å­èŠ‚ç‚¹ï¼Œéƒ½ä¾æ¬¡æ’åˆ—åœ¨è¯¥å±‚æœ€å·¦è¾¹çš„ä½ç½®ä¸Šï¼Œè¿™æ ·çš„äºŒå‰æ ‘ç§°ä¸ºå®Œå…¨äºŒå‰æ ‘ã€‚</p><h4 id="éå†å’ŒèŠ‚ç‚¹åˆ é™¤"><a href="#éå†å’ŒèŠ‚ç‚¹åˆ é™¤" class="headerlink" title="éå†å’ŒèŠ‚ç‚¹åˆ é™¤"></a>éå†å’ŒèŠ‚ç‚¹åˆ é™¤</h4><p>äºŒå‰æ ‘æ˜¯ä¸€ç§éå¸¸é‡è¦çš„æ•°æ®ç»“æ„ï¼Œéå¸¸å¤šçš„æ•°æ®ç»“æ„éƒ½æ˜¯åŸºäºäºŒå‰æ ‘çš„åŸºç¡€æ¼”å˜è€Œæ¥çš„ã€‚å¯¹äºäºŒå‰æ ‘æœ‰æ·±åº¦éå†å’Œå¹¿åº¦éå†ï¼Œæ·±åº¦éå†æœ‰å‰åºã€ä¸­åºä»¥åŠååºä¸‰ç§éå†æ–¹æ³•ï¼Œå¹¿åº¦éå†å³æˆ‘ä»¬å¯»å¸¸æ‰€è¯´çš„å±‚æ¬¡éå†ã€‚ç”±äºæ ‘çš„å®šä¹‰æœ¬èº«å°±æ˜¯é€’å½’å®šä¹‰ï¼Œå› æ­¤é‡‡ç”¨é€’å½’çš„æ–¹æ³•å®ç°æ ‘çš„ä¸‰ç§éå†ã€‚ </p><ul><li>å‰åºéå†ï¼šæ ¹ç»“ç‚¹ â€”&gt;å·¦å­æ ‘â€”&gt;å³å­æ ‘ï¼›</li><li>ä¸­åºéå†ï¼šå·¦å­æ ‘ â€”&gt;æ ¹ç»“ç‚¹â€”&gt;å³å­æ ‘ï¼›</li><li>åç»­éå†ï¼šå·¦å­æ ‘ â€”&gt;å³å­æ ‘â€”&gt;æ ¹ç»“ç‚¹ï¼›</li><li>å±‚æ¬¡éå†ï¼šä»…ä»…éœ€æŒ‰æˆæ¬¡éå†å³å¯ï¼›</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinaryTreeDemo</span> &#123;</span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰äºŒå‰æ ‘</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªäºŒå‰æ ‘</span></span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªäºŒå‰æ ‘</span></span><br><span class="line">        <span class="type">BinaryTree</span> <span class="variable">binaryTree</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BinaryTree</span>();</span><br><span class="line">        <span class="comment">//åˆ›å»ºç»“ç‚¹</span></span><br><span class="line">        <span class="type">HeroNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">1</span>, <span class="string">&quot;å®‹æ±Ÿ&quot;</span>);</span><br><span class="line">        <span class="type">HeroNode</span> <span class="variable">node2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">2</span>, <span class="string">&quot;å¢ä¿Šä¹‰&quot;</span>);</span><br><span class="line">        <span class="type">HeroNode</span> <span class="variable">node3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">3</span>, <span class="string">&quot;å´ç”¨&quot;</span>);</span><br><span class="line">        <span class="type">HeroNode</span> <span class="variable">node4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">4</span>, <span class="string">&quot;å…¬å­™èƒœ&quot;</span>);</span><br><span class="line">        <span class="type">HeroNode</span> <span class="variable">node5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">5</span>, <span class="string">&quot;å…³èƒœ&quot;</span>);</span><br><span class="line">        root.setLeft(node2);</span><br><span class="line">        root.setRight(node3);</span><br><span class="line">        node3.setLeft(node4);</span><br><span class="line">        node3.setRight(node5);</span><br><span class="line">        binaryTree.setRoot(root);</span><br><span class="line">        System.out.println(<span class="string">&quot;å‰åºéå†&quot;</span>);</span><br><span class="line">        binaryTree.preOrder();</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸­åºéå†&quot;</span>);</span><br><span class="line">        binaryTree.midOrder();</span><br><span class="line">        System.out.println(<span class="string">&quot;ååºéå†&quot;</span>);</span><br><span class="line">        binaryTree.postOrder();</span><br><span class="line">        binaryTree.delNode(<span class="number">3</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤ç»“ç‚¹3ï¼Œå‰åºéå†&quot;</span>);</span><br><span class="line">        binaryTree.preOrder();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å®šä¹‰BinaryTree äºŒå‰æ ‘</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BinaryTree</span> &#123;</span><br><span class="line"><span class="keyword">private</span> HeroNode root;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> HeroNode <span class="title function_">getRoot</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRoot</span><span class="params">(HeroNode root)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.root = root;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‰åºéå†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">preOrder</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.root != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="built_in">this</span>.root.preOrder();</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;äºŒå‰æ ‘ä¸ºç©ºï¼Œä¸èƒ½éå†&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¸­åºéå†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">midOrder</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.root != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="built_in">this</span>.root.midOrder();</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;äºŒå‰æ ‘ä¸ºç©ºï¼Œæ— æ³•éå†&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ååºéå†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postOrder</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.root != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="built_in">this</span>.root.postOrder();</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;äºŒå‰æ ‘ä¸ºç©ºï¼Œæ— æ³•éå†&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤ç»“ç‚¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delNode</span><span class="params">(<span class="type">int</span> no)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(root != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="comment">//å¦‚æœåªæœ‰ä¸€ä¸ªrootç»“ç‚¹, è¿™é‡Œç«‹å³åˆ¤æ–­rootæ˜¯ä¸æ˜¯å°±æ˜¯è¦åˆ é™¤ç»“ç‚¹</span></span><br><span class="line"><span class="keyword">if</span>(root.getNo() == no) &#123;</span><br><span class="line">root = <span class="literal">null</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//é€’å½’åˆ é™¤</span></span><br><span class="line">root.delNode(no);</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;ç©ºæ ‘ï¼Œä¸èƒ½åˆ é™¤~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…ˆåˆ›å»ºHeroNode ç»“ç‚¹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HeroNode</span> &#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> no;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> HeroNode left; <span class="comment">//é»˜è®¤null</span></span><br><span class="line"><span class="keyword">private</span> HeroNode right; <span class="comment">//é»˜è®¤null</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HeroNode</span><span class="params">(<span class="type">int</span> no, String name)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.no = no;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getNo</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> no;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNo</span><span class="params">(<span class="type">int</span> no)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.no = no;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> HeroNode <span class="title function_">getLeft</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLeft</span><span class="params">(HeroNode left)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.left = left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> HeroNode <span class="title function_">getRight</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> right;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRight</span><span class="params">(HeroNode right)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.right = right;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;HeroNode [no=&quot;</span> + no + <span class="string">&quot;, name=&quot;</span> + name + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‰åºéå†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">preOrder</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="built_in">this</span>);<span class="comment">//å…ˆè¾“å‡ºçˆ¶èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//é€’å½’å‘å·¦å­æ ‘å‰åºéå†</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.left != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="built_in">this</span>.left.preOrder();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é€’å½’å‘å³å­æ ‘å‰åºéå†</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.right != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="built_in">this</span>.right.preOrder();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸­åºéå†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">midOrder</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//é€’å½’å‘å·¦å­æ ‘ä¸­åºéå†</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.left != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="built_in">this</span>.left.midOrder();</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="built_in">this</span>);<span class="comment">//è¾“å‡ºçˆ¶èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//é€’å½’å‘å³å­æ ‘å‰åºéå†</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.right != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="built_in">this</span>.right.midOrder();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ååºéå†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postOrder</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//é€’å½’å‘å·¦å­æ ‘ååºéå†</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.left != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="built_in">this</span>.left.postOrder();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é€’å½’å‘å³å­æ ‘å‰åºéå†</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.right != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="built_in">this</span>.right.postOrder();</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="built_in">this</span>);<span class="comment">//è¾“å‡ºçˆ¶èŠ‚ç‚¹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€’å½’åˆ é™¤ç»“ç‚¹</span></span><br><span class="line"><span class="comment">//1.å¦‚æœåˆ é™¤çš„èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ï¼Œåˆ™åˆ é™¤è¯¥èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//2.å¦‚æœåˆ é™¤çš„èŠ‚ç‚¹æ˜¯éå¶å­èŠ‚ç‚¹ï¼Œåˆ™åˆ é™¤è¯¥å­æ ‘</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delNode</span><span class="params">(<span class="type">int</span> no)</span> &#123;</span><br><span class="line"><span class="comment">//æ€è·¯</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 1. å› ä¸ºæˆ‘ä»¬çš„äºŒå‰æ ‘æ˜¯å•å‘çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ˜¯åˆ¤æ–­å½“å‰ç»“ç‚¹çš„å­ç»“ç‚¹æ˜¯å¦éœ€è¦åˆ é™¤ç»“ç‚¹ï¼Œè€Œä¸èƒ½å»åˆ¤æ–­å½“å‰è¿™ä¸ªç»“ç‚¹æ˜¯ä¸æ˜¯éœ€è¦åˆ é™¤ç»“ç‚¹.</span></span><br><span class="line"><span class="comment">2. å¦‚æœå½“å‰ç»“ç‚¹çš„å·¦å­ç»“ç‚¹ä¸ä¸ºç©ºï¼Œå¹¶ä¸”å·¦å­ç»“ç‚¹ å°±æ˜¯è¦åˆ é™¤ç»“ç‚¹ï¼Œå°±å°†this.left = null; å¹¶ä¸”å°±è¿”å›(ç»“æŸé€’å½’åˆ é™¤)</span></span><br><span class="line"><span class="comment">3. å¦‚æœå½“å‰ç»“ç‚¹çš„å³å­ç»“ç‚¹ä¸ä¸ºç©ºï¼Œå¹¶ä¸”å³å­ç»“ç‚¹ å°±æ˜¯è¦åˆ é™¤ç»“ç‚¹ï¼Œå°±å°†this.right= null ;å¹¶ä¸”å°±è¿”å›(ç»“æŸé€’å½’åˆ é™¤)</span></span><br><span class="line"><span class="comment">4. å¦‚æœç¬¬2å’Œç¬¬3æ­¥æ²¡æœ‰åˆ é™¤ç»“ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å‘å·¦å­æ ‘è¿›è¡Œé€’å½’åˆ é™¤</span></span><br><span class="line"><span class="comment">5.  å¦‚æœç¬¬4æ­¥ä¹Ÿæ²¡æœ‰åˆ é™¤ç»“ç‚¹ï¼Œåˆ™åº”å½“å‘å³å­æ ‘è¿›è¡Œé€’å½’åˆ é™¤.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//2. å¦‚æœå½“å‰ç»“ç‚¹çš„å·¦å­ç»“ç‚¹ä¸ä¸ºç©ºï¼Œå¹¶ä¸”å·¦å­ç»“ç‚¹ å°±æ˜¯è¦åˆ é™¤ç»“ç‚¹ï¼Œå°±å°†this.left = null; å¹¶ä¸”å°±è¿”å›(ç»“æŸé€’å½’åˆ é™¤)</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.left != <span class="literal">null</span> &amp;&amp; <span class="built_in">this</span>.left.no == no) &#123;</span><br><span class="line"><span class="built_in">this</span>.left = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.å¦‚æœå½“å‰ç»“ç‚¹çš„å³å­ç»“ç‚¹ä¸ä¸ºç©ºï¼Œå¹¶ä¸”å³å­ç»“ç‚¹ å°±æ˜¯è¦åˆ é™¤ç»“ç‚¹ï¼Œå°±å°†this.right= null ;å¹¶ä¸”å°±è¿”å›(ç»“æŸé€’å½’åˆ é™¤)</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.right != <span class="literal">null</span> &amp;&amp; <span class="built_in">this</span>.right.no == no) &#123;</span><br><span class="line"><span class="built_in">this</span>.right = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//4.æˆ‘ä»¬å°±éœ€è¦å‘å·¦å­æ ‘è¿›è¡Œé€’å½’åˆ é™¤</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.left != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="built_in">this</span>.left.delNode(no);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//5.åˆ™åº”å½“å‘å³å­æ ‘è¿›è¡Œé€’å½’åˆ é™¤</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.right != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="built_in">this</span>.right.delNode(no);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="10-3é“¾å¼å­˜å‚¨"><a href="#10-3é“¾å¼å­˜å‚¨" class="headerlink" title="10.3é“¾å¼å­˜å‚¨"></a>10.3é“¾å¼å­˜å‚¨</h3><p><strong>æŸ¥æ‰¾èŠ‚ç‚¹</strong>ï¼šå…ˆå¯¹æ ‘è¿›è¡Œä¸€æ¬¡éå†ï¼Œç„¶åæ‰¾å‡ºè¦æ‰¾çš„é‚£ä¸ªæ•°ï¼›å› ä¸ºæœ‰ä¸‰ç§æ’åºæ–¹æ³•ï¼Œæ‰€ä»¥æŸ¥æ‰¾èŠ‚ç‚¹ä¹Ÿåˆ†ä¸ºå…ˆåºæŸ¥æ‰¾ï¼Œä¸­åºæŸ¥æ‰¾ï¼ŒååºæŸ¥æ‰¾ï¼›</p><p><strong>åˆ é™¤èŠ‚ç‚¹</strong>ï¼šç”±äºé“¾å¼å­˜å‚¨ï¼Œä¸èƒ½æ‰¾åˆ°è¦åˆ çš„æ•°ç›´æ¥åˆ é™¤ï¼Œéœ€è¦æ‰¾åˆ°ä»–çš„çˆ¶èŠ‚ç‚¹ï¼Œç„¶åå°†æŒ‡å‘è¯¥æ•°è®¾ç½®ä¸ºnullï¼›æ‰€ä»¥éœ€è¦ä¸€ä¸ªå˜é‡æ¥æŒ‡å‘çˆ¶èŠ‚ç‚¹ï¼Œæ‰¾åˆ°æ•°åï¼Œå†æ–­å¼€è¿æ¥ã€‚</p><p>æ ‘ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinaryTree</span> &#123;</span><br><span class="line"></span><br><span class="line">    TreeNode root;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRoot</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.root = root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">getRoot</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…ˆåºéå†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">frontShow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">            root.frontShow();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸­åºéå†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">middleShow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">            root.middleShow();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ååºéå†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterShow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">            root.afterShow();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…ˆåºæŸ¥æ‰¾</span></span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">frontSearch</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> root.frontSearch(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤ä¸€ä¸ªå­æ ‘</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root.value == i) &#123;</span><br><span class="line">            root = <span class="literal">null</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            root.delete(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>èŠ‚ç‚¹ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeNode</span> &#123;</span><br><span class="line">    <span class="comment">//èŠ‚ç‚¹çš„æƒ</span></span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line">    <span class="comment">//å·¦å„¿å­</span></span><br><span class="line">    TreeNode leftNode;</span><br><span class="line">    <span class="comment">//å³å„¿å­</span></span><br><span class="line">    TreeNode rightNode;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TreeNode</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®å·¦å„¿å­</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLeftNode</span><span class="params">(TreeNode leftNode)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.leftNode = leftNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®å³å„¿å­</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRightNode</span><span class="params">(TreeNode rightNode)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rightNode = rightNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…ˆåºéå†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">frontShow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//å…ˆéå†å½“å‰èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        System.out.print(value + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="comment">//å·¦èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (leftNode != <span class="literal">null</span>) &#123;</span><br><span class="line">            leftNode.frontShow(); <span class="comment">//é€’å½’æ€æƒ³</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å³èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (rightNode != <span class="literal">null</span>) &#123;</span><br><span class="line">            rightNode.frontShow();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸­åºéå†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">middleShow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//å·¦èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (leftNode != <span class="literal">null</span>) &#123;</span><br><span class="line">            leftNode.middleShow(); <span class="comment">//é€’å½’æ€æƒ³</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å…ˆéå†å½“å‰èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        System.out.print(value + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="comment">//å³èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (rightNode != <span class="literal">null</span>) &#123;</span><br><span class="line">            rightNode.middleShow();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åç»­éå†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterShow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//å·¦èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (leftNode != <span class="literal">null</span>) &#123;</span><br><span class="line">            leftNode.afterShow(); <span class="comment">//é€’å½’æ€æƒ³</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å³èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (rightNode != <span class="literal">null</span>) &#123;</span><br><span class="line">            rightNode.afterShow();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å…ˆéå†å½“å‰èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        System.out.print(value + <span class="string">&quot; &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…ˆåºæŸ¥æ‰¾</span></span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">frontSearch</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">target</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//å¯¹æ¯”å½“å‰èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.value == i) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">            <span class="comment">//å½“å‰èŠ‚ç‚¹ä¸æ˜¯è¦æŸ¥æ‰¾çš„èŠ‚ç‚¹</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//æŸ¥æ‰¾å·¦å„¿å­</span></span><br><span class="line">            <span class="keyword">if</span> (leftNode != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">//æŸ¥æ‰¾çš„è¯tèµ‹å€¼ç»™targetï¼ŒæŸ¥ä¸åˆ°targetè¿˜æ˜¯null</span></span><br><span class="line">                target = leftNode.frontSearch(i);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å¦‚æœtargetä¸ä¸ºç©ºï¼Œè¯´æ˜åœ¨å·¦å„¿å­ä¸­å·²ç»æ‰¾åˆ°</span></span><br><span class="line">            <span class="keyword">if</span> (target != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> target;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å¦‚æœå·¦å„¿å­æ²¡æœ‰æŸ¥åˆ°ï¼Œå†æŸ¥æ‰¾å³å„¿å­</span></span><br><span class="line">            <span class="keyword">if</span> (rightNode != <span class="literal">null</span>) &#123;</span><br><span class="line">                target = rightNode.frontSearch(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤ä¸€ä¸ªå­æ ‘</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">parent</span> <span class="operator">=</span> <span class="built_in">this</span>;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­å·¦å„¿å­</span></span><br><span class="line">        <span class="keyword">if</span> (parent.leftNode != <span class="literal">null</span> &amp;&amp; parent.leftNode.value == i) &#123;</span><br><span class="line">            parent.leftNode = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­å³å„¿å­</span></span><br><span class="line">        <span class="keyword">if</span> (parent.rightNode != <span class="literal">null</span> &amp;&amp; parent.rightNode.value == i) &#123;</span><br><span class="line">            parent.rightNode = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦‚æœéƒ½ä¸æ˜¯ï¼Œé€’å½’æ£€æŸ¥å¹¶åˆ é™¤å·¦å„¿å­</span></span><br><span class="line">        parent = leftNode;</span><br><span class="line">        <span class="keyword">if</span> (parent != <span class="literal">null</span>) &#123;</span><br><span class="line">            parent.delete(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//é€’å½’æ£€æŸ¥å¹¶åˆ é™¤å³å„¿å­</span></span><br><span class="line">        parent = rightNode;</span><br><span class="line">        <span class="keyword">if</span> (parent != <span class="literal">null</span>) &#123;</span><br><span class="line">            parent.delete(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€æ£µæ ‘</span></span><br><span class="line">        <span class="type">BinaryTree</span> <span class="variable">binaryTree</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BinaryTree</span>();</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//æŠŠæ ¹èŠ‚ç‚¹èµ‹ç»™æ ‘</span></span><br><span class="line">        binaryTree.setRoot(root);</span><br><span class="line">        <span class="comment">//åˆ›å»ºå·¦,å³èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">rootLeft</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">2</span>);</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">rootRight</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">3</span>);</span><br><span class="line">        <span class="comment">//æŠŠæ–°å»ºçš„èŠ‚ç‚¹è®¾ç½®ä¸ºæ ¹èŠ‚ç‚¹çš„å­èŠ‚ç‚¹</span></span><br><span class="line">        root.setLeftNode(rootLeft);</span><br><span class="line">        root.setRightNode(rootRight);</span><br><span class="line">        <span class="comment">//ä¸ºç¬¬äºŒå±‚çš„å·¦èŠ‚ç‚¹åˆ›å»ºä¸¤ä¸ªå­èŠ‚ç‚¹</span></span><br><span class="line">        rootLeft.setLeftNode(<span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">4</span>));</span><br><span class="line">        rootLeft.setRightNode(<span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">5</span>));</span><br><span class="line">        <span class="comment">//ä¸ºç¬¬äºŒå±‚çš„å³èŠ‚ç‚¹åˆ›å»ºä¸¤ä¸ªå­èŠ‚ç‚¹</span></span><br><span class="line">        rootRight.setLeftNode(<span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">6</span>));</span><br><span class="line">        rootRight.setRightNode(<span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">7</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…ˆåºéå†</span></span><br><span class="line">        binaryTree.frontShow(); <span class="comment">//1 2 4 5 3 6 7</span></span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="comment">//ä¸­åºéå†</span></span><br><span class="line">        binaryTree.middleShow(); <span class="comment">//4 2 5 1 6 3 7</span></span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="comment">//ååºéå†</span></span><br><span class="line">        binaryTree.afterShow(); <span class="comment">//4 5 2 6 7 3 1</span></span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…ˆåºæŸ¥æ‰¾</span></span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">result</span> <span class="operator">=</span> binaryTree.frontSearch(<span class="number">5</span>);</span><br><span class="line">        System.out.println(result); <span class="comment">//binarytree.TreeNode@1b6d3586</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ é™¤ä¸€ä¸ªå­æ ‘</span></span><br><span class="line">        binaryTree.delete(<span class="number">2</span>);</span><br><span class="line">        binaryTree.frontShow(); <span class="comment">//1 3 6 7 ï¼Œ2å’Œä»–çš„å­èŠ‚ç‚¹è¢«åˆ é™¤äº†</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="10-4é¡ºåºå­˜å‚¨çš„äºŒå‰æ ‘"><a href="#10-4é¡ºåºå­˜å‚¨çš„äºŒå‰æ ‘" class="headerlink" title="10.4é¡ºåºå­˜å‚¨çš„äºŒå‰æ ‘"></a>10.4é¡ºåºå­˜å‚¨çš„äºŒå‰æ ‘</h3><p><strong>æ¦‚è¿°</strong>ï¼šé¡ºåºå­˜å‚¨ä½¿ç”¨æ•°ç»„çš„å½¢å¼å®ç°ï¼›ç”±äºéå®Œå…¨äºŒå‰æ ‘ä¼šå¯¼è‡´æ•°ç»„ä¸­å‡ºç°ç©ºç¼ºï¼Œæœ‰çš„ä½ç½®ä¸èƒ½å¡«ä¸Šæ•°å­—ï¼Œæ‰€ä»¥é¡ºåºå­˜å‚¨äºŒå‰æ ‘é€šå¸¸æƒ…å†µä¸‹åªè€ƒè™‘<strong>å®Œå…¨äºŒå‰æ ‘</strong></p><p><strong>åŸç†</strong>ï¼š é¡ºåºå­˜å‚¨åœ¨æ•°ç»„ä¸­æ˜¯æŒ‰ç…§ç¬¬ä¸€å±‚ç¬¬äºŒå±‚ä¸€æ¬¡å¾€ä¸‹å­˜å‚¨çš„ï¼Œéå†æ–¹å¼ä¹Ÿæœ‰å…ˆåºéå†ã€ä¸­åºéå†ã€åç»­éå†</p><p><strong>æ€§è´¨</strong>ï¼š</p><ul><li>ç¬¬nä¸ªå…ƒç´ çš„å·¦å­èŠ‚ç‚¹æ˜¯ï¼š2*n+1ï¼›</li><li>ç¬¬nä¸ªå…ƒç´ çš„å³å­èŠ‚ç‚¹æ˜¯ï¼š2*n+2ï¼›</li><li>ç¬¬nä¸ªå…ƒç´ çš„çˆ¶èŠ‚ç‚¹æ˜¯ï¼šï¼ˆn-1)/2</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayBinaryTree</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">int</span>[] data = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>&#125;;</span><br><span class="line"><span class="type">ArrayBinaryTree</span> <span class="variable">tree</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayBinaryTree</span>(data);</span><br><span class="line"><span class="comment">//å…ˆåºéå†</span></span><br><span class="line">tree.frontShow(); <span class="comment">//1 2 4 5 3 6 7</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayBinaryTree</span><span class="params">(<span class="type">int</span>[] data)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.data = data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡è½½å…ˆåºéå†æ–¹æ³•ï¼Œä¸ç”¨æ¯æ¬¡ä¼ å‚æ•°äº†,ä¿è¯æ¯æ¬¡ä»å¤´å¼€å§‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">frontShow</span><span class="params">()</span> &#123;</span><br><span class="line">frontShow(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…ˆåºéå†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">frontShow</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (data == <span class="literal">null</span> || data.length == <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å…ˆéå†å½“å‰èŠ‚ç‚¹çš„å†…å®¹</span></span><br><span class="line">System.out.print(data[index] + <span class="string">&quot; &quot;</span>);</span><br><span class="line"><span class="comment">//å¤„ç†å·¦å­æ ‘ï¼š2*index+1</span></span><br><span class="line"><span class="keyword">if</span> (<span class="number">2</span> * index + <span class="number">1</span> &lt; data.length) &#123;</span><br><span class="line">frontShow(<span class="number">2</span> * index + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¤„ç†å³å­æ ‘ï¼š2*index+2</span></span><br><span class="line"><span class="keyword">if</span> (<span class="number">2</span> * index + <span class="number">2</span> &lt; data.length) &#123;</span><br><span class="line">frontShow(<span class="number">2</span> * index + <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="10-5çº¿ç´¢äºŒå‰æ ‘"><a href="#10-5çº¿ç´¢äºŒå‰æ ‘" class="headerlink" title="10.5çº¿ç´¢äºŒå‰æ ‘"></a>10.5çº¿ç´¢äºŒå‰æ ‘</h3><p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨çº¿ç´¢äºŒå‰æ ‘ï¼Ÿ</strong></p><p>å½“ç”¨äºŒå‰é“¾è¡¨ä½œä¸ºäºŒå‰æ ‘çš„å­˜å‚¨ç»“æ„æ—¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„æ‰¾åˆ°æŸä¸ªç»“ç‚¹çš„å·¦å³å­©å­ï¼›ä½†ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ— æ³•ç›´æ¥æ‰¾åˆ°è¯¥ç»“ç‚¹åœ¨æŸç§éå†åºåˆ—ä¸­çš„å‰é©±å’Œåç»§ç»“ç‚¹</p><p><strong>åŸç†</strong>ï¼šnä¸ªç»“ç‚¹çš„äºŒå‰é“¾è¡¨ä¸­å«æœ‰n+1(2n-(n-1)=n+1ä¸ªç©ºæŒ‡é’ˆåŸŸã€‚åˆ©ç”¨äºŒå‰é“¾è¡¨ä¸­çš„ç©ºæŒ‡é’ˆåŸŸï¼Œå­˜æ”¾æŒ‡å‘ç»“ç‚¹åœ¨æŸç§éå†æ¬¡åºä¸‹çš„å‰é©±å’Œåç»§ç»“ç‚¹çš„æŒ‡é’ˆã€‚</p><p><strong>ä¾‹å¦‚</strong>ï¼šæŸä¸ªç»“ç‚¹çš„å·¦å­©å­ä¸ºç©ºï¼Œåˆ™å°†ç©ºçš„å·¦å­©å­æŒ‡é’ˆåŸŸæ”¹ä¸ºæŒ‡å‘å…¶å‰é©±ï¼›å¦‚æœæŸä¸ªç»“ç‚¹çš„å³å­©å­ä¸ºç©ºï¼Œåˆ™å°†ç©ºçš„å³å­©å­æŒ‡é’ˆåŸŸæ”¹ä¸ºæŒ‡å‘å…¶åç»§ï¼ˆè¿™ç§é™„åŠ çš„æŒ‡é’ˆç§°ä¸ºâ€çº¿ç´¢â€ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadedBinaryTree</span> &#123;</span><br><span class="line"></span><br><span class="line">    ThreadedNode root;</span><br><span class="line">    <span class="comment">//ç”¨äºä¸´æ—¶å­˜å‚¨å‰é©±èŠ‚ç‚¹</span></span><br><span class="line">    <span class="type">ThreadedNode</span> <span class="variable">pre</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è®¾ç½®æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRoot</span><span class="params">(ThreadedNode root)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.root = root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸­åºçº¿ç´¢åŒ–äºŒå‰æ ‘</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">threadNodes</span><span class="params">()</span> &#123;</span><br><span class="line">        threadNodes(root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">threadNodes</span><span class="params">(ThreadedNode node)</span> &#123;</span><br><span class="line">        <span class="comment">//å½“å‰èŠ‚ç‚¹å¦‚æœä¸ºnullï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¤„ç†å·¦å­æ ‘</span></span><br><span class="line">        threadNodes(node.leftNode);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¤„ç†å‰é©±èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (node.leftNode == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//è®©å½“å‰èŠ‚ç‚¹çš„å·¦æŒ‡é’ˆæŒ‡å‘å‰é©±èŠ‚ç‚¹</span></span><br><span class="line">            node.leftNode = pre;</span><br><span class="line">            <span class="comment">//æ”¹å˜å½“å‰èŠ‚ç‚¹å·¦æŒ‡é’ˆç±»å‹</span></span><br><span class="line">            node.leftType = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¤„ç†å‰é©±çš„å³æŒ‡é’ˆï¼Œå¦‚æœå‰é©±èŠ‚ç‚¹çš„å³æŒ‡é’ˆæ˜¯nullï¼ˆæ²¡æœ‰å³å­æ ‘ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> (pre != <span class="literal">null</span> &amp;&amp; pre.rightNode == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//è®©å‰é©±èŠ‚ç‚¹çš„å³æŒ‡é’ˆæŒ‡å‘å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">            pre.rightNode = node;</span><br><span class="line">            <span class="comment">//æ”¹å˜å‰é©±èŠ‚ç‚¹çš„å³æŒ‡é’ˆç±»å‹</span></span><br><span class="line">            pre.rightType = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ¯å¤„ç†ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå½“å‰èŠ‚ç‚¹æ˜¯ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹</span></span><br><span class="line">        pre = node;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¤„ç†å³å­æ ‘</span></span><br><span class="line">        threadNodes(node.rightNode);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//éå†çº¿ç´¢äºŒå‰æ ‘</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">threadIterate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//ç”¨äºä¸´æ—¶å­˜å‚¨å½“å‰éå†èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">ThreadedNode</span> <span class="variable">node</span> <span class="operator">=</span> root;</span><br><span class="line">        <span class="keyword">while</span> (node != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//å¾ªç¯æ‰¾åˆ°æœ€å¼€å§‹çš„èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">while</span> (node.leftType == <span class="number">0</span>) &#123;</span><br><span class="line">                node = node.leftNode;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//æ‰“å°å½“å‰èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">            System.out.print(node.value + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="comment">//å¦‚æœå½“å‰èŠ‚ç‚¹çš„å³æŒ‡é’ˆæŒ‡å‘çš„æ˜¯åç»§èŠ‚ç‚¹ï¼Œå¯èƒ½åç»§èŠ‚ç‚¹è¿˜æœ‰åç»§èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">while</span> (node.rightType == <span class="number">1</span>) &#123;</span><br><span class="line">                node = node.rightNode;</span><br><span class="line">                System.out.print(node.value + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//æ›¿æ¢éå†çš„èŠ‚ç‚¹</span></span><br><span class="line">            node = node.rightNode;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> ThreadedNode <span class="title function_">getRoot</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…ˆåºéå†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">frontShow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">            root.frontShow();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸­åºéå†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">middleShow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">            root.middleShow();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ååºéå†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterShow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">            root.afterShow();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…ˆåºæŸ¥æ‰¾</span></span><br><span class="line">    <span class="keyword">public</span> ThreadedNode <span class="title function_">frontSearch</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> root.frontSearch(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤ä¸€ä¸ªå­æ ‘</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root.value == i) &#123;</span><br><span class="line">            root = <span class="literal">null</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            root.delete(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadedNode</span> &#123;</span><br><span class="line">    <span class="comment">//èŠ‚ç‚¹çš„æƒ</span></span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line">    <span class="comment">//å·¦å„¿å­</span></span><br><span class="line">    ThreadedNode leftNode;</span><br><span class="line">    <span class="comment">//å³å„¿å­</span></span><br><span class="line">    ThreadedNode rightNode;</span><br><span class="line">    <span class="comment">//æ ‡è¯†æŒ‡é’ˆç±»å‹,1è¡¨ç¤ºæŒ‡å‘ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œ0</span></span><br><span class="line">    <span class="type">int</span> leftType;</span><br><span class="line">    <span class="type">int</span> rightType;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ThreadedNode</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®å·¦å„¿å­</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLeftNode</span><span class="params">(ThreadedNode leftNode)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.leftNode = leftNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®å³å„¿å­</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRightNode</span><span class="params">(ThreadedNode rightNode)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rightNode = rightNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…ˆåºéå†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">frontShow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//å…ˆéå†å½“å‰èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        System.out.print(value + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="comment">//å·¦èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (leftNode != <span class="literal">null</span>) &#123;</span><br><span class="line">            leftNode.frontShow(); <span class="comment">//é€’å½’æ€æƒ³</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å³èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (rightNode != <span class="literal">null</span>) &#123;</span><br><span class="line">            rightNode.frontShow();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸­åºéå†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">middleShow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//å·¦èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (leftNode != <span class="literal">null</span>) &#123;</span><br><span class="line">            leftNode.middleShow(); <span class="comment">//é€’å½’æ€æƒ³</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å…ˆéå†å½“å‰èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        System.out.print(value + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="comment">//å³èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (rightNode != <span class="literal">null</span>) &#123;</span><br><span class="line">            rightNode.middleShow();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åç»­éå†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterShow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//å·¦èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (leftNode != <span class="literal">null</span>) &#123;</span><br><span class="line">            leftNode.afterShow(); <span class="comment">//é€’å½’æ€æƒ³</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å³èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (rightNode != <span class="literal">null</span>) &#123;</span><br><span class="line">            rightNode.afterShow();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å…ˆéå†å½“å‰èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        System.out.print(value + <span class="string">&quot; &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…ˆåºæŸ¥æ‰¾</span></span><br><span class="line">    <span class="keyword">public</span> ThreadedNode <span class="title function_">frontSearch</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="type">ThreadedNode</span> <span class="variable">target</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//å¯¹æ¯”å½“å‰èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.value == i) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">            <span class="comment">//å½“å‰èŠ‚ç‚¹ä¸æ˜¯è¦æŸ¥æ‰¾çš„èŠ‚ç‚¹</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//æŸ¥æ‰¾å·¦å„¿å­</span></span><br><span class="line">            <span class="keyword">if</span> (leftNode != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">//æŸ¥æ‰¾çš„è¯tèµ‹å€¼ç»™targetï¼ŒæŸ¥ä¸åˆ°targetè¿˜æ˜¯null</span></span><br><span class="line">                target = leftNode.frontSearch(i);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å¦‚æœtargetä¸ä¸ºç©ºï¼Œè¯´æ˜åœ¨å·¦å„¿å­ä¸­å·²ç»æ‰¾åˆ°</span></span><br><span class="line">            <span class="keyword">if</span> (target != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> target;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å¦‚æœå·¦å„¿å­æ²¡æœ‰æŸ¥åˆ°ï¼Œå†æŸ¥æ‰¾å³å„¿å­</span></span><br><span class="line">            <span class="keyword">if</span> (rightNode != <span class="literal">null</span>) &#123;</span><br><span class="line">                target = rightNode.frontSearch(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤ä¸€ä¸ªå­æ ‘</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="type">ThreadedNode</span> <span class="variable">parent</span> <span class="operator">=</span> <span class="built_in">this</span>;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­å·¦å„¿å­</span></span><br><span class="line">        <span class="keyword">if</span> (parent.leftNode != <span class="literal">null</span> &amp;&amp; parent.leftNode.value == i) &#123;</span><br><span class="line">            parent.leftNode = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­å³å„¿å­</span></span><br><span class="line">        <span class="keyword">if</span> (parent.rightNode != <span class="literal">null</span> &amp;&amp; parent.rightNode.value == i) &#123;</span><br><span class="line">            parent.rightNode = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦‚æœéƒ½ä¸æ˜¯ï¼Œé€’å½’æ£€æŸ¥å¹¶åˆ é™¤å·¦å„¿å­</span></span><br><span class="line">        parent = leftNode;</span><br><span class="line">        <span class="keyword">if</span> (parent != <span class="literal">null</span>) &#123;</span><br><span class="line">            parent.delete(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//é€’å½’æ£€æŸ¥å¹¶åˆ é™¤å³å„¿å­</span></span><br><span class="line">        parent = rightNode;</span><br><span class="line">        <span class="keyword">if</span> (parent != <span class="literal">null</span>) &#123;</span><br><span class="line">            parent.delete(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€æ£µæ ‘</span></span><br><span class="line">        <span class="type">ThreadedBinaryTree</span> <span class="variable">binaryTree</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadedBinaryTree</span>();</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">ThreadedNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadedNode</span>(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//æŠŠæ ¹èŠ‚ç‚¹èµ‹ç»™æ ‘</span></span><br><span class="line">        binaryTree.setRoot(root);</span><br><span class="line">        <span class="comment">//åˆ›å»ºå·¦,å³èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">ThreadedNode</span> <span class="variable">rootLeft</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadedNode</span>(<span class="number">2</span>);</span><br><span class="line">        <span class="type">ThreadedNode</span> <span class="variable">rootRight</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadedNode</span>(<span class="number">3</span>);</span><br><span class="line">        <span class="comment">//æŠŠæ–°å»ºçš„èŠ‚ç‚¹è®¾ç½®ä¸ºæ ¹èŠ‚ç‚¹çš„å­èŠ‚ç‚¹</span></span><br><span class="line">        root.setLeftNode(rootLeft);</span><br><span class="line">        root.setRightNode(rootRight);</span><br><span class="line">        <span class="comment">//ä¸ºç¬¬äºŒå±‚çš„å·¦èŠ‚ç‚¹åˆ›å»ºä¸¤ä¸ªå­èŠ‚ç‚¹</span></span><br><span class="line">        rootLeft.setLeftNode(<span class="keyword">new</span> <span class="title class_">ThreadedNode</span>(<span class="number">4</span>));</span><br><span class="line">        <span class="type">ThreadedNode</span> <span class="variable">fiveNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadedNode</span>(<span class="number">5</span>);</span><br><span class="line">        rootLeft.setRightNode(fiveNode);</span><br><span class="line">        <span class="comment">//ä¸ºç¬¬äºŒå±‚çš„å³èŠ‚ç‚¹åˆ›å»ºä¸¤ä¸ªå­èŠ‚ç‚¹</span></span><br><span class="line">        rootRight.setLeftNode(<span class="keyword">new</span> <span class="title class_">ThreadedNode</span>(<span class="number">6</span>));</span><br><span class="line">        rootRight.setRightNode(<span class="keyword">new</span> <span class="title class_">ThreadedNode</span>(<span class="number">7</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸­åºéå†</span></span><br><span class="line">        binaryTree.middleShow(); <span class="comment">//4 2 5 1 6 3 7</span></span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="comment">//ä¸­åºçº¿ç´¢åŒ–äºŒå‰æ ‘</span></span><br><span class="line">        binaryTree.threadNodes();</span><br><span class="line"><span class="comment">//        //è·å–5çš„åç»§èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//        ThreadedNode afterFive = fiveNode.rightNode;</span></span><br><span class="line"><span class="comment">//        System.out.println(afterFive.value); //1</span></span><br><span class="line">        binaryTree.threadIterate(); <span class="comment">//4 2 5 1 6 3 7</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="10-6äºŒå‰æ’åºæ ‘"><a href="#10-6äºŒå‰æ’åºæ ‘" class="headerlink" title="10.6äºŒå‰æ’åºæ ‘"></a>10.6äºŒå‰æ’åºæ ‘</h3><p><strong>æ¦‚è¿°</strong>ï¼šäºŒå‰æ’åºæ ‘ï¼ˆBinary Sort Treeï¼‰ä¹Ÿå«äºŒå‰æŸ¥æ‰¾æ ‘æˆ–è€…æ˜¯ä¸€é¢—ç©ºæ ‘ï¼Œå¯¹äºäºŒå‰æ ‘ä¸­çš„ä»»ä½•ä¸€ä¸ªéå¶å­èŠ‚ç‚¹ï¼Œè¦æ±‚å·¦å­èŠ‚ç‚¹æ¯”å½“å‰èŠ‚ç‚¹å€¼å°ï¼Œå³å­èŠ‚ç‚¹æ¯”å½“å‰èŠ‚ç‚¹å€¼å¤§</p><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>æŸ¥æ‰¾æ€§èƒ½ä¸æ’å…¥åˆ é™¤æ€§èƒ½éƒ½é€‚ä¸­è¿˜ä¸é”™</li><li>ä¸­åºéå†çš„ç»“æœåˆšå¥½æ˜¯ä»å¤§åˆ°å°</li></ul><p><strong>åˆ›å»ºäºŒå‰æ’åºæ ‘åŸç†</strong>ï¼šå…¶å®å°±æ˜¯ä¸æ–­åœ°æ’å…¥èŠ‚ç‚¹ï¼Œç„¶åè¿›è¡Œæ¯”è¾ƒã€‚</p><p><strong>åˆ é™¤èŠ‚ç‚¹</strong></p><ul><li>åˆ é™¤å¶å­èŠ‚ç‚¹ï¼Œåªéœ€è¦æ‰¾åˆ°çˆ¶èŠ‚ç‚¹ï¼Œå°†çˆ¶èŠ‚ç‚¹ä¸ä»–çš„è¿æ¥æ–­å¼€å³å¯</li><li>åˆ é™¤æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹çš„å°±éœ€è¦å°†ä»–çš„å­èŠ‚ç‚¹æ¢åˆ°ä»–ç°åœ¨çš„ä½ç½®</li><li>åˆ é™¤æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼Œéœ€è¦ä½¿ç”¨ä»–çš„å‰é©±èŠ‚ç‚¹æˆ–è€…åç»§èŠ‚ç‚¹è¿›è¡Œæ›¿æ¢ï¼Œå°±æ˜¯å·¦å­æ ‘æœ€å³ä¸‹æ–¹çš„æ•°ï¼ˆæœ€å¤§çš„é‚£ä¸ªï¼‰æˆ–å³å­æ ‘æœ€å·¦è¾¹çš„æ ‘ï¼ˆæœ€å°çš„æ•°ï¼‰ï¼›å³ç¦»èŠ‚ç‚¹å€¼æœ€æ¥è¿‘çš„å€¼ï¼›ï¼ˆè¿˜è¦æ³¨è§£è¦å»åˆ¤æ–­è¿™ä¸ªå€¼æœ‰æ²¡æœ‰å³èŠ‚ç‚¹ï¼Œæœ‰å°±è¦å°†å³èŠ‚ç‚¹ç§»ä¸Šæ¥ï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinarySortTree</span> &#123;</span><br><span class="line">    Node root;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ·»åŠ èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœæ˜¯ä¸€é¢—ç©ºæ ‘</span></span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            root = node;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            root.add(node);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸­åºéå†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">middleShow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">            root.middleShow(root);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥æ‰¾èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">search</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root.search(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥æ‰¾çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">searchParent</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root.searchParent(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//æ‰¾åˆ°è¿™ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            <span class="type">Node</span> <span class="variable">target</span> <span class="operator">=</span> search(value);</span><br><span class="line">            <span class="comment">//å¦‚æœæ²¡æœ‰è¿™ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (target == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//æ‰¾åˆ°ä»–çš„çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">            <span class="type">Node</span> <span class="variable">parent</span> <span class="operator">=</span> searchParent(value);</span><br><span class="line">            <span class="comment">//è¦åˆ é™¤çš„èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (target.left == <span class="literal">null</span> &amp;&amp; target.left == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">//è¦åˆ é™¤çš„èŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹</span></span><br><span class="line">                <span class="keyword">if</span> (parent.left.value == value) &#123;</span><br><span class="line">                    parent.left = <span class="literal">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//è¦åˆ é™¤çš„èŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹</span></span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    parent.right = <span class="literal">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è¦åˆ é™¤çš„èŠ‚ç‚¹æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„æƒ…å†µ</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (target.left != <span class="literal">null</span> &amp;&amp; target.right != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">//åˆ é™¤å³å­æ ‘ä¸­å€¼æœ€å°çš„èŠ‚ç‚¹ï¼Œå¹¶ä¸”è·å–åˆ°å€¼</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> deletMin(target.right);</span><br><span class="line">                <span class="comment">//æ›¿æ¢ç›®æ ‡èŠ‚ç‚¹ä¸­çš„å€¼</span></span><br><span class="line">                target.value = min;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è¦åˆ é™¤çš„èŠ‚ç‚¹æœ‰ä¸€ä¸ªå·¦å­èŠ‚ç‚¹æˆ–å³å­èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//æœ‰å·¦å­èŠ‚ç‚¹</span></span><br><span class="line">                <span class="keyword">if</span> (target.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="comment">//è¦åˆ é™¤çš„èŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹</span></span><br><span class="line">                    <span class="keyword">if</span> (parent.left.value == value) &#123;</span><br><span class="line">                        parent.left = target.left;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//è¦åˆ é™¤çš„èŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹</span></span><br><span class="line">                    <span class="keyword">else</span> &#123;</span><br><span class="line">                        parent.right = target.left;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//æœ‰å³å­èŠ‚ç‚¹</span></span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//è¦åˆ é™¤çš„èŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹</span></span><br><span class="line">                    <span class="keyword">if</span> (parent.left.value == value) &#123;</span><br><span class="line">                        parent.left = target.right;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//è¦åˆ é™¤çš„èŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹</span></span><br><span class="line">                    <span class="keyword">else</span> &#123;</span><br><span class="line">                        parent.right = target.right;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤ä¸€æ£µæ ‘ä¸­æœ€å°çš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">deletMin</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">target</span> <span class="operator">=</span> node;</span><br><span class="line">        <span class="comment">//é€’å½’å‘å·¦æ‰¾æœ€å°å€¼</span></span><br><span class="line">        <span class="keyword">while</span> (target.left != <span class="literal">null</span>) &#123;</span><br><span class="line">            target = target.left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ é™¤æœ€å°çš„èŠ‚ç‚¹</span></span><br><span class="line">        delete(target.value);</span><br><span class="line">        <span class="keyword">return</span> target.value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line">    Node left;</span><br><span class="line">    Node right;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘å­æ ‘ä¸­æ·»åŠ èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*åˆ¤æ–­ä¼ å…¥çš„èŠ‚ç‚¹çš„å€¼æ¯”å½“å‰ç´«è–¯çš„æ ¹èŠ‚ç‚¹çš„å€¼å¤§è¿˜æ˜¯å°*/</span></span><br><span class="line">        <span class="comment">//æ·»åŠ çš„èŠ‚ç‚¹æ¯”å½“å‰èŠ‚ç‚¹æ›´å°(ä¼ ç»™å·¦èŠ‚ç‚¹ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> (node.value &lt; <span class="built_in">this</span>.value) &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœå·¦èŠ‚ç‚¹ä¸ºç©º</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.left == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="built_in">this</span>.left = node;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å¦‚æœä¸ä¸ºç©º</span></span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.left.add(node);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ·»åŠ çš„èŠ‚ç‚¹æ¯”å½“å‰èŠ‚ç‚¹æ›´å¤§(ä¼ ç»™å³èŠ‚ç‚¹ï¼‰</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.right == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="built_in">this</span>.right = node;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.right.add(node);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸­åºéå†äºŒå‰æ’åºæ ‘ï¼Œç»“æœåˆšå¥½æ˜¯ä»å°åˆ°å¤§</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">middleShow</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        middleShow(node.left);</span><br><span class="line">        System.out.print(node.value + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        middleShow(node.right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥æ‰¾èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">search</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.value == value) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value &lt; <span class="built_in">this</span>.value) &#123;</span><br><span class="line">            <span class="keyword">if</span> (left == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> left.search(value);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (right == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> right.search(value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥æ‰¾çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">searchParent</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> ((<span class="built_in">this</span>.left != <span class="literal">null</span> &amp;&amp; <span class="built_in">this</span>.left.value == value) || (<span class="built_in">this</span>.right != <span class="literal">null</span> &amp;&amp; <span class="built_in">this</span>.right.value == value)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.value &gt; value &amp;&amp; <span class="built_in">this</span>.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">this</span>.left.searchParent(value);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.value &lt; value &amp;&amp; <span class="built_in">this</span>.right != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">this</span>.right.searchParent(value);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">8</span>, <span class="number">3</span>, <span class="number">10</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">14</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">13</span>&#125;;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€é¢—äºŒå‰æ’åºæ ‘</span></span><br><span class="line">        <span class="type">BinarySortTree</span> <span class="variable">bst</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BinarySortTree</span>();</span><br><span class="line">        <span class="comment">//å¾ªç¯æ·»åŠ </span></span><br><span class="line"><span class="comment">/*        for(int i=0;i&lt; arr.length;i++) &#123;</span></span><br><span class="line"><span class="comment">            bst.add(new Node(arr[i]));</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i : arr) &#123;</span><br><span class="line">            bst.add(<span class="keyword">new</span> <span class="title class_">Node</span>(i));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸­åºéå†</span></span><br><span class="line">        bst.middleShow(); <span class="comment">//1 3 4 6 7 8 10 13 14</span></span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŸ¥æ‰¾èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> bst.search(<span class="number">10</span>);</span><br><span class="line">        System.out.println(node.value);<span class="comment">//10</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Node</span> <span class="variable">node2</span> <span class="operator">=</span> bst.search(<span class="number">20</span>);</span><br><span class="line">        System.out.println(node2); <span class="comment">//null</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŸ¥æ‰¾çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">node3</span> <span class="operator">=</span> bst.searchParent(<span class="number">1</span>);</span><br><span class="line">        <span class="type">Node</span> <span class="variable">node4</span> <span class="operator">=</span> bst.searchParent(<span class="number">14</span>);</span><br><span class="line">        System.out.println(node3.value); <span class="comment">//3</span></span><br><span class="line">        System.out.println(node4.value); <span class="comment">//10</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ é™¤å¶å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//        bst.delete(13);</span></span><br><span class="line"><span class="comment">//        bst.middleShow(); //1 3 4 6 7 8 10 14</span></span><br><span class="line"><span class="comment">//        System.out.println();</span></span><br><span class="line"><span class="comment">//        //åˆ é™¤åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//        bst.delete(10);</span></span><br><span class="line"><span class="comment">//        bst.middleShow(); //1 3 4 6 7 8 ï¼›10å’Œ14éƒ½æ²¡äº†</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ é™¤æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹</span></span><br><span class="line">        bst.delete(<span class="number">3</span>);</span><br><span class="line">        bst.middleShow(); <span class="comment">//1 4 6 7 8 10 13 14</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="10-7å¹³è¡¡äºŒå‰æ ‘"><a href="#10-7å¹³è¡¡äºŒå‰æ ‘" class="headerlink" title="10.7å¹³è¡¡äºŒå‰æ ‘"></a>10.7å¹³è¡¡äºŒå‰æ ‘</h3><p>å¹³è¡¡äºŒå‰æ ‘ï¼ˆBalanced Binary Treeï¼‰åˆè¢«ç§°ä¸ºAVLæ ‘ï¼Œä¸”å…·æœ‰ä»¥ä¸‹æ€§è´¨ï¼šå®ƒæ˜¯ä¸€æ£µç©ºæ ‘æˆ–å®ƒçš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ï¼Œå¹¶ä¸”å·¦å³ä¸¤ä¸ªå­æ ‘éƒ½æ˜¯ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ã€‚è¿™ä¸ªæ–¹æ¡ˆå¾ˆå¥½çš„è§£å†³äº†äºŒå‰æŸ¥æ‰¾æ ‘é€€åŒ–æˆé“¾è¡¨çš„é—®é¢˜ï¼ŒæŠŠæ’å…¥ï¼ŒæŸ¥æ‰¾ï¼Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦æœ€å¥½æƒ…å†µå’Œæœ€åæƒ…å†µéƒ½ç»´æŒåœ¨<code>O(logN)</code>ã€‚ä½†æ˜¯é¢‘ç¹æ—‹è½¬ä¼šä½¿æ’å…¥å’Œåˆ é™¤ç‰ºç‰²æ‰<code>O(logN)</code>å·¦å³çš„æ—¶é—´ï¼Œä¸è¿‡ç›¸å¯¹äºŒå‰æŸ¥æ‰¾æ ‘æ¥è¯´ï¼Œæ—¶é—´ä¸Šç¨³å®šäº†å¾ˆå¤šã€‚ </p><p><strong>å¹³è¡¡å› å­ BF</strong></p><ul><li>å®šä¹‰ï¼šå·¦å­æ ‘å’Œå³å­æ ‘é«˜åº¦å·®</li><li>è®¡ç®—ï¼š<code>å·¦å­æ ‘é«˜åº¦ - å³å­æ ‘é«˜åº¦çš„å€¼</code></li><li>åˆ«åï¼šç®€ç§° BFï¼ˆBalance Factorï¼‰</li><li>ä¸€èˆ¬æ¥è¯´ BF çš„ç»å¯¹å€¼å¤§äº 1ï¼Œ,å¹³è¡¡æ ‘äºŒå‰æ ‘å°±å¤±è¡¡ï¼Œéœ€è¦æ—‹è½¬çº æ­£</li></ul><p><strong>æœ€å°ä¸å¹³è¡¡å­æ ‘</strong></p><ul><li>è·ç¦»æ’å…¥èŠ‚ç‚¹æœ€è¿‘çš„ï¼Œå¹¶ä¸” BF çš„ç»å¯¹å€¼å¤§äº 1 çš„èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘ã€‚</li><li>æ—‹è½¬çº æ­£åªéœ€è¦çº æ­£æœ€å°ä¸å¹³è¡¡å­æ ‘å³å¯</li></ul><h4 id="æ—‹è½¬æ–¹å¼"><a href="#æ—‹è½¬æ–¹å¼" class="headerlink" title="æ—‹è½¬æ–¹å¼"></a>æ—‹è½¬æ–¹å¼</h4><p><strong>2 ç§æ—‹è½¬æ–¹å¼</strong>:</p><p>å·¦æ—‹ :</p><ul><li>æ—§æ ¹èŠ‚ç‚¹ä¸ºæ–°æ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘</li><li>æ–°æ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ä¸ºæ—§æ ¹èŠ‚ç‚¹çš„å³å­æ ‘</li></ul><p>å³æ—‹ï¼š</p><ul><li>æ—§æ ¹èŠ‚ç‚¹ä¸ºæ–°æ ¹èŠ‚ç‚¹çš„å³å­æ ‘</li><li>æ–°æ ¹èŠ‚ç‚¹çš„å³å­æ ‘ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ä¸ºæ—§æ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘</li></ul><p><strong>4 ç§æ—‹è½¬çº æ­£ç±»å‹</strong>ï¼š</p><ul><li>å·¦å·¦å‹ï¼šæ’å…¥å·¦å­©å­çš„å·¦å­æ ‘ï¼Œå³æ—‹</li><li>å³å³å‹ï¼šæ’å…¥å³å­©å­çš„å³å­æ ‘ï¼Œå·¦æ—‹</li><li>å·¦å³å‹ï¼šæ’å…¥å·¦å­©å­çš„å³å­æ ‘ï¼Œå…ˆå·¦æ—‹ï¼Œå†å³æ—‹</li><li>å³å·¦å‹ï¼šæ’å…¥å³å­©å­çš„å·¦å­æ ‘ï¼Œå…ˆå³æ—‹ï¼Œå†å·¦æ—‹</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line">    Node left;</span><br><span class="line">    Node right;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–å½“å‰èŠ‚ç‚¹é«˜åº¦</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">height</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Math.max(left == <span class="literal">null</span> ? <span class="number">0</span> : left.height(), right == <span class="literal">null</span> ? <span class="number">0</span> : right.height()) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–å·¦å­æ ‘é«˜åº¦</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">leftHeight</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (left == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> left.height();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–å³å­æ ‘é«˜åº¦</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rightHeight</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (right == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> right.height();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘å­æ ‘ä¸­æ·»åŠ èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*åˆ¤æ–­ä¼ å…¥çš„èŠ‚ç‚¹çš„å€¼æ¯”å½“å‰ç´«è–¯çš„æ ¹èŠ‚ç‚¹çš„å€¼å¤§è¿˜æ˜¯å°*/</span></span><br><span class="line">        <span class="comment">//æ·»åŠ çš„èŠ‚ç‚¹æ¯”å½“å‰èŠ‚ç‚¹æ›´å°(ä¼ ç»™å·¦èŠ‚ç‚¹ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> (node.value &lt; <span class="built_in">this</span>.value) &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœå·¦èŠ‚ç‚¹ä¸ºç©º</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.left == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="built_in">this</span>.left = node;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å¦‚æœä¸ä¸ºç©º</span></span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.left.add(node);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ·»åŠ çš„èŠ‚ç‚¹æ¯”å½“å‰èŠ‚ç‚¹æ›´å¤§(ä¼ ç»™å³èŠ‚ç‚¹ï¼‰</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.right == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="built_in">this</span>.right = node;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.right.add(node);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æŸ¥è¯¢æ˜¯å¦å¹³è¡¡</span></span><br><span class="line">        <span class="comment">//å³æ—‹è½¬</span></span><br><span class="line">        <span class="keyword">if</span> (leftHeight() - rightHeight() &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="comment">//åŒæ—‹è½¬ï¼Œå½“å·¦å­æ ‘å·¦è¾¹é«˜åº¦å°äºå·¦å­æ ‘å³è¾¹é«˜åº¦æ—¶</span></span><br><span class="line">            <span class="keyword">if</span> (left != <span class="literal">null</span> &amp;&amp; left.leftHeight() &lt; left.rightHeight()) &#123;</span><br><span class="line">                <span class="comment">//å·¦å­æ ‘å…ˆè¿›è¡Œå·¦æ—‹è½¬</span></span><br><span class="line">                left.leftRotate();</span><br><span class="line">                <span class="comment">//æ•´ä½“è¿›è¡Œå³æ—‹è½¬</span></span><br><span class="line">                rightRotate();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å•æ—‹è½¬</span></span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                rightRotate();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å·¦æ—‹è½¬</span></span><br><span class="line">        <span class="keyword">if</span> (leftHeight() - rightHeight() &lt;= -<span class="number">2</span>) &#123;</span><br><span class="line">            <span class="comment">//åŒæ—‹è½¬</span></span><br><span class="line">            <span class="keyword">if</span> (right != <span class="literal">null</span> &amp;&amp; right.rightHeight() &lt; right.leftHeight()) &#123;</span><br><span class="line">                right.rightRotate();</span><br><span class="line">                leftRotate();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å•æ—‹è½¬</span></span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                leftRotate();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å³æ—‹è½¬</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">rightRotate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œå€¼ç­‰äºå½“å‰èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">newRight</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(value);</span><br><span class="line">        <span class="comment">//æŠŠæ–°èŠ‚ç‚¹çš„å³å­æ ‘è®¾ç½®ä¸ºå½“å‰èŠ‚ç‚¹çš„å³å­æ ‘</span></span><br><span class="line">        newRight.right = right;</span><br><span class="line">        <span class="comment">//æŠŠæ–°èŠ‚ç‚¹çš„å·¦å­æ ‘è®¾ç½®ä¸ºå½“å‰èŠ‚ç‚¹çš„å·¦å­æ ‘çš„å³å­æ ‘</span></span><br><span class="line">        newRight.left = left.right;</span><br><span class="line">        <span class="comment">//æŠŠå½“å‰èŠ‚ç‚¹çš„å€¼æ¢ä½å·¦å­èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        value = left.value;</span><br><span class="line">        <span class="comment">//æŠŠå½“å‰èŠ‚ç‚¹çš„å·¦å­æ ‘è®¾ç½®ä¸ºå·¦å­æ ‘çš„å·¦å­æ ‘</span></span><br><span class="line">        left = left.left;</span><br><span class="line">        <span class="comment">//æŠŠå½“å‰èŠ‚ç‚¹è®¾ç½®ä¸ºæ–°èŠ‚ç‚¹</span></span><br><span class="line">        right = newRight;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å·¦æ—‹è½¬</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">leftRotate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œå€¼ç­‰äºå½“å‰èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">newLeft</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(value);</span><br><span class="line">        <span class="comment">//æŠŠæ–°èŠ‚ç‚¹çš„å·¦å­æ ‘è®¾ç½®ä¸ºå½“å‰èŠ‚ç‚¹çš„å·¦å­æ ‘</span></span><br><span class="line">        newLeft.left = left;</span><br><span class="line">        <span class="comment">//æŠŠæ–°èŠ‚ç‚¹çš„å³å­æ ‘è®¾ç½®ä¸ºå½“å‰èŠ‚ç‚¹çš„å³å­æ ‘çš„å·¦å­æ ‘</span></span><br><span class="line">        newLeft.right = right.left;</span><br><span class="line">        <span class="comment">//æŠŠå½“å‰èŠ‚ç‚¹çš„å€¼æ¢ä½å³å­èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        value = right.value;</span><br><span class="line">        <span class="comment">//æŠŠå½“å‰èŠ‚ç‚¹çš„å³å­æ ‘è®¾ç½®ä¸ºå³å­æ ‘çš„å³å­æ ‘</span></span><br><span class="line">        right = right.right;</span><br><span class="line">        <span class="comment">//æŠŠå½“å‰èŠ‚ç‚¹è®¾ç½®ä¸ºæ–°èŠ‚ç‚¹</span></span><br><span class="line">        left = newLeft;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸­åºéå†äºŒå‰æ’åºæ ‘ï¼Œç»“æœåˆšå¥½æ˜¯ä»å°åˆ°å¤§</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">middleShow</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        middleShow(node.left);</span><br><span class="line">        System.out.print(node.value + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        middleShow(node.right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥æ‰¾èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">search</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.value == value) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value &lt; <span class="built_in">this</span>.value) &#123;</span><br><span class="line">            <span class="keyword">if</span> (left == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> left.search(value);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (right == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> right.search(value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥æ‰¾çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">searchParent</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> ((<span class="built_in">this</span>.left != <span class="literal">null</span> &amp;&amp; <span class="built_in">this</span>.left.value == value) || (<span class="built_in">this</span>.right != <span class="literal">null</span> &amp;&amp; <span class="built_in">this</span>.right.value == value)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.value &gt; value &amp;&amp; <span class="built_in">this</span>.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">this</span>.left.searchParent(value);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.value &lt; value &amp;&amp; <span class="built_in">this</span>.right != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">this</span>.right.searchParent(value);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€é¢—äºŒå‰æ’åºæ ‘</span></span><br><span class="line">        <span class="type">BinarySortTree</span> <span class="variable">bst</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BinarySortTree</span>();</span><br><span class="line">        <span class="comment">//å¾ªç¯æ·»åŠ </span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i : arr) &#123;</span><br><span class="line">            bst.add(<span class="keyword">new</span> <span class="title class_">Node</span>(i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æŸ¥çœ‹é«˜åº¦</span></span><br><span class="line">        System.out.println(bst.root.height()); <span class="comment">//3</span></span><br><span class="line">        <span class="comment">//æŸ¥çœ‹èŠ‚ç‚¹å€¼</span></span><br><span class="line">        System.out.println(bst.root.value); <span class="comment">//æ ¹èŠ‚ç‚¹ä¸º4</span></span><br><span class="line">        System.out.println(bst.root.left.value); <span class="comment">//å·¦å­èŠ‚ç‚¹ä¸º2</span></span><br><span class="line">        System.out.println(bst.root.right.value); <span class="comment">//å³å­èŠ‚ç‚¹ä¸º5</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦æ˜¯ç¬”è€…åœ¨å­¦ä¹ javaæ•°æ®ç»“æ„å’Œç®—æ³•çš„ç¬”è®°</summary>
    
    
    
    <category term="javaå­¦ä¹ " scheme="https://www.blog.909111.xyz/categories/java%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="javaå­¦ä¹ " scheme="https://www.blog.909111.xyz/tags/java%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>ç³»ç»Ÿæ¶æ„å¸ˆä¸Šåˆé¢˜çŸ¥è¯†ç‚¹</title>
    <link href="https://www.blog.909111.xyz/posts/7593676.html"/>
    <id>https://www.blog.909111.xyz/posts/7593676.html</id>
    <published>2023-11-09T02:50:23.344Z</published>
    <updated>2023-11-09T02:50:23.344Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç³»ç»Ÿæ¶æ„å¸ˆ"><a href="#ç³»ç»Ÿæ¶æ„å¸ˆ" class="headerlink" title="ç³»ç»Ÿæ¶æ„å¸ˆ"></a>ç³»ç»Ÿæ¶æ„å¸ˆ</h1><h2 id="è®¡ç®—æœºç»„æˆä¸ä½“ç³»ç»“æ„"><a href="#è®¡ç®—æœºç»„æˆä¸ä½“ç³»ç»“æ„" class="headerlink" title="è®¡ç®—æœºç»„æˆä¸ä½“ç³»ç»“æ„"></a>è®¡ç®—æœºç»„æˆä¸ä½“ç³»ç»“æ„</h2><h3 id="è®¡ç®—æœºç³»ç»Ÿç»„æˆ"><a href="#è®¡ç®—æœºç³»ç»Ÿç»„æˆ" class="headerlink" title="è®¡ç®—æœºç³»ç»Ÿç»„æˆ"></a>è®¡ç®—æœºç³»ç»Ÿç»„æˆ</h3><ul><li><p>è®¡ç®—æœºç¡¬ä»¶ç»„æˆ</p><ul><li><p>æ§åˆ¶å™¨</p><ul><li>è®¡ç®—æœºçš„æŒ‡æŒ¥ä¸­å¿ƒï¼Œè´Ÿè´£å†³å®šæ‰§è¡Œç¨‹åºçš„é¡ºåºï¼Œç»™å‡ºæ‰§è¡ŒæŒ‡ä»¤æ—¶æœºå™¨å„éƒ¨åˆ†æ‰€éœ€è¦çš„æ“ä½œæ§åˆ¶å‘½ä»¤</li><li>ç¨‹åºè®¡æ•°å™¨ã€æŒ‡ä»¤å¯„å­˜å™¨ã€æŒ‡ä»¤è¯‘ç å™¨ã€æ—¶åºäº§ç”Ÿå™¨ã€æ“ä½œæ§åˆ¶å™¨</li></ul></li><li><p>è¿ç®—å™¨</p><ul><li>æœ€å°‘åŒ…æ‹¬3ä¸ªå¯„å­˜å™¨å’Œ1ä¸ªç®—æœ¯é€»è¾‘å•å…ƒ</li></ul></li><li><p>ä¸»å­˜å‚¨å™¨</p><ul><li>å†…å­˜</li></ul></li><li><p>è¾…åŠ©å­˜å‚¨å™¨</p><ul><li>ç¡¬ç›˜</li></ul></li><li><p>è¾“å…¥è®¾å¤‡</p><ul><li>é”®ç›˜ã€é¼ æ ‡ã€è§¦æ‘¸æ¿ç­‰</li></ul></li><li><p>è¾“å‡ºè®¾å¤‡</p><ul><li>æ˜¾ç¤ºå™¨ã€æŒ‡ç¤ºç¯ç­‰</li></ul></li></ul></li><li><p>è®¡ç®—æœºä½“ç³»ç»“æ„åˆ†ç±»</p><ul><li><p>å†¯è¯ºä¾æ›¼</p><ul><li>æŒ‡ä»¤åœ°å€å’Œæ•°æ®åœ°å€åœ¨ä¸€èµ·</li></ul></li><li><p>å“ˆä½›ç»“æ„</p><ul><li>æŒ‡ä»¤åœ°å€å’Œæ•°æ®åœ°å€åˆ†å¼€</li></ul></li><li><p>Flynnåˆ†ç±»æ³•</p><ul><li>å•æŒ‡ä»¤å•æ•°æ®æµ SISD</li><li>å•æŒ‡ä»¤å¤šæ•°æ®æµ SIMD</li><li>å¤šæŒ‡ä»¤å•æ•°æ®æµ MISD</li><li>å¤šæŒ‡ä»¤å¤šæ•°æ®æµ MIMD</li></ul></li></ul></li><li><p>å¤æ‚æŒ‡ä»¤é›†ç³»ç»Ÿä¸ç²¾ç®€æŒ‡ä»¤é›†ç³»ç»Ÿ</p><ul><li><p>CICSå¤æ‚æŒ‡ä»¤ç³»ç»Ÿ</p><ul><li>æŒ‡ä»¤æ•°æ®ä¼—å¤š</li><li>æŒ‡ä»¤ä½¿ç”¨é¢‘ç‡ç›¸å·®æ‚¬æ®Š</li><li>æ”¯æŒå¤šç§å¯»å€æ–¹å¼</li><li>å˜é•¿æŒ‡ä»¤</li><li>æŒ‡ä»¤å¯ä»¥å¯¹ä¸»å­˜å‚¨å•å…ƒä¸­çš„æ•°æ®ç›´æ¥å¤„ç†</li><li>ä»¥å¾®ç¨‹åºæ§åˆ¶ä¸ºä¸»</li></ul></li><li><p>RICSç²¾ç®€æŒ‡ä»¤ç³»ç»Ÿ</p><ul><li>æŒ‡ä»¤æ•°é‡å°‘</li><li>æŒ‡ä»¤å¯»å€æ–¹å¼å°‘ï¼ŒæŒ‡ä»¤æ ¼å¼ç§ç±»å°‘</li><li>æŒ‡ä»¤é•¿åº¦å›ºå®š</li><li>ä»¥ç¡¬å¸ƒçº¿æ§åˆ¶é€»è¾‘ä¸ºä¸»</li><li>å•å‘¨æœŸæŒ‡ä»¤æ‰§è¡Œï¼Œé‡‡ç”¨æµæ°´çº¿æŠ€æœ¯</li><li>ä¼˜åŒ–çš„ç¼–è¯‘å™¨</li><li>CPUä¸­é€šç”¨çš„å¯„å­˜å™¨æ•°é‡å¤šï¼Œä¸€èˆ¬32ä¸ªå¤šåˆ™ä¸Šåƒä¸ª</li></ul></li></ul></li><li><p>æ€»çº¿</p><ul><li>åœ°å€æ€»çº¿</li><li>æ•°æ®æ€»çº¿</li><li>æ§åˆ¶æ€»çº¿</li></ul></li></ul><h3 id="å­˜å‚¨å™¨ç³»ç»Ÿ"><a href="#å­˜å‚¨å™¨ç³»ç»Ÿ" class="headerlink" title="å­˜å‚¨å™¨ç³»ç»Ÿ"></a>å­˜å‚¨å™¨ç³»ç»Ÿ</h3><ul><li><p>ä¸»å­˜å‚¨å™¨</p><ul><li>RAMéšæœºå­˜å‚¨å™¨</li><li>ROMåªè¯»å­˜å‚¨å™¨</li></ul></li><li><p>è¾…å­˜å‚¨å™¨</p><ul><li>ç¡¬ç›˜</li></ul></li><li><p>cacheå­˜å‚¨å™¨</p></li></ul><h3 id="æµæ°´çº¿"><a href="#æµæ°´çº¿" class="headerlink" title="æµæ°´çº¿"></a>æµæ°´çº¿</h3><ul><li><p>æµæ°´çº¿å‘¨æœŸ</p><ul><li>å°†æµæ°´çº¿åˆ†å‰²æˆNæ®µï¼Œæœ€è€—æ—¶çš„é‚£ä¸€æ®µå³ä¸ºæµæ°´çº¿çš„ç”Ÿå‘½å‘¨æœŸ</li></ul></li><li><p>æµæ°´çº¿æ‰§è¡Œæ—¶é—´è®¡ç®—</p><ul><li>æµæ°´çº¿å‘¨æœŸTï¼ŒèŠ±è´¹æ—¶é—´æœ€é•¿çš„æ­¥éª¤</li><li><p>æ‰§è¡Œ100æ¡æŒ‡ä»¤</p><ul><li>100T+å…¶ä»–æ­¥éª¤çš„1æ¬¡æ—¶é—´</li></ul></li></ul></li><li><p>æµæ°´çº¿ååé‡</p><ul><li>å•ä½æ—¶é—´å†…æµæ°´çº¿å®Œæˆçš„ä»»åŠ¡é‡æˆ–è€…æ•°æ®çš„ç»“æœé‡</li></ul></li><li><p>æµæ°´çº¿åŠ é€Ÿæ¯”</p><ul><li>ä¸ä½¿ç”¨æµæ°´çº¿æ‰§è¡Œæ—¶é—´ / ä½¿ç”¨æµæ°´çº¿çš„æ‰§è¡Œæ—¶é—´</li></ul></li></ul><h2 id="æ“ä½œç³»ç»Ÿ"><a href="#æ“ä½œç³»ç»Ÿ" class="headerlink" title="æ“ä½œç³»ç»Ÿ"></a>æ“ä½œç³»ç»Ÿ</h2><h3 id="æ“ä½œç³»ç»Ÿçš„ç±»å‹ä¸ç»“æ„"><a href="#æ“ä½œç³»ç»Ÿçš„ç±»å‹ä¸ç»“æ„" class="headerlink" title="æ“ä½œç³»ç»Ÿçš„ç±»å‹ä¸ç»“æ„"></a>æ“ä½œç³»ç»Ÿçš„ç±»å‹ä¸ç»“æ„</h3><ul><li><p>æ“ä½œç³»ç»Ÿçš„å®šä¹‰</p><ul><li>ç®¡ç†è®¡ç®—æœºç¡¬ä»¶å’Œè½¯ä»¶èµ„æºçš„ç³»ç»Ÿè½¯ä»¶ï¼Œæ˜¯è®¡ç®—æœºçš„å†…æ ¸å’ŒåŸºçŸ³</li></ul></li><li><p>æ“ä½œç³»ç»Ÿçš„åˆ†ç±»</p><ul><li>æ‰¹å¤„ç†æ“ä½œç³»ç»Ÿ</li><li>åˆ†æ—¶æ“ä½œç³»ç»Ÿ</li><li>å®æ—¶æ“ä½œç³»ç»Ÿ</li><li>ç½‘ç»œæ“ä½œç³»ç»Ÿ</li><li>åˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿ</li></ul></li></ul><h3 id="æ“ä½œç³»ç»Ÿçš„åŸºæœ¬åŸç†"><a href="#æ“ä½œç³»ç»Ÿçš„åŸºæœ¬åŸç†" class="headerlink" title="æ“ä½œç³»ç»Ÿçš„åŸºæœ¬åŸç†"></a>æ“ä½œç³»ç»Ÿçš„åŸºæœ¬åŸç†</h3><ul><li>è¿›ç¨‹ç®¡ç†</li><li>å­˜å‚¨ç®¡ç†</li><li>è®¾å¤‡ç®¡ç†</li><li>æ–‡ä»¶ç®¡ç†</li><li>ä½œä¸šç®¡ç†</li></ul><h2 id="æ•°æ®åº“ç³»ç»Ÿ"><a href="#æ•°æ®åº“ç³»ç»Ÿ" class="headerlink" title="æ•°æ®åº“ç³»ç»Ÿ"></a>æ•°æ®åº“ç³»ç»Ÿ</h2><h3 id="æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„ç±»å‹"><a href="#æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„ç±»å‹" class="headerlink" title="æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„ç±»å‹"></a>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„ç±»å‹</h3><h3 id="æ•°æ®åº“çš„æ¨¡å¼ä¸èŒƒå¼"><a href="#æ•°æ®åº“çš„æ¨¡å¼ä¸èŒƒå¼" class="headerlink" title="æ•°æ®åº“çš„æ¨¡å¼ä¸èŒƒå¼"></a>æ•°æ®åº“çš„æ¨¡å¼ä¸èŒƒå¼</h3><ul><li><p>æ•°æ®åº“çš„ç»“æ„ä¸æ¨¡å¼</p><ul><li><p>å¤–æ¨¡å¼/ç”¨æˆ·æ¨¡å¼</p><ul><li>ç”¨æˆ·ä¸æ•°æ®åº“ä¹‹é—´çš„æ¥å£ï¼Œå¯¹ç”¨æˆ·ä½¿ç”¨æ•°æ®çš„è¡¨ç¤ºï¼Œç±»å¦‚æ•°æ®åº“çš„è¡¨</li></ul></li><li><p>æ¦‚å¿µæ¨¡å¼</p><ul><li>æ¦‚å¿µæ¨¡å¼åæ˜ äº†æ•°æ®åº“ç³»ç»Ÿçš„æ•´ä½“è§‚</li></ul></li><li><p>å†…æ¨¡å¼</p><ul><li>æ•°æ®åº“ä¸­å…¨ä½“æ•°æ®çš„å†…éƒ¨è¡¨ç¤ºæˆ–åº•å±‚æè¿°</li></ul></li></ul></li><li><p>æ•°æ®æ¨¡å‹</p><ul><li><p>æ¦‚å¿µæ•°æ®æ¨¡å‹</p><ul><li>æŒ‰ç…§ç”¨æˆ·çš„è§‚ç‚¹å¯¹æ•°æ®å’Œä¿¡æ¯è¿›è¡Œå»ºæ¨¡ï¼Œä¸»è¦ç”¨ä¹¦æ•°æ®åº“è®¾è®¡</li></ul></li><li><p>åŸºæœ¬æ•°æ®æ¨¡å‹</p><ul><li><p>å±‚æ¬¡æ¨¡å‹</p><ul><li>ä¼˜ç‚¹ï¼šæŸ¥è¯¢æ•ˆç‡é«˜ 1ï¼šn</li><li>ç¼ºç‚¹ï¼šå¯¹ n:néœ€è¦è¾…åŠ©å®ç°ï¼Œä¸”é€»è¾‘å¤æ‚</li></ul></li><li><p>ç½‘çŠ¶æ¨¡å‹</p><ul><li>ä¼˜ç‚¹ï¼šmï¼šnæŸ¥è¯¢æ•ˆç‡é«˜</li><li>ç¼ºç‚¹ï¼šç¼–å†™åº”ç”¨ç¨‹åºè¿‡äºå¤æ‚</li></ul></li><li><p>å…³ç³»æ¨¡å‹</p></li><li><p>NoSQL</p><ul><li>Not only SQL</li></ul></li></ul></li></ul></li><li><p>å…³ç³»ä»£æ•°</p><ul><li><p>å¹¶</p><ul><li>ç›¸å½“äºSQLä¸­çš„unionï¼ŒAâˆªB</li></ul></li><li><p>äº¤</p><ul><li>ç›¸å½“äºSQLä¸­çš„intersectï¼ŒAâˆ©B</li></ul></li><li><p>å·®</p><ul><li>ç›¸å½“äºSQLä¸­çš„exceptï¼ŒA-B</li></ul></li><li><p>æŠ•å½±</p><ul><li>ç›¸å½“äºSQLä¸­çš„select</li></ul></li><li><p>ç¬›å¡å°”ä¹˜ç§¯</p><ul><li>ç­‰ä»·äºSQLä¸­ä¸¤ä¸ªè¡¨è¿›è¡Œç¬›å¡å°”ç§¯å…¨åŒ¹é…å¾—åˆ°çš„ç»“æœAXB</li></ul></li><li><p>è‡ªç„¶è¿æ¥</p><ul><li>ç›¸å½“äºSQLè¯­å¥ä¸­çš„natural joinï¼ŒAâ‹ˆB</li></ul></li><li><p>é™¤</p></li></ul></li><li><p>æ•°æ®çš„è§„èŒƒåŒ–</p><ul><li><p>ç¬¬ä¸€èŒƒå¼</p><ul><li>å±æ€§å…·æœ‰åŸå­æ€§ï¼Œä¸å¯å†åˆ†</li></ul></li><li><p>ç¬¬äºŒèŒƒå¼</p><ul><li>è®°å½•çš„å”¯ä¸€æ€§ï¼Œæ¶ˆé™¤éä¸»é”®ä¾èµ–</li></ul></li><li><p>ç¬¬ä¸‰èŒƒå¼</p><ul><li>å­—æ®µçš„å†—ä½™ï¼Œæ¶ˆé™¤ä¼ é€’ä¾èµ–</li></ul></li><li><p>BCNF</p><ul><li>é²å°”æ–¯-ç§‘å¾—èŒƒå¼</li></ul></li></ul></li><li><p>åèŒƒå¼åŒ–</p><ul><li>æ²¡æœ‰å†—ä½™çš„æ•°æ®åº“æœªå¿…æ˜¯æœ€å¥½çš„æ•°æ®åº“ï¼Œå¢åŠ å†—ä½™ï¼Œä»¥ç©ºé—´æ¢æ—¶é—´</li><li>å¢åŠ å†—ä½™åˆ—</li><li>å¢åŠ æ´¾ç”Ÿåˆ—</li><li>é‡æ–°ä¸»è¡¨</li></ul></li></ul><h3 id="æ•°æ®åº“è®¾è®¡"><a href="#æ•°æ®åº“è®¾è®¡" class="headerlink" title="æ•°æ®åº“è®¾è®¡"></a>æ•°æ®åº“è®¾è®¡</h3><ul><li><p>æ•°æ®åº“è®¾è®¡æ–¹å¼</p><ul><li><p>ç›´è§‚è®¾è®¡æ³•</p><ul><li>åˆç§°å•æ­¥é€»è¾‘è®¾è®¡æ³•ï¼Œä¾èµ–äºè®¾è®¡è€…çš„çŸ¥è¯†ã€ç»éªŒå’ŒæŠ€å·§</li></ul></li><li><p>è§„èŒƒè®¾è®¡æ³•</p><ul><li>æ•°æ®åº“è®¾è®¡è§„èŒƒï¼ŒæŠŠæ•°æ®è®¾è®¡åˆ†ä¸ºéœ€æ±‚åˆ†æï¼Œæ¦‚å¿µç»“æ„è®¾è®¡ï¼Œé€»è¾‘ç»“æ„è®¾è®¡å’Œç‰©ç†è®¾è®¡4ä¸ªé˜¶æ®µ</li></ul></li><li><p>è‡ªåŠ¨åŒ–è®¾è®¡æ³•</p></li></ul></li><li><p>æ•°æ®è®¾è®¡çš„åŸºæœ¬æ­¥éª¤</p><ul><li><p>éœ€æ±‚åˆ†æ</p><ul><li>æ”¶é›†å’Œåˆ†æç”¨æˆ·å¯¹ç³»ç»Ÿçš„ä¿¡æ¯éœ€æ±‚å’Œå¤„ç†éœ€æ±‚ï¼Œéœ€æ±‚è¯´æ˜æ–‡æ¡£</li><li><p>æ•°æ®å­—å…¸</p><ul><li>æ•°æ®é¡¹</li><li>æ•°æ®ç»“æ„</li><li>æ•°æ®æµ</li><li>æ•°æ®å­˜å‚¨</li><li>å¤„ç†è¿‡ç¨‹</li></ul></li></ul></li><li><p>æ¦‚å¿µç»“æ„è®¾è®¡</p><ul><li>å¯¹éœ€æ±‚è¯´æ˜ä¹¦æä¾›çš„æ‰€æœ‰æ•°æ®å’Œå¤„ç†è¦æ±‚è¿›è¡ŒæŠ½è±¡ä¸ç»¼åˆå¤„ç†ã€‚E-Ræ¨¡å‹ï¼Œä¸DBMSæ— å…³</li></ul></li><li><p>é€»è¾‘ç»“æ„è®¾è®¡</p><ul><li>å°†æ¦‚å¿µæ•°æ®æ¨¡å‹è½¬æ¢æˆDBMSæ”¯æŒçš„æ•°æ®æ¨¡å‹ï¼ŒE-Rå›¾å‘å…³ç³»æ¨¡å‹è½¬æ¢</li></ul></li><li><p>ç‰©ç†ç»“æ„è®¾è®¡</p><ul><li>é€»è¾‘æ¨¡å‹åœ¨ç‰©ç†ä¸Šå®ç°</li></ul></li></ul></li></ul><h3 id="äº‹ç‰©ç®¡ç†"><a href="#äº‹ç‰©ç®¡ç†" class="headerlink" title="äº‹ç‰©ç®¡ç†"></a>äº‹ç‰©ç®¡ç†</h3><ul><li>å¹¶å‘æ§åˆ¶</li><li>æ•…éšœä¸æ¢å¤</li></ul><h3 id="å¤‡ä»½ä¸æ¢å¤"><a href="#å¤‡ä»½ä¸æ¢å¤" class="headerlink" title="å¤‡ä»½ä¸æ¢å¤"></a>å¤‡ä»½ä¸æ¢å¤</h3><ul><li>äº‹ç‰©æ•…éšœ</li><li>ç³»ç»Ÿæ•…éšœ</li><li>ä»‹è´¨æ•…éšœ</li><li>è®¡ç®—æœºç—…æ¯’</li></ul><h3 id="åˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿ"><a href="#åˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿ" class="headerlink" title="åˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿ"></a>åˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿ</h3><ul><li><p>åˆ†å¸ƒå¼æ•°æ®åº“çš„æ¦‚å¿µ</p><ul><li>åˆ†æ•£çš„å¤šä¸ªæ•°æ®åº“å•å…ƒè¿æ¥èµ·æ¥ç»„æˆçš„ä¸€ä¸ªé€»è¾‘ä¸Šç»Ÿä¸€çš„æ•°æ®åº“</li></ul></li><li><p>åˆ†å¸ƒå¼æ•°æ®çš„æ¶æ„</p></li></ul><h3 id="æ•°æ®ä»“åº“"><a href="#æ•°æ®ä»“åº“" class="headerlink" title="æ•°æ®ä»“åº“"></a>æ•°æ®ä»“åº“</h3><ul><li><p>æ•°æ®ä»“åº“çš„æ¦‚å¿µ</p><ul><li>ä¸»è¦ç”¨äºæ•°æ®åˆ†æ</li></ul></li><li><p>æ•°æ®ä»“åº“çš„æ­¥éª¤</p><ul><li>æŠ½å–</li><li><p>è½¬æ¢</p><ul><li>åˆ‡ç‰‡ã€åˆ‡å—</li><li>æ—‹è½¬</li><li>ä¸Šå·å’Œä¸‹é’»</li></ul></li><li><p>åŠ è½½</p></li></ul></li><li><p>æ•°æ®ä»“åº“çš„å®ç°æ–¹æ³•</p><ul><li>MOLAP</li><li>ROLAP</li><li>HOLAP</li></ul></li></ul><h3 id="æ•°æ®æŒ–æ˜"><a href="#æ•°æ®æŒ–æ˜" class="headerlink" title="æ•°æ®æŒ–æ˜"></a>æ•°æ®æŒ–æ˜</h3><ul><li><p>æ•°æ®æŒ–æ˜çš„æ¦‚å¿µ</p><ul><li>ä»å¤§é‡çš„æ•°æ®ä¸­ï¼ŒæŒ–æ˜å‡ºæœªçŸ¥çš„ä¸”å…·æœ‰ä»·å€¼çš„ä¿¡æ¯å’ŒçŸ¥è¯†çš„è¿‡ç¨‹</li></ul></li><li><p>æ•°æ®æŒ–æ˜çš„åŠŸèƒ½</p></li><li><p>æ•°æ®æŒ–æ˜çš„å¸¸ç”¨æŠ€æœ¯</p><ul><li>å…³è”åˆ†æ</li><li>åºåˆ—åˆ†æ</li><li>åˆ†ç±»</li><li>é¢„æµ‹</li><li>èšç±»åˆ†æ</li><li>æ—¶é—´åºåˆ—åˆ†æ</li></ul></li><li><p>æ•°æ®æŒ–æ˜çš„æµç¨‹</p><ul><li>é—®é¢˜å®šä¹‰</li><li>å»ºç«‹æ•°æ®æŒ–æ˜åº“</li><li>è°ƒæ•´æ•°æ®</li><li>æ¨¡å‹åŒ–</li><li>è¯„ä»·å’Œè§£æ</li></ul></li></ul><h3 id="NoSQL"><a href="#NoSQL" class="headerlink" title="NoSQL"></a>NoSQL</h3><ul><li>Not only SQLï¼Œæ³›æŒ‡éå…³ç³»å‹æ•°æ®åº“</li><li>è§£å†³å¤§è§„æ¨¡æ•°æ®é›†åˆå¤šé‡æ•°æ®ç§ç±»å¸¦æ¥çš„æŒ‘æˆ˜ï¼Œå°¤å…¶æ˜¯å¤§æ•°æ®åº”ç”¨éš¾é¢˜</li></ul><h3 id="å¤§æ•°æ®"><a href="#å¤§æ•°æ®" class="headerlink" title="å¤§æ•°æ®"></a>å¤§æ•°æ®</h3><ul><li>æ— æ³•åœ¨ä¸€å®šæ—¶é—´å†…ç”¨å¸¸è§„è½¯ä»¶å·¥å…·å¯¹å…¶å†…å®¹è¿›è¡ŒæŠ“å–ã€ç®¡ç†å’Œå¤„ç†çš„æ•°æ®é›†åˆ</li></ul><h2 id="è®¡ç®—æœºç½‘ç»œ"><a href="#è®¡ç®—æœºç½‘ç»œ" class="headerlink" title="è®¡ç®—æœºç½‘ç»œ"></a>è®¡ç®—æœºç½‘ç»œ</h2><h3 id="ç½‘ç»œæ¶æ„ä¸åè®®"><a href="#ç½‘ç»œæ¶æ„ä¸åè®®" class="headerlink" title="ç½‘ç»œæ¶æ„ä¸åè®®"></a>ç½‘ç»œæ¶æ„ä¸åè®®</h3><ul><li><p>ç½‘ç»œäº’è”æ¨¡å‹</p><ul><li><p>OSI/RMæ¨¡å‹</p><ul><li>åº”ç”¨å±‚</li><li>è¡¨ç¤ºå±‚</li><li>ä¼šè¯å±‚</li><li>ä¼ è¾“å±‚ - æ•°æ®æ®µ</li><li>ç½‘ç»œå±‚ - åˆ†ç»„æ•°æ®åŒ…</li><li>æ•°æ®é“¾è·¯å±‚ - æ•°æ®å¸§(Frame)</li><li>ç‰©ç†å±‚ - æ¯”ç‰¹(bit)</li></ul></li><li><p>TCP/IPç»“æ„æ¨¡å‹</p><ul><li>åº”ç”¨å±‚</li><li>ä¼ è¾“å±‚</li><li>ç½‘ç»œäº’è”å±‚</li><li>ç½‘ç»œæ¥å£å±‚</li></ul></li></ul></li><li><p>å¸¸è§çš„ç½‘ç»œåè®®</p><ul><li><p>åº”ç”¨å±‚åè®®</p><ul><li>HTTPã€FTPã€TELNETã€SMTP</li><li>DNSã€RIPã€DHCP</li></ul></li><li><p>ä¼ è¾“å±‚åè®®</p><ul><li>TCPã€UDP</li></ul></li><li><p>ç½‘ç»œå±‚åè®®</p><ul><li>IPã€ARP</li></ul></li></ul></li><li><p>IPV6</p><ul><li>128ä½ï¼Œåˆ†ä¸º8ç»„ï¼Œæ¯ç»„4ä½ï¼Œ2001:0DB8:02de:0000:0000:0000:0000:0e13</li><li>æ¯ç»„çš„å‰å¯¼0ï¼Œå¯ä»¥çœç•¥ã€‚2001:DB8:2de:0:0:0:0:e130:0e13 -&gt; 2001:DB8:2de::e13</li></ul></li></ul><h3 id="å±€åŸŸç½‘ä¸å¹¿åŸŸç½‘"><a href="#å±€åŸŸç½‘ä¸å¹¿åŸŸç½‘" class="headerlink" title="å±€åŸŸç½‘ä¸å¹¿åŸŸç½‘"></a>å±€åŸŸç½‘ä¸å¹¿åŸŸç½‘</h3><ul><li>å±€åŸŸç½‘åŸºç¡€çŸ¥è¯†</li><li>æ— çº¿å±€åŸŸç½‘LAN</li><li>å¹¿åŸŸç½‘æŠ€æœ¯WAN</li><li><p>ç½‘ç»œæ¥å…¥æŠ€æœ¯</p><ul><li>PSTNæ¥å…¥</li><li>ISDNæ¥å…¥</li><li>ADSLæ¥å…¥</li><li>FTTx+LANæ¥å…¥</li><li>åŒè½´ç”µç¼†</li><li><p>å…‰çº¤æ¥å…¥</p><ul><li>å¤šæ¨¡å…‰çº¤</li><li>å•æ¨¡å…‰çº¤ï¼Œå¤§å®¹é‡é•¿è·ç¦»</li></ul></li></ul></li></ul><h3 id="ç½‘ç»œäº’è¿ä¸å¸¸ç”¨è®¾å¤‡"><a href="#ç½‘ç»œäº’è¿ä¸å¸¸ç”¨è®¾å¤‡" class="headerlink" title="ç½‘ç»œäº’è¿ä¸å¸¸ç”¨è®¾å¤‡"></a>ç½‘ç»œäº’è¿ä¸å¸¸ç”¨è®¾å¤‡</h3><h3 id="ç½‘ç»œå·¥ç¨‹"><a href="#ç½‘ç»œå·¥ç¨‹" class="headerlink" title="ç½‘ç»œå·¥ç¨‹"></a>ç½‘ç»œå·¥ç¨‹</h3><ul><li>ç½‘ç»œè§„åˆ’</li><li>ç½‘ç»œè®¾è®¡</li><li>ç½‘ç»œå®æ–½</li></ul><h3 id="ç½‘ç»œå­˜å‚¨æŠ€æœ¯"><a href="#ç½‘ç»œå­˜å‚¨æŠ€æœ¯" class="headerlink" title="ç½‘ç»œå­˜å‚¨æŠ€æœ¯"></a>ç½‘ç»œå­˜å‚¨æŠ€æœ¯</h3><ul><li><p>ç›´è¿å¼å­˜å‚¨ DAS</p><ul><li>ç›´æ¥ä¸ä¸»æœºç³»ç»Ÿç›¸è¿çš„å­˜å‚¨è®¾å¤‡</li></ul></li><li><p>ç½‘ç»œå­˜å‚¨è®¾å¤‡ NAS</p><ul><li>é‡‡ç”¨ç›´æ¥ä¸ç½‘ç»œä»‹è´¨ç›¸è¿çš„ç‰¹æ®Šè®¾å¤‡å®ç°æ•°æ®å­˜å‚¨æœºåˆ¶ã€‚è·¨å¹³å°çš„æ–‡ä»¶å…±äº«åŠŸèƒ½</li></ul></li><li><p>å­˜å‚¨åŒºåŸŸç½‘ SAN</p><ul><li>é€šè¿‡ä¸“ç”¨é«˜é€Ÿç½‘å°†ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œå­˜å‚¨è®¾å¤‡(å¦‚ç£ç›˜é˜µåˆ—RAID)å’ŒæœåŠ¡å™¨è¿æ¥èµ·æ¥çš„ä¸“ç”¨å­˜å‚¨ç³»ç»Ÿ</li></ul></li></ul><h3 id="ç»¼åˆå¸ƒçº¿"><a href="#ç»¼åˆå¸ƒçº¿" class="headerlink" title="ç»¼åˆå¸ƒçº¿"></a>ç»¼åˆå¸ƒçº¿</h3><ul><li>å·¥ä½œåŒº</li><li>é…çº¿å­ç³»ç»Ÿ</li><li>å¹²çº¿ç³»ç»Ÿ</li><li>å»ºç­‘ç¾¤å­ç³»ç»Ÿ</li><li>è®¾å¤‡é—´</li><li>ç®¡ç†</li></ul><h2 id="ç³»ç»Ÿæ€§èƒ½ä¸è¯„ä»·"><a href="#ç³»ç»Ÿæ€§èƒ½ä¸è¯„ä»·" class="headerlink" title="ç³»ç»Ÿæ€§èƒ½ä¸è¯„ä»·"></a>ç³»ç»Ÿæ€§èƒ½ä¸è¯„ä»·</h2><h3 id="æ€§èƒ½æŒ‡æ ‡"><a href="#æ€§èƒ½æŒ‡æ ‡" class="headerlink" title="æ€§èƒ½æŒ‡æ ‡"></a>æ€§èƒ½æŒ‡æ ‡</h3><ul><li><p>è®¡ç®—æœº</p><ul><li>æ—¶é’Ÿé¢‘ç‡</li><li>é«˜é€Ÿç¼“å­˜</li><li>è¿ç®—é€Ÿåº¦</li><li>è¿ç®—ç²¾åº¦</li><li>å†…å­˜çš„å­˜å‚¨å®¹é‡</li><li>å­˜å‚¨å™¨çš„å­˜å–å‘¨æœŸ</li><li>æ•°æ®å¤„ç†é€Ÿç‡</li><li>å“åº”æ—¶é—´</li><li>RASISç‰¹æ€§</li><li>å¹³å‡æ•…éšœå“åº”æ—¶é—´</li><li>å…¼å®¹æ€§</li></ul></li><li><p>ç½‘ç»œ</p><ul><li>è®¾å¤‡çº§æ€§èƒ½æŒ‡æ ‡</li><li>ç½‘ç»œçº§æ€§èƒ½æŒ‡æ ‡</li><li>åº”ç”¨çº§æ€§èƒ½æŒ‡æ ‡</li><li>ç”¨æˆ·çº§æ€§èƒ½æŒ‡æ ‡</li><li>ååé‡</li></ul></li><li><p>æ“ä½œç³»ç»Ÿ</p><ul><li>ç³»ç»Ÿçš„å¯é æ€§</li><li>ç³»ç»Ÿçš„ååé‡</li><li>ç³»ç»Ÿçš„ç›¸åº”æ—¶é—´</li><li>ç³»ç»Ÿçš„èµ„æºåˆ©ç”¨ç‡</li><li>å¯ç§»æ¤æ€§</li></ul></li><li><p>æ•°æ®ç®¡ç†ç³»ç»Ÿ</p></li><li>webæœåŠ¡å™¨</li></ul><h3 id="æ€§èƒ½è®¡ç®—"><a href="#æ€§èƒ½è®¡ç®—" class="headerlink" title="æ€§èƒ½è®¡ç®—"></a>æ€§èƒ½è®¡ç®—</h3><h3 id="æ€§èƒ½è®¾è®¡"><a href="#æ€§èƒ½è®¾è®¡" class="headerlink" title="æ€§èƒ½è®¾è®¡"></a>æ€§èƒ½è®¾è®¡</h3><ul><li><p>é˜¿æœ¨è¾¾å°”å®šå¾‹</p><ul><li>åœ¨å¹¶è¡Œè®¡ç®—ä¸­ç”¨å¤šå¤„ç†å™¨çš„åº”ç”¨åŠ é€Ÿå—é™äºç¨‹åºæ‰€éœ€çš„ä¸²è¡Œæ—¶é—´ç™¾åˆ†æ¯”</li></ul></li><li><p>è´Ÿè½½å‡è¡¡</p></li></ul><h3 id="æ€§èƒ½è¯„ä¼°"><a href="#æ€§èƒ½è¯„ä¼°" class="headerlink" title="æ€§èƒ½è¯„ä¼°"></a>æ€§èƒ½è¯„ä¼°</h3><ul><li>webæœåŠ¡å™¨æ€§èƒ½è¯„ä¼°</li><li><p>åŸºå‡†æµ‹è¯•ç¨‹åº</p><ul><li>æŠŠåº”ç”¨ç¨‹åºä¸­ç”¨å¾—æœ€å¤šã€æœ€é¢‘ç¹çš„æ ¸å¿ƒç¨‹åºä½œä¸ºè¯„ä»·è®¡ç®—æœºæ€§èƒ½çš„æ ‡å‡†ç¨‹åºã€‚</li></ul></li><li><p>ç³»ç»Ÿç›‘è§†</p></li></ul><h2 id="å¼€å‘æ–¹æ³•"><a href="#å¼€å‘æ–¹æ³•" class="headerlink" title="å¼€å‘æ–¹æ³•"></a>å¼€å‘æ–¹æ³•</h2><h3 id="è½¯ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#è½¯ä»¶çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="è½¯ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"></a>è½¯ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</h3><ul><li>è½¯ä»¶ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºå…«ä¸ªé˜¶æ®µï¼šå¯è¡Œæ€§ç ”ç©¶ä¸è®¡åˆ’ã€éœ€æ±‚åˆ†æã€æ¦‚è¦è®¾è®¡ã€è¯¦ç»†è®¾è®¡ã€å®ç°ã€é›†æˆæµ‹è¯•ã€ç¡®è®¤æµ‹è¯•ã€ä½¿ç”¨å’Œç»´æŠ¤</li></ul><h3 id="è½¯ä»¶å¼€å‘æ–¹æ³•"><a href="#è½¯ä»¶å¼€å‘æ–¹æ³•" class="headerlink" title="è½¯ä»¶å¼€å‘æ–¹æ³•"></a>è½¯ä»¶å¼€å‘æ–¹æ³•</h3><ul><li><p>ç»“æ„åŒ–æ–¹æ³•SP</p><ul><li><p>ä»‹ç»</p><ul><li>ç»“æ„åŒ–æ–¹æ³•æ˜¯ä¸€ç§ä¼ ç»Ÿçš„è½¯ä»¶å¼€å‘æ–¹æ³•ï¼Œå®ƒæ˜¯ç”±ç»“æ„åŒ–åˆ†æã€ç»“æ„åŒ–è®¾è®¡å’Œç»“æ„åŒ–ç¨‹åºè®¾è®¡ä¸‰éƒ¨åˆ†æœ‰æœºç»“åˆè€Œæˆã€‚</li><li>è‡ªé¡¶å‘ä¸‹ã€é€æ­¥æ±‚ç²¾ã€é‡‡ç”¨æ¨¡å—åŒ–æŠ€æœ¯å’ŒåŠŸèƒ½æŠ½è±¡å°†ç³»ç»ŸæŒ‰åŠŸèƒ½åˆ†è§£ä¸ºè‹¥å¹²æ¨¡å—</li></ul></li><li><p>ç»“æ„åŒ–åˆ†æ</p><ul><li>ç€çœ¼äºæ•°æ®æµï¼Œè‡ªé¡¶å‘ä¸‹ï¼Œé€å±‚åˆ†è§£ï¼Œå»ºç«‹ç³»ç»Ÿçš„å¤„ç†æµç¨‹ï¼Œä»¥æ•°æ®æµå›¾å’Œæ•°æ®å­—å…¸ä¸ºä¸»è¦å·¥å…·ï¼Œå»ºç«‹ç³»ç»Ÿçš„é€»è¾‘æ¨¡å‹</li><li><ol><li>åˆ†æå½“å‰æƒ…å†µï¼Œåˆ¶ä½œååº”å½“å‰ç‰©ç†æ¨¡å‹çš„æ•°æ®æµå›¾DFD(dataflow diagram)</li></ol></li><li>2.æ¨åˆ°å‡ºç­‰ä»·çš„é€»è¾‘æ¨¡å‹DFD</li><li><ol><li>è®¾è®¡æ–°çš„é€»è¾‘ç³»ç»Ÿã€ç”Ÿæˆæ•°æ®å­—å…¸å’ŒåŸºå…ƒæè¿°</li></ol></li><li><ol><li>å»ºç«‹äººæœºæ¥å£ï¼Œæä¾›å¯ä¾›é€‰æ‹©çš„ç›®æ ‡ç³»ç»Ÿçš„ç‰©ç†DFD</li></ol></li><li><ol><li>å»ºç«‹å„ç§æ–¹æ¡ˆçš„æˆæœ¬å’Œé£é™©ç­‰çº§ï¼Œå¹¶æ®æ­¤åˆ†æ</li></ol></li><li><ol><li>é€‰æ‹©ä¸€ç§æ–¹æ¡ˆ</li></ol></li><li><ol><li>å»ºç«‹å®Œæˆçš„éœ€æ±‚è§„çº¦</li></ol></li></ul></li><li><p>ç»“æ„åŒ–è®¾è®¡</p><ul><li><p>SDæ–¹æ³•æ­¥éª¤</p><ul><li><ol><li>è¯„å®¡å’Œç»†åŒ–æ•°æ®æµå›¾</li></ol></li><li><ol><li>ç¡®å®šæ•°æ®æµå›¾çš„ç±»å‹</li></ol></li><li><ol><li>æ•°æ®æµå›¾æ˜ å°„åˆ°è½¯ä»¶æ¨¡å—ç»“æ„ï¼Œè®¾è®¡æ¨¡å—ç»“æ„çš„ä¸Šå±‚</li></ol></li><li><ol><li>åŸºäºæ•°æ®æµå›¾é€æ­¥åˆ†æé«˜å±‚æ¨¡å—ï¼Œè®¾è®¡ä¸­ä¸‹å±‚æ¨¡å—</li></ol></li><li><ol><li>å¯¹æ¨¡å—ç»“æ„è¿›è¡Œä¼˜åŒ–ï¼Œå¾—åˆ°æ›´åˆç†çš„è½¯ä»¶ç»“æ„</li></ol></li></ul></li><li><p>SDæ–¹æ³•è®¾è®¡åŸåˆ™</p><ul><li><ol><li>æ¯ä¸ªæ¨¡å—æ‰§è¡Œä¸€ä¸ªåŠŸèƒ½</li></ol></li><li><ol><li>æ¨¡å—ä½¿ç”¨è¿‡ç¨‹è¯­å¥æˆ–å‡½æ•°æ–¹å¼è°ƒç”¨å…¶ä»–æ¨¡å—</li></ol></li><li><ol><li>æ¨¡å—é—´ä¼ é€å‚æ•°ä½œä¸ºæ•°æ®ä½¿ç”¨</li></ol></li><li>4.å°½é‡å‡å°‘æ¨¡å—é—´å…±ç”¨ä¿¡æ¯</li></ul></li></ul></li><li><p>ç¼ºç‚¹</p><ul><li><ol><li>å¼€å‘å‘¨æœŸé•¿</li></ol></li><li><ol><li>æ—©æœŸç»“æ„åŒ–æ–¹æ³•æ³¨é‡ç³»ç»ŸåŠŸèƒ½ï¼Œå¯¹æ•°æ®ç»“æ„å…¼é¡¾è¾ƒå°‘</li></ol></li><li><ol><li>ç»“æ„åŒ–ç¨‹åº¦è¾ƒä½çš„ç³»ç»Ÿï¼Œåœ¨å¼€å‘åˆæœŸéš¾äºé”å®šåŠŸèƒ½è¦æ±‚</li></ol></li></ul></li></ul></li><li><p>é¢å‘å¯¹è±¡æ–¹æ³•</p><ul><li><p>Coad/Yourdonæ–¹æ³•ï¼ˆObject-Oriented Analysis and Disignï¼‰</p><ul><li>Coad/Yourdonçš„æ–¹æ³•æ˜¯å»ºç«‹åœ¨ä¿¡æ¯æ¨¡å‹åŒ–ã€é¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡å’ŒçŸ¥è¯†åº“ç³»ç»ŸåŸºç¡€ä¹‹ä¸Šçš„ã€‚</li><li><p>é¢å‘å¯¹è±¡çš„åˆ†æ(OOA)</p><ul><li>é¡¶å±‚æ¶æ„å›¾ã€ç”¨ä¾‹å’Œç”¨ä¾‹å›¾ã€é¢†åŸŸæ¦‚å¿µæ¨¡å‹å›¾æ„æˆ</li><li>ç¡®å®šç±»ä¸å¯¹è±¡</li><li>æ ‡è¯†ç»“æ„</li><li>å®šä¹‰ä¸»é¢˜</li><li>å®šä¹‰å±æ€§</li><li>å®šä¹‰æœåŠ¡</li></ul></li><li><p>é¢å‘å¯¹è±¡çš„è®¾è®¡(OOD)</p><ul><li>è®¾è®¡é—®é¢˜åŸŸï¼ˆç»†åŒ–åˆ†æç»“æœï¼‰</li><li>è®¾è®¡äººæœºäº¤äº’éƒ¨åˆ†ï¼ˆè®¾è®¡ç”¨æˆ·ç•Œé¢ï¼‰</li><li>è®¾è®¡ä»»åŠ¡ç®¡ç†éƒ¨åˆ†ï¼ˆç¡®å®šç³»ç»Ÿèµ„æºçš„åˆ†é…ï¼‰</li><li>è®¾è®¡æ•°æ®ç®¡ç†éƒ¨åˆ†ï¼ˆç¡®å®šæŒä¹…å¯¹è±¡çš„å­˜å‚¨ï¼‰</li></ul></li></ul></li><li><p>Boochæ–¹æ³•ï¼ˆObject Oriented Designï¼‰</p><ul><li>é¢å‘å¯¹è±¡çš„è®¾è®¡ä¸­ä¸»è¦å¼ºè°ƒå¤šæ¬¡é‡å¤å’Œå¼€å‘è€…çš„åˆ›é€ æ€§ã€‚æ–¹æ³•æœ¬èº«æ˜¯ä¸€ç»„å¯å‘æ€§çš„è¿‡ç¨‹å¼å»ºè®®</li><li>åœ¨ä¸€å®šæŠ½è±¡å±‚æ¬¡ä¸Šè¡¨ç¤ºç±»ä¸å¯¹è±¡</li><li>è¡¨ç¤ºç±»ä¸å¯¹è±¡çš„è¯­ä¹‰</li><li>è¡¨ç¤ºç±»ä¸å¯¹è±¡ä¹‹é—´çš„å…³ç³»(ç»§æ‰¿ã€å®ä¾‹åŒ–ã€ä½¿ç”¨ç­‰)</li><li>å®ç°ç±»ä¸å¯¹è±¡</li></ul></li><li><p>OMTæ–¹æ³•-å¯¹è±¡å»ºæ¨¡æŠ€æœ¯ï¼ˆObject Modeling Techniqueï¼‰</p><ul><li>4ä¸ªæ´»åŠ¨ï¼šåˆ†æã€ç³»ç»Ÿè®¾è®¡ã€å¯¹è±¡è®¾è®¡å’Œå®ç°</li></ul></li><li><p>OOSE-é¢å‘å¯¹è±¡çš„è½¯ä»¶å·¥ç¨‹ï¼ˆObject-Oriented Software Engineeringï¼‰</p><ul><li>ä½¿ç”¨äº‹ä¾‹é©±åŠ¨çš„é¢å‘å¯¹è±¡å¼€å‘æ–¹æ³•ã€‚OOSEæ–¹æ³•é‡‡ç”¨5ç±»æ¨¡å‹æ¥å»ºç«‹ç›®æ ‡ç³»ç»Ÿ</li><li><ol><li><p>éœ€æ±‚æ¨¡å‹</p><ul><li>é¢†åŸŸå¯¹è±¡æ¨¡å‹å’Œç•Œé¢æè¿°æ”¯æŒ</li></ul></li></ol></li><li><ol><li><p>åˆ†ææ¨¡å‹</p><ul><li>åœ¨éœ€æ±‚æ¨¡å‹åŸºç¡€ä¸Šå»ºç«‹çš„ï¼Œå»ºç«‹åœ¨ç³»ç»Ÿç”Ÿå‘½æœŸä¸­å¯ç»´æŠ¤ã€æœ‰é€»è¾‘ã€å¥å£®çš„ç»“æ„</li></ul></li></ol></li><li><ol><li><p>è®¾è®¡æ¨¡å‹</p><ul><li>ç²¾åŒ–åˆ†ææ¨¡å‹å¹¶è€ƒè™‘å½“å‰çš„å®ç°ç¯å¢ƒ</li></ul></li></ol></li><li><ol><li><p>å®ç°æ¨¡å‹</p><ul><li>å®ç°å—çš„ä»£ç </li></ul></li></ol></li><li><ol><li><p>æµ‹è¯•æ¨¡å‹</p><ul><li>ä»åº•å±‚çš„å•å…ƒæµ‹è¯•å»¶ç”³åˆ°é«˜å±‚çš„ç³»ç»Ÿæµ‹è¯•</li></ul></li></ol></li></ul></li></ul></li><li><p>åŸå‹æ–¹æ³•</p><ul><li>æ˜ç¡®å¹¶å®Œå–„éœ€æ±‚ã€æ¢ç´¢è®¾è®¡é€‰æ‹©æ–¹æ¡ˆã€å‘å±•ä¸ºæœ€ç»ˆçš„äº§å“</li></ul></li><li><p>é€†å‘å·¥ç¨‹</p><ul><li><p>é€†å‘å·¥ç¨‹ï¼š</p><ul><li>åˆ†æç¨‹åºï¼ŒåŠ›å›¾åœ¨æ¯”æºä»£ç æ›´é«˜çš„æŠ½è±¡å±‚æ¬¡ä¸Šå»ºç«‹ç¨‹åºçš„è¡¨ç¤ºè¿‡ç¨‹</li><li><p>å®ç°çº§</p><ul><li>ç¨‹åºçš„æŠ½è±¡è¯­æ³•æ ‘ã€ç¬¦å·è¡¨ç­‰ä¿¡æ¯</li></ul></li><li><p>ç»“æ„çº§</p><ul><li>ç¨‹åºé—´çš„å…³ç³»ï¼Œè°ƒç”¨å›¾ã€ç»“æ„å›¾ã€è§†å›¾ç­‰</li></ul></li><li><p>åŠŸèƒ½çº§</p><ul><li>åŠŸèƒ½åŠç¨‹åºæ®µä¹‹é—´å…³ç³»çš„ä¿¡æ¯</li></ul></li><li><p>é¢†åŸŸçº§</p><ul><li>å®ä½“ä¸åº”ç”¨é¢†åŸŸæ¦‚å¿µä¹‹é—´å…³ç³»</li></ul></li></ul></li><li><p>å†å·¥ç¨‹</p><ul><li>ä¿®å¤å’Œæ”¹é€ å·¥ç¨‹</li></ul></li><li><p>è½¯ä»¶é‡æ„</p><ul><li>ä¸æ”¹å˜è½¯ä»¶çš„åŠŸèƒ½å’Œå¤–éƒ¨å¯è§æ€§çš„æƒ…å†µä¸‹ï¼Œæ”¹å–„è½¯ä»¶çš„ç»“æ„ï¼Œæé«˜è½¯ä»¶çš„æ¸…æ™°æ€§ã€å¯æ‹“å±•æ€§å’Œå¯é‡ç”¨æ€§</li></ul></li></ul></li></ul><h3 id="è½¯ä»¶å¼€å‘æ¨¡å‹"><a href="#è½¯ä»¶å¼€å‘æ¨¡å‹" class="headerlink" title="è½¯ä»¶å¼€å‘æ¨¡å‹"></a>è½¯ä»¶å¼€å‘æ¨¡å‹</h3><ul><li><p>ç€‘å¸ƒæ¨¡å‹</p><ul><li>ä»ä¸€ä¸ªç‰¹å®šé˜¶æ®µæµå‘ä¸‹ä¸€ä¸ªé˜¶æ®µ</li><li>é€‚åˆäºéœ€æ±‚æ˜ç¡®çš„é¡¹ç›®</li><li><p>ç¼ºç‚¹ï¼š</p><ul><li><ol><li>ä¸Šä¸€ä¸ªé˜¶æ®µçš„é”™è¯¯ä¼šæµè½¬åˆ°ä¸‹ä¸€ä¸ªé˜¶æ®µï¼Œæ”¾å¤§é”™è¯¯</li></ol></li><li><ol><li>éš¾ä»¥é€‚åº”å˜åŒ–</li></ol></li><li><ol><li>ç»“æœéœ€è¦ç­‰æ‰€æœ‰é˜¶æ®µå®Œæˆåæ‰çŸ¥é“</li></ol></li></ul></li></ul></li><li><p>æ¼”åŒ–æ¨¡å‹</p><ul><li>æ¼”åŒ–æ¨¡å‹å¯ä»¥çœ‹åšè‹¥å¹²ä¸ªç€‘å¸ƒæ¨¡å‹çš„è¿­ä»£</li></ul></li><li><p>èºæ—‹æ¨¡å‹</p><ul><li>èºæ—‹æ¨¡å‹åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼šéœ€æ±‚å®šä¹‰ï¼Œé£é™©åˆ†æï¼ŒåŠŸèƒ½å®ç°å’Œè¯„å®¡</li><li>é€‚åˆç”¨äºåºå¤§è€Œå¤æ‚ã€å…·æœ‰é«˜é£é™©çš„ç³»ç»Ÿ</li><li><p>ç¼ºç‚¹</p><ul><li><ol><li>éœ€è¦å…·æœ‰æƒ³å½“ä¸°å¯Œçš„é£é™©è¯„ä¼°ç»éªŒå’Œä¸“ä¸šçŸ¥è¯†</li></ol></li><li><ol><li>è¿‡å¤šçš„è¿­ä»£æ¬¡æ•°ä¼šå¢åŠ å¼€å‘æˆæœ¬ï¼Œå»¶æ—¶äº¤ä»˜æ—¶é—´</li></ol></li></ul></li></ul></li><li><p>å¢é‡æ¨¡å‹</p><ul><li><p>é€‚ç”¨</p><ul><li>åœ¨ç³»ç»Ÿæ¶æ„æˆç†Ÿï¼Œé£é™©è¾ƒä½çš„é€‚åˆï¼Œå¯ä»¥ç”¨å¢é‡çš„æ–¹å¼è¿›è¡Œç³»ç»Ÿå¼€å‘ã€‚</li></ul></li><li><p>ä»‹ç»</p><ul><li>å¢é‡å¼€å‘æ¨¡å‹å¼€å‘ä¸­ï¼Œæ¯ä¸€ä¸ªç‰ˆæœ¬éƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬ï¼Œç‰ˆæœ¬çš„æ—¶é—´å¢é‡è¦å‡åŒ€</li></ul></li></ul></li><li><p>åŸå‹æ³•</p><ul><li><p>é€‚ç”¨</p><ul><li>ç”¨æˆ·éœ€æ±‚ä¸æ˜ç¡®æˆ–è€…æŠ€æœ¯æ¶æ„ä¸­å­˜åœ¨å¾ˆå¤šä¸å¯çŸ¥å› ç´ çš„é€‚åˆ</li></ul></li><li><p>ä»‹ç»</p><ul><li>æ¯ä¸€ä¸ªè¿­ä»£éƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ</li></ul></li></ul></li><li><p>æ„ä»¶ç»„è£…æ¨¡å‹</p><ul><li>é€‚ç”¨</li><li><p>ä»‹ç»</p><ul><li><p>æ„ä»¶çš„å¼€å‘è¿‡ç¨‹</p><ul><li>éœ€æ±‚åˆ†æå’Œå®šä¹‰</li><li>ä½“ç³»ç»“æ„è®¾è®¡</li><li>æ„ä»¶åº“å»ºç«‹</li><li>åº”ç”¨è½¯ä»¶æ„å»º</li><li>æµ‹è¯•å’Œå‘å¸ƒ</li></ul></li></ul></li><li><p>ä¼˜ç‚¹</p><ul><li>æ„ä»¶è®©ç³»ç»Ÿçš„æ‹“å±•å˜å¾—æ›´åŠ å®¹æ˜“ï¼›è®¾è®¡è‰¯å¥½çš„æ„ä»¶å®¹æ˜“è¢«é‡ç”¨ï¼Œé™ä½è½¯ä»¶å¼€å‘æˆæœ¬</li></ul></li><li><p>ç¼ºç‚¹</p><ul><li>å¯¹æ„ä»¶çš„è®¾è®¡éœ€è¦ç»éªŒä¸°å¯Œçš„æ¶æ„å¸ˆï¼›è€ƒè™‘è½¯ä»¶é‡ç”¨æ—¶å¾€å¾€åœ¨å…¶ä»–æ–¹é¢åšå‡ºè®©æ­¥ï¼Œå¦‚æ€§èƒ½ã€‚</li></ul></li></ul></li></ul><h3 id="ç»Ÿä¸€è¿‡ç¨‹UP"><a href="#ç»Ÿä¸€è¿‡ç¨‹UP" class="headerlink" title="ç»Ÿä¸€è¿‡ç¨‹UP"></a>ç»Ÿä¸€è¿‡ç¨‹UP</h3><ul><li><p>UPäºŒç»´æ¨¡å‹</p><ul><li>4ä¸ªé˜¶æ®µï¼Œåˆå§‹ã€ç»†åŒ–ã€æ„å»ºã€äº¤ä»˜</li></ul></li><li><p>UPç”Ÿå‘½å‘¨æœŸ</p><ul><li>4ä¸ªé‡Œç¨‹ç¢‘ï¼šç›®æ ‡é‡Œç¨‹ç¢‘ã€æ¶æ„é‡Œç¨‹ç¢‘ã€èƒ½åŠ›é‡Œç¨‹ç¢‘ã€å‘å¸ƒé‡Œç¨‹ç¢‘</li></ul></li><li><p>UPçš„ ç‰¹ç‚¹</p><ul><li><ol><li>UPæ—¶ä¸€ä¸ªè¿­ä»£çš„äºŒç»´æ¨¡å‹ï¼Œåœ¨ç”Ÿå‘½å‘¨æœŸçš„æ¯ä¸€ä¸ªé˜¶æ®µéƒ½å¯ä»¥è¿›è¡Œéœ€æ±‚ã€è®¾è®¡ç­‰æ´»åŠ¨</li></ol></li><li><ol><li>å¯ä»¥é‡‡ç”¨æ¼”åŒ–æ¨¡å‹æˆ–è€…å¢é‡æ¨¡å‹</li></ol></li><li><ol><li>UPçš„è¿­ä»£å®¹æ˜“æ§åˆ¶å¼€å‘é£é™©</li></ol></li><li><ol><li>è™½ç„¶UPæ—¶ä¸€ä¸ªè¿­ä»£å¼€å‘æ¨¡å‹ï¼Œä½†æ˜¯æœ¬èº«ä¸å±äºæ•æ·å¼€å‘</li></ol></li><li><ol><li>åœ¨å®è·µåº”ç”¨ä¸­å¯ä»¥æ ¹æ®å…·ä½“é—®é¢˜å¯¹UPè¿›è¡Œè£å‰ªï¼Œä»è€Œé€‚åº”å„ç§è½¯ä»¶è§„æ¨¡å’Œå¼€å‘å›¢é˜Ÿ</li></ol></li><li>æœ€æ ¸å¿ƒï¼šç”¨ä¾‹é©±åŠ¨ï¼Œä»¥æ¶æ„ä¸ºä¸­å¿ƒï¼Œè¿­ä»£å’Œå¢é‡</li></ul></li></ul><h3 id="æ•æ·å¼€å‘"><a href="#æ•æ·å¼€å‘" class="headerlink" title="æ•æ·å¼€å‘"></a>æ•æ·å¼€å‘</h3><ul><li><p>æé™ç¼–ç¨‹</p><ul><li>ä»·å€¼è§‚ï¼šæ²Ÿé€šã€ç®€å•ã€åé¦ˆã€å‹‡æ°”</li></ul></li><li><p>æ°´æ™¶æ–¹æ³•Crystal</p><ul><li>å¼ºè°ƒä¸åŒçš„é¡¹ç›®ï¼Œé‡‡ç”¨ä¸åŒçš„ç­–ç•¥</li></ul></li><li><p>Scrumå¹¶åˆ—äº‰çƒ</p><ul><li>è¿­ä»£ï¼Œ30å¤©ä¸€ä¸ªè¿­ä»£å‘¨æœŸï¼ŒæŒ‰éœ€æ±‚ä¼˜å…ˆçº§å®ç°</li><li>äº§å“ä»£åŠäº‹é¡¹åˆ—è¡¨æ¢³ç†ï¼ŒSprintè®¡åˆ’ä¼šè®®ã€æ¯æ—¥scrumä¼šè®®ã€Srpintè¯„å®¡ä¼šè®®ã€Sprintå›é¡¾ä¼šè®®</li></ul></li><li><p>åŠŸèƒ½é©±åŠ¨å¼€å‘FDD</p><ul><li>å°†å¼€å‘äººå‘˜åˆ†ç±»</li></ul></li></ul><h3 id="è½¯ä»¶é‡ç”¨"><a href="#è½¯ä»¶é‡ç”¨" class="headerlink" title="è½¯ä»¶é‡ç”¨"></a>è½¯ä»¶é‡ç”¨</h3><ul><li><p>æ¨ªå‘é‡ç”¨</p><ul><li><p>ä¸åŒåº”ç”¨é¢†åŸŸä¸­çš„è½¯ä»¶å…ƒç´ </p><ul><li>æ ‡å‡†å‡½æ•°åº“</li></ul></li></ul></li><li><p>çºµå‘é‡ç”¨</p><ul><li>å…±æ€§åº”ç”¨é¢†åŸŸé—´çš„è½¯éƒ¨åˆ†</li></ul></li></ul><h3 id="åŸºäºæ¶æ„çš„è½¯ä»¶è®¾è®¡ABSD"><a href="#åŸºäºæ¶æ„çš„è½¯ä»¶è®¾è®¡ABSD" class="headerlink" title="åŸºäºæ¶æ„çš„è½¯ä»¶è®¾è®¡ABSD"></a>åŸºäºæ¶æ„çš„è½¯ä»¶è®¾è®¡ABSD</h3><ul><li><p>ABSDï¼ˆArchitecture-Based Software Designï¼‰æ–¹æ³•</p><ul><li>å¼ºè°ƒç”±å•†ä¸šã€è´¨é‡å’ŒåŠŸèƒ½éœ€æ±‚çš„ç»„åˆé©±åŠ¨è½¯ä»¶æ¶æ„è®¾è®¡</li><li>ABSDè‡ªé¡¶å‘ä¸‹ã€é€’å½’ç»†åŒ–çš„è½¯ä»¶å¼€å‘æ–¹æ³•ï¼Œä»¥è½¯ä»¶ç³»ç»ŸåŠŸèƒ½çš„åˆ†è§£ä¸ºåŸºç¡€ï¼Œé€šè¿‡é€‰æ‹©æ¶æ„é£æ ¼å®ç°è´¨é‡å’Œå•†ä¸šéœ€æ±‚ï¼Œå¹¶å¼ºè°ƒåœ¨æ¶æ„è®¾è®¡è¿‡ç¨‹ä¸­ä½¿ç”¨è½¯ä»¶æ¶æ„æ¨¡æ¿</li></ul></li><li><p>åŸºäºæ¶æ„çš„è½¯ä»¶å¼€å‘æ¨¡å‹</p><ul><li><p>æ¶æ„éœ€æ±‚</p><ul><li>æ˜ç¡®ç”¨æˆ·å¯¹ç›®æ ‡è½¯ä»¶ç³»ç»Ÿåœ¨åŠŸèƒ½ã€è¡Œä¸ºã€æ€§èƒ½ã€è®¾è®¡çº¦æŸç­‰æ–¹é¢çš„æœŸæœ›</li><li><ol><li>éœ€æ±‚è·å–</li></ol></li><li><ol><li>æ ‡è¯†æ„ä»¶æ´»åŠ¨ï¼Œè·å¾—ç³»ç»ŸåŸºæœ¬ç»“æ„ï¼Œåˆ†ç»„ï¼Œæ‰“åŒ…æˆæ„ä»¶</li></ol></li><li><ol><li>æ¶æ„éœ€æ±‚è¯„å®¡</li></ol></li></ul></li><li><p>æ¶æ„è®¾è®¡</p><ul><li>è¿­ä»£çš„è¿‡ç¨‹ï¼Œåˆ©ç”¨æ¶æ„éœ€æ±‚ç”Ÿæˆå¹¶è°ƒæ•´æ¶æ„ç­–ç•¥</li><li><ol><li>æå‡ºæ¶æ„æ¨¡å‹</li></ol></li><li><ol><li>å°†å·²æ ‡è¯†çš„æ„ä»¶æ˜ å°„åˆ°æ¶æ„ä¸­</li></ol></li><li><ol><li>åˆ†ææ„ä»¶ä¹‹é—´çš„ç›¸äº’ä½œç”¨</li></ol></li><li><ol><li>äº§ç”Ÿç³»ç»Ÿæ¶æ„</li></ol></li><li><ol><li>è®¾è®¡è¯„å®¡</li></ol></li></ul></li><li><p>æ¶æ„æ–‡æ¡£åŒ–</p><ul><li>æ¶æ„è§„æ ¼è¯´æ˜ä¹¦</li><li>æµ‹è¯•æ¶æ„éœ€æ±‚çš„è´¨é‡è®¾è®¡è¯´æ˜ä¹¦</li></ul></li><li><p>æ¶æ„å¤å®¡</p><ul><li>è¯„ä»·æ¶æ„æ˜¯å¦èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚ã€è´¨é‡å±æ€§éœ€æ±‚æ˜¯å¦åœ¨æ¶æ„ä¸­å¾—ä»¥ä½“ç°ï¼Œå±‚æ¬¡æ˜¯å¦æ¸…æ™°ï¼Œæ„ä»¶åˆ’åˆ†æ˜¯å¦åˆç†ç­‰ã€‚ï¼ˆå®¢æˆ·ä»£è¡¨å’Œé¢†åŸŸä¸“å®¶ï¼‰</li></ul></li><li><p>æ¶æ„å®ç°</p><ul><li>æ¶æ„åˆ†æå’Œè®¾è®¡</li><li>æ„ä»¶å®ç°</li><li>æ„ä»¶ç»„è£…</li><li>ç³»ç»Ÿæµ‹è¯•</li></ul></li><li><p>æ¼”åŒ–</p><ul><li>è§£å†³ç”¨æˆ·åœ¨ç³»ç»Ÿå¼€å‘è¿‡ç¨‹ä¸­å‘ç”Ÿçš„éœ€æ±‚å˜æ›´é—®é¢˜</li><li><ol><li>æ¶æ„æ¼”åŒ–è®¡åˆ’</li></ol></li><li><ol><li>æ„ä»¶å˜åŠ¨</li></ol></li><li><ol><li>æ›´æ–°æ„ä»¶çš„ç›¸äº’ä½œç”¨</li></ol></li><li><ol><li>æ„ä»¶çš„ç»„è£…ä¸æµ‹è¯•å’ŒæŠ€æœ¯è¯„å®¡</li></ol></li></ul></li></ul></li></ul><h3 id="å½¢å¼åŒ–æ–¹æ³•"><a href="#å½¢å¼åŒ–æ–¹æ³•" class="headerlink" title="å½¢å¼åŒ–æ–¹æ³•"></a>å½¢å¼åŒ–æ–¹æ³•</h3><ul><li>å½¢å¼åŒ–æ–¹æ³•å¼å€ŸåŠ©æ•°æ®çš„æ–¹æ³•æ¥è§£å†³è½¯ä»¶å·¥ç¨‹é¢†åŸŸé—®é¢˜ï¼Œä¸»è¦åŒ…æ‹¬å»ºç«‹ç²¾ç¡®çš„æ•°å­¦æ¨¡å‹ä»¥åŠå¯¹æ¨¡å‹çš„åˆ†ææ´»åŠ¨ã€‚</li><li><ol><li>åŸºç¡€æ¦‚å¿µ</li></ol></li><li><ol><li>å½¢å¼åŒ–æ–¹æ³•ä¸é¢å‘å¯¹è±¡æ–¹çš„ç»“åˆ</li></ol></li><li><ol><li>å·¥å…·å¼€å‘</li></ol></li></ul><h2 id="ç³»ç»Ÿè§„åˆ’"><a href="#ç³»ç»Ÿè§„åˆ’" class="headerlink" title="ç³»ç»Ÿè§„åˆ’"></a>ç³»ç»Ÿè§„åˆ’</h2><h3 id="é¡¹ç›®çš„æå‡ºä¸é€‰æ‹©"><a href="#é¡¹ç›®çš„æå‡ºä¸é€‰æ‹©" class="headerlink" title="é¡¹ç›®çš„æå‡ºä¸é€‰æ‹©"></a>é¡¹ç›®çš„æå‡ºä¸é€‰æ‹©</h3><ul><li><p>é¡¹ç›®çš„ç«‹é¡¹ç›®æ ‡å’ŒåŠ¨æœº</p><ul><li><ol><li>åŸºç¡€ç ”ç©¶å¹¶è·å–æŠ€æœ¯</li></ol></li><li><ol><li>è¿›è¡Œåº”ç”¨ç ”å‘å¹¶è·å–äº§å“</li></ol></li><li><ol><li>æä¾›æŠ€æœ¯æœåŠ¡</li></ol></li><li><ol><li>ä¿¡æ¯æŠ€æœ¯äº§å“çš„ä½¿ç”¨è€…</li></ol></li></ul></li><li><p>é¡¹ç›®çš„é€‰æ‹©å’Œç¡®å®š</p></li><li>é¡¹ç›®çš„æå‡ºå’Œé€‰æ‹©ç»“æœ</li></ul><h3 id="å¯è¡Œæ€§ç ”ç©¶å’Œæ•ˆç›Šåˆ†æ"><a href="#å¯è¡Œæ€§ç ”ç©¶å’Œæ•ˆç›Šåˆ†æ" class="headerlink" title="å¯è¡Œæ€§ç ”ç©¶å’Œæ•ˆç›Šåˆ†æ"></a>å¯è¡Œæ€§ç ”ç©¶å’Œæ•ˆç›Šåˆ†æ</h3><ul><li><p>å¯è¡Œæ€§ç ”ç©¶å†…å®¹</p><ul><li>ç»æµå¯è¡Œæ€§</li><li>æŠ€æœ¯å¯è¡Œæ€§</li><li>æ³•å¾‹å¯è¡Œæ€§</li><li>æ‰§è¡Œå¯è¡Œæ€§</li><li>æ–¹æ¡ˆé€‰æ‹©</li></ul></li><li><p>æˆæœ¬æ•ˆç›Šåˆ†æ</p></li><li>å¯è¡Œæ€§åˆ†ææŠ¥å‘Š</li></ul><h3 id="æ–¹æ¡ˆçš„åˆ¶å®šå’Œæ”¹è¿›"><a href="#æ–¹æ¡ˆçš„åˆ¶å®šå’Œæ”¹è¿›" class="headerlink" title="æ–¹æ¡ˆçš„åˆ¶å®šå’Œæ”¹è¿›"></a>æ–¹æ¡ˆçš„åˆ¶å®šå’Œæ”¹è¿›</h3><h3 id="æ–°æ—§ç»§ç»­çš„åˆ†æå’Œæ¯”è¾ƒ"><a href="#æ–°æ—§ç»§ç»­çš„åˆ†æå’Œæ¯”è¾ƒ" class="headerlink" title="æ–°æ—§ç»§ç»­çš„åˆ†æå’Œæ¯”è¾ƒ"></a>æ–°æ—§ç»§ç»­çš„åˆ†æå’Œæ¯”è¾ƒ</h3><ul><li><p>é—ç•™ç³»ç»Ÿçš„è¯„ä»·æ–¹æ³•</p><ul><li>å•†ä¸šä»·å€¼è¯„ä»·</li><li>å¤–éƒ¨ç¯å¢ƒè¯„ä»·</li><li>åº”ç”¨è½¯ä»¶è¯„ä»·</li></ul></li><li><p>é—ç•™ç³»ç»Ÿçš„æ¼”åŒ–ç­–ç•¥</p><ul><li><ol><li>æ·˜æ±°ç­–ç•¥ - ä½æ°´å¹³ä½ä»·å€¼</li></ol></li><li><ol><li>ç»§æ‰¿ç­–ç•¥ - ä½æ°´å¹³é«˜ä»·å€¼</li></ol></li><li><ol><li>æ”¹é€ ç­–ç•¥ - é«˜æ°´å¹³é«˜ä»·å€¼</li></ol></li><li><ol><li>é›†æˆç­–ç•¥ - é«˜æ°´å¹³ä½ä»·å€¼</li></ol></li></ul></li></ul><h2 id="ç³»ç»Ÿåˆ†æä¸è®¾è®¡æ–¹æ³•"><a href="#ç³»ç»Ÿåˆ†æä¸è®¾è®¡æ–¹æ³•" class="headerlink" title="ç³»ç»Ÿåˆ†æä¸è®¾è®¡æ–¹æ³•"></a>ç³»ç»Ÿåˆ†æä¸è®¾è®¡æ–¹æ³•</h2><h3 id="å®šä¹‰é—®é¢˜ä¸å½’ç»“æ¨¡å‹"><a href="#å®šä¹‰é—®é¢˜ä¸å½’ç»“æ¨¡å‹" class="headerlink" title="å®šä¹‰é—®é¢˜ä¸å½’ç»“æ¨¡å‹"></a>å®šä¹‰é—®é¢˜ä¸å½’ç»“æ¨¡å‹</h3><ul><li><p>é—®é¢˜åˆ†æ</p><ul><li>ç›®æ ‡æ˜¯åœ¨å¼€å‘ä¹‹å‰å¯¹è¦è§£å†³çš„é—®é¢˜æœ‰ä¸€ä¸ªæ›´é€å½»çš„ç†è§£</li><li><p>åœ¨é—®é¢˜å®šä¹‰ä¸Šè¾¾æˆå…±è¯†</p><ul><li><ol><li>é—®é¢˜æ¦‚è¿°</li></ol></li><li><ol><li>é—®é¢˜å½±å“</li></ol></li><li><ol><li>é—®é¢˜ç»“æœ</li></ol></li><li><ol><li>é—®é¢˜ä¼˜ç‚¹</li></ol></li></ul></li><li><p>ç†è§£é—®é¢˜æœ¬è´¨</p><ul><li>é±¼éª¨å›¾</li><li>å¸•ç´¯æ‰˜å›¾åˆ†æé—®é¢˜çš„æœ¬è´¨</li></ul></li><li><p>ç¡®å®šé¡¹ç›®å¹²ç³»äººå’Œç”¨æˆ·</p></li><li><p>å®šä¹‰ç³»ç»Ÿçš„è¾¹ç•Œ</p><ul><li>ç³»ç»Ÿçš„è¾¹ç•ŒæŒ‡è§£å†³æ–¹æ¡ˆç³»ç»Ÿå’Œç°å®ä¸–ç•Œä¹‹é—´çš„è¾¹ç•Œ</li><li><ol><li><p>ä¸Šä¸‹æ–‡èŒƒå›´å›¾</p><ul><li>æ•°æ®æµå›¾ä¸­çš„é¡¶å±‚å›¾ï¼Œååº”é¢†åŸŸä¿¡æ¯æ¨¡å‹ï¼Œèƒ½å¤Ÿè®©è¯»è€…å®è§‚çš„äº†è§£ç³»ç»Ÿ</li></ul></li></ol></li><li><ol><li>ç”¨ä¾‹æ¨¡å‹</li></ol></li></ul></li><li><p>ç¡®å®šç³»ç»Ÿå®ç°çš„çº¦æŸ</p></li></ul></li><li><p>é—®é¢˜å®šä¹‰</p><ul><li><p>ç›®æ ‡</p><ul><li>ç›®æ ‡æ˜¯æ„å»ºç³»ç»Ÿçš„åŸå› ï¼Œä»–æ˜¯æœ€é«˜å±‚çš„ç”¨æˆ·éœ€æ±‚ï¼Œæ˜¯ä¸šåŠ¡ä¸Šçš„éœ€è¦</li></ul></li><li><p>åŠŸèƒ½éœ€æ±‚</p><ul><li>æŒ‡æ˜ç³»ç»Ÿå¿…é¡»è¦åšçš„äº‹æƒ…ï¼Œåªæœ‰è¿™äº›è¡Œä¸ºçš„å­˜åœ¨ï¼Œæ‰æœ‰ç³»ç»Ÿçš„å­˜åœ¨çš„ä»·å€¼</li></ul></li><li><p>éåŠŸèƒ½éœ€æ±‚</p><ul><li>æŒ‡è§‚æ„Ÿéœ€æ±‚ã€æ˜“ç”¨æ€§éœ€æ±‚ã€æ€§èƒ½éœ€æ±‚ã€å¯æ“ä½œæ€§éœ€æ±‚ã€å¯ç»´æŠ¤æ€§å’Œå¯ç§»æ¤æ€§éœ€æ±‚ã€å®‰å…¨æ€§éœ€æ±‚ã€æ–‡åŒ–å’Œæ­£å¸¸éœ€æ±‚ã€æ³•å¾‹éœ€æ±‚</li></ul></li></ul></li></ul><h3 id="éœ€æ±‚åˆ†æä¸è½¯ä»¶è®¾è®¡"><a href="#éœ€æ±‚åˆ†æä¸è½¯ä»¶è®¾è®¡" class="headerlink" title="éœ€æ±‚åˆ†æä¸è½¯ä»¶è®¾è®¡"></a>éœ€æ±‚åˆ†æä¸è½¯ä»¶è®¾è®¡</h3><ul><li><p>éœ€æ±‚åˆ†æçš„ä»»åŠ¡ä¸è¿‡ç¨‹</p><ul><li><p>é—®é¢˜è¯†åˆ«</p><ul><li>å‘ç°éœ€æ±‚ã€æè¿°éœ€æ±‚</li></ul></li><li><p>åˆ†æä¸ç»¼åˆ</p><ul><li>å¯¹é—®é¢˜ä»Šæ˜”åˆ†æï¼Œç„¶ååœ¨æ­¤åŸºç¡€ä¸Šæ•´åˆå‡ºè§£å†³æ–¹æ¡ˆ</li></ul></li><li><p>ç¼–åˆ¶éœ€æ±‚åˆ†ææ–‡æ¡£</p><ul><li>éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦ï¼šå¯¹å·²ç¡®å®šçš„éœ€æ±‚è¿›è¡Œç¨³å®šåŒ–æè¿°</li></ul></li><li><p>éœ€æ±‚åˆ†æè¯„å®¡</p><ul><li>å¯¹åŠŸèƒ½çš„æ­£ç¡®æ€§ã€å®Œæ•´æ€§å’Œæ¸…æ™°æ€§ï¼Œä»¥åŠå…¶ä»–éœ€æ±‚è¿›è¡Œè¯„ä»·</li></ul></li></ul></li><li><p>éœ€æ±‚è·å–æ–¹æ³•</p><ul><li>ç”¨æˆ·è®¿è°ˆ</li><li>ç”¨æˆ·è°ƒæŸ¥</li><li>ç°åœºè§‚æ‘©</li><li>é˜…è¯»å†å²æ–‡æ¡£</li><li>è”åˆè®¨è®ºä¼š</li></ul></li><li><p>éœ€æ±‚å®šä¹‰</p><ul><li>ä¸¥æ ¼å®šä¹‰æ–¹æ³•</li><li><p>åŸå‹æ–¹æ³•</p><ul><li>å…ˆå®ç°ä¸€ä¸ªæ»¡è¶³ç”¨æˆ·åŸºæœ¬éœ€æ±‚çš„åŸå‹ï¼Œå†ç”±ç”¨æˆ·åœ¨å¼€å‘è¿‡ç¨‹ä¸­æå‡ºæ›´å¥½çš„éœ€æ±‚ï¼Œæ ¹æ®ç”¨æˆ·è¦æ±‚ä¸æ–­å¯¹ç³»ç»Ÿè¿›è¡Œæ”¹è¿›ã€‚è¿™é‡Œé¢æœ‰è¿­ä»£çš„æ€æƒ³</li></ul></li><li><p>ç¼–å†™è½¯ä»¶éœ€æ±‚è¯´æ˜ä¹¦SRS</p></li></ul></li><li><p>å¦‚ä½•è¿›è¡Œç³»ç»Ÿè®¾è®¡</p><ul><li>ç»„ä»¶çš„ç‹¬ç«‹æ€§ï¼šä¾‹å¤–çš„è¯†åˆ«å’Œå¤„ç†ï¼›é˜²é”™å’Œå®¹é”™</li></ul></li><li><p>è½¯ä»¶è®¾è®¡çš„ä»»åŠ¡ä¸æ´»åŠ¨</p><ul><li>æ¦‚è¦è®¾è®¡ã€è¯¦ç»†è®¾è®¡</li></ul></li></ul><h3 id="å¸¸ç”¨çš„åˆ†ææ–¹æ³•"><a href="#å¸¸ç”¨çš„åˆ†ææ–¹æ³•" class="headerlink" title="å¸¸ç”¨çš„åˆ†ææ–¹æ³•"></a>å¸¸ç”¨çš„åˆ†ææ–¹æ³•</h3><ul><li><p>é¢å‘æ•°æ®æµ - ç»“æ„åŒ–åˆ†æä¸è®¾è®¡</p><ul><li>ä¸€ç§é¢å‘æ•°æ®æµçš„éœ€æ±‚åˆ†æå’Œè®¾è®¡æ–¹æ³•ï¼Œé€‚ç”¨äºåˆ†æå’Œè®¾è®¡å¤§å‹æ•°æ®å¤„ç†ç³»ç»Ÿï¼Œæ˜¯ä¸€ç§ç®€å•çš„æ–¹æ³•</li><li><p>ç»“æ„åŒ–åˆ†æ</p><ul><li>åŸºæœ¬æ€æƒ³æ˜¯è‡ªé¡¶å‘ä¸‹é€å±‚åˆ†è§£</li></ul></li><li><p>ç»“æ„åŒ–è®¾è®¡</p><ul><li>æ¶æ„è®¾è®¡</li><li>æ¥å£è®¾è®¡</li><li>æ•°æ®è®¾è®¡</li><li>è¿‡ç¨‹è®¾è®¡</li></ul></li><li><p>æ¨¡å—è®¾è®¡</p><ul><li>æ¨¡å—ç‹¬ç«‹åŒ–åŸåˆ™</li><li>ä¿¡æ¯éšè—åŸåˆ™</li></ul></li></ul></li><li><p>é¢å‘å¯¹è±¡ - é¢å‘å¯¹è±¡çš„åˆ†æä¸è®¾è®¡</p><ul><li><p>é¢å‘å¯¹è±¡çš„åŸºæœ¬æ¦‚å¿µ</p><ul><li><p>å¯¹è±¡å’Œç±»</p><ul><li>å®ä½“ç±»ï¼šæ˜ å°„éœ€æ±‚ä¸­çš„æ¯ä¸ªå®ä½“</li><li>è¾¹ç•Œç±»ï¼šç”¨äºå°è£…ç”¨ä¾‹å†…ã€å¤–çš„ä¿¡æ¯æˆ–æ•°æ®æµ</li><li>æ§åˆ¶ç±»ï¼šç”¨äºæ§åˆ¶ç”¨ä¾‹å·¥ä½œçš„ç±»</li></ul></li><li><p>ç»§æ‰¿å’ŒèŒƒåŒ–</p></li><li>å¤šæ€</li><li><p>æ¨¡æ¿ç±»</p><ul><li>ç±»å±ç±»ï¼Œç”¨æ¥å®ç°å‚æ•°å¤šæ€æœºåˆ¶</li></ul></li><li><p>æ¶ˆæ¯å’Œæ¶ˆæ¯é€šä¿¡</p><ul><li>æ¶ˆæ¯ï¼šå‘å¯¹è±¡å‘å‡ºçš„æœåŠ¡è¯·æ±‚</li></ul></li></ul></li><li><p>é¢å‘å¯¹è±¡åˆ†æ</p><ul><li><p>ä»‹ç»</p><ul><li>é¢å‘å¯¹è±¡åˆ†æçš„ç›®æ ‡æ˜¯å¼€å‘ä¸€ç³»åˆ—æ¨¡å‹ï¼Œè¿™äº›æ¨¡å‹æè¿°è®¡ç®—æœºè½¯ä»¶ï¼Œå½“å®ƒå·¥ä½œæ—¶ä»¥æ»¡è¶³ä¸€ç»„å®¢æˆ·å®šä¹‰çš„éœ€æ±‚</li></ul></li><li><p>OOA/OODæ–¹æ³•</p></li><li>Boochæ–¹æ³•</li><li>OMTæ–¹æ³•</li><li>OOSEæ–¹æ³•</li></ul></li><li><p>ç»Ÿä¸€å»ºæ¨¡è¯­è¨€UML</p><ul><li><p>ç”¨ä¾‹å›¾</p><ul><li>ä»ç”¨æˆ·è§’åº¦æè¿°äº†ç³»ç»Ÿçš„åŠŸèƒ½ï¼Œå¹¶æŒ‡å‡ºå„ä¸ªåŠŸèƒ½çš„æ‰§è¡Œè€…</li></ul></li><li><p>ç±»å›¾</p><ul><li>ç”¨ä¾‹å›¾æŠ½è±¡æˆç±»ï¼Œæè¿°ç±»çš„å†…éƒ¨ç»“æ„å’Œç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»</li><li>æ³›åŒ–ï¼šç»§æ‰¿å…³ç³»</li><li>å®ç°ï¼šç±»ä¸æ¥å£</li><li>å…³è”ï¼šæ‹¥æœ‰å…³ç³»</li><li>èšåˆï¼šæ•´ä½“ä¸éƒ¨åˆ†ï¼Œéƒ¨åˆ†ç¦»å¼€æ•´ä½“è€Œå•ç‹¬å­˜åœ¨</li><li>ç»„åˆï¼šæ•´ä½“ä¸éƒ¨åˆ†ï¼Œéƒ¨åˆ†ä¸èƒ½ç¦»å¼€æ•´ä½“</li><li>ä¾èµ–</li></ul></li><li><p>å¯¹è±¡å›¾</p><ul><li>å„ä¸ªå¯¹è±¡åœ¨äº¤äº’è¿‡ç¨‹ä¸­æŸä¸€æ—¶åˆ»çš„çŠ¶æ€</li></ul></li><li><p>åºåˆ—å›¾</p><ul><li>äº¤äº’å›¾çš„ä¸€ç§ï¼Œå¯¹è±¡ä¹‹é—´æ¶ˆæ¯å‘é€çš„å…ˆåé¡ºåº</li></ul></li><li><p>åä½œå›¾</p><ul><li>äº¤äº’å›¾çš„ä¸€ç§ï¼Œæ”¶å‘æ¶ˆæ¯çš„å¯¹è±¡çš„ç»„ç»‡å…³ç³»</li></ul></li><li><p>çŠ¶æ€å›¾</p><ul><li>ä¸€ç§ç”±çŠ¶æ€ã€å˜è¿ã€äº‹ä»¶å’Œæ´»åŠ¨ç»„æˆçš„çŠ¶æ€æœº</li></ul></li><li><p>æ´»åŠ¨å›¾</p><ul><li>çŠ¶æ€å›¾çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µ</li></ul></li><li><p>æ„ä»¶å›¾</p><ul><li>ç³»ç»Ÿä¸­æ„ä»¶ä¸æ„ä»¶ä¹‹é—´ï¼Œç±»æˆ–æ¥å£ä¸æ„ä»¶ä¹‹é—´çš„å…³ç³»å›¾</li></ul></li><li><p>éƒ¨ç½²å›¾</p><ul><li>ç‰©ç†è®¾å¤‡ä»¥åŠä¹‹é—´çš„è¿æ¥å…³ç³»</li></ul></li></ul></li></ul></li><li><p>é¢å‘æ•°æ®ç»“æ„ - jacksonæ–¹æ³•</p></li><li>ç»“æ„åŒ–æ•°æ®ç³»ç»Ÿå¼€å‘ - DSSDæ–¹æ³• </li></ul><h3 id="ç”¨æˆ·ç•Œé¢è®¾è®¡"><a href="#ç”¨æˆ·ç•Œé¢è®¾è®¡" class="headerlink" title="ç”¨æˆ·ç•Œé¢è®¾è®¡"></a>ç”¨æˆ·ç•Œé¢è®¾è®¡</h3><ul><li>ç”¨æˆ·ç•Œé¢è®¾è®¡åŸåˆ™</li><li>ç”¨æˆ·ç•Œé¢è®¾è®¡è¿‡ç¨‹</li></ul><h3 id="å·¥ä½œæµè®¾è®¡"><a href="#å·¥ä½œæµè®¾è®¡" class="headerlink" title="å·¥ä½œæµè®¾è®¡"></a>å·¥ä½œæµè®¾è®¡</h3><ul><li><p>å·¥ä½œæµè®¾è®¡æ¦‚å¿µ</p><ul><li>å·¥ä½œæµæ˜¯ä¸€ç±»èƒ½å¤Ÿå®Œå…¨æˆ–è€…éƒ¨åˆ†è‡ªåŠ¨æ‰§è¡Œçš„è¿‡ç¨‹ï¼Œæ ¹æ®ä¸€ç³»åˆ—è¿‡ç¨‹è§„åˆ™ã€æ–‡æ¡£ã€ä¿¡æ¯æˆ–ä»»åŠ¡åœ¨ä¸åŒçš„æ‰§è¡Œè€…ä¹‹é—´ä¼ é€’ã€æ‰§è¡Œ</li></ul></li><li><p>å·¥ä½œæµç®¡ç†ç³»ç»Ÿ WFMC</p><ul><li>åœ¨å·¥ä½œæµå½¢å¼åŒ–è¡¨ç¤ºçš„é©±åŠ¨ä¸‹ï¼Œé€šè¿‡è½¯ä»¶çš„æ‰§è¡Œè€Œå®Œæˆå·¥ä½œæµå®šä¹‰ã€ç®¡ç†åŠæ‰§è¡Œçš„ç³»ç»Ÿï¼Œå…¶ä¸»è¦ç›®æ ‡æ˜¯å¯¹ä¸šåŠ¡è¿‡ç¨‹ä¸­å„æ´»åŠ¨å‘ç”Ÿçš„å…ˆåæ¬¡åºåŠä¸æ´»åŠ¨ç›¸å…³çš„ç›¸åº”äººåŠ›æˆ–ä¿¡æ¯èµ„æºçš„è°ƒç”¨è¿›è¡Œç®¡ç†ï¼Œè€Œå®ç°ä¸šåŠ¡è¿‡ç¨‹çš„è‡ªåŠ¨åŒ–</li></ul></li></ul><h3 id="ç®€å•åˆ†å¸ƒå¼è®¡ç®—æœºåº”ç”¨ç³»ç»Ÿè®¾è®¡"><a href="#ç®€å•åˆ†å¸ƒå¼è®¡ç®—æœºåº”ç”¨ç³»ç»Ÿè®¾è®¡" class="headerlink" title="ç®€å•åˆ†å¸ƒå¼è®¡ç®—æœºåº”ç”¨ç³»ç»Ÿè®¾è®¡"></a>ç®€å•åˆ†å¸ƒå¼è®¡ç®—æœºåº”ç”¨ç³»ç»Ÿè®¾è®¡</h3><h3 id="ç³»ç»Ÿè¿è¡Œç¯å¢ƒçš„é›†æˆä¸è®¾è®¡"><a href="#ç³»ç»Ÿè¿è¡Œç¯å¢ƒçš„é›†æˆä¸è®¾è®¡" class="headerlink" title="ç³»ç»Ÿè¿è¡Œç¯å¢ƒçš„é›†æˆä¸è®¾è®¡"></a>ç³»ç»Ÿè¿è¡Œç¯å¢ƒçš„é›†æˆä¸è®¾è®¡</h3><ul><li><p>é›†ä¸­å¼ç³»ç»Ÿ</p><ul><li>æ‰€æœ‰çš„æ“ä½œéƒ½é›†ä¸­äºä¸€å°ä¸»æœºä¸­ï¼Œè€Œæ“ä½œå‘˜å¿…é¡»åœ¨ä¸»æœºçš„é™„è¿‘æ“ä½œï¼Œç»“æœä¹Ÿåœ¨é™„è¿‘ç»™å‡º</li></ul></li><li><p>åˆ†å¸ƒå¼ç³»ç»Ÿ</p></li><li>C/Sç»“æ„</li><li>å¤šå±‚ç»“æ„</li></ul><h3 id="ç³»ç»Ÿè¿‡æ¸¡è®¡åˆ’"><a href="#ç³»ç»Ÿè¿‡æ¸¡è®¡åˆ’" class="headerlink" title="ç³»ç»Ÿè¿‡æ¸¡è®¡åˆ’"></a>ç³»ç»Ÿè¿‡æ¸¡è®¡åˆ’</h3><ul><li>ç›´æ¥è¿‡æ¸¡</li><li>å¹¶è¡Œè¿‡æ¸¡</li><li>é˜¶æ®µè¿‡æ¸¡</li></ul><h2 id="è½¯ä»¶æ¶æ„è®¾è®¡"><a href="#è½¯ä»¶æ¶æ„è®¾è®¡" class="headerlink" title="è½¯ä»¶æ¶æ„è®¾è®¡"></a>è½¯ä»¶æ¶æ„è®¾è®¡</h2><h3 id="è½¯ä»¶æ¶æ„æ¦‚è¿°"><a href="#è½¯ä»¶æ¶æ„æ¦‚è¿°" class="headerlink" title="è½¯ä»¶æ¶æ„æ¦‚è¿°"></a>è½¯ä»¶æ¶æ„æ¦‚è¿°</h3><ul><li><p>è½¯ä»¶æ¶æ„çš„å®šä¹‰</p><ul><li>è½¯ä»¶æ¶æ„æ˜¯æŒ‡ä¸€ä¸ªç³»ç»Ÿçš„åŸºç¡€ç»„ç»‡ï¼Œå®ƒå…·ä½“ä½“ç°åœ¨ï¼šç³»ç»Ÿçš„æ„ä»¶ï¼Œæ„ä»¶ä¹‹é—´ã€æ„ä»¶ä¸ç¯å¢ƒä¹‹é—´çš„å…³ç³»ï¼Œä»¥åŠæŒ‡å¯¼å…¶è®¾è®¡å’Œæ¼”åŒ–çš„åŸåˆ™</li></ul></li><li><p>è½¯ä»¶æ¶æ„çš„é‡è¦æ€§</p><ul><li><ol><li>é¡¹ç›®å…³ç³»äººä¹‹é—´çš„äº¤æµå¹³å°</li></ol></li><li><ol><li>æ—©æœŸè®¾è®¡å†³ç­–</li></ol></li><li><ol><li>åœ¨è¾ƒé«˜å±‚é¢å®ç°è½¯ä»¶å¤ç”¨</li></ol></li><li><ol><li>æ¶æ„å¯¹å¼€å‘çš„æŒ‡å¯¼ä¸è§„èŒƒæ„ä¹‰</li></ol></li></ul></li><li><p>æ¶æ„çš„æ¨¡å‹</p><ul><li><p>ç»“æ„æ¨¡å‹</p><ul><li>è¿™ç§æ–¹æ³•ä»¥æ¶æ„çš„æ„ä»¶ã€è¿æ¥ä»¶å’Œå…¶ä»–æ¦‚å¿µæ¥åˆ»ç”»ç»“æ„ï¼Œå¹¶åŠ›å›¾é€šè¿‡ç»“æ„æ¥åæ˜ ç³»ç»Ÿçš„é‡è¦è¯­ä¹‰å†…å®¹ï¼ŒåŒ…æ‹¬ç³»ç»Ÿçš„é…ç½®ã€çº¦æŸã€éšå«çš„å‡è®¾æ¡ä»¶ã€é£æ ¼ã€æ€§è´¨</li></ul></li><li><p>æ¡†æ¶æ¨¡å‹</p><ul><li>æ¡†æ¶æ¨¡å‹ä¸ç»“æ„æ¨¡å‹ç±»ä¼¼ï¼Œä½†å®ƒä¸å¤ªä¾§é‡æè¿°ç»“æ„çš„ç»†èŠ‚è€Œæ›´ä¾§é‡äºæ•´ä½“çš„ç»“æ„</li></ul></li><li><p>åŠ¨æ€æ¨¡å‹</p><ul><li>åŠ¨æ€æ¨¡å‹æ˜¯å¯¹ç»“æ„æˆ–æ¡†æ¶æ¨¡å‹çš„è¡¥å……ï¼Œç ”ç©¶ç³»ç»Ÿâ€å¤§é¢—ç²’â€œçš„è¡Œä¸ºæ€§è´¨</li></ul></li><li><p>è¿‡ç¨‹æ¨¡å‹</p><ul><li>è¿‡ç¨‹æ¨¡å‹ç ”ç©¶æ„é€ ç³»ç»Ÿçš„æ­¥éª¤å’Œè¿‡ç¨‹</li></ul></li><li><p>åŠŸèƒ½æ¨¡å‹</p><ul><li>åŠŸèƒ½æ¨¡å‹ï¼šæ¶æ„ç”±ä¸€ç»„åŠŸèƒ½æ„ä»¶æŒ‰å±‚æ¬¡ç»„æˆï¼Œä¸”ä¸‹å±‚å‘ä¸Šå±‚æä¾›æœåŠ¡</li></ul></li><li><p>4+1è§†å›¾æ¨¡å‹</p><ul><li><p>åœºæ™¯è§†å›¾</p><ul><li>ä»ç”¨æˆ·è§’åº¦ã€è¯†åˆ«ä¸šåŠ¡éœ€æ±‚ï¼Œæè¿°ä¸šåŠ¡åœºæ™¯ï¼Œæ˜¯æ¶æ„è®¾è®¡çš„èµ·ç‚¹å’Œç»ˆç‚¹</li></ul></li><li><p>é€»è¾‘è§†å›¾</p><ul><li>ä»å¯¹è±¡è§’åº¦ï¼Œæ„å»ºå¯¹è±¡æ¨¡å‹ï¼Œç”¨ä»¥ç¡®ç«‹é€»è¾‘åˆ†å±‚ã€æ¨¡å—åˆ’åˆ†ã€æ¨¡å—åŠŸèƒ½ã€æ¨¡å—é—´ä¾èµ–å…³ç³»ç­‰</li></ul></li><li><p>å¼€å‘/å®ç°è§†å›¾</p><ul><li>ä»å¼€å‘è§’åº¦ï¼Œæè¿°è½¯ä»¶åœ¨å¼€å‘ç¯å¢ƒä¸‹çš„é™æ€ç»„ç»‡(ç¨‹åºåŒ…ã€åº”ç”¨çš„ç»Ÿä¸€æ¡†æ¶ï¼Œå¼•ç”¨çš„ç±»åº“ã€SDKå’Œä¸­é—´ä»¶ç­‰)ï¼Œå¹¶è§„èŒƒå’Œçº¦æŸå¼€å‘ç¯å¢ƒçš„ç»“æ„</li></ul></li><li><p>è¿‡ç¨‹/è¿›ç¨‹è§†å›¾</p><ul><li>ä»è¿›ç¨‹è§’åº¦ï¼Œæè¿°ç³»ç»Ÿçš„å¹¶å‘å’ŒåŒæ­¥è®¾è®¡ã€‚æ—¨åœ¨è§£å†³è¿›ç¨‹ã€çº¿ç¨‹ã€å¹¶å‘ã€åŒæ­¥ã€é€šä¿¡ç­‰æ–¹é¢çš„é—®é¢˜</li></ul></li><li><p>ç‰©ç†è§†å›¾</p><ul><li>ä»éƒ¨ç½²çš„è§’åº¦ï¼Œæè¿°è½¯ç¡¬ä»¶çš„æ˜ å°„å…³ç³»ï¼Œä»¥åŠç³»ç»Ÿåœ¨åˆ†å¸ƒ/éƒ¨ç½²ä¸Šçš„è®¾è®¡</li></ul></li></ul></li></ul></li></ul><h3 id="æ¶æ„éœ€æ±‚ä¸è½¯ä»¶è´¨é‡å±æ€§"><a href="#æ¶æ„éœ€æ±‚ä¸è½¯ä»¶è´¨é‡å±æ€§" class="headerlink" title="æ¶æ„éœ€æ±‚ä¸è½¯ä»¶è´¨é‡å±æ€§"></a>æ¶æ„éœ€æ±‚ä¸è½¯ä»¶è´¨é‡å±æ€§</h3><ul><li>è½¯ä»¶è´¨é‡å±æ€§</li><li><p>6ä¸ªè´¨é‡å±æ€§åŠå®ç°</p><ul><li><p>å¯ç”¨æ€§</p><ul><li>é”™è¯¯æ£€æµ‹ï¼šå‘½ä»¤/å“åº”ï¼›å¿ƒè·³ï¼›å¼‚å¸¸</li><li>é”™è¯¯æ¢å¤ï¼šè¡¨å†³ï¼›ä¸»åŠ¨å†—ä½™</li><li>é”™è¯¯é¢„é˜²ï¼šä»æœåŠ¡ä¸­åˆ é™¤ï¼›äº‹åŠ¡ï¼›è¿›ç¨‹ç›‘è§†</li></ul></li><li><p>å¯ä¿®æ”¹æ€§</p><ul><li>å±€éƒ¨åŒ–ä¿®æ”¹</li><li>é˜²æ­¢è¿é”ååº”ï¼›ä¿¡æ¯éšè—ã€é™åˆ¶é€šä¿¡è·¯å¾„ï¼›ä»²è£è€…ä½¿ç”¨</li></ul></li><li><p>æ€§èƒ½</p><ul><li>èµ„æºéœ€æ±‚ï¼šæ§åˆ¶èµ„æºä½¿ç”¨</li><li>èµ„æºç®¡ç†ï¼šå¼•å…¥å¹¶å‘ï¼Œå¢åŠ å¯ç”¨èµ„æº</li><li>èµ„æºä»²è£ï¼šå›ºå®šä¼˜å…ˆçº§èµ„æºè°ƒåº¦ã€åŠ¨æ€ä¼˜åŒ–çº§è°ƒåº¦</li></ul></li><li><p>å®‰å…¨æ€§</p><ul><li>æŠµæŠ—æ”»å‡»ï¼šå¯¹ç”¨æˆ·èº«ä»½éªŒè¯ã€å¯¹ç”¨æˆ·è¿›è¡Œæˆæƒã€ç»´æŠ¤æ•°æ®çš„æœºå¯†æ€§ã€ç»´æŠ¤å®Œæ•´æ€§ã€‚</li><li>æ£€æµ‹æ”»å‡»</li><li>ä»æ”»å‡»ä¸­æ¢å¤</li></ul></li><li><p>å¯æµ‹è¯•æ€§</p></li><li>æ˜“ç”¨æ€§</li></ul></li></ul><h3 id="è½¯ä»¶æ¶æ„é£æ ¼"><a href="#è½¯ä»¶æ¶æ„é£æ ¼" class="headerlink" title="è½¯ä»¶æ¶æ„é£æ ¼"></a>è½¯ä»¶æ¶æ„é£æ ¼</h3><ul><li>è½¯ä»¶æ¶æ„é£æ ¼åˆ†ç±»</li><li><p>æ•°æ®æµé£æ ¼</p><ul><li><p>æ‰¹å¤„ç†é£æ ¼</p><ul><li>æ‰¹å¤„ç†é£æ ¼ï¼Œæ¯ä¸€æ­¥éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸”æ¯ä¸€æ­¥éƒ½æ˜¯é¡ºåºæ‰§è¡Œçš„ã€‚ä¾‹å¦‚BATç¨‹åº</li></ul></li><li><p>ç®¡é“-è¿‡æ»¤å™¨é£æ ¼</p><ul><li>UNIX Sheelç¨‹åº</li></ul></li></ul></li><li><p>è°ƒç”¨è¿”å›é£æ ¼</p><ul><li>ä¸»ç¨‹åº-å­ç¨‹åº</li><li>é¢å‘å¯¹è±¡é£æ ¼</li><li>å±‚æ¬¡ç»“æ„é£æ ¼</li></ul></li><li><p>ç‹¬ç«‹æ„ä»¶é£æ ¼</p><ul><li><p>è¿›ç¨‹é€šä¿¡</p><ul><li>æ„ä»¶æ˜¯ç‹¬ç«‹çš„ï¼Œè¿æ¥ä»¶ä¼ é€’æ¶ˆæ¯</li></ul></li><li><p>äº‹ä»¶é©±åŠ¨</p><ul><li>æ„ä»¶ä¸ç›´æ¥è°ƒç”¨ä¸€ä¸ªè¿‡ç¨‹ï¼Œè€Œæ˜¯è§¦å‘æˆ–è€…å¹¿æ’­ä¸€ä¸ªæˆ–å¤šä¸ªäº‹ä»¶é©±åŠ¨</li></ul></li></ul></li><li><p>è™šæ‹Ÿæœºé£æ ¼</p><ul><li><p>è§£é‡Šå™¨</p><ul><li>é€šå¸¸åŒ…æ‹¬è§£æå·¥ä½œçš„è§£æå¼•æ“ï¼Œä¸€ä¸ªåŒ…å«è¢«è§£æçš„ä»£ç å­˜å‚¨åŒºï¼Œä¸€ä¸ªè®°å½•è§£æå¼•æ“å½“å‰å·¥ä½œçŠ¶æ€å’Œæ•°æ®ç»“æ„ï¼Œä»¥åŠè®°å½•æºä»£ç è¢«è§£ææ‰§è¡Œçš„è¿›åº¦çš„æ•°æ®ç»“æ„</li></ul></li><li><p>åŸºäºè§„åˆ™</p></li></ul></li><li><p>ä»“åº“é£æ ¼</p><ul><li><p>æ•°æ®åº“ç³»ç»Ÿ</p><ul><li><ol><li>é‡è¦æ•°æ®å…±äº«ï¼Œä¿å­˜å½“å‰ç³»ç»Ÿçš„æ•°æ®çŠ¶æ€</li></ol></li><li><ol><li>å¤šä¸ªç‹¬ç«‹å¤„ç†å…ƒç´ ï¼Œå¤„ç†å…ƒç´ å¯¹æ•°æ®è¿›è¡Œæ“ä½œ</li></ol></li></ul></li><li><p>è¶…æ–‡æœ¬ç³»ç»Ÿ</p></li><li><p>é»‘æ¿é£æ ¼</p><ul><li>ä¸»è¦åº”ç”¨ä¸ä¿¡å·å¤„ç†é¢†åŸŸæˆ–è€…æ¾è€¦åˆä»£ç†æ•°æ®å…±äº«å­˜å–</li></ul></li></ul></li></ul><h3 id="å±‚æ¬¡ç³»ç»Ÿæ¶æ„é£æ ¼"><a href="#å±‚æ¬¡ç³»ç»Ÿæ¶æ„é£æ ¼" class="headerlink" title="å±‚æ¬¡ç³»ç»Ÿæ¶æ„é£æ ¼"></a>å±‚æ¬¡ç³»ç»Ÿæ¶æ„é£æ ¼</h3><ul><li>äºŒå±‚åŠä¸‰å±‚C/Sæ¶æ„é£æ ¼</li><li>B/Sæ¶æ„é£æ ¼</li><li><p>MVCæ¶æ„é£æ ¼</p><ul><li><p>Model</p><ul><li>åº”ç”¨çŠ¶æ€å’Œä¸šåŠ¡åŠŸèƒ½çš„å°è£…ï¼Œå¯ä»¥è£‚è§£ä¸ºåŒæ—¶åŒ…å«æ•°æ®å’Œè¡Œä¸ºçš„é¢†åŸŸæ¨¡å‹</li></ul></li><li><p>View</p><ul><li>å®ç°å¯è§†åŒ–ç•Œé¢çš„å‘ˆç°ï¼Œå¹¶æ•æ‰æœ€ç»ˆç”¨æˆ·çš„äº¤äº’é€»è¾‘</li></ul></li><li><p>Controller</p><ul><li>å®Œæˆå“åº”çš„UIé€»è¾‘ï¼Œè®¾è®¡ä¸šåŠ¡åŠŸèƒ½çš„è°ƒç”¨ï¼Œè°ƒç”¨å¯¹åº”çš„Model</li></ul></li></ul></li></ul><h3 id="é¢å‘æœåŠ¡çš„æ¶æ„"><a href="#é¢å‘æœåŠ¡çš„æ¶æ„" class="headerlink" title="é¢å‘æœåŠ¡çš„æ¶æ„"></a>é¢å‘æœåŠ¡çš„æ¶æ„</h3><ul><li><p>SOA(Service Oriented Architecture)æ¦‚è¿°</p><ul><li>æ‰€æœ‰çš„åŠŸèƒ½éƒ½å®šä¹‰æˆäº†ç‹¬ç«‹çš„æœåŠ¡ã€‚æ‰€æœ‰çš„æœåŠ¡é€šè¿‡æœåŠ¡æ€»çº¿æˆ–è€…æµç¨‹ç®¡ç†å™¨æ¥è¿æ¥ã€‚SOAæ˜¯ä¸€ç§æ¶æ„è®¾è®¡æ¨¡å¼</li><li><p>è®¾è®¡åŸåˆ™</p><ul><li><ol><li>æ˜ç¡®å®šä¹‰çš„æ¥å£</li></ol></li><li><ol><li>æ¨¡å—åŒ–</li></ol></li><li>3.. ç²—ç²’åº¦</li><li><ol><li>æ¾è€¦åˆ</li></ol></li><li><ol><li>äº’æ“ä½œæ€§ï¼Œå…¼å®¹å’Œç­–ç•¥å£°æ˜</li></ol></li></ul></li></ul></li><li><p>SOAå…³é”®æŠ€æœ¯</p><ul><li><p>UDDI</p><ul><li><p>UDDI(Universal Description and Integration)ç»Ÿä¸€æè¿°ã€å‘ç°å’Œé›†æˆã€‚</p><ul><li>æ³¨å†Œå’ŒæŸ¥æ‰¾æœåŠ¡</li></ul></li></ul></li><li><p>WSDL</p><ul><li><p>WebæœåŠ¡æè¿°è¯­è¨€</p><ul><li>WSDLæ˜¯ä¸€ä¸ªXMLæ–‡æ¡£ï¼Œç”¨äºè¯´æ˜ä¸€ç»„SOAPæ¶ˆæ¯ä»¥åŠå¦‚ä½•äº¤æ¢è¿™äº›æ¶ˆæ¯</li></ul></li></ul></li><li><p>SOAP</p><ul><li><p>ç®€å•å¯¹è±¡è®¿é—®åè®®(http+xml)</p><ul><li>SOAPæ˜¯Web serviceçš„é€šä¿¡åè®®ï¼Œç”¨äºåœ¨ç½‘ç»œåº”ç”¨ç¨‹åºä¹‹é—´è¿›è¡Œç»“æ„åŒ–æ•°æ®äº¤æ¢</li></ul></li></ul></li><li><p>REST</p><ul><li>http+jsonï¼šè¡¨ç¤ºçŠ¶æ€è½¬ç§»ï¼›æ˜¯ä¸€ç§ç”¨httpå’Œxmlè¿›è¡ŒåŸºäºwebé€šä¿¡çš„æŠ€æœ¯ï¼Œé™ä½å¼€å‘çš„å¤æ‚æ€§ã€æä¾›å¯ä¼¸ç¼©æ€§ã€‚</li></ul></li></ul></li><li><p>SOAçš„å®ç°æ–¹æ³•</p><ul><li>Web Service</li><li>ä¼ä¸šæœåŠ¡æ€»çº¿ESB</li><li>æœåŠ¡æ³¨å†Œè¡¨</li></ul></li><li><p>å¾®æœåŠ¡</p><ul><li>å¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ç§æ¶æ„æ¨¡å¼æˆ–è€…è¯´æ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼Œå®ƒæå€¡å°†å•ä¸€åº”ç”¨ç¨‹åºåˆ’åˆ†æˆä¸€ç»„å°çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡è¿è¡Œç‹¬ç«‹çš„è‡ªå·±çš„è¿›ç¨‹ä¸­ï¼ŒæœåŠ¡ä¹‹é—´äº’ç›¸åè°ƒã€äº’ç›¸é…åˆï¼Œä¸ºç”¨æˆ·æä¾›æœ€ç»ˆä»·å€¼</li></ul></li></ul><h3 id="æ¶æ„è®¾è®¡"><a href="#æ¶æ„è®¾è®¡" class="headerlink" title="æ¶æ„è®¾è®¡"></a>æ¶æ„è®¾è®¡</h3><h3 id="è½¯ä»¶æ¶æ„æ–‡æ¡£åŒ–"><a href="#è½¯ä»¶æ¶æ„æ–‡æ¡£åŒ–" class="headerlink" title="è½¯ä»¶æ¶æ„æ–‡æ¡£åŒ–"></a>è½¯ä»¶æ¶æ„æ–‡æ¡£åŒ–</h3><ul><li>è®°å½•è½¯ä»¶æ¶æ„çš„æ´»åŠ¨ï¼Œæ¶æ„ç¼–æ¡£çš„è¿‡ç¨‹</li></ul><h3 id="è½¯ä»¶æ¶æ„è¯„ä¼°"><a href="#è½¯ä»¶æ¶æ„è¯„ä¼°" class="headerlink" title="è½¯ä»¶æ¶æ„è¯„ä¼°"></a>è½¯ä»¶æ¶æ„è¯„ä¼°</h3><ul><li><p>ç®€ä»‹</p><ul><li>å¯¹æ¶æ„åˆ†æã€è¯„ä¼°çš„æŠ€æœ¯ï¼Œå¯¹æ¶æ„ç­–ç•¥çš„é€‰å–å’Œå†³ç­–</li></ul></li><li><p>æ¶æ„è¯„ä¼°çš„æ–¹æ³•</p><ul><li>åŸºäºè°ƒæŸ¥åˆ—è¡¨</li><li>åŸºäºåœºæ™¯çš„æ–¹å¼</li><li>åŸºäºåº¦é‡çš„æ–¹å¼</li></ul></li><li><p>æ¶æ„çš„æƒè¡¡åˆ†ææ³•ATAM</p><ul><li><p>3ä¸ªæ¦‚å¿µ</p><ul><li><ol><li><p>è½¯ä»¶è´¨é‡å±æ€§</p><ul><li>æ€§èƒ½</li><li>å¯é æ€§</li><li>å¯ç”¨æ€§</li><li>å®‰å…¨æ€§</li><li>å¯ä¿®æ”¹æ€§</li></ul></li></ol></li><li><ol><li>æ•æ„Ÿç‚¹å’Œæƒè¡¡ç‚¹</li></ol></li><li><ol><li>é£é™©æ‰¿æ‹…è€…</li></ol></li></ul></li><li><p>æ­¥éª¤</p><ul><li><ol><li>æè¿°ATAMæ–¹æ³•</li></ol></li><li><ol><li>æè¿°å•†ä¸šåŠ¨æœº</li></ol></li><li><ol><li>æè¿°æ¶æ„ä½“ç³»ç»“æ„</li></ol></li><li><ol><li>ç¡®å®šæ¶æ„ä½“ç³»ç»“æ„æ–¹æ³•</li></ol></li><li><ol><li>ç”Ÿæˆè´¨é‡å±æ€§æ•ˆç”¨æ ‘</li></ol></li><li><ol><li><p>åˆ†ææ¶æ„æ–¹æ³•</p><ul><li>ç¡®å®šæ¶æ„ä¸Šçš„æœ‰é£é™©å†³ç­–ï¼Œæ— é£é™©å†³ç­–ã€æ•æ„Ÿç‚¹å’Œæƒè¡¡ç‚¹</li></ul></li></ol></li><li><ol><li>é›†ä½“è®¨è®ºï¼Œç¡®å®šåœºæ™¯ä¼˜å…ˆçº§</li></ol></li><li><ol><li>åˆ†ææ¶æ„æ–¹æ³•ï¼Œé‡å¤6</li></ol></li><li><ol><li>ç»“æœæè¿°</li></ol></li></ul></li></ul></li><li><p>æˆæœ¬æ•ˆç›Šåˆ†ææ³•</p></li></ul><h3 id="æ„ä»¶åŠå¤ç”¨"><a href="#æ„ä»¶åŠå¤ç”¨" class="headerlink" title="æ„ä»¶åŠå¤ç”¨"></a>æ„ä»¶åŠå¤ç”¨</h3><ul><li><p>å•†ç”¨æ„ä»¶æ ‡å‡†åŒ–è§„èŒƒ</p><ul><li>ä¸‰å¤§ä¸»æµä¸­é—´ä»¶æŠ€æœ¯å¹³å°</li><li>CORBA</li><li>J2EE</li><li>DNA</li></ul></li><li><p>åº”ç”¨ç³»ç»Ÿç°‡ä¸æ„ä»¶ç³»ç»Ÿ</p></li><li>åŸºäºå¤ç”¨å¼€å‘çš„ç»„ç»‡ç»“æ„</li></ul><h3 id="äº§å“çº¿åŠç³»ç»Ÿæ¼”åŒ–"><a href="#äº§å“çº¿åŠç³»ç»Ÿæ¼”åŒ–" class="headerlink" title="äº§å“çº¿åŠç³»ç»Ÿæ¼”åŒ–"></a>äº§å“çº¿åŠç³»ç»Ÿæ¼”åŒ–</h3><ul><li>å¤ç”¨ä¸äº§å“çº¿</li><li>åŸºç¡€äº§å“çº¿çš„æ¶æ„</li><li>äº§å“çº¿çš„å¼€å‘æ¨¡å‹</li><li><p>ç‰¹å®šé¢†åŸŸçš„è½¯ä»¶æ¶æ„DSSA</p><ul><li><p>é¢†åŸŸåˆ†æ</p><ul><li>è·å¾—é¢†åŸŸæ¨¡å‹</li></ul></li><li><p>é¢†åŸŸè®¾è®¡</p><ul><li>è·å¾—DSSA</li></ul></li><li><p>é¢†åŸŸå®ç°</p><ul><li>ä¾æ®é¢†åŸŸæ¨¡å‹å’ŒDSSAå¼€å‘äºç»„ç»‡å¯å¤ç”¨ä¿¡æ¯</li></ul></li></ul></li><li><p>è½¯ä»¶åŠç³»ç»Ÿçš„æ¼”åŒ–</p><ul><li><ol><li>éœ€æ±‚å˜åŠ¨å½’ç±»</li></ol></li><li>2.åˆ¶å®šæ¶æ„æ¼”åŒ–è®¡åˆ’</li><li><ol><li>ä¿®æ”¹ã€å¢åŠ æˆ–åˆ é™¤æ„ä»¶</li></ol></li><li><ol><li>æ›´æ–°æ„ä»¶çš„ç›¸äº’ä½œç”¨</li></ol></li><li><ol><li>æ„ä»¶ç»„è£…ä¸æµ‹è¯•</li></ol></li><li><ol><li>æŠ€æœ¯è¯„å®¡</li></ol></li><li><ol><li>äº§ç”Ÿæ¼”åŒ–åçš„æ¶æ„</li></ol></li></ul></li></ul><h3 id="è½¯ä»¶æ¶æ„è§†å›¾"><a href="#è½¯ä»¶æ¶æ„è§†å›¾" class="headerlink" title="è½¯ä»¶æ¶æ„è§†å›¾"></a>è½¯ä»¶æ¶æ„è§†å›¾</h3><ul><li>è½¯ä»¶è§†å›¾çš„åˆ†ç±»</li><li>æ¨¡å—è§†å›¾ç±»å‹</li><li>C&amp;Sè§†å›¾åŠå…¶é£æ ¼</li><li>åˆ†é…è§†å›¾ç±»åŠå…¶é£æ ¼</li><li>å„è§†å›¾ç±»å‹é—´çš„æ˜ å°„å…³ç³»</li></ul><h2 id="è®¾è®¡æ¨¡å¼23ç§"><a href="#è®¾è®¡æ¨¡å¼23ç§" class="headerlink" title="è®¾è®¡æ¨¡å¼23ç§"></a>è®¾è®¡æ¨¡å¼23ç§</h2><h3 id="åˆ›å»ºå‹"><a href="#åˆ›å»ºå‹" class="headerlink" title="åˆ›å»ºå‹"></a>åˆ›å»ºå‹</h3><ul><li><p>å·¥å‚æ–¹æ³• Factroy</p><ul><li>åŠ¨æ€ç”Ÿäº§å¯¹è±¡</li></ul></li><li><p>æŠ½è±¡å·¥å‚ Abstract Factory</p><ul><li>ç”Ÿäº§æˆç³»åˆ—å¯¹è±¡</li></ul></li><li><p>æ„å»ºå™¨/ç”Ÿæˆå™¨ Builder</p><ul><li>å¤æ‚å¯¹è±¡æ„é€ </li></ul></li><li><p>åŸå‹æ¨¡å¼ Prototype</p><ul><li>å…‹éš†å¯¹è±¡</li></ul></li><li><p>å•ä¾‹æ¨¡å¼ Singleton</p><ul><li>å•å®ä¾‹</li></ul></li></ul><h3 id="ç»“æ„å‹"><a href="#ç»“æ„å‹" class="headerlink" title="ç»“æ„å‹"></a>ç»“æ„å‹</h3><ul><li><p>é€‚é…å™¨ Adapter</p><ul><li>è½¬æ¢æ¥å£</li></ul></li><li><p>æ¡¥æ¥æ¨¡å¼ Bridge</p><ul><li>å°†æŠ½è±¡éƒ¨åˆ†å’Œå®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»</li></ul></li><li><p>ç»„åˆæ¨¡å¼ Composite</p><ul><li>è¡¨ç¤ºâ€œæ•´ä½“-éƒ¨åˆ†â€çš„å±‚æ¬¡ç»“æ„</li></ul></li><li><p>è£…é¥°å™¨ Decorator</p><ul><li>åŠ¨æ€é™„åŠ èŒè´£</li></ul></li><li><p>å¤–è§‚æ¨¡å¼ Facade</p><ul><li>å¯¹å¤–ç»Ÿä¸€æ¥å£</li></ul></li><li><p>äº«å…ƒæ¨¡å¼ Flyweight</p><ul><li>æä¾›å¤§é‡ç»†ç²’åº¦å¯¹è±¡å…±äº«çš„æ–¹å¼</li></ul></li><li><p>ä»£ç†æ¨¡å¼ Proxy</p><ul><li>å¿«æ·æ–¹å¼</li></ul></li></ul><h3 id="è¡Œä¸ºå‹"><a href="#è¡Œä¸ºå‹" class="headerlink" title="è¡Œä¸ºå‹"></a>è¡Œä¸ºå‹</h3><ul><li><p>è´£ä»»é“¾ Chain of Responsibility</p><ul><li>ä¼ é€’èŒè´£</li></ul></li><li><p>å‘½ä»¤æ¨¡å¼ Command</p><ul><li>è¯·æ±‚å°è£…æˆå¯¹è±¡ï¼Œæ—¥å¿—è®°å½•</li></ul></li><li><p>è§£é‡Šå™¨ Interpreter</p><ul><li>è™šæ‹Ÿæœºæœºåˆ¶ï¼Œæ ¹æ®æ–‡æ³•è¡¨ç¤ºæ¥è§£é‡Šè¯­è¨€ä¸­å¥å­</li></ul></li><li><p>è¿­ä»£å™¨ Iterator</p><ul><li>é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ </li></ul></li><li><p>ä¸­ä»‹è€… Mediator</p><ul><li>ç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’</li></ul></li><li><p>å¤‡å¿˜å½•Memento</p><ul><li>åœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œæ¸¸æˆå­˜æ¡£</li></ul></li><li><p>è§‚å¯Ÿè€… Observer</p><ul><li>å½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°</li></ul></li><li><p>çŠ¶æ€æ¨¡å¼ State</p><ul><li>å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸º</li></ul></li><li><p>ç­–ç•¥æ¨¡å¼ Strategy</p><ul><li>å¤šæ–¹æ¡ˆåˆ‡æ¢</li></ul></li><li><p>æ¨¡æ¿æ–¹æ³• Template</p><ul><li>å­ç±»ä¸æ”¹å˜ç®—æ³•ç»“æ„ï¼Œå³å¯é‡æ–°å®šä¹‰</li></ul></li><li><p>è®¿é—®è€… Visitor</p><ul><li>æ•°æ®ä¸æ“ä½œåˆ†ç¦»ï¼Œä½¿å¾—åœ¨ä¸æ”¹å˜ä¸ªå…ƒç´ çš„ç±»çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°æ“ä½œ</li></ul></li></ul><h2 id="æµ‹è¯•è¯„å®¡æ–¹æ³•"><a href="#æµ‹è¯•è¯„å®¡æ–¹æ³•" class="headerlink" title="æµ‹è¯•è¯„å®¡æ–¹æ³•"></a>æµ‹è¯•è¯„å®¡æ–¹æ³•</h2><h3 id="å®Œå…¨è¯„å®¡"><a href="#å®Œå…¨è¯„å®¡" class="headerlink" title="å®Œå…¨è¯„å®¡"></a>å®Œå…¨è¯„å®¡</h3><ul><li>å¯¹æ•´ä¸ªé¡¹ç›®ä¸­çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹è¿›è¡Œè¯„å®¡</li></ul><h3 id="æœ‰é€‰æ‹©æ€§çš„è¯„å®¡"><a href="#æœ‰é€‰æ‹©æ€§çš„è¯„å®¡" class="headerlink" title="æœ‰é€‰æ‹©æ€§çš„è¯„å®¡"></a>æœ‰é€‰æ‹©æ€§çš„è¯„å®¡</h3><ul><li>åªå¯¹éƒ¨åˆ†æµ‹è¯•ç”¨ä¾‹è¿›è¡Œè¯„å®¡</li></ul><h3 id="æŒ‡æ ‡è¯„å®¡æ³•"><a href="#æŒ‡æ ‡è¯„å®¡æ³•" class="headerlink" title="æŒ‡æ ‡è¯„å®¡æ³•"></a>æŒ‡æ ‡è¯„å®¡æ³•</h3><ul><li>æµ‹è¯•ç”¨ä¾‹çš„è¯„å®¡è¦†ç›–ç‡è¾¾åˆ°å¤šå°‘</li></ul><h2 id="åµŒå…¥å¼ç³»ç»Ÿè®¾è®¡"><a href="#åµŒå…¥å¼ç³»ç»Ÿè®¾è®¡" class="headerlink" title="åµŒå…¥å¼ç³»ç»Ÿè®¾è®¡"></a>åµŒå…¥å¼ç³»ç»Ÿè®¾è®¡</h2><h2 id="å¼€å‘ç®¡ç†"><a href="#å¼€å‘ç®¡ç†" class="headerlink" title="å¼€å‘ç®¡ç†"></a>å¼€å‘ç®¡ç†</h2><h3 id="é¡¹ç›®ç®¡ç†"><a href="#é¡¹ç›®ç®¡ç†" class="headerlink" title="é¡¹ç›®ç®¡ç†"></a>é¡¹ç›®ç®¡ç†</h3><ul><li>æ¦‚å¿µé˜¶æ®µ</li><li>å¼€å‘é˜¶æ®µ</li><li>å®æ–½é˜¶æ®µ</li><li>ç»“æŸé˜¶æ®µ</li></ul><h3 id="èŒƒå›´ç®¡ç†"><a href="#èŒƒå›´ç®¡ç†" class="headerlink" title="èŒƒå›´ç®¡ç†"></a>èŒƒå›´ç®¡ç†</h3><ul><li><p>åˆ›å»ºå·¥ä½œåˆ†è§£ç»“æ„(WBS)</p><ul><li>ç®¡ç†å±‚</li><li>æŠ€æœ¯å±‚</li></ul></li></ul><h3 id="æˆæœ¬ç®¡ç†"><a href="#æˆæœ¬ç®¡ç†" class="headerlink" title="æˆæœ¬ç®¡ç†"></a>æˆæœ¬ç®¡ç†</h3><ul><li><p>æˆæœ¬ä¼°ç®—</p><ul><li>è‡ªé¡¶å‘ä¸‹çš„ä¼°ç®—æ³•</li><li>è‡ªåº•å‘ä¸Šçš„ä¼°ç®—æ³•</li><li>å·®åˆ«ä¼°ç®—æ³•</li></ul></li><li><p>æˆæœ¬é¢„ç®—</p></li><li>å‡€å€¼åˆ†æ</li></ul><h3 id="æ—¶é—´ç®¡ç†"><a href="#æ—¶é—´ç®¡ç†" class="headerlink" title="æ—¶é—´ç®¡ç†"></a>æ—¶é—´ç®¡ç†</h3><ul><li>æ´»åŠ¨æ’åº</li><li><p>æ´»åŠ¨å†æ—¶ä¼°ç®—</p><ul><li>è½¯ä»¶é¡¹ç›®çš„å·¥ä½œé‡</li><li>å¾·å°”è²æ³•</li><li>ç±»æ¯”ä¼°ç®—æ³•</li><li>åŠŸèƒ½ç‚¹ä¼°ç®—æ³•</li></ul></li><li><p>å…³é”®è·¯å¾„æ³•</p></li><li>è®¡åˆ’è¯„å®¡æŠ€æœ¯</li><li>ç”˜ç‰¹å›¾å’Œæ—¶é—´ç½‘ç»œå›¾</li><li>è¿›åº¦æ§åˆ¶</li></ul><h3 id="é…ç½®ç®¡ç†"><a href="#é…ç½®ç®¡ç†" class="headerlink" title="é…ç½®ç®¡ç†"></a>é…ç½®ç®¡ç†</h3><h3 id="è´¨é‡ç®¡ç†"><a href="#è´¨é‡ç®¡ç†" class="headerlink" title="è´¨é‡ç®¡ç†"></a>è´¨é‡ç®¡ç†</h3><h3 id="é£é™©ç®¡ç†"><a href="#é£é™©ç®¡ç†" class="headerlink" title="é£é™©ç®¡ç†"></a>é£é™©ç®¡ç†</h3><h3 id="è½¯ä»¶è¿è¡Œä¸è¯„ä»·"><a href="#è½¯ä»¶è¿è¡Œä¸è¯„ä»·" class="headerlink" title="è½¯ä»¶è¿è¡Œä¸è¯„ä»·"></a>è½¯ä»¶è¿è¡Œä¸è¯„ä»·</h3><h3 id="è½¯ä»¶è¿‡ç¨‹æ”¹è¿›"><a href="#è½¯ä»¶è¿‡ç¨‹æ”¹è¿›" class="headerlink" title="è½¯ä»¶è¿‡ç¨‹æ”¹è¿›"></a>è½¯ä»¶è¿‡ç¨‹æ”¹è¿›</h3><ul><li><p>CMM-è½¯ä»¶è¿‡ç¨‹èƒ½åŠ›æˆç†Ÿæ¨¡å‹</p><ul><li><p>åˆå§‹çº§</p><ul><li>è½¯ä»¶å·¥ç¨‹ç®¡ç†åˆ¶åº¦ç¼ºä¹ï¼Œè¿‡ç¨‹ç¼ºä¹å®šä¹‰ã€æ··è®ºæ— åº</li></ul></li><li><p>å¯é‡å¤çº§</p><ul><li>åŸºäºç±»ä¼¼çš„é¡¹ç›®ç»éªŒï¼Œå»ºç«‹äº†åŸºæœ¬çš„é¡¹ç›®ç®¡ç†åˆ¶åº¦ï¼Œé‡‡å–äº†ä¸€å®šçš„èµ„æºæ§åˆ¶æ‰‹æ®µ</li></ul></li><li><p>å·²å®šä¹‰çº§</p><ul><li>è½¯ä»¶è¿‡ç¨‹æ–‡æ¡£åŒ–ã€æ ‡å‡†åŒ–ã€å¯æŒ‰ç…§éœ€æ±‚æ”¹è¿›å¼€å‘è¿‡ç¨‹ï¼Œé‡‡ç”¨è¯„å®¡æ–¹æ³•ä¿è¯è½¯ä»¶è´¨é‡</li></ul></li><li><p>å·²ç®¡ç†çº§</p><ul><li>æ‰€æœ‰è¿‡ç¨‹å»ºç«‹ç›¸åº”çš„åº¦é‡æ–¹å¼å’Œæ˜ç¡®çš„åº¦é‡æŒ‡æ ‡ï¼Œåº¦é‡å¼è¯¦å°½ä¸”å¯ç”¨äºç†è§£å’Œæ§åˆ¶è½¯ä»¶è¿‡ç¨‹çš„</li></ul></li><li><p>ä¼˜åŒ–çº§</p><ul><li>å¯æ ¹æ®æ‰§è¡Œè¿‡ç¨‹çš„åé¦ˆæ¥æ”¹å–„ä¸‹ä¸€æ­¥çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œä¼˜åŒ–æ‰§è¡Œæ­¥éª¤ï¼ŒæŒ‡ä»¤å’Œæ•ˆç‡ç¨³æ­¥æå‡å’Œæ”¹è¿›</li></ul></li></ul></li><li><p>CMMI-èƒ½åŠ›æˆç†Ÿæ¨¡å‹é›†æˆ</p></li></ul><h2 id="ä¿¡æ¯ç³»ç»Ÿçš„åŸºç¡€çŸ¥è¯†"><a href="#ä¿¡æ¯ç³»ç»Ÿçš„åŸºç¡€çŸ¥è¯†" class="headerlink" title="ä¿¡æ¯ç³»ç»Ÿçš„åŸºç¡€çŸ¥è¯†"></a>ä¿¡æ¯ç³»ç»Ÿçš„åŸºç¡€çŸ¥è¯†</h2><h2 id="åŸºäºä¸­é—´ä»¶çš„å¼€å‘"><a href="#åŸºäºä¸­é—´ä»¶çš„å¼€å‘" class="headerlink" title="åŸºäºä¸­é—´ä»¶çš„å¼€å‘"></a>åŸºäºä¸­é—´ä»¶çš„å¼€å‘</h2><h3 id="ä¸­é—´ä»¶æ˜¯åŸºç¡€è½¯ä»¶çš„ä¸€å¤§ç±»ï¼Œå±äºå¯å¤ç”¨è½¯ä»¶çš„èŒƒç•´ã€‚æ“ä½œç³»ç»Ÿ-ç½‘ç»œ-æ•°æ®-gt-ä¸­é—´ä»¶-gt-åº”ç”¨ç¨‹åº"><a href="#ä¸­é—´ä»¶æ˜¯åŸºç¡€è½¯ä»¶çš„ä¸€å¤§ç±»ï¼Œå±äºå¯å¤ç”¨è½¯ä»¶çš„èŒƒç•´ã€‚æ“ä½œç³»ç»Ÿ-ç½‘ç»œ-æ•°æ®-gt-ä¸­é—´ä»¶-gt-åº”ç”¨ç¨‹åº" class="headerlink" title="ä¸­é—´ä»¶æ˜¯åŸºç¡€è½¯ä»¶çš„ä¸€å¤§ç±»ï¼Œå±äºå¯å¤ç”¨è½¯ä»¶çš„èŒƒç•´ã€‚æ“ä½œç³»ç»Ÿ/ç½‘ç»œ/æ•°æ® -&gt; ä¸­é—´ä»¶ -&gt; åº”ç”¨ç¨‹åº"></a>ä¸­é—´ä»¶æ˜¯åŸºç¡€è½¯ä»¶çš„ä¸€å¤§ç±»ï¼Œå±äºå¯å¤ç”¨è½¯ä»¶çš„èŒƒç•´ã€‚æ“ä½œç³»ç»Ÿ/ç½‘ç»œ/æ•°æ® -&gt; ä¸­é—´ä»¶ -&gt; åº”ç”¨ç¨‹åº</h3><h3 id="RPC-è¿œç¨‹è°ƒç”¨è¿‡ç¨‹"><a href="#RPC-è¿œç¨‹è°ƒç”¨è¿‡ç¨‹" class="headerlink" title="RPC-è¿œç¨‹è°ƒç”¨è¿‡ç¨‹"></a>RPC-è¿œç¨‹è°ƒç”¨è¿‡ç¨‹</h3><ul><li>ä½¿åº”ç”¨ç¨‹åºä¸­çš„è¿‡ç¨‹ï¼Œè°ƒç”¨è¿œç¨‹åº”ç”¨ç¨‹åºçš„è¿‡ç¨‹ï¼Œå°±åƒæœ¬åœ°è°ƒç”¨ä¸€æ ·</li></ul><h3 id="MOM-é¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶"><a href="#MOM-é¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶" class="headerlink" title="MOM-é¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶"></a>MOM-é¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶</h3><ul><li>ä½¿åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡å‘é€å’Œæ¥æ”¶æ¶ˆæ¯æ¥è¿›è¡Œé€šä¿¡å’Œäº¤æ¢æ•°æ®</li></ul><h3 id="ORB-å¯¹è±¡è¯·æ±‚ä»£ç†"><a href="#ORB-å¯¹è±¡è¯·æ±‚ä»£ç†" class="headerlink" title="ORB-å¯¹è±¡è¯·æ±‚ä»£ç†"></a>ORB-å¯¹è±¡è¯·æ±‚ä»£ç†</h3><ul><li>ä½¿åº”ç”¨ç¨‹åºçš„å¯¹è±¡èƒ½å¤Ÿåœ¨å¼‚ç±»ç½‘ç»œä¹‹é—´åˆ†å¸ƒå’Œå…±äº«</li></ul><h2 id="å®‰å…¨æ€§å’Œä¿å¯†æ€§è®¾è®¡"><a href="#å®‰å…¨æ€§å’Œä¿å¯†æ€§è®¾è®¡" class="headerlink" title="å®‰å…¨æ€§å’Œä¿å¯†æ€§è®¾è®¡"></a>å®‰å…¨æ€§å’Œä¿å¯†æ€§è®¾è®¡</h2><h3 id="ä¿¡æ¯ç³»ç»Ÿå®‰å…¨ä½“ç³»"><a href="#ä¿¡æ¯ç³»ç»Ÿå®‰å…¨ä½“ç³»" class="headerlink" title="ä¿¡æ¯ç³»ç»Ÿå®‰å…¨ä½“ç³»"></a>ä¿¡æ¯ç³»ç»Ÿå®‰å…¨ä½“ç³»</h3><ul><li><p>å®‰å…¨ç³»ç»Ÿæ¶æ„</p><ul><li><p>å®‰å…¨æœåŠ¡</p><ul><li>è®¤è¯</li><li>è®¿é—®æ§åˆ¶</li><li>æ•°æ®æœºå¯†æ€§</li><li>æ•°æ®å®Œæ•´æ€§</li><li>ä¸å¯å¦è®¤æœåŠ¡</li></ul></li><li><p>ç‰¹å®šçš„å®‰å…¨æœºåˆ¶</p><ul><li>æœºå¯†æœºåˆ¶</li><li>æ•°å­—ç­¾å</li><li>è®¿é—®æ§åˆ¶æœºåˆ¶</li><li>æ•°æ®å®Œæ•´æ€§</li><li>è®¤è¯äº¤æ¢æœºåˆ¶</li><li>æµé‡å¡«å……æœºåˆ¶</li><li>è·¯ç”±æ§åˆ¶æœºåˆ¶</li><li>å…¬è¯æœºåˆ¶</li></ul></li><li><p>æ™®éæ€§çš„å®‰å…¨æœºåˆ¶</p><ul><li>å¯ä¿¡åŠŸèƒ½åº¦</li><li>å®‰å…¨æ ‡è®°</li><li>äº‹ä»¶æ£€æµ‹</li><li>å®‰å…¨å®¡è®¡è·Ÿè¸ª</li><li>å®‰å…¨æ¢å¤</li></ul></li></ul></li><li><p>å®‰å…¨ä¿æŠ¤ç­‰çº§</p><ul><li>ç”¨æˆ·è‡ªä¸»ä¿æŠ¤çº§</li><li>ç³»ç»Ÿå®¡è®¡ä¿æŠ¤çº§</li><li>å®‰å…¨æ ‡è®°ä¿æŠ¤çº§</li><li>ç»“æ„åŒ–ä¿æŠ¤çº§</li><li>è®¿é—®éªŒè¯ä¿æŠ¤çº§</li></ul></li><li><p>ä¿¡æ¯å®‰å…¨ä¿éšœç³»ç»Ÿ</p><ul><li>MIS+Sç³»ç»Ÿ</li><li>S-MISç³»ç»Ÿ</li><li>S2-MISç³»ç»Ÿ</li></ul></li><li><p>å¯ä¿¡è®¡ç®—æœºç³»ç»Ÿ</p><ul><li><p>Dç±»</p><ul><li>æœ€å°ä¿æŠ¤</li></ul></li><li><p>Cç±»</p><ul><li>è‡ªä¸»ä¿æŠ¤ï¼Œè‡ªä¸»è®¿é—®æ§åˆ¶å’Œå®¡è®¡è·Ÿè¸ª</li></ul></li><li><p>Bç±»</p><ul><li>å¼ºåˆ¶å®‰å…¨ä¿æŠ¤</li></ul></li><li><p>Aç±»</p><ul><li>éªŒè¯è®¾è®¡</li></ul></li></ul></li></ul><h3 id="æ•°æ®å®‰å…¨ä¸ä¿å¯†"><a href="#æ•°æ®å®‰å…¨ä¸ä¿å¯†" class="headerlink" title="æ•°æ®å®‰å…¨ä¸ä¿å¯†"></a>æ•°æ®å®‰å…¨ä¸ä¿å¯†</h3><ul><li><p>åŠ å¯†ä½“åˆ¶</p><ul><li><p>å¯¹ç§°åŠ å¯†</p><ul><li>FEALã€IDEAã€DES</li></ul></li><li><p>éå¯¹ç§°åŠ å¯†</p><ul><li>RSA</li></ul></li></ul></li><li><p>PKIä¸æ•°å­—ç­¾å</p></li><li>æ•°å­—ä¿¡å°</li><li>PGP</li><li>æ•°å­—æ°´å°</li></ul><h3 id="è®¡ç®—æœºç½‘ç»œå®‰å…¨"><a href="#è®¡ç®—æœºç½‘ç»œå®‰å…¨" class="headerlink" title="è®¡ç®—æœºç½‘ç»œå®‰å…¨"></a>è®¡ç®—æœºç½‘ç»œå®‰å…¨</h3><ul><li><p>ç½‘ç»œå®‰å…¨è®¾è®¡</p><ul><li>æœ¨æ¡¶åŸåˆ™</li><li>æ•´ä½“æ€§å®‰å…¨</li><li>å®‰å…¨æ€§è¯„ä»·ä¸å¹³è¡¡åŸåˆ™</li><li>æ ‡å‡†åŒ–ä¸ä¸€è‡´æ€§åŸåˆ™</li><li>æŠ€æœ¯ä¸ç®¡ç†ç›¸ç»“åˆåŸåˆ™</li><li>ç­¹åˆ’è§„åˆ’</li><li>ç­‰çº§æ€§åŸåˆ™</li><li>åŠ¨æ€å‘å±•åŸåˆ™</li><li>æ˜“æ“ä½œæ€§åŸåˆ™</li></ul></li><li><p>å•ç‚¹ç™»å½•æŠ€æœ¯</p></li><li>æ— çº¿è®¾å¤‡å®‰å…¨æ€§</li><li><p>é˜²ç«å¢™</p><ul><li>ç½‘ç»œçº§é˜²ç«å¢™</li><li>åº”ç”¨çº§é˜²ç«å¢™</li></ul></li><li><p>å…¥ä¾µæ£€æµ‹</p></li><li><p>è™šæ‹Ÿä¸“ç”¨ç½‘(VPN)</p><ul><li>å®‰å…¨éš§é“æŠ€æœ¯</li><li>åŠ è§£å¯†æŠ€æœ¯</li><li>å¯†é’¥ç®¡ç†æŠ€æœ¯</li><li>èº«ä»½è®¤è¯æŠ€æœ¯</li><li>è®¿é—®æ§åˆ¶æŠ€æœ¯</li></ul></li></ul><h3 id="ç”µå­å•†åŠ¡å®‰å…¨"><a href="#ç”µå­å•†åŠ¡å®‰å…¨" class="headerlink" title="ç”µå­å•†åŠ¡å®‰å…¨"></a>ç”µå­å•†åŠ¡å®‰å…¨</h3><ul><li>SSL-ä¼ è¾“å±‚å®‰å…¨åè®®</li><li>SET-å®‰å…¨ç”µå­äº¤æ˜“åè®®</li></ul><h3 id="å®‰å…¨ç®¡ç†"><a href="#å®‰å…¨ç®¡ç†" class="headerlink" title="å®‰å…¨ç®¡ç†"></a>å®‰å…¨ç®¡ç†</h3><ul><li>å®‰å…¨ç­–ç•¥</li><li><p>å®‰å…¨ä½“ç³»</p><ul><li>ç—…æ¯’ä¸æœ¨é©¬æ‰«æ</li><li>å®‰å…¨æ‰«æ</li><li>æ—¥å¿—å®¡è®¡ç³»ç»Ÿ</li><li>å®‰å…¨å®¡è®¡</li><li>ä¸ªäººä¿¡æ¯æ§åˆ¶</li><li>å®‰å…¨ç®¡ç†åˆ¶åº¦</li></ul></li></ul><h3 id="è®¡ç®—æœºæ“ä½œå®‰å…¨"><a href="#è®¡ç®—æœºæ“ä½œå®‰å…¨" class="headerlink" title="è®¡ç®—æœºæ“ä½œå®‰å…¨"></a>è®¡ç®—æœºæ“ä½œå®‰å…¨</h3><h3 id="ç³»ç»Ÿå¤‡ä»½ä¸æ¢å¤"><a href="#ç³»ç»Ÿå¤‡ä»½ä¸æ¢å¤" class="headerlink" title="ç³»ç»Ÿå¤‡ä»½ä¸æ¢å¤"></a>ç³»ç»Ÿå¤‡ä»½ä¸æ¢å¤</h3><ul><li><p>ä¸šåŠ¡æŒç»­è§„åˆ’</p><ul><li>ç¾éš¾æ¢å¤è§„åˆ’</li><li>ä¸šåŠ¡æ¢å¤è§„åˆ’</li><li>å±æœºç®¡ç†è§„åˆ’</li></ul></li></ul><h2 id="ç³»ç»Ÿå¯é æ€§åˆ†æä¸è®¾è®¡"><a href="#ç³»ç»Ÿå¯é æ€§åˆ†æä¸è®¾è®¡" class="headerlink" title="ç³»ç»Ÿå¯é æ€§åˆ†æä¸è®¾è®¡"></a>ç³»ç»Ÿå¯é æ€§åˆ†æä¸è®¾è®¡</h2><h3 id="å¯é æ€§å®šä¹‰"><a href="#å¯é æ€§å®šä¹‰" class="headerlink" title="å¯é æ€§å®šä¹‰"></a>å¯é æ€§å®šä¹‰</h3><ul><li>ç³»ç»Ÿåœ¨è§„å®šçš„æ—¶é—´åŠè§„å®šçš„ç¯å¢ƒæ¡ä»¶ä¸‹ï¼Œå®Œæˆè§„å®šåŠŸèƒ½çš„èƒ½åŠ›ï¼Œä¹Ÿå°±æ˜¯ç³»ç»Ÿæ— æ•…éšœè¿è¡Œçš„æ¦‚ç‡</li></ul><h3 id="å¯é æ€§æŒ‡æ ‡"><a href="#å¯é æ€§æŒ‡æ ‡" class="headerlink" title="å¯é æ€§æŒ‡æ ‡"></a>å¯é æ€§æŒ‡æ ‡</h3><ul><li>å¹³å‡æ— æ•…éšœæ—¶é—´(MTTF)</li><li>å¹³å‡æ•…éšœä¿®å¤æ—¶é—´(MTTR)</li><li>å¹³å‡æ•…éšœé—´éš”æ—¶é—´(MTBF)</li><li>ç³»ç»Ÿå¯ç”¨æ€§</li></ul><h3 id="å¯é æ€§è®¡ç®—"><a href="#å¯é æ€§è®¡ç®—" class="headerlink" title="å¯é æ€§è®¡ç®—"></a>å¯é æ€§è®¡ç®—</h3><ul><li><p>ä¸²è”ç³»ç»Ÿ</p><ul><li>R1xR2XR3</li></ul></li><li><p>å¹¶è”ç³»ç»Ÿ</p><ul><li>1-(1-R1)(1-R2)</li></ul></li></ul><h3 id="å¯é æ€§è®¾è®¡"><a href="#å¯é æ€§è®¾è®¡" class="headerlink" title="å¯é æ€§è®¾è®¡"></a>å¯é æ€§è®¾è®¡</h3><ul><li><p>å†—ä½™è®¾è®¡</p><ul><li><p>ç»“æ„å†—ä½™</p><ul><li><p>é™æ€å†—ä½™</p><ul><li>è¡¨å†³å’Œæ¯”è¾ƒæ¥å±è”½ç³»ç»Ÿä¸­å‡ºç°çš„é”™è¯¯</li></ul></li><li><p>åŠ¨æ€å†—ä½™</p><ul><li>å¤šæ¨¡å—å¾…æœºå‚¨å¤‡ï¼Œæ£€æŸ¥åˆ°å·¥ä½œæ¨¡å—å‡ºé—®é¢˜ï¼Œå°±å¤‡ç”¨æ¨¡å—æ¥é¡¶æ›¿</li></ul></li><li><p>æ··åˆå†—ä½™</p></li></ul></li><li><p>ä¿¡æ¯å†—ä½™</p><ul><li>é™¤æ­£å¸¸åŠŸèƒ½æ‰€éœ€ä¿¡æ¯å¤–ï¼Œæ·»åŠ ä¸€äº›ä¿¡æ¯ä¿è¯ä¿¡æ¯å®Œæ•´æ€§</li></ul></li><li><p>æ—¶é—´å†—ä½™</p><ul><li>é‡å¤æ‰§è¡ŒæŒ‡ä»¤æˆ–ç¨‹åº</li></ul></li></ul></li><li><p>è½¯ä»¶å®¹é”™</p><ul><li><p>æ¢å¤å—æ–¹æ³•</p><ul><li>ä¸€ç§åŠ¨æ€çš„æ•…éšœå±è”½æŠ€æœ¯ï¼Œé‡‡ç”¨åå‘æ¢å¤ç­–ç•¥</li></ul></li><li><p>Nç‰ˆæœ¬ç¨‹åºè®¾è®¡</p><ul><li>ä¸€ç§é™æ€çš„æ•…éšœå±è”½æŠ€æœ¯ï¼Œé‡‡ç”¨å‘å‰æ¢å¤æµ‹ç‡ï¼ˆè¡¨å†³ï¼‰</li></ul></li><li><p>é˜²å«å¼ç¨‹åºè®¾è®¡</p><ul><li>ç¨‹åºä¸­åŒ…å«é”™è¯¯æ£€æŸ¥ä»£ç å’Œé”™è¯¯æ¢å¤ä»£ç </li></ul></li></ul></li><li><p>é›†ç¾¤æŠ€æœ¯</p><ul><li>ä¸¤å°ä»¥ä¸Šçš„èŠ‚ç‚¹æœº(æœåŠ¡å™¨)æ„æˆçš„ä¸€ç§æ¾æ•£è€¦åˆçš„è®¡ç®—èŠ‚ç‚¹é›†åˆ</li></ul></li></ul><h2 id="è½¯ä»¶çŸ¥è¯†äº§æƒä¸æ³•å¾‹æ³•è§„"><a href="#è½¯ä»¶çŸ¥è¯†äº§æƒä¸æ³•å¾‹æ³•è§„" class="headerlink" title="è½¯ä»¶çŸ¥è¯†äº§æƒä¸æ³•å¾‹æ³•è§„"></a>è½¯ä»¶çŸ¥è¯†äº§æƒä¸æ³•å¾‹æ³•è§„</h2><h3 id="è‘—ä½œæƒæ³•"><a href="#è‘—ä½œæƒæ³•" class="headerlink" title="è‘—ä½œæƒæ³•"></a>è‘—ä½œæƒæ³•</h3><h3 id="è®¡ç®—æœºè½¯ä»¶ä¿æŠ¤æ¡ä¾‹"><a href="#è®¡ç®—æœºè½¯ä»¶ä¿æŠ¤æ¡ä¾‹" class="headerlink" title="è®¡ç®—æœºè½¯ä»¶ä¿æŠ¤æ¡ä¾‹"></a>è®¡ç®—æœºè½¯ä»¶ä¿æŠ¤æ¡ä¾‹</h3><h3 id="æ‹›æŠ•æ ‡æ³•"><a href="#æ‹›æŠ•æ ‡æ³•" class="headerlink" title="æ‹›æŠ•æ ‡æ³•"></a>æ‹›æŠ•æ ‡æ³•</h3><h3 id="ä¸“åˆ©æƒ"><a href="#ä¸“åˆ©æƒ" class="headerlink" title="ä¸“åˆ©æƒ"></a>ä¸“åˆ©æƒ</h3><h3 id="ä¸æ­£å½“ç«äº‰"><a href="#ä¸æ­£å½“ç«äº‰" class="headerlink" title="ä¸æ­£å½“ç«äº‰"></a>ä¸æ­£å½“ç«äº‰</h3><h3 id="å•†æ ‡æ³•"><a href="#å•†æ ‡æ³•" class="headerlink" title="å•†æ ‡æ³•"></a>å•†æ ‡æ³•</h3><h2 id="æ ‡å‡†åŒ–çŸ¥è¯†"><a href="#æ ‡å‡†åŒ–çŸ¥è¯†" class="headerlink" title="æ ‡å‡†åŒ–çŸ¥è¯†"></a>æ ‡å‡†åŒ–çŸ¥è¯†</h2><h3 id="å›½é™…æ ‡å‡†IECã€ISO"><a href="#å›½é™…æ ‡å‡†IECã€ISO" class="headerlink" title="å›½é™…æ ‡å‡†IECã€ISO"></a>å›½é™…æ ‡å‡†IECã€ISO</h3><h3 id="å›½å®¶æ ‡å‡†GB"><a href="#å›½å®¶æ ‡å‡†GB" class="headerlink" title="å›½å®¶æ ‡å‡†GB"></a>å›½å®¶æ ‡å‡†GB</h3><h3 id="è¡Œä¸šæ ‡å‡†ï¼ˆNYå†œä¸šï¼ŒJCå»ºæï¼‰"><a href="#è¡Œä¸šæ ‡å‡†ï¼ˆNYå†œä¸šï¼ŒJCå»ºæï¼‰" class="headerlink" title="è¡Œä¸šæ ‡å‡†ï¼ˆNYå†œä¸šï¼ŒJCå»ºæï¼‰"></a>è¡Œä¸šæ ‡å‡†ï¼ˆNYå†œä¸šï¼ŒJCå»ºæï¼‰</h3><h3 id="åœ°æ–¹æ ‡å‡†"><a href="#åœ°æ–¹æ ‡å‡†" class="headerlink" title="åœ°æ–¹æ ‡å‡†"></a>åœ°æ–¹æ ‡å‡†</h3><h3 id="ä¼ä¸šæ ‡å‡†-Q"><a href="#ä¼ä¸šæ ‡å‡†-Q" class="headerlink" title="ä¼ä¸šæ ‡å‡† Q"></a>ä¼ä¸šæ ‡å‡† Q</h3><h2 id="åº”ç”¨æ•°å­¦"><a href="#åº”ç”¨æ•°å­¦" class="headerlink" title="åº”ç”¨æ•°å­¦"></a>åº”ç”¨æ•°å­¦</h2><h3 id="å›¾è®º"><a href="#å›¾è®º" class="headerlink" title="å›¾è®º"></a>å›¾è®º</h3><ul><li><p>æœ€å°ç”Ÿæˆæ ‘</p><ul><li>æ™®åˆ©å§†ç®—æ³•</li><li>å…‹é²æ–¯å¡å°”ç®—æ³•</li></ul></li><li><p>æœ€çŸ­è·¯å¾„</p></li><li>å…³é”®è·¯å¾„</li></ul><h3 id="è¿ç­¹å­¦"><a href="#è¿ç­¹å­¦" class="headerlink" title="è¿ç­¹å­¦"></a>è¿ç­¹å­¦</h3><ul><li>çº¿æ€§è§„åˆ’</li><li>å¯¹ç­–è®º(ç«èµ›è®º/åšå¼ˆè®º)</li><li>å†³ç­–è®º</li></ul><h2 id="è™šæ‹ŸåŒ–ã€äº‘è®¡ç®—ã€ç‰©è”ç½‘"><a href="#è™šæ‹ŸåŒ–ã€äº‘è®¡ç®—ã€ç‰©è”ç½‘" class="headerlink" title="è™šæ‹ŸåŒ–ã€äº‘è®¡ç®—ã€ç‰©è”ç½‘"></a>è™šæ‹ŸåŒ–ã€äº‘è®¡ç®—ã€ç‰©è”ç½‘</h2>]]></content>
    
    
    <summary type="html">æœ¬æ–‡å°†å›´ç»•è½¯è€ƒæ¶æ„å¸ˆä¸Šåˆé¢˜çš„ç›¸å…³çŸ¥è¯†ç‚¹è¿›è¡Œè®²è§£å’Œç»Ÿè®¡</summary>
    
    
    
    <category term="æ¶æ„å¸ˆ" scheme="https://www.blog.909111.xyz/categories/%E6%9E%B6%E6%9E%84%E5%B8%88/"/>
    
    
    <category term="æ¶æ„å¸ˆ" scheme="https://www.blog.909111.xyz/tags/%E6%9E%B6%E6%9E%84%E5%B8%88/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®ç»“æ„ä¸ç®—æ³•</title>
    <link href="https://www.blog.909111.xyz/posts/4b0178e0.html"/>
    <id>https://www.blog.909111.xyz/posts/4b0178e0.html</id>
    <published>2023-11-09T02:50:23.343Z</published>
    <updated>2023-11-09T02:50:23.343Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ•°æ®ç»“æ„ä¸ç®—æ³•"><a href="#æ•°æ®ç»“æ„ä¸ç®—æ³•" class="headerlink" title="æ•°æ®ç»“æ„ä¸ç®—æ³•"></a>æ•°æ®ç»“æ„ä¸ç®—æ³•</h1><h2 id="1-çº¿æ€§å­˜å‚¨ä¸éçº¿æ€§å­˜å‚¨"><a href="#1-çº¿æ€§å­˜å‚¨ä¸éçº¿æ€§å­˜å‚¨" class="headerlink" title="1 çº¿æ€§å­˜å‚¨ä¸éçº¿æ€§å­˜å‚¨"></a>1 çº¿æ€§å­˜å‚¨ä¸éçº¿æ€§å­˜å‚¨</h2><h3 id="1-1-çº¿æ€§ç»“æ„"><a href="#1-1-çº¿æ€§ç»“æ„" class="headerlink" title="1.1 çº¿æ€§ç»“æ„"></a>1.1 çº¿æ€§ç»“æ„</h3><ol><li><strong>çº¿æ€§ç»“æ„</strong>ï¼šç‰¹ç‚¹æ•°æ®å…ƒç´ ç›´æ¥å­˜åœ¨ä¸€å¯¹ä¸€çš„çº¿æ€§å…³ç³»</li><li>çº¿æ€§ç»“æ„æœ‰ä¸¤ç§ä¸åŒçš„å­˜å‚¨ç»“æ„ï¼Œé¡ºåºå­˜å‚¨ï¼ˆæ•°ç»„ï¼‰å’Œé“¾å¼å­˜å‚¨ç»“æ„ï¼ˆé“¾è¡¨ï¼‰ã€‚é¡ºåºå­˜å‚¨çš„çº¿æ€§è¡¨ç§°ä¸ºé¡ºåºè¡¨ï¼Œé¡ºåºè¡¨ä¸­çš„å­˜å‚¨å…ƒç´ æ˜¯è¿ç»­çš„ã€‚</li><li>é“¾å¼å­˜å‚¨çš„çº¿æ€§è¡¨ç§°ä¸ºé“¾è¡¨ï¼Œé“¾è¡¨ä¸­çš„å­˜å‚¨å…ƒç´ ä¸ä¸€å®šæ˜¯è¿ç»­çš„ï¼Œå…ƒç´ èŠ‚ç‚¹ä¸­å­˜æ–¹çš„æ•°æ®å…ƒç´ ä»¥åŠç›¸é‚»å…ƒç´ çš„åœ°å€ä¿¡æ¯ã€‚</li><li>çº¿æ€§ç»“æ„å¸¸è§çš„æœ‰ï¼šæ•°ç»„ï¼Œé˜Ÿåˆ—ï¼Œé“¾è¡¨å’Œæ ˆã€‚</li></ol><h3 id="1-2-éçº¿æ€§ç»“æ„"><a href="#1-2-éçº¿æ€§ç»“æ„" class="headerlink" title="1.2 éçº¿æ€§ç»“æ„"></a>1.2 éçº¿æ€§ç»“æ„</h3><p>éçº¿æ€§ç»“æ„ï¼šäºŒç»´æ•°ç»„ï¼Œå¤šç»´æ•°ç»„ï¼Œå¹¿ä¹‰è¡¨ï¼Œæ ‘ç»“æ„ï¼Œå›¾ç»“æ„ã€‚</p><h2 id="2-æ•°ç»„"><a href="#2-æ•°ç»„" class="headerlink" title="2 æ•°ç»„"></a>2 æ•°ç»„</h2><h3 id="2-1-ç¨€ç–æ•°ç»„"><a href="#2-1-ç¨€ç–æ•°ç»„" class="headerlink" title="2.1 ç¨€ç–æ•°ç»„"></a>2.1 ç¨€ç–æ•°ç»„</h3><p>å½“ä¸€ä¸ªæ•°ç»„ä¸­å¤§éƒ¨åˆ†å…ƒç´ ä¸º0çš„æ—¶å€™ï¼Œæˆ–è€…ä¸ºåŒä¸€ä¸ªå€¼çš„æ•°ç»„æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç¨€ç–æ•°ç»„æ¥ä¿å­˜è¯¥æ•°ç»„ã€‚</p><p>ç¨€ç–æ•°ç»„å¤„ç†çš„æ–¹å¼ï¼š</p><ol><li>è®°å½•æ•°ç»„ä¸€å…±æœ‰<strong>å‡ è¡Œå‡ åˆ—ï¼Œæœ‰å¤šå°‘ä¸ªä¸åŒ</strong>çš„å€¼ã€‚</li><li>æŠŠå…·æœ‰ä¸åŒçš„å…ƒç´ çš„è¡Œåˆ—åŠå€¼è®°å½•åœ¨ä¸€ä¸ªå°è§„æ¨¡æ•°ç»„ä¸­ï¼Œä»è€Œç¼©å°ç¨‹åºçš„è§„æ¨¡ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> class ç¨€ç–æ•°ç»„ &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªåŸå§‹çš„äºŒç»´æ•°ç»„</span></span><br><span class="line"><span class="comment">//0 ï¼šè¡¨ç¤ºæ²¡æœ‰æ£‹å­ï¼Œ1è¡¨ç¤ºé»‘å­ï¼Œ2è¡¨ç¤ºç™½å­—</span></span><br><span class="line"><span class="type">int</span> chessArr1[][] = <span class="keyword">new</span> <span class="title class_">int</span> [<span class="number">11</span>][<span class="number">11</span>];</span><br><span class="line">chessArr1[<span class="number">1</span>][<span class="number">2</span>] =<span class="number">1</span>;</span><br><span class="line">chessArr1[<span class="number">2</span>][<span class="number">3</span>] = <span class="number">2</span>;</span><br><span class="line"><span class="comment">//è¾“å‡ºåŸå§‹æ•°ç»„</span></span><br><span class="line">System.out.println(<span class="string">&quot;åŸå§‹çš„äºŒç»´ä¸ºï¼š&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> [] row : chessArr1) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> data: row) &#123;</span><br><span class="line">System.out.printf(<span class="string">&quot;%d   &quot;</span>,data);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†äºŒç»´æ•°ç»„è½¬ç¨€ç–æ•°ç»„</span></span><br><span class="line"><span class="comment">// 1å…ˆéå†äºŒç»´æ•°ç»„å¾—åˆ°0æ•°æ®çš„ä¸ªæ•°</span></span><br><span class="line"><span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">11</span> ; i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">11</span> ; j++) &#123;</span><br><span class="line"><span class="keyword">if</span>(chessArr1[i][j] != <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">sum ++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºå¯¹åº”çš„ç¨€ç–æ•°ç»„</span></span><br><span class="line"><span class="type">int</span> sparseArr[][] = <span class="keyword">new</span> <span class="title class_">int</span> [sum +<span class="number">1</span>][<span class="number">3</span>];</span><br><span class="line"><span class="comment">//ç»™ç¨€ç–æ•°ç»„èµ‹å€¼</span></span><br><span class="line">sparseArr[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">11</span>;</span><br><span class="line">sparseArr[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">11</span>;</span><br><span class="line">sparseArr[<span class="number">0</span>][<span class="number">2</span>] = sum;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">//éå†äºŒç»´æ•°ç»„ï¼Œå°†é0çš„å€¼å­˜æ”¾åˆ°sparseArrä¸­</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">11</span>; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">11</span>; j++) &#123;</span><br><span class="line"><span class="keyword">if</span>(chessArr1[i][j] != <span class="number">0</span>) &#123;</span><br><span class="line">count ++;</span><br><span class="line">sparseArr[count][<span class="number">0</span>] = i; </span><br><span class="line">sparseArr[count][<span class="number">1</span>] = j;</span><br><span class="line">sparseArr[count][<span class="number">2</span>] = chessArr1[i][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¾“å‡ºç¨€ç–æ•°ç»„çš„å½¢å¼</span></span><br><span class="line">System.out.println();</span><br><span class="line">System.out.println(<span class="string">&quot;å¾—åˆ°çš„ç¨€ç–æ•°ç»„&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; sparseArr.length ; i++) &#123;</span><br><span class="line">System.out.printf(<span class="string">&quot;%d\t%d\t%d\t\n&quot;</span>,sparseArr[i][<span class="number">0</span>],sparseArr[i][<span class="number">1</span>],sparseArr[i][<span class="number">2</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†ç¨€ç–æ•°ç»„å›å¤ä¸ºåŸæ¥çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">//ç¬¬ä¸€æ­¥ï¼Œå…ˆè¯»å–ç¨€ç–æ•°ç»„çš„ç¬¬ä¸€è¡Œï¼Œæ ¹æ®ç¬¬ä¸€è¡Œçš„æ•°æ®åˆ›å»ºåŸå§‹çš„äºŒç»´æ•°ç»„</span></span><br><span class="line"><span class="type">int</span> chessArr2[][] = <span class="keyword">new</span> <span class="title class_">int</span> [sparseArr[<span class="number">0</span>][<span class="number">0</span>]][sparseArr[<span class="number">0</span>][<span class="number">1</span>]];</span><br><span class="line"><span class="comment">//ç¬¬äºŒéƒ¨ï¼Œåœ¨ç¨€ç–æ•°ç»„åçš„å‡ è¡Œçš„æ•°æ®ä»ç¬¬äºŒè¡Œå¼€å§‹ï¼Œå¹¶èµ‹å€¼ç»™åŸå§‹çš„äºŒç»´æ•°ç»„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">1</span>; i &lt; sparseArr.length; i++) &#123;</span><br><span class="line"> chessArr2[sparseArr[i][<span class="number">0</span>]][sparseArr[i][<span class="number">1</span>]] = sparseArr[i][<span class="number">2</span>];</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¾“å‡ºæ¢å¤åçš„äºŒç»´æ•°ç»„</span></span><br><span class="line">System.out.println();</span><br><span class="line">System.out.println(<span class="string">&quot;æ¢å¤åçš„äºŒç»´æ•°ç»„&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> [] row : chessArr2) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> data: row) &#123;</span><br><span class="line">System.out.printf(<span class="string">&quot;%d   &quot;</span>,data);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-é˜Ÿåˆ—"><a href="#3-é˜Ÿåˆ—" class="headerlink" title="3 é˜Ÿåˆ—"></a>3 é˜Ÿåˆ—</h2><h3 id="3-1-é˜Ÿåˆ—"><a href="#3-1-é˜Ÿåˆ—" class="headerlink" title="3.1 é˜Ÿåˆ—"></a>3.1 é˜Ÿåˆ—</h3><ol><li><p>é˜Ÿåˆ—æ˜¯ä¸€æœ‰åºåˆ—è¡¨ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„æˆ–è€…æ˜¯é“¾è¡¨æ¥å®ç°.</p></li><li><p>éµå¾ªå…ˆå…¥å…ˆä»çš„åŸåˆ™ã€‚</p><p>==ä¸€èˆ¬æˆ‘ä»¬é‡‡ç”¨rear æŒ‡é’ˆå’ŒfrontæŒ‡é’ˆè¿›è¡Œæ“ä½œã€‚==</p></li></ol><h3 id="3-2é˜Ÿåˆ—çš„æ¨¡æ‹Ÿ"><a href="#3-2é˜Ÿåˆ—çš„æ¨¡æ‹Ÿ" class="headerlink" title="3.2é˜Ÿåˆ—çš„æ¨¡æ‹Ÿ"></a>3.2é˜Ÿåˆ—çš„æ¨¡æ‹Ÿ</h3><p>é˜Ÿåˆ—æ˜¯æœ‰åºåˆ—è¡¨ï¼Œä½¿ç”¨æ•°ç»„ç»“æ„æ¥å­˜å‚¨é˜Ÿåˆ—çš„æ•°æ®ã€‚</p><p>é˜Ÿåˆ—çš„å…¥é˜Ÿä¸€èˆ¬ä½¿ç”¨addQueue,addQueueçš„å¤„ç†éœ€è¦ä¸¤ä¸ªæ­¥éª¤ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayQueueDemo</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">ArrayQueue  aq=<span class="keyword">new</span> <span class="title class_">ArrayQueue</span>(<span class="number">3</span>);</span><br><span class="line"><span class="type">char</span> <span class="variable">key</span> <span class="operator">=</span> <span class="string">&#x27; &#x27;</span>;<span class="comment">//ç”¨äºæ¥æ”¶ç”¨æˆ·æ•°æ®</span></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="type">boolean</span> <span class="variable">loop</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"><span class="comment">//è¾“å‡ºä¸€ä¸ªèœå•</span></span><br><span class="line"><span class="keyword">while</span>(loop) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;s(show):æ˜¾ç¤ºé˜Ÿåˆ—&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;e(exit):é€€å‡ºé˜Ÿåˆ—&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;a(add):æ·»åŠ æ•°æ®åˆ°é˜Ÿåˆ—&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;g(get):ä»é˜Ÿåˆ—å–å‡ºæ•°æ®&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;h(head):æŸ¥çœ‹é˜Ÿåˆ—å¤´çš„æ•°æ®&quot;</span>);</span><br><span class="line">key = sc.next().charAt(<span class="number">0</span>);<span class="comment">//æ¥å»ç¬¬ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="keyword">switch</span>(key) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:  <span class="comment">//å±•ç¤ºé˜Ÿåˆ—æ•°æ®</span></span><br><span class="line">aq.showQueue();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>: <span class="comment">//å‘é˜Ÿåˆ—æ·»åŠ æ•°æ®</span></span><br><span class="line">System.out.println(<span class="string">&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•°&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">aq.addQueue(value);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;g&#x27;</span>: <span class="comment">//è·å¾—é˜Ÿåˆ—çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> aq.getQueue();</span><br><span class="line">System.out.printf(<span class="string">&quot;å–å‡ºçš„æ•°æ®å®%d\n&quot;</span>,res);</span><br><span class="line">aq.getQueue();</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">System.out.println(e.getMessage());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;h&#x27;</span>: <span class="comment">//æŸ¥çœ‹é˜Ÿåˆ—å¤´çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> aq.headQueue();</span><br><span class="line">System.out.printf(<span class="string">&quot;å–å‡ºçš„æ•°æ®å®%d\n&quot;</span>,res);</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">System.out.println(e.getMessage());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;e&#x27;</span>: <span class="comment">//ä»£è¡¨è¦é€€å‡º</span></span><br><span class="line">sc.close();</span><br><span class="line">loop = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;ç¨‹åºé€€å‡º&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—ï¼Œç¼–å†™ä¸€ä¸ªArrayQueueç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ArrayQueue</span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> maxSize;<span class="comment">//è®¾ç½®æ•°ç»„çš„æœ€å¤§å®¹é‡</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> front;<span class="comment">//é˜Ÿåˆ—å¤´</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> rear;<span class="comment">//é˜Ÿåˆ—å°¾éƒ¨</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> [] arr;<span class="comment">//è¯¥æ•°æ®ç”¨äºå­˜æ”¾æ•°æ®ï¼Œæ¨¡æ‹Ÿé˜Ÿåˆ—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºé˜Ÿåˆ—çš„æ„é€ å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayQueue</span><span class="params">(<span class="type">int</span> arrMaxSize)</span> &#123;</span><br><span class="line">maxSize = arrMaxSize;</span><br><span class="line">arr = <span class="keyword">new</span> <span class="title class_">int</span> [maxSize];</span><br><span class="line">front  = -<span class="number">1</span>;  <span class="comment">//æŒ‡å‘é˜Ÿåˆ—å¤´éƒ¨ï¼ŒæŒ‡å‘é˜Ÿåˆ—å¤´çš„å‰ä¸€ä¸ªä½ç½®</span></span><br><span class="line">rear = -<span class="number">1</span>; <span class="comment">//æŒ‡å‘é˜Ÿåˆ—å°¾éƒ¨ï¼Œé˜Ÿåˆ—å°¾éƒ¨åŒ…å«å¯¹è±¡æœ€åä¸€ä¸ªæ•°æ®ï¼Œé€šä¿—çš„è®²å°±æ˜¯é˜Ÿåˆ—æœ€åä¸€ä¸ªä½ç½®</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦æ»¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> rear == maxSize - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isNull</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> rear == front;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ•°æ®æ˜¯å¦æ·»åŠ åˆ°é˜Ÿåˆ—</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addQueue</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line"><span class="comment">//åˆ¤è¯»é˜Ÿåˆ—æ˜¯å¦æ»¡</span></span><br><span class="line"><span class="keyword">if</span>(isFull()) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é˜Ÿåˆ—æ»¡ï¼Œä¸èƒ½åŠ å…¥æ•°æ®&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">rear ++ ; <span class="comment">//è®©rear åç§»åŠ¨</span></span><br><span class="line">arr[rear] = n;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤è¯»é˜Ÿåˆ—çš„æ•°æ®ï¼Œå‡ºé˜Ÿåˆ—</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getQueue</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//åˆ¤è¯»é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span>(isNull()) &#123;</span><br><span class="line"><span class="comment">//æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;é˜Ÿåˆ—ä¸ºç©ºï¼Œä¸èƒ½è·å–æ•°æ®&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">front ++;</span><br><span class="line"><span class="keyword">return</span> arr[front];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ˜¾ç¤ºé˜Ÿåˆ—æ‰€æœ‰æ•°æ®</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showQueue</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//å°†æ•°ç»„æ•°æ®éå†</span></span><br><span class="line"><span class="keyword">if</span>(isNull()) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é˜Ÿåˆ—ä¸ºç©ºï¼Œæ²¡æœ‰æ•°æ®&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++ ) &#123;</span><br><span class="line">System.out.printf(<span class="string">&quot;arr[%d]=%d\n&quot;</span>,i,arr[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ˜¾ç¤ºé˜Ÿåˆ—çš„å¤´æ•°æ®ï¼Œæ³¨æ„ä¸æ˜¯å–å‡ºæ•°æ®</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">headQueue</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­</span></span><br><span class="line"><span class="keyword">if</span>(isNull()) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;é˜Ÿåˆ—ç©ºï¼Œæ²¡æœ‰æ•°æ®&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> arr[front + <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤å¤„å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä»¬åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œæ— æ³•å¯¹é˜Ÿåˆ—è¿›è¡Œå¤šæ¬¡ä½¿ç”¨ã€‚</p><p>å°†è¿™ä¸ªæ•°ç»„ä½¿ç”¨ç®—æ³•æ”¹å˜æˆä¸ºä¸€ä¸ªç¯å½¢é˜Ÿåˆ— æ–¹å¼ï¼Œé‡‡ç”¨å–æ¨¡çš„æ–¹å¼ã€‚</p><h3 id="3-3-åˆ¤æ–­é˜Ÿåˆ—ä¸ºç©ºé˜Ÿåˆ—ä¸ºæ»¡"><a href="#3-3-åˆ¤æ–­é˜Ÿåˆ—ä¸ºç©ºé˜Ÿåˆ—ä¸ºæ»¡" class="headerlink" title="3.3 åˆ¤æ–­é˜Ÿåˆ—ä¸ºç©ºé˜Ÿåˆ—ä¸ºæ»¡"></a>3.3 åˆ¤æ–­é˜Ÿåˆ—ä¸ºç©ºé˜Ÿåˆ—ä¸ºæ»¡</h3><p>==front == rear ä»£è¡¨é˜Ÿåˆ—ä¸ºç©ºã€‚==</p><p>å½“æŒ‡é’ˆrear å°äºé˜Ÿåˆ—çš„æœ€å¤§ä¸‹æ ‡maxSize - 1,åˆ™å°†æ•°æ®å­˜å…¥rearé”æŒ‡å‘çš„æ•°ç»„å…ƒç´ ä¸­ï¼Œå¦åˆ™æ— æ³•å­˜å…¥æ•°æ®</p><p>==rear == maxSize -1 ä»£è¡¨é˜Ÿåˆ—å·²æ»¡==</p><h3 id="3-4-ä½¿ç”¨æ•°ç»„æ¨¡æ‹Ÿç¯å½¢é˜Ÿåˆ—"><a href="#3-4-ä½¿ç”¨æ•°ç»„æ¨¡æ‹Ÿç¯å½¢é˜Ÿåˆ—" class="headerlink" title="3.4 ä½¿ç”¨æ•°ç»„æ¨¡æ‹Ÿç¯å½¢é˜Ÿåˆ—"></a>3.4 ä½¿ç”¨æ•°ç»„æ¨¡æ‹Ÿç¯å½¢é˜Ÿåˆ—</h3><p>æ€è·¯ï¼š</p><ol><li><p>front å˜é‡çš„å«ä¹‰åšä¸€ä¸ªè°ƒæ•´ï¼šfrontå°±æŒ‡å‘é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå°±æ˜¯è¯´arr[front]å°±æ˜¯é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p><p>frontçš„åˆå§‹å€¼ä¸º0ï¼›</p></li><li><p>rearå˜é‡çš„å«ä¹‰åšä¸€ä¸ªè°ƒæ•´ï¼šrearæŒ‡å‘é˜Ÿåˆ—çš„æœ€åä¸€ä¸ªå…ƒç´ çš„åä¸€ä¸ªä½ç½®ï¼Œå› ä¸ºå¸Œæœ›ç©ºå‡ºä¸€ä¸ªç©ºé—´ä½œä¸ºçº¦å®šã€‚rear çš„åˆå§‹å€¼ä¸º0ï¼›</p></li><li><p>å½“é˜Ÿåˆ—æ»¡æ—¶ï¼Œæ¡ä»¶æ˜¯<code>(rear + 1)%maxSize == front</code> æ­¤æ—¶æ»¡ã€‚</p></li><li><p>å½“é˜Ÿåˆ—ä¸ºç©ºçš„æ¡ä»¶ï¼Œrear == front ç©º</p></li><li><p>å½“è¿™æ ·åˆ†æåï¼Œæ­¤æ—¶é˜Ÿåˆ—ä¸­æœ‰æ•ˆçš„æ•°æ®çš„ä¸ªæ•°æ˜¯ <code>(rear + maxSize - front)%maxSize //rear=1 front=0</code></p></li><li><p>ä»¥ä¸Šæˆ‘ä»¬å°±å¯ä»¥æŒ‰ç…§æˆ‘ä»¬çš„æ€è·¯å¯¹åŸæ¥çš„ä»£ç è¿›è¡Œä¿®æ”¹ã€‚</p></li></ol><h2 id="4-é“¾è¡¨"><a href="#4-é“¾è¡¨" class="headerlink" title="4. é“¾è¡¨"></a>4. é“¾è¡¨</h2><p>é“¾è¡¨æ˜¯æœ‰åºçš„åˆ—è¡¨ï¼š</p><ol><li>é“¾è¡¨æ˜¯ä»¥<strong>èŠ‚ç‚¹</strong>çš„æ–¹å¼æ¥å­˜å‚¨çš„ï¼Œæ˜¯ä¸€<strong>ç§é“¾å¼å­˜å‚¨çš„</strong>æ–¹æ³•å­˜å‚¨ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹åŒ…<strong>å«dataåŸŸï¼ŒnextåŸŸ</strong>ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚</li><li>é“¾è¡¨çš„<strong>å„ä¸ªèŠ‚ç‚¹ä¸ä¸€å®šæ˜¯è¿ç»­å­˜å‚¨</strong></li><li>é“¾è¡¨åˆ†<strong>å¸¦å¤´èŠ‚ç‚¹çš„é“¾è¡¨å’Œä¸å¸¦å¤´ç»“ç‚¹</strong>çš„é“¾è¡¨ï¼Œæ ¹æ®å®é™…çš„éœ€æ±‚æ¥ç¡®å®šã€‚</li></ol><h3 id="4-1-å•å‘é“¾è¡¨"><a href="#4-1-å•å‘é“¾è¡¨" class="headerlink" title="4.1 å•å‘é“¾è¡¨"></a>4.1 å•å‘é“¾è¡¨</h3><p>head èŠ‚ç‚¹</p><h5 id="å•å‘é“¾è¡¨çš„å®ç°"><a href="#å•å‘é“¾è¡¨çš„å®ç°" class="headerlink" title="å•å‘é“¾è¡¨çš„å®ç°"></a>å•å‘é“¾è¡¨çš„å®ç°</h5><ol><li>ä¸å­˜æ”¾å…·ä½“çš„æ•°æ®</li><li>ä½œç”¨å°±æ˜¯è¡¨ç¤ºå•é“¾è¡¨å¤´next</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingleLinkedListDemo</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line"><span class="comment">//åˆ›å»ºèŠ‚ç‚¹</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">hero1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">1</span>,<span class="string">&quot;æ¾æ±Ÿ&quot;</span>,<span class="string">&quot;åŠæ—¶é›¨&quot;</span>);</span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">hero2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">2</span>,<span class="string">&quot;å¢ä¿Šä¹‰&quot;</span>,<span class="string">&quot;ç‰éº’éºŸ&quot;</span>);</span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">hero3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">3</span>,<span class="string">&quot;å´ç”¨&quot;</span>,<span class="string">&quot;æ™ºå¤šæ˜Ÿ&quot;</span>);</span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">hero4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">4</span>,<span class="string">&quot;æ—å†²&quot;</span>,<span class="string">&quot;è±¹å­å¤´&quot;</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºé“¾è¡¨</span></span><br><span class="line"><span class="type">SingleLinkedList</span> <span class="variable">singleLinkedList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SingleLinkedList</span>();</span><br><span class="line">singleLinkedList.add(hero1);</span><br><span class="line">singleLinkedList.add(hero2);</span><br><span class="line">singleLinkedList.add(hero3);</span><br><span class="line">singleLinkedList.add(hero4);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ˜¾ç¤ºé“¾è¡¨</span></span><br><span class="line">singleLinkedList.list();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªSingleLinkedListæ¥ç®¡ç†æˆ‘ä»¬çš„è‹±é›„</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SingleLinkedList</span>&#123;</span><br><span class="line"><span class="comment">//å…ˆåˆå§‹åŒ–ä¸€ä¸ªå¤´ç»“ç‚¹ï¼Œä¸€èˆ¬ä¸Šå¤´ç»“ç‚¹ä¸è¦åŠ¨</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">HeroNode</span> <span class="variable">head</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">0</span>,<span class="string">&quot;&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ·»åŠ èŠ‚ç‚¹åˆ°å•å‘é“¾è¡¨</span></span><br><span class="line"><span class="comment">//æ€è·¯ï¼Œå½“ä¸è€ƒè™‘ç¼–å·é¡ºåºæ—¶</span></span><br><span class="line"><span class="comment">//1 æ‰¾åˆ°å½“å‰é“¾è¡¨çš„æœ€åèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//2,å°†æœ€åè¿™ä¸ªèŠ‚ç‚¹çš„nexæŒ‡å‘æ–°èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(HeroNode heroNode)</span> &#123;</span><br><span class="line"><span class="comment">//å› ä¸ºheadèŠ‚ç‚¹ä¸èƒ½åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¾…åŠ©éå†temo</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">temp</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="comment">//éå†é“¾è¡¨ï¼Œæ‰¾åˆ°æœ€å</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="comment">//æ‰¾åˆ°é“¾è¡¨çš„æœ€å</span></span><br><span class="line"><span class="keyword">if</span>(temp.next == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœæ²¡æœ‰æ‰¾åˆ°æœ€åï¼Œå°†tempåç§»</span></span><br><span class="line">temp = temp.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å½“é€€å‡ºwhileå¾ªç¯åï¼Œtempå°±æŒ‡å‘é“¾è¡¨çš„æœ€å</span></span><br><span class="line"><span class="comment">//å°†æœ€åè¿™ä¸ªèŠ‚ç‚¹çš„nextæŒ‡å‘æ–°çš„èŠ‚ç‚¹</span></span><br><span class="line">temp.next = heroNode;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ˜¾ç¤ºé“¾è¡¨ã€éå†ã€‘</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">list</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//åˆ¤è¯»æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span>(head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é“¾è¡¨ä¸ºç©º&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å› ä¸ºå¤´ç»“ç‚¹ï¼Œä¸èƒ½åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¾…åŠ©å˜é‡æ¥éå†</span></span><br><span class="line"><span class="type">HeroNode</span>  <span class="variable">temp</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯å¦é“¾è¡¨æœ€å</span></span><br><span class="line"><span class="keyword">if</span>(temp == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡ºèŠ‚ç‚¹çš„ä¿¡æ¯</span></span><br><span class="line">System.out.println(temp);</span><br><span class="line"><span class="comment">//å°†nextåç§»,å¦‚æœä¸åç§»å°†è¿›å…¥æ­»å¾ªç¯</span></span><br><span class="line">temp = temp.next ;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªheroNode ,æ¯ä¸ªHeroNodeå¯¹è±¡å°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HeroNode</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> no;</span><br><span class="line"><span class="keyword">public</span> String name;</span><br><span class="line"><span class="keyword">public</span> String nickName;</span><br><span class="line"><span class="keyword">public</span> HeroNode next;<span class="comment">//æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HeroNode</span><span class="params">(<span class="type">int</span> no, String name, String nickName)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line"><span class="built_in">this</span>.no = no;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line"><span class="built_in">this</span>.nickName = nickName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;HeroNode [no=&quot;</span> + no + <span class="string">&quot;, name=&quot;</span> + name + <span class="string">&quot;, nickName=&quot;</span> + nickName + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HeroNode</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›®å‰ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ç›¸å…³èŠ‚ç‚¹çš„è¿›è¡Œæœ‰åºæ·»åŠ ã€‚</p><h5 id="æœ‰åºæ·»åŠ "><a href="#æœ‰åºæ·»åŠ " class="headerlink" title="æœ‰åºæ·»åŠ "></a>æœ‰åºæ·»åŠ </h5><p>éœ€è¦æŒ‰ç…§ç¼–å·çš„é¡ºåºæ·»åŠ ï¼š</p><ol><li>é¦–å…ˆæ‰¾åˆ°æ–°å¤©èŠ‚ç‚¹çš„èŠ‚ç‚¹çš„ä½ç½®ï¼Œæ˜¯é€šè¿‡è¾…åŠ©å˜é‡(æŒ‡é’ˆ)ï¼Œé€šè¿‡éå†æ¥æå®š</li><li>æ–°çš„èŠ‚ç‚¹ <code>next=temp.next</code></li><li>å°†<code>temp.next=æ–°èŠ‚ç‚¹</code></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingleLinkedListDemo</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line"><span class="comment">//åˆ›å»ºèŠ‚ç‚¹</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">hero1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">1</span>,<span class="string">&quot;æ¾æ±Ÿ&quot;</span>,<span class="string">&quot;åŠæ—¶é›¨&quot;</span>);</span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">hero2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">2</span>,<span class="string">&quot;å¢ä¿Šä¹‰&quot;</span>,<span class="string">&quot;ç‰éº’éºŸ&quot;</span>);</span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">hero3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">3</span>,<span class="string">&quot;å´ç”¨&quot;</span>,<span class="string">&quot;æ™ºå¤šæ˜Ÿ&quot;</span>);</span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">hero4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">4</span>,<span class="string">&quot;æ—å†²&quot;</span>,<span class="string">&quot;è±¹å­å¤´&quot;</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºé“¾è¡¨</span></span><br><span class="line"><span class="type">SingleLinkedList</span> <span class="variable">singleLinkedList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SingleLinkedList</span>();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">singleLinkedList.add(hero1);</span></span><br><span class="line"><span class="comment">singleLinkedList.add(hero2);</span></span><br><span class="line"><span class="comment">singleLinkedList.add(hero3);</span></span><br><span class="line"><span class="comment">singleLinkedList.add(hero4);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">singleLinkedList.addByOrder(hero3);</span><br><span class="line">singleLinkedList.addByOrder(hero1);</span><br><span class="line">singleLinkedList.addByOrder(hero4);</span><br><span class="line">singleLinkedList.addByOrder(hero2);</span><br><span class="line">singleLinkedList.addByOrder(hero2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ˜¾ç¤ºé“¾è¡¨</span></span><br><span class="line">singleLinkedList.list();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªSingleLinkedListæ¥ç®¡ç†æˆ‘ä»¬çš„è‹±é›„</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SingleLinkedList</span>&#123;</span><br><span class="line"><span class="comment">//å…ˆåˆå§‹åŒ–ä¸€ä¸ªå¤´ç»“ç‚¹ï¼Œä¸€èˆ¬ä¸Šå¤´ç»“ç‚¹ä¸è¦åŠ¨</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">HeroNode</span> <span class="variable">head</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">0</span>,<span class="string">&quot;&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ·»åŠ èŠ‚ç‚¹åˆ°å•å‘é“¾è¡¨</span></span><br><span class="line"><span class="comment">//æ€è·¯ï¼Œå½“ä¸è€ƒè™‘ç¼–å·é¡ºåºæ—¶</span></span><br><span class="line"><span class="comment">//1 æ‰¾åˆ°å½“å‰é“¾è¡¨çš„æœ€åèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//2,å°†æœ€åè¿™ä¸ªèŠ‚ç‚¹çš„nexæŒ‡å‘æ–°èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(HeroNode heroNode)</span> &#123;</span><br><span class="line"><span class="comment">//å› ä¸ºheadèŠ‚ç‚¹ä¸èƒ½åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¾…åŠ©éå†temo</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">temp</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="comment">//éå†é“¾è¡¨ï¼Œæ‰¾åˆ°æœ€å</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="comment">//æ‰¾åˆ°é“¾è¡¨çš„æœ€å</span></span><br><span class="line"><span class="keyword">if</span>(temp.next == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœæ²¡æœ‰æ‰¾åˆ°æœ€åï¼Œå°†tempåç§»</span></span><br><span class="line">temp = temp.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å½“é€€å‡ºwhileå¾ªç¯åï¼Œtempå°±æŒ‡å‘é“¾è¡¨çš„æœ€å</span></span><br><span class="line"><span class="comment">//å°†æœ€åè¿™ä¸ªèŠ‚ç‚¹çš„nextæŒ‡å‘æ–°çš„èŠ‚ç‚¹</span></span><br><span class="line">temp.next = heroNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒç§æ–¹å¼æ·»åŠ è‹±é›„æ—¶ï¼Œæ ¹æ®æ’åå°†è‹±é›„æ’å…¥åˆ°æŒ‡å®šä½ç½®</span></span><br><span class="line"><span class="comment">//å¦‚æœæœ‰è¿™ä¸ªæ’åï¼Œåˆ™æ·»åŠ å¤±è´¥ï¼Œå¹¶ç»™å‡ºæç¤º</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addByOrder</span><span class="params">(HeroNode heroNode)</span> &#123;</span><br><span class="line"><span class="comment">//å› ä¸ºå¤´ç»“ç‚¹ä¸èƒ½åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬ä»ç„¶é€šè¿‡ä¸€ä¸ªè¾…åŠ©æŒ‡é’ˆï¼ˆå˜é‡ï¼‰æ¥å¸®åŠ©æ‰¾åˆ°æ·»åŠ çš„ä½ç½®</span></span><br><span class="line"><span class="comment">//å› ä¸ºå•é“¾è¡¨ï¼Œå› ä¸ºæˆ‘ä»¬æ‰¾çš„tempæ˜¯ä½äºæ·»åŠ ä½ç½®çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦åˆ™æ’å…¥ä¸äº†</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">temp</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;  <span class="comment">//falseæ ‡è®°æ·»åŠ çš„ç¼–å·æ˜¯å¦å­˜åœ¨ï¼Œé»˜è®¤ä¸ºfalse</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(temp.next == <span class="literal">null</span>) &#123; <span class="comment">//è¯´æ˜æ­¤æ—¶tempå¤„äºé“¾è¡¨çš„æœ€å</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(temp.next.no &gt; heroNode.no) &#123;</span><br><span class="line"><span class="comment">//æ­¤æ—¶ä½ç½®æ‰¾åˆ°ï¼Œå°±åœ¨tempçš„åè¾¹æ’å…¥</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(temp.next.no == heroNode.no) </span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//è¯´æ˜å¸Œæœ›æ·»åŠ çš„heroNodeçš„ç¼–å·å·²ç„¶å­˜åœ¨</span></span><br><span class="line">flag = <span class="literal">true</span>;  <span class="comment">//è¯´æ˜ç¼–å·å­˜åœ¨</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">temp = temp.next;  <span class="comment">//åç§»ï¼Œå˜é‡å½“å‰é“¾è¡¨</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­flagçš„å€¼</span></span><br><span class="line"><span class="keyword">if</span>(flag) &#123;<span class="comment">//ä¸èƒ½æ·»åŠ ï¼Œè¯´æ˜ç¼–å·å­˜åœ¨</span></span><br><span class="line">System.out.printf(<span class="string">&quot;å‡†å¤‡æ’å…¥çš„è‹±é›„çš„ç¼–å·%dï¼Œå·²ç»å­˜åœ¨,æ— æ³•æ·»åŠ \n&quot;</span>,heroNode.no);</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//æ’å…¥åˆ°é“¾è¡¨ä¸­ï¼Œtempåè¾¹</span></span><br><span class="line">heroNode.next = temp.next;</span><br><span class="line">temp.next = heroNode;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ˜¾ç¤ºé“¾è¡¨ã€éå†ã€‘</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">list</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//åˆ¤è¯»æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span>(head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é“¾è¡¨ä¸ºç©º&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å› ä¸ºå¤´ç»“ç‚¹ï¼Œä¸èƒ½åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¾…åŠ©å˜é‡æ¥éå†</span></span><br><span class="line"><span class="type">HeroNode</span>  <span class="variable">temp</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯å¦é“¾è¡¨æœ€å</span></span><br><span class="line"><span class="keyword">if</span>(temp == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡ºèŠ‚ç‚¹çš„ä¿¡æ¯</span></span><br><span class="line">System.out.println(temp);</span><br><span class="line"><span class="comment">//å°†nextåç§»,å¦‚æœä¸åç§»å°†è¿›å…¥æ­»å¾ªç¯</span></span><br><span class="line">temp = temp.next ;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªheroNode ,æ¯ä¸ªHeroNodeå¯¹è±¡å°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HeroNode</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> no;</span><br><span class="line"><span class="keyword">public</span> String name;</span><br><span class="line"><span class="keyword">public</span> String nickName;</span><br><span class="line"><span class="keyword">public</span> HeroNode next;<span class="comment">//æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HeroNode</span><span class="params">(<span class="type">int</span> no, String name, String nickName)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line"><span class="built_in">this</span>.no = no;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line"><span class="built_in">this</span>.nickName = nickName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;HeroNode [no=&quot;</span> + no + <span class="string">&quot;, name=&quot;</span> + name + <span class="string">&quot;, nickName=&quot;</span> + nickName + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HeroNode</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ä¿®æ”¹é“¾è¡¨ä¸­çš„å‚æ•°"><a href="#ä¿®æ”¹é“¾è¡¨ä¸­çš„å‚æ•°" class="headerlink" title="ä¿®æ”¹é“¾è¡¨ä¸­çš„å‚æ•°"></a>ä¿®æ”¹é“¾è¡¨ä¸­çš„å‚æ•°</h5><ol><li>å…ˆæ‰¾åˆ°è¯¥èŠ‚ç‚¹ï¼Œé€šè¿‡éå†ã€‚</li><li><code>temp.name = newHeroNode.name;temp.nickName=newHeroNode.nickName;</code></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingleLinkedListDemo</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line"><span class="comment">//åˆ›å»ºèŠ‚ç‚¹</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">hero1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">1</span>,<span class="string">&quot;æ¾æ±Ÿ&quot;</span>,<span class="string">&quot;åŠæ—¶é›¨&quot;</span>);</span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">hero2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">2</span>,<span class="string">&quot;å¢ä¿Šä¹‰&quot;</span>,<span class="string">&quot;ç‰éº’éºŸ&quot;</span>);</span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">hero3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">3</span>,<span class="string">&quot;å´ç”¨&quot;</span>,<span class="string">&quot;æ™ºå¤šæ˜Ÿ&quot;</span>);</span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">hero4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">4</span>,<span class="string">&quot;æ—å†²&quot;</span>,<span class="string">&quot;è±¹å­å¤´&quot;</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºé“¾è¡¨</span></span><br><span class="line"><span class="type">SingleLinkedList</span> <span class="variable">singleLinkedList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SingleLinkedList</span>();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">singleLinkedList.add(hero1);</span></span><br><span class="line"><span class="comment">singleLinkedList.add(hero2);</span></span><br><span class="line"><span class="comment">singleLinkedList.add(hero3);</span></span><br><span class="line"><span class="comment">singleLinkedList.add(hero4);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">singleLinkedList.addByOrder(hero3);</span><br><span class="line">singleLinkedList.addByOrder(hero1);</span><br><span class="line">singleLinkedList.addByOrder(hero4);</span><br><span class="line">singleLinkedList.addByOrder(hero2);</span><br><span class="line">singleLinkedList.addByOrder(hero2);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;ä¿®æ”¹ä¹‹å‰çš„&quot;</span>);</span><br><span class="line">singleLinkedList.list();</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•ä¿®æ”¹èŠ‚ç‚¹çš„ä»£ç </span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">newHeroNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">2</span>,<span class="string">&quot;å°å¢&quot;</span>,<span class="string">&quot;ç‰éº’éºŸÂ·Â·Â·&quot;</span>);</span><br><span class="line">singleLinkedList.update(newHeroNode);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;ä¿®æ”¹ä¹‹åçš„çš„é“¾è¡¨æƒ…å†µ&quot;</span>);</span><br><span class="line"><span class="comment">//æ˜¾ç¤ºé“¾è¡¨</span></span><br><span class="line">singleLinkedList.list();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªSingleLinkedListæ¥ç®¡ç†æˆ‘ä»¬çš„è‹±é›„</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SingleLinkedList</span>&#123;</span><br><span class="line"><span class="comment">//å…ˆåˆå§‹åŒ–ä¸€ä¸ªå¤´ç»“ç‚¹ï¼Œä¸€èˆ¬ä¸Šå¤´ç»“ç‚¹ä¸è¦åŠ¨</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">HeroNode</span> <span class="variable">head</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">0</span>,<span class="string">&quot;&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ·»åŠ èŠ‚ç‚¹åˆ°å•å‘é“¾è¡¨</span></span><br><span class="line"><span class="comment">//æ€è·¯ï¼Œå½“ä¸è€ƒè™‘ç¼–å·é¡ºåºæ—¶</span></span><br><span class="line"><span class="comment">//1 æ‰¾åˆ°å½“å‰é“¾è¡¨çš„æœ€åèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//2,å°†æœ€åè¿™ä¸ªèŠ‚ç‚¹çš„nexæŒ‡å‘æ–°èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(HeroNode heroNode)</span> &#123;</span><br><span class="line"><span class="comment">//å› ä¸ºheadèŠ‚ç‚¹ä¸èƒ½åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¾…åŠ©éå†temo</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">temp</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="comment">//éå†é“¾è¡¨ï¼Œæ‰¾åˆ°æœ€å</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="comment">//æ‰¾åˆ°é“¾è¡¨çš„æœ€å</span></span><br><span class="line"><span class="keyword">if</span>(temp.next == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœæ²¡æœ‰æ‰¾åˆ°æœ€åï¼Œå°†tempåç§»</span></span><br><span class="line">temp = temp.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å½“é€€å‡ºwhileå¾ªç¯åï¼Œtempå°±æŒ‡å‘é“¾è¡¨çš„æœ€å</span></span><br><span class="line"><span class="comment">//å°†æœ€åè¿™ä¸ªèŠ‚ç‚¹çš„nextæŒ‡å‘æ–°çš„èŠ‚ç‚¹</span></span><br><span class="line">temp.next = heroNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒç§æ–¹å¼æ·»åŠ è‹±é›„æ—¶ï¼Œæ ¹æ®æ’åå°†è‹±é›„æ’å…¥åˆ°æŒ‡å®šä½ç½®</span></span><br><span class="line"><span class="comment">//å¦‚æœæœ‰è¿™ä¸ªæ’åï¼Œåˆ™æ·»åŠ å¤±è´¥ï¼Œå¹¶ç»™å‡ºæç¤º</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addByOrder</span><span class="params">(HeroNode heroNode)</span> &#123;</span><br><span class="line"><span class="comment">//å› ä¸ºå¤´ç»“ç‚¹ä¸èƒ½åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬ä»ç„¶é€šè¿‡ä¸€ä¸ªè¾…åŠ©æŒ‡é’ˆï¼ˆå˜é‡ï¼‰æ¥å¸®åŠ©æ‰¾åˆ°æ·»åŠ çš„ä½ç½®</span></span><br><span class="line"><span class="comment">//å› ä¸ºå•é“¾è¡¨ï¼Œå› ä¸ºæˆ‘ä»¬æ‰¾çš„tempæ˜¯ä½äºæ·»åŠ ä½ç½®çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦åˆ™æ’å…¥ä¸äº†</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">temp</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;  <span class="comment">//falseæ ‡è®°æ·»åŠ çš„ç¼–å·æ˜¯å¦å­˜åœ¨ï¼Œé»˜è®¤ä¸ºfalse</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(temp.next == <span class="literal">null</span>) &#123; <span class="comment">//è¯´æ˜æ­¤æ—¶tempå¤„äºé“¾è¡¨çš„æœ€å</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(temp.next.no &gt; heroNode.no) &#123;</span><br><span class="line"><span class="comment">//æ­¤æ—¶ä½ç½®æ‰¾åˆ°ï¼Œå°±åœ¨tempçš„åè¾¹æ’å…¥</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(temp.next.no == heroNode.no) </span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//è¯´æ˜å¸Œæœ›æ·»åŠ çš„heroNodeçš„ç¼–å·å·²ç„¶å­˜åœ¨</span></span><br><span class="line">flag = <span class="literal">true</span>;  <span class="comment">//è¯´æ˜ç¼–å·å­˜åœ¨</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">temp = temp.next;  <span class="comment">//åç§»ï¼Œå˜é‡å½“å‰é“¾è¡¨</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­flagçš„å€¼</span></span><br><span class="line"><span class="keyword">if</span>(flag) &#123;<span class="comment">//ä¸èƒ½æ·»åŠ ï¼Œè¯´æ˜ç¼–å·å­˜åœ¨</span></span><br><span class="line">System.out.printf(<span class="string">&quot;å‡†å¤‡æ’å…¥çš„è‹±é›„çš„ç¼–å·%dï¼Œå·²ç»å­˜åœ¨,æ— æ³•æ·»åŠ \n&quot;</span>,heroNode.no);</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//æ’å…¥åˆ°é“¾è¡¨ä¸­ï¼Œtempåè¾¹</span></span><br><span class="line">heroNode.next = temp.next;</span><br><span class="line">temp.next = heroNode;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¿®è¯¥èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œæ ¹æ®noç¼–å·æ¥ä¿®æ”¹ï¼Œå³noç¼–å·ä¸èƒ½æ›´æ”¹</span></span><br><span class="line"><span class="comment">//è¯´æ˜</span></span><br><span class="line"><span class="comment">//1 æ ¹æ®newHeroNodeçš„noæ¥ä¿®æ”¹ä¾¿å¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(HeroNode newHeroNode)</span> &#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span>(head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é“¾è¡¨ä¸ºç©ºã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰¾åˆ°éœ€è¦ä¿®æ”¹çš„èŠ‚ç‚¹ï¼Œæ ¹æ®noç¼–å·</span></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªè¾…åŠ©å˜é‡</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">temp</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;<span class="comment">//è¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°è¯¥èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(temp == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;<span class="comment">//å·²ç»å˜é‡å®Œé“¾è¡¨</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(temp.no == newHeroNode.no) &#123;</span><br><span class="line"><span class="comment">//æ‰¾åˆ°äº†</span></span><br><span class="line">flag = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">temp = temp.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ ¹æ®flagåˆ¤æ–­æ˜¯å¦æ‰¾åˆ°è¦ä¿®æ”¹çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">if</span>(flag) &#123;</span><br><span class="line">temp.name = newHeroNode.name;</span><br><span class="line">temp.nickName = newHeroNode.nickName;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//æ²¡æœ‰æ‰¾åˆ°</span></span><br><span class="line">System.out.printf(<span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°ç¼–å·%dçš„èŠ‚ç‚¹ï¼Œä¸èƒ½ä¿®æ”¹\n&quot;</span>,newHeroNode.no);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ˜¾ç¤ºé“¾è¡¨ã€éå†ã€‘</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">list</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//åˆ¤è¯»æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span>(head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é“¾è¡¨ä¸ºç©º&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å› ä¸ºå¤´ç»“ç‚¹ï¼Œä¸èƒ½åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¾…åŠ©å˜é‡æ¥éå†</span></span><br><span class="line"><span class="type">HeroNode</span>  <span class="variable">temp</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯å¦é“¾è¡¨æœ€å</span></span><br><span class="line"><span class="keyword">if</span>(temp == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡ºèŠ‚ç‚¹çš„ä¿¡æ¯</span></span><br><span class="line">System.out.println(temp);</span><br><span class="line"><span class="comment">//å°†nextåç§»,å¦‚æœä¸åç§»å°†è¿›å…¥æ­»å¾ªç¯</span></span><br><span class="line">temp = temp.next ;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªheroNode ,æ¯ä¸ªHeroNodeå¯¹è±¡å°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HeroNode</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> no;</span><br><span class="line"><span class="keyword">public</span> String name;</span><br><span class="line"><span class="keyword">public</span> String nickName;</span><br><span class="line"><span class="keyword">public</span> HeroNode next;<span class="comment">//æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HeroNode</span><span class="params">(<span class="type">int</span> no, String name, String nickName)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line"><span class="built_in">this</span>.no = no;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line"><span class="built_in">this</span>.nickName = nickName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;HeroNode [no=&quot;</span> + no + <span class="string">&quot;, name=&quot;</span> + name + <span class="string">&quot;, nickName=&quot;</span> + nickName + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HeroNode</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="åˆ é™¤èŠ‚ç‚¹"><a href="#åˆ é™¤èŠ‚ç‚¹" class="headerlink" title="åˆ é™¤èŠ‚ç‚¹"></a>åˆ é™¤èŠ‚ç‚¹</h5><p>ä»å•é“¾è¡¨ä¸­åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹çš„æ€è·¯</p><ol><li>åˆ é™¤èŠ‚ç‚¹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å°†æœ‰å…³èŠ‚ç‚¹å…ˆæ‰¾åˆ°éœ€è¦åˆ é™¤çš„è¿™ä¸ªèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹temp</li><li><code>temp.next = temp.next.next;</code></li><li>è¢«åˆ é™¤çš„èŠ‚ç‚¹å°†ä¸ä¼šæœ‰å…¶ä»–çš„æŒ‡å‘ï¼Œä¼šè¢«JVMåƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚</li></ol><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingleLinkedListDemo</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line"><span class="comment">//åˆ›å»ºèŠ‚ç‚¹</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">hero1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">1</span>,<span class="string">&quot;æ¾æ±Ÿ&quot;</span>,<span class="string">&quot;åŠæ—¶é›¨&quot;</span>);</span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">hero2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">2</span>,<span class="string">&quot;å¢ä¿Šä¹‰&quot;</span>,<span class="string">&quot;ç‰éº’éºŸ&quot;</span>);</span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">hero3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">3</span>,<span class="string">&quot;å´ç”¨&quot;</span>,<span class="string">&quot;æ™ºå¤šæ˜Ÿ&quot;</span>);</span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">hero4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">4</span>,<span class="string">&quot;æ—å†²&quot;</span>,<span class="string">&quot;è±¹å­å¤´&quot;</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºé“¾è¡¨</span></span><br><span class="line"><span class="type">SingleLinkedList</span> <span class="variable">singleLinkedList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SingleLinkedList</span>();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">singleLinkedList.add(hero1);</span></span><br><span class="line"><span class="comment">singleLinkedList.add(hero2);</span></span><br><span class="line"><span class="comment">singleLinkedList.add(hero3);</span></span><br><span class="line"><span class="comment">singleLinkedList.add(hero4);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">singleLinkedList.addByOrder(hero3);</span><br><span class="line">singleLinkedList.addByOrder(hero1);</span><br><span class="line">singleLinkedList.addByOrder(hero4);</span><br><span class="line">singleLinkedList.addByOrder(hero2);</span><br><span class="line">singleLinkedList.addByOrder(hero2);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;ä¿®æ”¹ä¹‹å‰çš„&quot;</span>);</span><br><span class="line">singleLinkedList.list();</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•ä¿®æ”¹èŠ‚ç‚¹çš„ä»£ç </span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">newHeroNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">2</span>,<span class="string">&quot;å°å¢&quot;</span>,<span class="string">&quot;ç‰éº’éºŸÂ·Â·Â·&quot;</span>);</span><br><span class="line">singleLinkedList.update(newHeroNode);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;ä¿®æ”¹ä¹‹åçš„çš„é“¾è¡¨æƒ…å†µ&quot;</span>);</span><br><span class="line"><span class="comment">//æ˜¾ç¤ºé“¾è¡¨</span></span><br><span class="line">singleLinkedList.list();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">singleLinkedList.del(<span class="number">4</span>);</span><br><span class="line">singleLinkedList.del(<span class="number">1</span>);</span><br><span class="line">singleLinkedList.del(<span class="number">1</span>);</span><br><span class="line"><span class="comment">//åˆ é™¤åçš„é“¾è¡¨æƒ…å†µ</span></span><br><span class="line">System.out.println(<span class="string">&quot;åˆ é™¤åçš„é“¾è¡¨æƒ…å†µã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">singleLinkedList.list();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªSingleLinkedListæ¥ç®¡ç†æˆ‘ä»¬çš„è‹±é›„</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SingleLinkedList</span>&#123;</span><br><span class="line"><span class="comment">//å…ˆåˆå§‹åŒ–ä¸€ä¸ªå¤´ç»“ç‚¹ï¼Œä¸€èˆ¬ä¸Šå¤´ç»“ç‚¹ä¸è¦åŠ¨</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">HeroNode</span> <span class="variable">head</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">0</span>,<span class="string">&quot;&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ·»åŠ èŠ‚ç‚¹åˆ°å•å‘é“¾è¡¨</span></span><br><span class="line"><span class="comment">//æ€è·¯ï¼Œå½“ä¸è€ƒè™‘ç¼–å·é¡ºåºæ—¶</span></span><br><span class="line"><span class="comment">//1 æ‰¾åˆ°å½“å‰é“¾è¡¨çš„æœ€åèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//2,å°†æœ€åè¿™ä¸ªèŠ‚ç‚¹çš„nexæŒ‡å‘æ–°èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(HeroNode heroNode)</span> &#123;</span><br><span class="line"><span class="comment">//å› ä¸ºheadèŠ‚ç‚¹ä¸èƒ½åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¾…åŠ©éå†temo</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">temp</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="comment">//éå†é“¾è¡¨ï¼Œæ‰¾åˆ°æœ€å</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="comment">//æ‰¾åˆ°é“¾è¡¨çš„æœ€å</span></span><br><span class="line"><span class="keyword">if</span>(temp.next == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœæ²¡æœ‰æ‰¾åˆ°æœ€åï¼Œå°†tempåç§»</span></span><br><span class="line">temp = temp.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å½“é€€å‡ºwhileå¾ªç¯åï¼Œtempå°±æŒ‡å‘é“¾è¡¨çš„æœ€å</span></span><br><span class="line"><span class="comment">//å°†æœ€åè¿™ä¸ªèŠ‚ç‚¹çš„nextæŒ‡å‘æ–°çš„èŠ‚ç‚¹</span></span><br><span class="line">temp.next = heroNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒç§æ–¹å¼æ·»åŠ è‹±é›„æ—¶ï¼Œæ ¹æ®æ’åå°†è‹±é›„æ’å…¥åˆ°æŒ‡å®šä½ç½®</span></span><br><span class="line"><span class="comment">//å¦‚æœæœ‰è¿™ä¸ªæ’åï¼Œåˆ™æ·»åŠ å¤±è´¥ï¼Œå¹¶ç»™å‡ºæç¤º</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addByOrder</span><span class="params">(HeroNode heroNode)</span> &#123;</span><br><span class="line"><span class="comment">//å› ä¸ºå¤´ç»“ç‚¹ä¸èƒ½åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬ä»ç„¶é€šè¿‡ä¸€ä¸ªè¾…åŠ©æŒ‡é’ˆï¼ˆå˜é‡ï¼‰æ¥å¸®åŠ©æ‰¾åˆ°æ·»åŠ çš„ä½ç½®</span></span><br><span class="line"><span class="comment">//å› ä¸ºå•é“¾è¡¨ï¼Œå› ä¸ºæˆ‘ä»¬æ‰¾çš„tempæ˜¯ä½äºæ·»åŠ ä½ç½®çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦åˆ™æ’å…¥ä¸äº†</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">temp</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;  <span class="comment">//falseæ ‡è®°æ·»åŠ çš„ç¼–å·æ˜¯å¦å­˜åœ¨ï¼Œé»˜è®¤ä¸ºfalse</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(temp.next == <span class="literal">null</span>) &#123; <span class="comment">//è¯´æ˜æ­¤æ—¶tempå¤„äºé“¾è¡¨çš„æœ€å</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(temp.next.no &gt; heroNode.no) &#123;</span><br><span class="line"><span class="comment">//æ­¤æ—¶ä½ç½®æ‰¾åˆ°ï¼Œå°±åœ¨tempçš„åè¾¹æ’å…¥</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(temp.next.no == heroNode.no) </span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//è¯´æ˜å¸Œæœ›æ·»åŠ çš„heroNodeçš„ç¼–å·å·²ç„¶å­˜åœ¨</span></span><br><span class="line">flag = <span class="literal">true</span>;  <span class="comment">//è¯´æ˜ç¼–å·å­˜åœ¨</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">temp = temp.next;  <span class="comment">//åç§»ï¼Œå˜é‡å½“å‰é“¾è¡¨</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­flagçš„å€¼</span></span><br><span class="line"><span class="keyword">if</span>(flag) &#123;<span class="comment">//ä¸èƒ½æ·»åŠ ï¼Œè¯´æ˜ç¼–å·å­˜åœ¨</span></span><br><span class="line">System.out.printf(<span class="string">&quot;å‡†å¤‡æ’å…¥çš„è‹±é›„çš„ç¼–å·%dï¼Œå·²ç»å­˜åœ¨,æ— æ³•æ·»åŠ \n&quot;</span>,heroNode.no);</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//æ’å…¥åˆ°é“¾è¡¨ä¸­ï¼Œtempåè¾¹</span></span><br><span class="line">heroNode.next = temp.next;</span><br><span class="line">temp.next = heroNode;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¿®è¯¥èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œæ ¹æ®noç¼–å·æ¥ä¿®æ”¹ï¼Œå³noç¼–å·ä¸èƒ½æ›´æ”¹</span></span><br><span class="line"><span class="comment">//è¯´æ˜</span></span><br><span class="line"><span class="comment">//1 æ ¹æ®newHeroNodeçš„noæ¥ä¿®æ”¹ä¾¿å¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(HeroNode newHeroNode)</span> &#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span>(head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é“¾è¡¨ä¸ºç©ºã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰¾åˆ°éœ€è¦ä¿®æ”¹çš„èŠ‚ç‚¹ï¼Œæ ¹æ®noç¼–å·</span></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªè¾…åŠ©å˜é‡</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">temp</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;<span class="comment">//è¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°è¯¥èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(temp == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;<span class="comment">//å·²ç»å˜é‡å®Œé“¾è¡¨</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(temp.no == newHeroNode.no) &#123;</span><br><span class="line"><span class="comment">//æ‰¾åˆ°äº†</span></span><br><span class="line">flag = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">temp = temp.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ ¹æ®flagåˆ¤æ–­æ˜¯å¦æ‰¾åˆ°è¦ä¿®æ”¹çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">if</span>(flag) &#123;</span><br><span class="line">temp.name = newHeroNode.name;</span><br><span class="line">temp.nickName = newHeroNode.nickName;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//æ²¡æœ‰æ‰¾åˆ°</span></span><br><span class="line">System.out.printf(<span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°ç¼–å·%dçš„èŠ‚ç‚¹ï¼Œä¸èƒ½ä¿®æ”¹\n&quot;</span>,newHeroNode.no);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//TODO æ€è·¯</span></span><br><span class="line"><span class="comment">//1. headä¸åŠ¨ï¼Œæ•…è€Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªtempè¾…åŠ©èŠ‚ç‚¹æ‰¾åˆ°ç­‰å¾…åˆ é™¤èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//2.æˆ‘ä»¬åœ¨æ¯”è¾ƒçš„æ—¶å€™ï¼Œæ˜¯temp.next.noå’Œéœ€è¦åˆ é™¤çš„èŠ‚ç‚¹çš„noæ¯”è¾ƒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">del</span><span class="params">(<span class="type">int</span> no)</span> &#123;</span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">temp</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;<span class="comment">//æ ‡å¿—æ˜¯å¦æ‰¾åˆ°å¾…åˆ é™¤èŠ‚ç‚¹çš„</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(temp.next == <span class="literal">null</span>) &#123;<span class="comment">//å·²ç»åˆ°é“¾è¡¨çš„æœ€å</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(temp.next.no == no) &#123;</span><br><span class="line"><span class="comment">//æ‰¾åˆ°å¾…åˆ é™¤èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹temp</span></span><br><span class="line">flag = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">temp = temp.next;<span class="comment">//tempåç§»ï¼Œéå†</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­flag</span></span><br><span class="line"><span class="keyword">if</span>(flag) &#123;<span class="comment">//æ‰¾åˆ°</span></span><br><span class="line"><span class="comment">//å¯ä»¥åˆ é™¤</span></span><br><span class="line">temp.next = temp.next.next;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">System.out.printf(<span class="string">&quot;è¦åˆ é™¤çš„èŠ‚ç‚¹%dä¸å­˜åœ¨\n&quot;</span>,no);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ˜¾ç¤ºé“¾è¡¨ã€éå†ã€‘</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">list</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//åˆ¤è¯»æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span>(head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é“¾è¡¨ä¸ºç©º&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å› ä¸ºå¤´ç»“ç‚¹ï¼Œä¸èƒ½åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¾…åŠ©å˜é‡æ¥éå†</span></span><br><span class="line"><span class="type">HeroNode</span>  <span class="variable">temp</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯å¦é“¾è¡¨æœ€å</span></span><br><span class="line"><span class="keyword">if</span>(temp == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡ºèŠ‚ç‚¹çš„ä¿¡æ¯</span></span><br><span class="line">System.out.println(temp);</span><br><span class="line"><span class="comment">//å°†nextåç§»,å¦‚æœä¸åç§»å°†è¿›å…¥æ­»å¾ªç¯</span></span><br><span class="line">temp = temp.next ;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªheroNode ,æ¯ä¸ªHeroNodeå¯¹è±¡å°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HeroNode</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> no;</span><br><span class="line"><span class="keyword">public</span> String name;</span><br><span class="line"><span class="keyword">public</span> String nickName;</span><br><span class="line"><span class="keyword">public</span> HeroNode next;<span class="comment">//æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HeroNode</span><span class="params">(<span class="type">int</span> no, String name, String nickName)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line"><span class="built_in">this</span>.no = no;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line"><span class="built_in">this</span>.nickName = nickName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;HeroNode [no=&quot;</span> + no + <span class="string">&quot;, name=&quot;</span> + name + <span class="string">&quot;, nickName=&quot;</span> + nickName + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HeroNode</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="é“¾è¡¨é¢è¯•é¢˜ï¼š"><a href="#é“¾è¡¨é¢è¯•é¢˜ï¼š" class="headerlink" title="é“¾è¡¨é¢è¯•é¢˜ï¼š"></a>é“¾è¡¨é¢è¯•é¢˜ï¼š</h5><p>é¢è¯•é¢˜ï¼Œè·å–å•é“¾è¡¨çš„èŠ‚ç‚¹ä¸ªæ•°(å¦‚æœæ˜¯å¸¦å¤´ç»“ç‚¹çš„é“¾è¡¨ï¼Œéœ€æ±‚ä¸ç»Ÿè®¡å¤´ç»“ç‚¹)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> head é“¾è¡¨çš„å¤´èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> è¿”å›çš„å°±æ˜¯æœ‰æ•ˆèŠ‚ç‚¹çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getLength</span><span class="params">(HeroNode head)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(head.next == <span class="literal">null</span>) &#123; <span class="comment">//ç©ºé“¾è¡¨</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªè¾…åŠ©çš„å˜é‡,è¿™é‡Œæˆ‘ä»¬æ²¡æœ‰ç»Ÿè®¡å¤´ç»“ç‚¹</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">cur</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="keyword">while</span>(cur != <span class="literal">null</span>) &#123;</span><br><span class="line">length ++ ;</span><br><span class="line">cur = cur.next; <span class="comment">//éå†</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> length;</span><br><span class="line">&#125;</span><br><span class="line">main:</span><br><span class="line"><span class="comment">//æµ‹è¯•ä¸€ä¸‹å¤´èŠ‚ç‚¹çš„ä¸ªæ•°</span></span><br><span class="line">System.out.println(<span class="string">&quot;æœ‰æ•ˆçš„èŠ‚ç‚¹ä¸ªæ•°ä¸ºï¼š &quot;</span>+getLength(singleLinkedList.getHead()));</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æŸ¥æ‰¾å•é“¾è¡¨ä¸­çš„å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹ã€æ–°æµªé¢è¯•é¢˜ã€‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ€è·¯ï¼š</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œæ¥å—headèŠ‚ç‚¹ï¼ŒåŒæ—¶æ¥å—ä¸€ä¸ªindex</span></span><br><span class="line"><span class="comment"> * indexè¡¨ç¤ºå€’æ•°ç¬¬indexä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * å…ˆå°†é“¾è¡¨ä»å¤´åˆ°å°¾éå†ï¼Œå¾—åˆ°é“¾è¡¨çš„æ€»çš„é•¿åº¦getLength</span></span><br><span class="line"><span class="comment"> * å¾—åˆ°sizeåï¼Œæˆ‘ä»¬ä»é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå¼€å§‹éå†ï¼ˆsize-indexï¼‰ä¸ªï¼Œå°±å¯ä»¥å¾—åˆ°</span></span><br><span class="line"><span class="comment"> * å¦‚æœæ‰¾åˆ°äº†ï¼Œåˆ™è¿”å›è¯¥èŠ‚ç‚¹ï¼Œå¦åˆ™è¿”å›null</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> HeroNode <span class="title function_">findLastIndexNode</span><span class="params">(HeroNode head,<span class="type">int</span> index)</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­å¦‚æœé“¾è¡¨ä¸ºç©ºï¼Œåˆ™è¿”å›null</span></span><br><span class="line"><span class="keyword">if</span>(head.next == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¬¬ä¸€ä¸ªéå†å¾—åˆ°çš„é“¾è¡¨çš„é•¿åº¦çš„ä¸ªæ•°(èŠ‚ç‚¹ä¸ªæ•°)</span></span><br><span class="line"><span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> getLength(head);</span><br><span class="line"><span class="comment">//ç¬¬äºŒæ¬¡éå†size-indexä½ç½®ï¼Œå°±æ˜¯æˆ‘ä»¬å€’æ•°çš„ç¬¬kä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//å…ˆåšä¸€ä¸ªindexçš„æ ¡éªŒ</span></span><br><span class="line"><span class="keyword">if</span>(index &lt;= <span class="number">0</span> || index &gt; size) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å®šä¹‰ç»™è¾…åŠ©å˜é‡ forå¾ªç¯å®šä½å€’æ•°çš„index</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">cur</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size - index; i++) &#123;</span><br><span class="line">cur = cur.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br><span class="line">main:</span><br><span class="line"><span class="comment">//æµ‹è¯•ä¸€äº›çœ‹æ˜¯å¦å¾—åˆ°å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">res</span> <span class="operator">=</span> findLastIndexNode(singleLinkedList.getHead(), <span class="number">1</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;res=&quot;</span> + res);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å•é“¾è¡¨çš„åè½¬ã€è…¾è®¯é¢è¯•ï¼Œéš¾åº¦é€‚ä¸­ã€‘</p><ol><li>å…ˆå®šä¹‰ä¸€ä¸ªèŠ‚ç‚¹<code>reverseHead = new HeroNodeHead</code>çš„æœ€å‰ç«¯ã€‚</li><li>ä»å¤´åˆ°å°¾ä¾¿åˆ©åŸæ¥çš„æŒ‡é’ˆï¼Œæ¯éå†ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±å°†å…¶å–å‡ºï¼Œå¹¶æ”¾åœ¨æ–°çš„é“¾è¡¨reverseHeadçš„æœ€å‰ç«¯ã€‚</li><li>åŸæ¥çš„é“¾è¡¨<code>head.next = reverseHead.next</code>ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å°†å•é“¾è¡¨åè½¬</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reverseList</span><span class="params">(HeroNode head)</span> &#123;</span><br><span class="line"><span class="comment">//å¦‚æœå½“å‰é“¾è¡¨ä¸ºç©ºï¼Œæˆ–è€…åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ— éœ€åè½¬ï¼Œç›´æ¥è¿”å›å°±è¡Œã€‚</span></span><br><span class="line"><span class="keyword">if</span>(head.next == <span class="literal">null</span> || head.next.next == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªè¾…åŠ©çš„æŒ‡é’ˆ(å˜é‡)ï¼Œå¸®åŠ©æˆ‘ä»¬éå†åŸæ¥çš„é“¾è¡¨</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">cur</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">next</span> <span class="operator">=</span> <span class="literal">null</span>; <span class="comment">//æŒ‡å‘å½“å‰èŠ‚ç‚¹[cur]çš„ä¸‹ä¸€èŠ‚ç‚¹</span></span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">reverseHead</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode</span>(<span class="number">0</span>,<span class="string">&quot;&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="comment">//éå†åŸæ¥çš„é“¾è¡¨ï¼Œæ¯éå†ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±å°†å…¶å–å‡ºï¼Œå¹¶åœ¨æ–°çš„é“¾è¡¨reverseHeadçš„æœ€å‰ç«¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//TODO æ€è€ƒ</span></span><br><span class="line"><span class="keyword">while</span>(cur != <span class="literal">null</span>) &#123;</span><br><span class="line">next = cur.next; <span class="comment">//å…ˆæš‚æ—¶ä¿å­˜å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€èŠ‚ç‚¹ï¼Œå› ä¸ºåé¢éœ€è¦ä½¿ç”¨</span></span><br><span class="line">cur.next = reverseHead.next; <span class="comment">//å°†curçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘æ–°çš„é“¾è¡¨çš„æœ€å‰ç«¯</span></span><br><span class="line">reverseHead.next = cur; <span class="comment">//å°†curé“¾æ¥åˆ°æ–°çš„é“¾è¡¨ä¸Š</span></span><br><span class="line">cur = next; <span class="comment">//è®©curåç§»</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å°†head.nextæŒ‡å‘reverseHead.nextï¼Œæ­¤æ—¶å°±å®ç°å•é“¾è¡¨çš„åè½¬</span></span><br><span class="line">head.next = reverseHead.next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main:</span><br><span class="line"><span class="comment">//æµ‹è¯•ä¸€ä¸‹å•é“¾è¡¨çš„åè½¬åŠŸèƒ½</span></span><br><span class="line">System.out.println(<span class="string">&quot;æ­¤æ—¶è¿™ä¸ªæ—¶å€™æ˜¯åŸå…ˆé“¾è¡¨&quot;</span>);</span><br><span class="line">singleLinkedList.list();</span><br><span class="line"></span><br><span class="line"><span class="comment">//åè½¬é“¾è¡¨</span></span><br><span class="line">System.out.println(<span class="string">&quot;åè½¬åçš„å•é“¾è¡¨&quot;</span>);</span><br><span class="line">reverseList(singleLinkedList.getHead());</span><br><span class="line">singleLinkedList.list();</span><br></pre></td></tr></table></figure><p>ä»å°¾åˆ°å¤´æ‰“å°å•é“¾è¡¨ ã€æ–¹å¼1ï¼Œåå‘éå†ï¼Œæ–¹å¼2ï¼šstackæ ˆã€‘</p><p>æ€è·¯ï¼š</p><ol><li><p>ä¸Šé¢çš„é¢˜è¦æ±‚å°±æ˜¯é€†åºæ‰“å°å•é“¾è¡¨ã€‚</p></li><li><p>æ–¹å¼1ï¼šå…ˆå°†å•é“¾è¡¨è¿›è¡Œåè½¬ï¼Œç„¶ååœ¨éå†å°±è¡Œï¼Œä½†æ˜¯è¿™æ ·ä¼šç ´ååŸæ¥çš„å•é“¾è¡¨çš„ç»“æ„ï¼Œ<strong>ä¸å¯å–</strong>ã€‚</p></li><li><p>æ–¹å¼2ï¼šå¯ä»¥åˆ©ç”¨æ ˆè¿™ä¸ªæ•°æ®ç»“æ„ï¼Œå°†å„ä¸ªèŠ‚ç‚¹å‹å…¥æ ˆä¸­ï¼Œç„¶ååˆ©ç”¨æ ˆçš„<strong>å…ˆè¿›åå‡º</strong>çš„ç‰¹ç‚¹ï¼Œå®ç°é€†åºæ‰“å°çš„æ•ˆæœã€‚æ­¤æ–¹å¼ä¸ä¼šå½±å“é“¾è¡¨çš„ç»“æ„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»å°¾åˆ°å¤´æ‰“å°å•é“¾è¡¨</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨æ–¹å¼2ï¼šä¹Ÿå°±æ˜¯å°†é“¾è¡¨ä¸­æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°æ ˆä¸­ï¼Œç„¶åé€šè¿‡æ ˆå°†æ‰€æœ‰å…ƒç´ åè½¬ï¼Œåˆ©ç”¨æ ˆçš„ç‰¹ç‚¹ï¼Œå®ç°é€†åºæ‰“å°</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reversePrint</span><span class="params">(HeroNode head)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(head.next == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> ; <span class="comment">//ç©ºé“¾è¡¨ï¼Œä¸èƒ½æ‰“å°</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ›å»ºè¦ç»™çš„ä¸€ä¸ªæ ˆï¼Œå°†å„ä¸ªèŠ‚ç‚¹å‹å…¥æ ˆä¾¿å¯ã€‚</span></span><br><span class="line">Stack&lt;HeroNode&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;HeroNode&gt;();</span><br><span class="line"><span class="type">HeroNode</span> <span class="variable">cur</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="comment">//å°†é“¾è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹å‹å…¥æ ˆä¸­</span></span><br><span class="line"><span class="keyword">while</span>(cur != <span class="literal">null</span>) &#123;</span><br><span class="line">stack.push(cur);</span><br><span class="line">cur = cur.next; <span class="comment">// curåç§»ï¼Œè¿™æ ·å°±å¯ä»¥å‹å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å°†æ ˆä¸­çš„èŠ‚ç‚¹è¿›è¡Œæ‰“å°ï¼Œpop å‡ºæ ˆ</span></span><br><span class="line"><span class="keyword">while</span>(stack.size() &gt; <span class="number">0</span> ) &#123;</span><br><span class="line">System.out.println(stack.pop());  <span class="comment">//stackçš„ç‰¹ç‚¹æ˜¯å…ˆè¿›åå‡ºçš„ç‰¹ç‚¹</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main:</span><br><span class="line">System.out.println(<span class="string">&quot;é€†åºæ‰“å°å•é“¾è¡¨,æ­¤æ—¶æ²¡æœ‰æ”¹å˜é“¾è¡¨çš„ç»“æ„ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">reversePrint(singleLinkedList.getHead());</span><br></pre></td></tr></table></figure></li></ol><p>åˆå¹¶ä¸¤ä¸ªæœ‰åºçš„å•é“¾è¡¨ï¼Œåˆå¹¶ä¹‹åçš„é“¾è¡¨ä»ç„¶äº•ç„¶æœ‰åºã€ä¹ é¢˜ã€‘</p><p>å•é“¾è¡¨å­˜åœ¨çš„é—®é¢˜ï¼š</p><ol><li>å•é“¾è¡¨ä¸èƒ½å®ç°è‡ªæˆ‘åˆ é™¤ï¼Œå…¶æŸ¥æ‰¾çš„æ–¹å‘åªèƒ½æ˜¯ä¸€ä¸ªæ–¹å‘è€ŒåŒå‘é“¾è¡¨å¯ä»¥å‘å‰æˆ–è€…å‘åæŸ¥æ‰¾</li><li>å•å‘é“¾è¡¨ä¸èƒ½è‡ªæˆ‘åˆ é™¤ï¼Œéœ€è¦é è¾…åŠ©èŠ‚ç‚¹ï¼Œè€ŒåŒå‘é“¾è¡¨ï¼Œå¯ä»¥è‡ªæˆ‘åˆ é™¤ï¼Œæ‰€ä»¥å‰é¢æˆ‘ä»¬å•é“¾è¡¨åˆ é™¤æ—¶èŠ‚ç‚¹ï¼Œæ€»æ˜¯æ‰¾åˆ°tempçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ¥åˆ é™¤ã€‚</li></ol><h3 id="4-2-åŒå‘é“¾è¡¨"><a href="#4-2-åŒå‘é“¾è¡¨" class="headerlink" title="4.2 åŒå‘é“¾è¡¨"></a>4.2 åŒå‘é“¾è¡¨</h3><p>åŒå‘é“¾è¡¨ï¼š</p><p>æ‰€è°“åŒå‘é“¾è¡¨</p><p>é€šä¿—çš„è®²å°±æ˜¯å¯ä»¥ä»ä¸¤ç«¯è¿›è¡ŒæŸ¥æ‰¾ã€‚</p><p>åˆ†æåŒå‘é“¾è¡¨çš„éå†ï¼Œæ·»åŠ ï¼Œä¿®æ”¹ï¼Œåˆ é™¤çš„æ“ä½œæ€è·¯</p><ol><li>éå†çš„æ–¹å¼å’Œå•é“¾è¡¨ä¸€æ ·ï¼Œåªæ˜¯å¯ä»¥å‘å‰æŸ¥æ‰¾ï¼Œä¹Ÿå¯ä»¥å‘åæŸ¥æ‰¾ã€‚</li><li>æ·»åŠ ï¼ˆé»˜è®¤æ·»åŠ æ­é…åŒå‘é“¾è¡¨çš„æœ€åï¼‰<ol><li>å…ˆæ‰¾åˆ°åŒå‘é“¾è¡¨çš„æœ€åè¿™ä¸ªèŠ‚ç‚¹</li><li><code>temp.next = newHeroNode</code></li><li><code>newHeroNode.pre = temp;</code></li></ol></li><li>ä¿®æ”¹çš„æ€è·¯å’ŒåŸç†çš„å•å‘é“¾è¡¨ä¸€æ ·</li><li>åˆ é™¤<ol><li>å› ä¸ºæ˜¯åŒå‘é“¾è¡¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å®ç°è‡ªæˆ‘åˆ é™¤æŸä¸ªèŠ‚ç‚¹</li><li>ç›´æ¥æ‰¾åˆ°è¦åˆ é™¤çš„è¿™ä¸ªèŠ‚ç‚¹ï¼Œæ¯”å¦‚temp</li><li><code>temp.pre.next = temp.next;</code></li><li><code>temp.next.pre = temp.pre;</code></li></ol></li></ol><p>ä»£ç å®ç°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DoubleLinkListDemo</span> &#123;</span><br><span class="line"><span class="comment">//åŒå‘é“¾è¡¨çš„æµ‹è¯•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;åŒå‘é“¾è¡¨çš„æµ‹è¯•ï¼š&quot;</span>);</span><br><span class="line"><span class="comment">//å…ˆåˆ›å»ºèŠ‚ç‚¹</span></span><br><span class="line"><span class="type">HeroNode2</span> <span class="variable">hero1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode2</span>(<span class="number">1</span>,<span class="string">&quot;å¼ ä¸‰&quot;</span>,<span class="string">&quot;é»‘è„¸éº»ç“œ&quot;</span>);</span><br><span class="line"><span class="type">HeroNode2</span> <span class="variable">hero2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode2</span>(<span class="number">2</span>,<span class="string">&quot;æå››&quot;</span>,<span class="string">&quot;çº¢è„¸å ‡ç“œ&quot;</span>);</span><br><span class="line"><span class="type">HeroNode2</span> <span class="variable">hero3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode2</span>(<span class="number">3</span>,<span class="string">&quot;ç‹äº”&quot;</span>,<span class="string">&quot;ç™½è„¸å†¬ç“œ&quot;</span>);</span><br><span class="line"><span class="type">HeroNode2</span> <span class="variable">hero4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode2</span>(<span class="number">4</span>,<span class="string">&quot;èµµå…­&quot;</span>,<span class="string">&quot;ç»¿è„¸è¥¿ç“œ&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">DoubleLinkList</span> <span class="variable">doubleLinkList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DoubleLinkList</span>();</span><br><span class="line">doubleLinkList.add(hero1);</span><br><span class="line">doubleLinkList.add(hero2);</span><br><span class="line">doubleLinkList.add(hero3);</span><br><span class="line">doubleLinkList.add(hero4);</span><br><span class="line"></span><br><span class="line"><span class="comment">//éå†</span></span><br><span class="line">doubleLinkList.list();</span><br><span class="line"><span class="comment">//ä¿®æ”¹</span></span><br><span class="line"><span class="type">HeroNode2</span> <span class="variable">newHeroNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode2</span>(<span class="number">2</span>,<span class="string">&quot;å¾—åŠ›&quot;</span>,<span class="string">&quot;è‡ªç ”è²äºš&quot;</span>);</span><br><span class="line">doubleLinkList.update(newHeroNode);</span><br><span class="line">System.out.println(<span class="string">&quot;ä¿®æ”¹åçš„ç»“æœï¼š&quot;</span>);</span><br><span class="line">doubleLinkList.list();</span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line">doubleLinkList.del(<span class="number">2</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;åˆ é™¤åçš„ç»“æœï¼š&quot;</span>);</span><br><span class="line">doubleLinkList.list();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªåŒå‘é“¾è¡¨çš„ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DoubleLinkList</span>&#123;</span><br><span class="line"><span class="comment">//é€šå•å‘é“¾è¡¨ä¸€æ ·,åˆ›å»ºä¸€ä¸ªå¤´èŠ‚ç‚¹ï¼Œå¤´ç»“ç‚¹ä¸è¦åŠ¨ï¼Œä¸å­˜æ”¾å…·ä½“æ•°æ®</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">HeroNode2</span> <span class="variable">head</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeroNode2</span>(<span class="number">0</span>,<span class="string">&quot;&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> HeroNode2 <span class="title function_">getHead</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//éå†åŒå‘é“¾è¡¨çš„æ–¹æ³•å’Œå•å‘é“¾è¡¨ä¸€æ ·ã€‚</span></span><br><span class="line"><span class="comment">//æ˜¾ç¤ºé“¾è¡¨ã€éå†ã€‘</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">list</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//åˆ¤è¯»æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span>(head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é“¾è¡¨ä¸ºç©º&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å› ä¸ºå¤´ç»“ç‚¹ï¼Œä¸èƒ½åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¾…åŠ©å˜é‡æ¥éå†</span></span><br><span class="line"><span class="type">HeroNode2</span>  <span class="variable">temp</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯å¦é“¾è¡¨æœ€å</span></span><br><span class="line"><span class="keyword">if</span>(temp == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡ºèŠ‚ç‚¹çš„ä¿¡æ¯</span></span><br><span class="line">System.out.println(temp);</span><br><span class="line"><span class="comment">//å°†nextåç§»,å¦‚æœä¸åç§»å°†è¿›å…¥æ­»å¾ªç¯</span></span><br><span class="line">temp = temp.next ;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹åˆ°åŒå‘é“¾è¡¨çš„æœ€å</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(HeroNode2 heroNode)</span> &#123;</span><br><span class="line"><span class="comment">//å› ä¸ºheadèŠ‚ç‚¹ä¸èƒ½åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¾…åŠ©éå†temo</span></span><br><span class="line"><span class="type">HeroNode2</span> <span class="variable">temp</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="comment">//éå†é“¾è¡¨ï¼Œæ‰¾åˆ°æœ€å</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="comment">//æ‰¾åˆ°é“¾è¡¨çš„æœ€å</span></span><br><span class="line"><span class="keyword">if</span>(temp.next == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœæ²¡æœ‰æ‰¾åˆ°æœ€åï¼Œå°†tempåç§»</span></span><br><span class="line">temp = temp.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å½“é€€å‡ºwhileå¾ªç¯åï¼Œtempå°±æŒ‡å‘é“¾è¡¨çš„æœ€å</span></span><br><span class="line"><span class="comment">//æ­¤æ—¶å½¢æˆä¸€ä¸ªåŒå‘é“¾è¡¨</span></span><br><span class="line">temp.next = heroNode;</span><br><span class="line">heroNode.pre = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¿®æ”¹ä¸€ä¸ªèŠ‚ç‚¹çš„å†…å®¹</span></span><br><span class="line"><span class="comment">//åŒå‘é“¾è¡¨çš„èŠ‚ç‚¹å†…å®¹ä¿®æ”¹å’Œå•å‘é“¾è¡¨å‡ ä¹ä¸€æ ·</span></span><br><span class="line"><span class="comment">//åªæ˜¯èŠ‚ç‚¹çš„ç±»å‹æ”¹æˆäº†HeroNode2</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(HeroNode2 newHeroNode)</span> &#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span>(head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é“¾è¡¨ä¸ºç©ºã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰¾åˆ°éœ€è¦ä¿®æ”¹çš„èŠ‚ç‚¹ï¼Œæ ¹æ®noç¼–å·</span></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªè¾…åŠ©å˜é‡</span></span><br><span class="line"><span class="type">HeroNode2</span> <span class="variable">temp</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;<span class="comment">//è¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°è¯¥èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(temp == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;<span class="comment">//å·²ç»å˜é‡å®Œé“¾è¡¨</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(temp.no == newHeroNode.no) &#123;</span><br><span class="line"><span class="comment">//æ‰¾åˆ°äº†</span></span><br><span class="line">flag = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">temp = temp.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ ¹æ®flagåˆ¤æ–­æ˜¯å¦æ‰¾åˆ°è¦ä¿®æ”¹çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">if</span>(flag) &#123;</span><br><span class="line">temp.name = newHeroNode.name;</span><br><span class="line">temp.nickName = newHeroNode.nickName;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//æ²¡æœ‰æ‰¾åˆ°</span></span><br><span class="line">System.out.printf(<span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°ç¼–å·%dçš„èŠ‚ç‚¹ï¼Œä¸èƒ½ä¿®æ”¹\n&quot;</span>,newHeroNode.no);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»åŒå‘é“¾è¡¨ä¸­åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//è¯´æ˜</span></span><br><span class="line"><span class="comment">//1 å¯¹äºåŒå‘é“¾è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰¾åˆ°è¦åˆ é™¤çš„è¿™ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//2 æ‰¾åˆ°åï¼Œè‡ªæˆ‘åˆ é™¤å³å¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">del</span><span class="params">(<span class="type">int</span> no)</span> &#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­å½“å‰é“¾è¡¨æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span>(head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é“¾è¡¨ä¸ºç©ºï¼Œæ— æ³•åˆ é™¤&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">HeroNode2</span> <span class="variable">temp</span> <span class="operator">=</span> head.next; <span class="comment">//è¾…åŠ©å˜é‡(æŒ‡é’ˆ)</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;<span class="comment">//æ ‡å¿—æ˜¯å¦æ‰¾åˆ°å¾…åˆ é™¤èŠ‚ç‚¹çš„</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(temp == <span class="literal">null</span>) &#123;<span class="comment">//å·²ç»åˆ°é“¾è¡¨çš„æœ€å</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(temp.no == no) &#123;</span><br><span class="line"><span class="comment">//æ‰¾åˆ°å¾…åˆ é™¤èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹temp</span></span><br><span class="line">flag = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">temp = temp.next;<span class="comment">//tempåç§»ï¼Œéå†</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­flag</span></span><br><span class="line"><span class="keyword">if</span>(flag) &#123;<span class="comment">//æ‰¾åˆ°</span></span><br><span class="line"><span class="comment">//å¯ä»¥åˆ é™¤</span></span><br><span class="line"><span class="comment">//temp.next = temp.next.next; ã€å•å‘é“¾è¡¨çš„åˆ é™¤æ–¹å¼ã€‘</span></span><br><span class="line">temp.pre.next = temp.next;</span><br><span class="line"><span class="comment">//æ­¤æ—¶ä»¥ä¸‹ä»£ç å­˜åœ¨é—®é¢˜ï¼Œå¦‚æœæ˜¯ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±ä¸éœ€è¦æ‰§è¡Œä¸‹è¾¹è¯­å¥ï¼Œå¦åˆ™å°†ä¼šäº§ç”Ÿç©ºæŒ‡é’ˆé—®é¢˜ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(temp.next != <span class="literal">null</span>) &#123;</span><br><span class="line">temp.next.pre = temp.pre;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">System.out.printf(<span class="string">&quot;è¦åˆ é™¤çš„èŠ‚ç‚¹%dä¸å­˜åœ¨\n&quot;</span>,no);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HeroNode2</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> no;</span><br><span class="line"><span class="keyword">public</span> String name;</span><br><span class="line"><span class="keyword">public</span> String nickName;</span><br><span class="line"><span class="keyword">public</span> HeroNode2 next; <span class="comment">//æŒ‡å‘åä¸€ä¸ªèŠ‚ç‚¹ï¼Œé»˜è®¤ä¸ºnull</span></span><br><span class="line"><span class="keyword">public</span> HeroNode2 pre; <span class="comment">//æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹,é»˜è®¤ä¸ºnull</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HeroNode2</span><span class="params">(<span class="type">int</span> no, String name, String nickName)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line"><span class="built_in">this</span>.no = no;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line"><span class="built_in">this</span>.nickName = nickName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HeroNode2</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;HeroNode2 [no=&quot;</span> + no + <span class="string">&quot;, name=&quot;</span> + name + <span class="string">&quot;, nickName=&quot;</span> + nickName </span><br><span class="line">+ <span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹ é¢˜ï¼š</p><p>åŒå‘é“¾è¡¨çš„ç¬¬äºŒç§æ·»åŠ æ–¹å¼ï¼ŒæŒ‰ç…§ç¼–å·é¡ºåºï¼ˆæç¤ºï¼ŒæŒ‰ç…§å•é“¾è¡¨çš„é¡ºåºè¿›è¡Œæ·»åŠ å³å¯ï¼Œç¨ä½œä¿®æ”¹ï¼‰;</p><h3 id="4-3-å•å‘ç¯å½¢é“¾è¡¨ï¼š"><a href="#4-3-å•å‘ç¯å½¢é“¾è¡¨ï¼š" class="headerlink" title="4.3 å•å‘ç¯å½¢é“¾è¡¨ï¼š"></a>4.3 å•å‘ç¯å½¢é“¾è¡¨ï¼š</h3><p>çº¦ç‘Ÿå¤«é—®é¢˜ï¼šè®¾ç¼–å·ä¸º1,2,â€¦.n,çš„nä¸ªäººå›´ååœ¨ä¸€åœˆï¼Œçº¦å®šç¼–å·ä¸ºk(1&lt;= k &lt;=m)çš„äººä»1å¼€å§‹æŠ¥æ•°ï¼Œæ•°åˆ°ä»1å¼€å§‹æŠ¥æ•°ï¼Œæ•°åˆ°mçš„é‚£ä¸ªäººå‡ºåˆ—ï¼Œä»–çš„ä¸‹ä¸€ä½åˆä»1å¼€å§‹æŠ¥æ•°ï¼Œæ•°åˆ°mçš„é‚£ä¸ªäººåˆå‡ºåˆ—ï¼Œä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰äººå‡ºåˆ—ä¸ºæ­¢ï¼Œç”±æ­¤äº§ç”Ÿä¸€ä¸ªå‡ºé˜Ÿç¼–å·çš„åºåˆ—ã€‚</p><blockquote><p>n = 5,å³æœ‰5ä¸ªäºº</p><p>k =1ï¼Œä»ç¬¬ä¸€ä¸ªäººå¼€å§‹æŠ¥æ•°</p><p>m=2,æ•°2ä¸‹ã€‚</p></blockquote><p>æ€è·¯ï¼š</p><ol><li>å…ˆåˆ›å»ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè®©firstæŒ‡å‘è¯¥èŠ‚ç‚¹ï¼Œå¹¶å½¢æˆç¯å½¢</li><li>åé¢å½“æˆ‘ä»¬æ²¡åˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œå°±å°†è¯¥èŠ‚ç‚¹åŠ å…¥åˆ°å·²æœ‰çš„ç¯å½¢é“¾è¡¨å³å¯ã€‚</li></ol><p>éå†ç¯å½¢é“¾è¡¨ï¼š</p><ol><li><p>å…ˆè®©ä¸€ä¸ªè¾…åŠ©æŒ‡é’ˆï¼ˆå˜é‡ï¼‰ curBoyï¼ŒæŒ‡å‘firstèŠ‚ç‚¹</p></li><li><p>ç„¶åé€šè¿‡ä¸€ä¸ªwhileå¾ªç¯è¯¥ç¯å½¢é“¾è¡¨å³å¯ï¼Œ<code>curBoy.next == first;</code></p></li><li><p>æ ¹æ®ç”¨æˆ·çš„è¾“å…¥ï¼Œç”Ÿæˆä¸€ä¸ªå°å­©å‡ºåœˆçš„é¡ºåºï¼Œäº‹å…ˆåº”è¯¥æŒ‡å‘ç¯å½¢é“¾è¡¨çš„æœ€åè¿™ä¸ªèŠ‚ç‚¹ã€‚</p><p>â€‹    è¡¥å……ï¼šå°å­©æŠ¥æ•°ä¹‹å‰ï¼Œå…ˆè®©firstå’Œhelperç§»åŠ¨ k -1 æ¬¡</p></li><li><p>å½“å°å­©æŠ¥æ•°æ—¶ï¼Œè®©firstå’ŒhelperæŒ‡é’ˆåŒæ—¶ç§»åŠ¨m -1æ¬¡</p></li><li><p>è¿™ä¸ªæ—¶å€™å°±å¯ä»¥å°†firstæŒ‡å‘çš„å°å­©èŠ‚ç‚¹å‡ºåœˆï¼›</p><ol><li>first = first.next</li><li>helper.next =first;</li></ol><p>åŸæ¥firstæŒ‡å‘çš„èŠ‚ç‚¹å°±æ²¡æœ‰ä»»ä½•å¼•ç”¨ï¼Œå°±ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Josepfu</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//æµ‹è¯•çœ‹æ„å»ºç¯å½¢é˜Ÿåˆ—å’Œéå†æ˜¯å¦æ­£ç¡®</span></span><br><span class="line"><span class="type">CircleSinglelinkedList</span> <span class="variable">circleSinglelinkedList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CircleSinglelinkedList</span>();</span><br><span class="line">circleSinglelinkedList.addBoy(<span class="number">10</span>); <span class="comment">//åŠ å…¥5ä¸ªå°å­©èŠ‚ç‚¹</span></span><br><span class="line">circleSinglelinkedList.showBoy();</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•å°å­©å‡ºåœˆæ˜¯å¦æ­£ç¡®</span></span><br><span class="line">circleSinglelinkedList.countBoy(<span class="number">1</span>, <span class="number">2</span>, <span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªç¯å½¢çš„å•å‘é“¾è¡¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CircleSinglelinkedList</span>&#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªfirstèŠ‚ç‚¹ï¼Œå½“å‰æ²¡æœ‰ç¼–å·</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">Boy</span> <span class="variable">first</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Boy</span>(-<span class="number">1</span>);</span><br><span class="line"><span class="comment">//æ·»åŠ å°å­©èŠ‚ç‚¹ï¼Œæ„å»ºä¸€ä¸ªç¯å½¢çš„é“¾è¡¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addBoy</span><span class="params">(<span class="type">int</span> nums)</span> &#123;</span><br><span class="line"><span class="comment">//nums åšä¸€ä¸ªæ•°æ®æ ¡éªŒ</span></span><br><span class="line"><span class="keyword">if</span>(nums &lt; <span class="number">1</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;numsçš„å€¼ä¸æ­£ç¡®&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Boy</span> <span class="variable">curBoy</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">// è¾…åŠ©æŒ‡é’ˆï¼Œå¸®åŠ©æ„å»ºç¯å½¢é“¾è¡¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨foræ¥åˆ›å»ºæˆ‘ä»¬çš„ç¯å½¢é“¾è¡¨</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= nums; i++) &#123;</span><br><span class="line"><span class="comment">//æ ¹æ®ç¼–å·åˆ›å»ºå°å­©èŠ‚ç‚¹</span></span><br><span class="line"><span class="type">Boy</span> <span class="variable">boy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Boy</span>(i);</span><br><span class="line"><span class="comment">//å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªå°å­©</span></span><br><span class="line"><span class="keyword">if</span>(i == <span class="number">1</span>) &#123;</span><br><span class="line">first = boy;</span><br><span class="line">first.setNext(first); <span class="comment">//æ„æˆå¾ªç¯</span></span><br><span class="line">curBoy = first; <span class="comment">// è®©curBoyæŒ‡å‘ç¬¬ä¸€ä¸ªå°å­©</span></span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">curBoy.setNext(boy);<span class="comment">//</span></span><br><span class="line">boy.setNext(first);</span><br><span class="line">curBoy = boy;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//éå†å½“å‰ç¯å¢ƒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showBoy</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span>(first == <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ²¡æœ‰ä»»ä½•å°å­©...&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å› ä¸ºfirstä¸èƒ½åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬ä»ç„¶ä½¿ç”¨ä¸€ä¸ªè¾…åŠ©æŒ‡é’ˆå®Œæˆéå†</span></span><br><span class="line"><span class="type">Boy</span> <span class="variable">curBoy</span> <span class="operator">=</span> first;</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">System.out.printf(<span class="string">&quot;å°å­©çš„ç¼–å· %d \n&quot;</span>,curBoy.getNo());</span><br><span class="line"><span class="keyword">if</span>(curBoy.getNext() == first) &#123; <span class="comment">//è¯´æ˜å·²ç»éå†å®Œæˆ</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">curBoy = curBoy.getNext(); <span class="comment">//å°†curBoyåç§»</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ¹æ®ç”¨æˆ·çš„è¾“å…¥ï¼Œè®¡ç®—å‡ºå°å­©å‡ºåœˆçš„é¡ºåº</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> startNo è¡¨ç¤ºç¬¬å‡ ä¸ªå°å­©å¼€å§‹è®¡æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> countNum è¡¨ç¤ºæ•°å¤šå°‘ä¸‹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> nums è¡¨ç¤ºæœ€åˆæœ‰å¤šå°‘ä¸ªå°å­©å­åœ¨åœˆä¸­</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">countBoy</span><span class="params">(<span class="type">int</span> startNo,<span class="type">int</span> countNum, <span class="type">int</span> nums)</span> &#123;</span><br><span class="line"><span class="comment">//å…ˆå¯¹æ•°æ®è¿›è¡Œæ ¡éªŒ</span></span><br><span class="line"><span class="keyword">if</span>(first == <span class="literal">null</span> || startNo &lt; <span class="number">1</span> || startNo &gt; nums) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;å‚æ•°è¾“å…¥é”™è¯¯ï¼Œè¯·é‡å†™è¾“å…¥ï¼š&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ›å»ºè¦ç»™è¾…åŠ©æŒ‡é’ˆï¼Œå¸®åŠ©å®Œæˆå°å­©å‡ºåœˆ</span></span><br><span class="line"><span class="type">Boy</span> <span class="variable">helper</span> <span class="operator">=</span> first;</span><br><span class="line"><span class="comment">//éœ€æ±‚åˆ›å»ºä¸€ä¸ªè¾…åŠ©æŒ‡é’ˆ(å˜é‡) helperï¼Œäº‹å…ˆåº”è¯¥æŒ‡å‘ç¯å½¢é“¾è¡¨çš„æœ€åè¿™ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(helper.getNext() == first) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">helper = helper.getNext();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å°å­©æŠ¥æ•°å‰ï¼Œå…ˆè®©firstå’Œhelperç§»åŠ¨ k - 1æ¬¡</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; startNo - <span class="number">1</span>; j++) &#123;</span><br><span class="line">first = first.getNext();</span><br><span class="line">helper = helper.getNext();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å½“å°å­©æŠ¥æ•°çš„æ—¶å€™ï¼Œè®©firstå’ŒhelperæŒ‡é’ˆåŒæ—¶ç§»åŠ¨ m - 1æ¬¡ï¼Œç„¶åå‡ºåœˆ</span></span><br><span class="line"><span class="comment">//è¿™é‡Œæ˜¯ä¸€ä¸ªå¾ªç¯æ“ä½œï¼ŒçŸ¥é“åœˆä¸­åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(helper == first) &#123;</span><br><span class="line"><span class="comment">//è¯´æ˜åœˆä¸­åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®©firstå’ŒhelperæŒ‡é’ˆåŒæ—¶ç§»åŠ¨countNum - 1;</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; countNum -<span class="number">1</span>; j++ ) &#123;</span><br><span class="line">first = first.getNext();</span><br><span class="line">helper = helper.getNext();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿™æ—¶firstæŒ‡å‘çš„èŠ‚ç‚¹ï¼Œå°±æ˜¯è¦å‡ºåœˆçš„å°å­©èŠ‚ç‚¹</span></span><br><span class="line">System.out.printf(<span class="string">&quot;å°å­©%då‡ºåœˆ\n&quot;</span>,first.getNo());</span><br><span class="line"><span class="comment">//æ­¤æ—¶å°†firstæŒ‡å‘çš„å°å­©èŠ‚ç‚¹å‡ºåœˆ</span></span><br><span class="line">first = first.getNext();</span><br><span class="line">helper.setNext(first); <span class="comment">//</span></span><br><span class="line">&#125;</span><br><span class="line">System.out.printf(<span class="string">&quot;æœ€åç•™åœ¨åœˆä¸­çš„å°å­©ç¼–å·%d\n&quot;</span>,first.getNo());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Boy</span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> no;<span class="comment">//ç¼–å·</span></span><br><span class="line"><span class="keyword">private</span> Boy next; <span class="comment">//æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé»˜è®¤ä¸ºnull</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Boy</span><span class="params">(<span class="type">int</span> no)</span> &#123;</span><br><span class="line"><span class="built_in">super</span>();</span><br><span class="line"><span class="built_in">this</span>.no = no;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getNo</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> no;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNo</span><span class="params">(<span class="type">int</span> no)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.no = no;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> Boy <span class="title function_">getNext</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNext</span><span class="params">(Boy next)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.next = next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;Boy [no=&quot;</span> + no + <span class="string">&quot;, next=&quot;</span> + next + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-æ ˆ"><a href="#5-æ ˆ" class="headerlink" title="5.æ ˆ"></a>5.æ ˆ</h2><ol><li>æ ˆçš„è‹±æ–‡Stack</li><li>æ ˆæ˜¯ä¸€ç§<strong>å…ˆå…¥åå‡º</strong>(FILO - First in Last Out)çš„æœ‰åºåˆ—è¡¨</li><li>æ ˆæ˜¯é™åˆ¶çº¿æ€§è¡¨ä¸­å…ƒç´ çš„æ’å…¥å’Œåˆ é™¤<strong>åªèƒ½åœ¨çº¿æ€§è¡¨çš„åŒä¸€ç«¯</strong>è¿›è¡Œç‰¹æ®Šçº¿æ€§è¡¨ã€‚å…è®¸æ’å…¥å’Œåˆ é™¤çš„ä¸€ç«¯ï¼Œä¸ºå˜åŒ–çš„ä¸€ç«¯ç§°ä¸º<strong>æ ˆé¡¶</strong>ï¼ˆTopï¼‰,å¦ä¸€ç«¯ä¸ºå›ºå®šçš„ä¸€ç«¯ï¼Œç§°ä¸º<strong>æ ˆåº•</strong>ï¼ˆBottomï¼‰;</li><li>æ ¹æ®æ ˆçš„å®šä¹‰å¯çŸ¥ï¼Œæœ€å…ˆæ”¾å…¥æ ˆä¸­å…ƒç´ åœ¨æ ˆåº•ï¼Œæœ€åæ”¾å…¥çš„å…ƒç´ åœ¨æ ˆé¡¶ï¼Œè€Œåˆ é™¤å…ƒç´ åˆšå¥½ç›¸åï¼Œæœ€åæ”¾å…¥çš„å…ƒç´ æœ€å…ˆåˆ é™¤ï¼Œæœ€åæ”¾å…¥çš„å…ƒç´ æœ€ååˆ é™¤ã€‚</li><li><p>å…¥æ ˆ<strong>push</strong>,å‡ºæ ˆ<strong>pop</strong>ã€‚</p><ol><li>å­ç¨‹åºçš„è°ƒç”¨ï¼šåœ¨è·³å¾€å­ç¨‹åºå‰ï¼Œä¼šå…ˆåŠ ä¸ªä¸‹ä¸€ä¸ªæŒ‡ä»¤çš„åœ°å€å­˜æ”¾åˆ°å †æ ˆä¸­ï¼Œç›´åˆ°å­ç¨‹åºæ‰§è¡Œå®Œåå†å°†åœ°å€å–å‡ºï¼Œä»¥å›åˆ°åŸæ¥çš„ç¨‹åºä¸­ã€‚</li><li>å¤„ç†é€’å½’è°ƒç”¨ï¼Œæ‰€è°“é€’å½’ï¼Œå°±æ˜¯æ–¹æ³•è‡ªå·±è°ƒç”¨è‡ªå·±æœ¬èº«ã€‚ä¸å­ç¨‹åºçš„è°ƒç”¨ç±»ä¼¼ï¼Œåªæ˜¯é™¤äº†å­˜å‚¨ä¸‹ä¸€ä¸ªæŒ‡ä»¤çš„åœ°å€å¤–ï¼Œä¹Ÿå°†å‚æ•°ï¼ŒåŒºåŸŸå˜é‡ç­‰æ•°æ®å­˜å…¥å †æ ˆä¸­ã€‚</li><li>è¡¨è¾¾å¼çš„è½¬æ¢[ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€è¡¨è¾¾å¼]ä¸æ±‚å€¼ã€‚</li><li>äºŒå‰æ ‘çš„å˜é‡</li><li>å›¾å½¢çš„æ·±åº¦ä¼˜å…ˆ(depth-first)æœç´¢æ³•ã€‚</li></ol></li></ol><h3 id="5-1-æ ˆçš„æ¨¡æ‹Ÿå®ç°"><a href="#5-1-æ ˆçš„æ¨¡æ‹Ÿå®ç°" class="headerlink" title="5.1 æ ˆçš„æ¨¡æ‹Ÿå®ç°"></a>5.1 æ ˆçš„æ¨¡æ‹Ÿå®ç°</h3><p>å®ç°æ ˆçš„æ€è·¯ï¼š</p><ol><li>ä½¿ç”¨æ•°ç»„æ¥æ¨¡æ‹Ÿæ ˆ</li><li>å®šä¹‰ä¸€ä¸ªtopæ¥æ¨¡æ‹Ÿæ ˆé¡¶ï¼Œåˆå§‹åŒ–ä¸º -1ï¼›</li><li>å…¥æ ˆçš„æ“ä½œï¼Œå½“æœ‰æ•°æ®åŠ å…¥æ ˆæ—¶ï¼Œ<code>top++ ; stack[top] = data;</code></li><li>å‡ºæ ˆçš„æ“ä½œï¼Œ<code>int value = stack[top]; top -- ;return value;</code></li></ol><p>åæ­£æœ‰é”™è¯¯ï¼Œbugä¸€ç›´éƒ½æœ‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayStackDemo</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//æµ‹è¯•ä¸€ä¸‹ArrayStackæ˜¯å¦æ­£ç¡®</span></span><br><span class="line"><span class="comment">//å…ˆåˆ›å»ºä¸€ä¸ªArrayStackå¯¹è±¡ï¼Œè¡¨ç¤ºæ ˆ</span></span><br><span class="line"><span class="type">ArrayStack</span> <span class="variable">stack</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayStack</span>(<span class="number">4</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">loop</span> <span class="operator">=</span> <span class="literal">true</span>; <span class="comment">//æ§åˆ¶æ˜¯å¦é€€å‡ºèœå•</span></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="keyword">while</span>(loop) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;showï¼šè¡¨ç¤ºå±•ç¤ºæ ˆ&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;exitï¼šè¡¨ç¤ºé€€å‡ºæ ˆ&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;pushï¼šè¡¨ç¤ºæ·»åŠ æ•°æ®åˆ°æ ˆ&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;popï¼šè¡¨ç¤ºä»æ ˆå–å‡ºæ•°æ®&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;è¯·è¾“å…¥ä½ çš„æ“ä½œ&quot;</span>);</span><br><span class="line">key = sc.next();</span><br><span class="line"><span class="keyword">switch</span>(key) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;show&quot;</span>:</span><br><span class="line">stack.list();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;push&quot;</span>:</span><br><span class="line">System.out.println(<span class="string">&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•°&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">stack.push(value);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;pop&quot;</span>:</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">System.out.printf(<span class="string">&quot;å‡ºæ ˆçš„æ•°æ®æ˜¯%d\n&quot;</span>,res);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">System.out.println(e.getMessage());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;exit&quot;</span>:</span><br><span class="line">sc.close();</span><br><span class="line">loop = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;ç¨‹åºé€€å‡ºäº†&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªArrayStackè¡¨ç¤ºæ ˆ</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ArrayStack</span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> maxSize;<span class="comment">//æ ˆçš„å¤§å°</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span>[] stack;<span class="comment">//æ•°ç»„ï¼Œæ•°ç»„æ¨¡æ‹Ÿæ ˆï¼Œæ•°æ®å°±æˆ¿å­è¯¥æ•°ç»„</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="variable">top</span> <span class="operator">=</span>-<span class="number">1</span>; <span class="comment">//topè¡¨ç¤ºæ ˆé¡¶ï¼Œåˆå§‹åŒ–ä¸º-1;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayStack</span><span class="params">(<span class="type">int</span> maxSize)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.maxSize = maxSize;</span><br><span class="line">stack = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="built_in">this</span>.maxSize];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å †æ»¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> top == maxSize -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ˆç©º</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> top == -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å…¥æ ˆ-push</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line"><span class="comment">//å…ˆåˆ¤æ–­æ ˆæ˜¯å¦æ»¡</span></span><br><span class="line"><span class="keyword">if</span>(isFull()) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ ˆæ»¡&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line">top ++;</span><br><span class="line">stack[top] = value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‡ºæ ˆ-pop,å°†æ ˆé¡¶çš„æ•°æ®è¿›è¡Œè¿”å›</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line"><span class="comment">//æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;æ ˆç©ºï¼Œæ²¡æœ‰æ•°æ®Â·Â·Â·&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> stack[top];</span><br><span class="line">top --;</span><br><span class="line"><span class="keyword">return</span> value;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ˜¾ç¤ºæ ˆçš„æƒ…å†µã€éå†æ ˆã€‘ï¼Œéå†æ˜¯éœ€è¦ä»æ ˆé¡¶å¼€å§‹æ˜¾ç¤ºæ•°æ®</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">list</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ ˆç©ºï¼Œæ²¡æœ‰æ•°æ®Â·Â·Â·&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//éœ€è¦ä»æ ˆé¡¶å¼€å§‹æ˜¾ç¤ºæ•°æ®</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> top; i &gt;= <span class="number">0</span> ; i--) &#123;</span><br><span class="line">System.out.printf(<span class="string">&quot;stack[%d]=%d\n&quot;</span>,i,stack[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-2-ä½¿ç”¨æ ˆå®ç°è®¡ç®—æœº"><a href="#5-2-ä½¿ç”¨æ ˆå®ç°è®¡ç®—æœº" class="headerlink" title="5.2 ä½¿ç”¨æ ˆå®ç°è®¡ç®—æœº"></a>5.2 ä½¿ç”¨æ ˆå®ç°è®¡ç®—æœº</h3><p>è¯•é¢˜ï¼š ä½¿ç”¨æ ˆå®Œæˆè¡¨è¾¾å¼7 <em> 2 </em> 2 - 5  + 1 - 5 + 3 - 4 =ï¼Ÿ</p><p> æ€è·¯ï¼š</p><ol><li>é€šè¿‡ä¸€ä¸ªindexå€¼(ç´¢å¼•).æ¥å˜é‡æˆ‘ä»¬çš„è¡¨è¾¾å¼</li><li>å¦‚æœæˆ‘ä»¬å‘ç°æ˜¯ä¸€ä¸ªæ•°å­—å°±ç›´æ¥å…¥æ ˆ</li><li>å¦‚æœå‘ç°æ‰«æåˆ°çš„æ˜¯ä¸€ä¸ªç¬¦å·ï¼Œå°±åˆ†å¦‚ä¸‹æƒ…å†µè¿›è¡Œåˆ†æ<ol><li>å¦‚æœå‘ç°å½“å‰ç¬¦å·ä¸ºç©ºï¼Œåˆ™ç›´æ¥å…¥æ ˆ</li><li>å¦‚æœç¬¦å·æ ˆæœ‰æ“ä½œç¬¦ï¼Œå°±è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå½“å‰çš„æ“ä½œç¬¦çš„ä¼˜å…ˆçº§å°äºæˆ–è€…ç­‰äºæ ˆä¸­çš„æ“ä½œç¬¦ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦ä»æ•°æ ˆä¸­popå‡ºä¸¤ä¸ªæ•°ï¼Œåœ¨ä»ç¬¦å·æ ˆä¸­popå‡ºä¸€ä¸ªç¬¦å·ï¼Œè¿›è¡Œè¿ç®—ï¼Œå°†å¾—åˆ°ç»“æœï¼Œå…¥æ•°æ ˆï¼Œç„¶åå°†å½“å‰çš„æ“ä½œç¬¦æ’å…¥ç¬¦å·æ ˆ</li><li>å¦‚æœå½“å‰ç¬¦å·æ ˆä¸­æœ‰æ“ä½œç¬¦ï¼Œå°±è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå½“å‰æ“ä½œç¬¦çš„ä¼˜å…ˆçº§å°äºæˆ–è€…ç­‰äºæ ˆä¸­çš„æ“ä½œç¬¦ï¼Œå°±éœ€è¦ä»æ•°æ ˆä¸­popå‡ºä¸¤ä¸ªæ•°ï¼Œåœ¨ä»ç¬¦å·æ ˆä¸­popä¸€ä¸ªç¬¦å·ï¼Œè¿›è¡Œè¿ç®—ï¼Œå°†å¾—åˆ°ç»“æœï¼Œå…¥æ•°æ ˆï¼Œç„¶åå°†å½“å‰çš„æ“ä½œç¬¦å…¥ç¬¦å·æ ˆï¼Œå¦‚æœå½“å‰çš„æ“ä½œç¬¦çš„ä¼˜å…ˆçº§å¤§äºæ ˆä¸­çš„æ“ä½œç¬¦ï¼Œå°±ç›´æ¥å…¥ç¬¦å·æ ˆã€‚</li></ol></li><li>å½“è¡¨è¾¾å¼æ‰«æå®Œæ¯•ï¼Œå°±é¡ºåºçš„ä»æ•°æ ˆå’Œç¬¦å·æ ˆä¸­popå‡ºç›¸åº”çš„æ•°å’Œç¬¦å·ï¼Œå¹¶è¿è¡Œã€‚</li><li>æœ€ååœ¨æ•°æ ˆåªæœ‰ä¸€ä¸ªæ•°å­ï¼Œå°±æ˜¯è¡¨è¾¾å¼çš„ç»“æœã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Calculator1</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//æ ¹æ®å‰é¢è€å¸ˆæ€è·¯ï¼Œå®Œæˆè¡¨è¾¾å¼çš„è¿ç®—</span></span><br><span class="line"><span class="type">String</span> <span class="variable">expression</span> <span class="operator">=</span> <span class="string">&quot;3-2*1+1&quot;</span>; <span class="comment">// //å¦‚ä½•å¤„ç†å¤šä½æ•°çš„é—®é¢˜ï¼Ÿ</span></span><br><span class="line"><span class="comment">//åˆ›å»ºä¸¤ä¸ªæ ˆï¼Œæ•°æ ˆï¼Œä¸€ä¸ªç¬¦å·æ ˆ</span></span><br><span class="line"><span class="type">ArrayStack2</span> <span class="variable">numStack</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayStack2</span>(<span class="number">10</span>);</span><br><span class="line"><span class="type">ArrayStack2</span> <span class="variable">operStack</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayStack2</span>(<span class="number">10</span>);</span><br><span class="line"><span class="comment">//å®šä¹‰éœ€è¦çš„ç›¸å…³å˜é‡</span></span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;<span class="comment">//ç”¨äºæ‰«æ</span></span><br><span class="line"><span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">oper</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="type">char</span> <span class="variable">ch</span> <span class="operator">=</span> <span class="string">&#x27; &#x27;</span>; <span class="comment">//å°†æ¯æ¬¡æ‰«æå¾—åˆ°charä¿å­˜åˆ°ch</span></span><br><span class="line"><span class="type">String</span> <span class="variable">keepNum</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>; <span class="comment">//ç”¨äºæ‹¼æ¥ å¤šä½æ•°</span></span><br><span class="line"><span class="comment">//å¼€å§‹whileå¾ªç¯çš„æ‰«æexpression</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="comment">//ä¾æ¬¡å¾—åˆ°expression çš„æ¯ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line">ch = expression.substring(index, index+<span class="number">1</span>).charAt(<span class="number">0</span>);</span><br><span class="line"><span class="comment">//åˆ¤æ–­chæ˜¯ä»€ä¹ˆï¼Œç„¶ååšç›¸åº”çš„å¤„ç†</span></span><br><span class="line"><span class="keyword">if</span>(operStack.isOper(ch)) &#123;<span class="comment">//å¦‚æœæ˜¯è¿ç®—ç¬¦</span></span><br><span class="line"><span class="comment">//åˆ¤æ–­å½“å‰çš„ç¬¦å·æ ˆæ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span>(!operStack.isEmpty()) &#123;</span><br><span class="line"><span class="comment">//å¦‚æœç¬¦å·æ ˆæœ‰æ“ä½œç¬¦ï¼Œå°±è¿›è¡Œæ¯”è¾ƒ,å¦‚æœå½“å‰çš„æ“ä½œç¬¦çš„ä¼˜å…ˆçº§å°äºæˆ–è€…ç­‰äºæ ˆä¸­çš„æ“ä½œç¬¦,å°±éœ€è¦ä»æ•°æ ˆä¸­popå‡ºä¸¤ä¸ªæ•°,</span></span><br><span class="line"><span class="comment">//åœ¨ä»ç¬¦å·æ ˆä¸­popå‡ºä¸€ä¸ªç¬¦å·ï¼Œè¿›è¡Œè¿ç®—ï¼Œå°†å¾—åˆ°ç»“æœï¼Œå…¥æ•°æ ˆï¼Œç„¶åå°†å½“å‰çš„æ“ä½œç¬¦å…¥ç¬¦å·æ ˆ</span></span><br><span class="line"><span class="keyword">if</span>(operStack.priority(ch) &lt;= operStack.priority(operStack.peek())) &#123;</span><br><span class="line">num1 = numStack.pop();</span><br><span class="line">num2 = numStack.pop();</span><br><span class="line">oper = operStack.pop();</span><br><span class="line">res = numStack.cal(num1, num2, oper);</span><br><span class="line"><span class="comment">//æŠŠè¿ç®—çš„ç»“æœå¦‚æ•°æ ˆ</span></span><br><span class="line">numStack.push(res);</span><br><span class="line"><span class="comment">//ç„¶åå°†å½“å‰çš„æ“ä½œç¬¦å…¥ç¬¦å·æ ˆ</span></span><br><span class="line">operStack.push(ch);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//å¦‚æœå½“å‰çš„æ“ä½œç¬¦çš„ä¼˜å…ˆçº§å¤§äºæ ˆä¸­çš„æ“ä½œç¬¦ï¼Œ å°±ç›´æ¥å…¥ç¬¦å·æ ˆ.</span></span><br><span class="line">operStack.push(ch);</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//å¦‚æœä¸ºç©ºç›´æ¥å…¥ç¬¦å·æ ˆ..</span></span><br><span class="line">operStack.push(ch); <span class="comment">// 1 + 3</span></span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">//å¦‚æœæ˜¯æ•°ï¼Œåˆ™ç›´æ¥å…¥æ•°æ ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//numStack.push(ch - 48); //? &quot;1+3&quot; &#x27;1&#x27; =&gt; 1</span></span><br><span class="line"><span class="comment">//åˆ†ææ€è·¯</span></span><br><span class="line"><span class="comment">//1. å½“å¤„ç†å¤šä½æ•°æ—¶ï¼Œä¸èƒ½å‘ç°æ˜¯ä¸€ä¸ªæ•°å°±ç«‹å³å…¥æ ˆï¼Œå› ä¸ºä»–å¯èƒ½æ˜¯å¤šä½æ•°</span></span><br><span class="line"><span class="comment">//2. åœ¨å¤„ç†æ•°ï¼Œéœ€è¦å‘expressionçš„è¡¨è¾¾å¼çš„index åå†çœ‹ä¸€ä½,å¦‚æœæ˜¯æ•°å°±è¿›è¡Œæ‰«æï¼Œå¦‚æœæ˜¯ç¬¦å·æ‰å…¥æ ˆ</span></span><br><span class="line"><span class="comment">//3. å› æ­¤æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªå˜é‡ å­—ç¬¦ä¸²ï¼Œç”¨äºæ‹¼æ¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤„ç†å¤šä½æ•°</span></span><br><span class="line">keepNum += ch;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœchå·²ç»æ˜¯expressionçš„æœ€åä¸€ä½ï¼Œå°±ç›´æ¥å…¥æ ˆ</span></span><br><span class="line"><span class="keyword">if</span> (index == expression.length() - <span class="number">1</span>) &#123;</span><br><span class="line">numStack.push(Integer.parseInt(keepNum));</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­ä¸‹ä¸€ä¸ªå­—ç¬¦æ˜¯ä¸æ˜¯æ•°å­—ï¼Œå¦‚æœæ˜¯æ•°å­—ï¼Œå°±ç»§ç»­æ‰«æï¼Œå¦‚æœæ˜¯è¿ç®—ç¬¦ï¼Œåˆ™å…¥æ ˆ</span></span><br><span class="line"><span class="comment">//æ³¨æ„æ˜¯çœ‹åä¸€ä½ï¼Œä¸æ˜¯index++</span></span><br><span class="line"><span class="keyword">if</span> (operStack.isOper(expression.substring(index+<span class="number">1</span>,index+<span class="number">2</span>).charAt(<span class="number">0</span>))) &#123;</span><br><span class="line"><span class="comment">//å¦‚æœåä¸€ä½æ˜¯è¿ç®—ç¬¦ï¼Œåˆ™å…¥æ ˆ keepNum = &quot;1&quot; æˆ–è€… &quot;123&quot;</span></span><br><span class="line">numStack.push(Integer.parseInt(keepNum));</span><br><span class="line"><span class="comment">//é‡è¦çš„!!!!!!, keepNumæ¸…ç©º</span></span><br><span class="line">keepNum = <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®©index + 1, å¹¶åˆ¤æ–­æ˜¯å¦æ‰«æåˆ°expressionæœ€å.</span></span><br><span class="line">index++;</span><br><span class="line"><span class="keyword">if</span> (index &gt;= expression.length()) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å½“è¡¨è¾¾å¼æ‰«æå®Œæ¯•ï¼Œå°±é¡ºåºçš„ä» æ•°æ ˆå’Œç¬¦å·æ ˆä¸­popå‡ºç›¸åº”çš„æ•°å’Œç¬¦å·ï¼Œå¹¶è¿è¡Œ.</span></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="comment">//å¦‚æœç¬¦å·æ ˆä¸ºç©ºï¼Œåˆ™è®¡ç®—åˆ°æœ€åçš„ç»“æœ, æ•°æ ˆä¸­åªæœ‰ä¸€ä¸ªæ•°å­—ã€ç»“æœã€‘</span></span><br><span class="line"><span class="keyword">if</span>(operStack.isEmpty()) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">num1 = numStack.pop();</span><br><span class="line">num2 = numStack.pop();</span><br><span class="line">oper = operStack.pop();</span><br><span class="line">res = numStack.cal(num1, num2, oper);</span><br><span class="line">numStack.push(res);<span class="comment">//å…¥æ ˆ</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å°†æ•°æ ˆçš„æœ€åæ•°ï¼Œpopå‡ºï¼Œå°±æ˜¯ç»“æœ</span></span><br><span class="line"><span class="type">int</span> <span class="variable">res2</span> <span class="operator">=</span> numStack.pop();</span><br><span class="line">System.out.printf(<span class="string">&quot;è¡¨è¾¾å¼ %s = %d&quot;</span>, expression, res2);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…ˆåˆ›å»ºä¸€ä¸ªæ ˆ,ç›´æ¥ä½¿ç”¨å‰é¢åˆ›å»ºå¥½</span></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ª ArrayStack2 è¡¨ç¤ºæ ˆ, éœ€è¦æ‰©å±•åŠŸèƒ½</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ArrayStack3</span> &#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> maxSize; <span class="comment">// æ ˆçš„å¤§å°</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span>[] stack; <span class="comment">// æ•°ç»„ï¼Œæ•°ç»„æ¨¡æ‹Ÿæ ˆï¼Œæ•°æ®å°±æ”¾åœ¨è¯¥æ•°ç»„</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="variable">top</span> <span class="operator">=</span> -<span class="number">1</span>;<span class="comment">// topè¡¨ç¤ºæ ˆé¡¶ï¼Œåˆå§‹åŒ–ä¸º-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayStack3</span><span class="params">(<span class="type">int</span> maxSize)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.maxSize = maxSize;</span><br><span class="line">stack = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="built_in">this</span>.maxSize];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¢åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è¿”å›å½“å‰æ ˆé¡¶çš„å€¼, ä½†æ˜¯ä¸æ˜¯çœŸæ­£çš„pop</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> stack[top];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ˆæ»¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> top == maxSize - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ ˆç©º</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> top == -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å…¥æ ˆ-push</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line"><span class="comment">//å…ˆåˆ¤æ–­æ ˆæ˜¯å¦æ»¡</span></span><br><span class="line"><span class="keyword">if</span>(isFull()) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ ˆæ»¡&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">top++;</span><br><span class="line">stack[top] = value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‡ºæ ˆ-pop, å°†æ ˆé¡¶çš„æ•°æ®è¿”å›</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//å…ˆåˆ¤æ–­æ ˆæ˜¯å¦ç©º</span></span><br><span class="line"><span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line"><span class="comment">//æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;æ ˆç©ºï¼Œæ²¡æœ‰æ•°æ®~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> stack[top];</span><br><span class="line">top--;</span><br><span class="line"><span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ˜¾ç¤ºæ ˆçš„æƒ…å†µ[éå†æ ˆ]ï¼Œ éå†æ—¶ï¼Œéœ€è¦ä»æ ˆé¡¶å¼€å§‹æ˜¾ç¤ºæ•°æ®</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">list</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ ˆç©ºï¼Œæ²¡æœ‰æ•°æ®~~&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//éœ€è¦ä»æ ˆé¡¶å¼€å§‹æ˜¾ç¤ºæ•°æ®</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> top; i &gt;= <span class="number">0</span> ; i--) &#123;</span><br><span class="line">System.out.printf(<span class="string">&quot;stack[%d]=%d\n&quot;</span>, i, stack[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿”å›è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§æ˜¯ç¨‹åºå‘˜æ¥ç¡®å®š, ä¼˜å…ˆçº§ä½¿ç”¨æ•°å­—è¡¨ç¤º</span></span><br><span class="line"><span class="comment">//æ•°å­—è¶Šå¤§ï¼Œåˆ™ä¼˜å…ˆçº§å°±è¶Šé«˜.</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">priority</span><span class="params">(<span class="type">int</span> oper)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(oper == <span class="string">&#x27;*&#x27;</span> || oper == <span class="string">&#x27;/&#x27;</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (oper == <span class="string">&#x27;+&#x27;</span> || oper == <span class="string">&#x27;-&#x27;</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span>; <span class="comment">// å‡å®šç›®å‰çš„è¡¨è¾¾å¼åªæœ‰ +, - , * , /</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯ä¸æ˜¯ä¸€ä¸ªè¿ç®—ç¬¦</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isOper</span><span class="params">(<span class="type">char</span> val)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> val == <span class="string">&#x27;+&#x27;</span> || val == <span class="string">&#x27;-&#x27;</span> || val == <span class="string">&#x27;*&#x27;</span> || val == <span class="string">&#x27;/&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¡ç®—æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">cal</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2, <span class="type">int</span> oper)</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// res ç”¨äºå­˜æ”¾è®¡ç®—çš„ç»“æœ</span></span><br><span class="line"><span class="keyword">switch</span> (oper) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">res = num1 + num2;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">res = num2 - num1;<span class="comment">// æ³¨æ„é¡ºåº</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line">res = num1 * num2;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>:</span><br><span class="line">res = num2 / num1;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-3-å‰ç¼€ã€ä¸­ç¼€ã€åç¼€è¡¨è¾¾å¼ï¼ˆé€†æ³¢å…°è¡¨è¾¾å¼ï¼‰"><a href="#5-3-å‰ç¼€ã€ä¸­ç¼€ã€åç¼€è¡¨è¾¾å¼ï¼ˆé€†æ³¢å…°è¡¨è¾¾å¼ï¼‰" class="headerlink" title="5.3 å‰ç¼€ã€ä¸­ç¼€ã€åç¼€è¡¨è¾¾å¼ï¼ˆé€†æ³¢å…°è¡¨è¾¾å¼ï¼‰"></a>5.3 å‰ç¼€ã€ä¸­ç¼€ã€åç¼€è¡¨è¾¾å¼ï¼ˆé€†æ³¢å…°è¡¨è¾¾å¼ï¼‰</h3><p>ä»å³å¾€å·¦æ‰«æè¡¨è¾¾å¼ï¼Œé‡åˆ°æ•°å­æ—¶ï¼Œå°†æ•°å­—å‹å…¥æ ˆä¸­ï¼Œé‡åˆ°è¿ç®—ç¬¦æ—¶ï¼Œå¼¹å‡ºæ ˆé¡¶çš„ä¸¤ä¸ªæ•°ï¼Œç”¨è¿ç®—ç¬¦å¯¹ä»–ä»¬åšç›¸åº”çš„è®¡ç®—ã€‚ä¸€èˆ¬æƒ…å†µä¸­ç¼€è¡¨è¾¾å¼æ˜¯æˆ‘ä»¬äººä¸ºç¡®å®šçš„è¡¨è¾¾å¼ï¼Œä½†æ˜¯è®¡ç®—æœºæ— æ³•è¯†åˆ«ï¼Œæ•…è€Œæˆ‘ä»¬éœ€è¦å°†ä¸­ç¼€è¡¨è¾¾å¼è°ƒæ•´ä¸ºåç¼€è¡¨è¾¾å¼ã€‚</p><p>ä»å·¦åˆ°å³è¡¨è¾¾å¼æœ€å³ç«¯ï¼Œæœ€åè¿ç®—å¾—å‡ºçš„å€¼å³ä¸ºè¡¨è¾¾å¼çš„ç»“æœã€‚</p><blockquote><p>â€‹     * æ€è·¯ï¼š</p><pre><code> * 1.ä»å·¦åˆ°å³æ‰«æï¼Œå°†3å’Œ4å‹å…¥æ ˆä¸­ * 2.é‡åˆ° + è¿ç®—ç¬¦ï¼Œå› æ­¤å¼¹å‡º4å’Œ3(4ä¸ºæ ˆé¡¶å…ƒç´ ï¼Œ3ä¸ºæ¬¡é¡¶å…ƒç´ )ï¼Œè®¡ç®—å‡º3+4çš„å€¼ï¼Œå¾—åˆ°7ï¼Œåœ¨å°†7å‹å…¥æ ˆä¸­ * 3.å°†5å…¥æ ˆ * 4.æ¥ä¸‹æ¥æ˜¯*è¿ç®—ç¬¦ï¼Œå› æ­¤å¼¹å‡º5å’Œ7ï¼Œè®¡ç®—7*5=35ï¼Œå°†35å…¥æ ˆã€‚ * 5.å°†6å…¥æ ˆ * 6.æœ€åæ˜¯ - è¿ç®—ç¬¦ï¼Œè®¡ç®—å‡º35 -6 çš„å€¼ï¼Œå³29ï¼Œç”±æ­¤å¾—å‡ºæœ€ç»ˆç»“æœ</code></pre></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> class é€†æ³¢å…°è¡¨è¾¾å¼ &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//å…ˆå®šä¹‰ç»™é€†æ³¢å…°è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">//(3+4)*5-6 =&gt; 3 4 + 5 * 6 -</span></span><br><span class="line"><span class="comment">//è¯´æ˜ä¸ºäº†æ–¹ä¾¿ï¼Œé€†æ³¢å…°è¡¨è¾¾å¼çš„æ•°å­—å’Œç¬¦å·ä½¿ç”¨ç©ºæ ¼éš”å¼€</span></span><br><span class="line"><span class="type">String</span> <span class="variable">suffixExpression</span> <span class="operator">=</span> <span class="string">&quot;15 4 + 5 * 6 -&quot;</span>;</span><br><span class="line"><span class="comment">//æ€è·¯</span></span><br><span class="line"><span class="comment">// 1. å…ˆå°† 3 4 + 5 * 6 -  =&gt; æ”¾åˆ°ArrayListä¸­</span></span><br><span class="line"><span class="comment">// 2 å°† ArrayList ä¼ é€’ç»™ä¸€ä¸ªæ–¹æ³•ï¼Œéå†ArrayList é…åˆæ ˆå®Œæˆè®¡ç®—</span></span><br><span class="line">List&lt;String&gt; rpnList = getListString(suffixExpression);</span><br><span class="line">System.out.println(<span class="string">&quot;é€†æ³¢å…°è¡¨è¾¾å¼ï¼š&quot;</span> + rpnList);</span><br><span class="line"><span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> calculate(rpnList);</span><br><span class="line">System.out.println(<span class="string">&quot;è®¡ç®—çš„ç»“æœä¸ºï¼š&quot;</span> + res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å°†ä¸€ä¸ªé€†æ³¢å…°è¡¨è¾¾å¼ï¼Œä¾æ¬¡å°†æ•°æ®å’Œè¿ç®—ç¬¦æ”¾åˆ°ArrayListä¸­</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">getListString</span><span class="params">(String suffixExpression)</span>&#123;</span><br><span class="line"><span class="comment">//å°†suffixExpression åˆ†å‰²</span></span><br><span class="line">String [] split = suffixExpression.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"><span class="keyword">for</span>(String ele : split) &#123;</span><br><span class="line">list.add(ele);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å®Œæˆå¯¹é€†æ³¢å…°è¡¨è¾¾å¼çš„è¿ç®—ã€‚</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ€è·¯ï¼š</span></span><br><span class="line"><span class="comment"> * 1.ä»å·¦åˆ°å³æ‰«æï¼Œå°†3å’Œ4å‹å…¥æ ˆä¸­</span></span><br><span class="line"><span class="comment"> * 2.é‡åˆ° + è¿ç®—ç¬¦ï¼Œå› æ­¤å¼¹å‡º4å’Œ3(4ä¸ºæ ˆé¡¶å…ƒç´ ï¼Œ3ä¸ºæ¬¡é¡¶å…ƒç´ )ï¼Œè®¡ç®—å‡º3+4çš„å€¼ï¼Œå¾—åˆ°7ï¼Œåœ¨å°†7å‹å…¥æ ˆä¸­</span></span><br><span class="line"><span class="comment"> * 3.å°†5å…¥æ ˆ</span></span><br><span class="line"><span class="comment"> * 4.æ¥ä¸‹æ¥æ˜¯*è¿ç®—ç¬¦ï¼Œå› æ­¤å¼¹å‡º5å’Œ7ï¼Œè®¡ç®—7*5=35ï¼Œå°†35å…¥æ ˆã€‚</span></span><br><span class="line"><span class="comment"> * 5.å°†6å…¥æ ˆ</span></span><br><span class="line"><span class="comment"> * 6.æœ€åæ˜¯ - è¿ç®—ç¬¦ï¼Œè®¡ç®—å‡º35 -6 çš„å€¼ï¼Œå³29ï¼Œç”±æ­¤å¾—å‡ºæœ€ç»ˆç»“æœ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">calculate</span><span class="params">(List&lt;String&gt; ls)</span> &#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºç»™æ ˆï¼Œåªéœ€è¦ä¸€ä¸ªæ ˆå³å¯</span></span><br><span class="line">Stack&lt;String&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>();</span><br><span class="line"><span class="comment">//éå† ls</span></span><br><span class="line"><span class="keyword">for</span>(String item : ls) &#123;</span><br><span class="line"><span class="comment">//è¿™é‡Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è¯»å–æ•°</span></span><br><span class="line"><span class="keyword">if</span>(item.matches(<span class="string">&quot;\\d+&quot;</span>)) &#123; <span class="comment">//åŒ¹é…çš„æ˜¯å¤šä½æ•°</span></span><br><span class="line"><span class="comment">//å…¥æ ˆ</span></span><br><span class="line">stack.push(item);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//popå‡ºä¸¤ä½æ•°ï¼Œå¹¶è¿ç®—ï¼Œå†å…¥æ ˆ</span></span><br><span class="line"><span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span> Integer.parseInt(stack.pop());</span><br><span class="line"><span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> Integer.parseInt(stack.pop());</span><br><span class="line"><span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(item.equals(<span class="string">&quot;+&quot;</span>)) &#123;</span><br><span class="line">res = num1 + num2;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(item.equals(<span class="string">&quot;-&quot;</span>)) &#123;</span><br><span class="line">res = num1 - num2;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(item.equals(<span class="string">&quot;*&quot;</span>)) &#123;</span><br><span class="line">res = num1 * num2;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(item.equals(<span class="string">&quot;/&quot;</span>)) &#123;</span><br><span class="line">res = num1 / num2;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;è¿ç®—ç¬¦æœ‰è¯¯&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŠŠreså…¥æ ˆ</span></span><br><span class="line">stack.push(<span class="string">&quot;&quot;</span> + res);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ€åç•™åœ¨stackä¸­çš„æ•°æ®æ˜¯è¿ç®—ç»“æœ</span></span><br><span class="line"><span class="keyword">return</span> Integer.parseInt(stack.pop());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5-4-ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼"><a href="#5-4-ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼" class="headerlink" title="5.4 ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼"></a>5.4 ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼</h3><p>å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼</p><p>ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€è¡¨è¾¾å¼çš„æ€è·¯æ­¥éª¤</p><ol><li>åˆå§‹åŒ–ä¸¤ä¸ªæ ˆï¼Œè¿ç®—ç¬¦s1å’Œå­˜å‚¨ä¸­é—´ç»“æœçš„æ ˆs2</li><li>ä»å·¦åˆ°å³æ‰«æä¸­ç¼€è¡¨è¾¾å¼ï¼›</li><li>é‡åˆ°æ“ä½œè¿ç®—ç¬¦æ—¶ï¼Œå°†å…¶å‹s2;</li><li>é‡åˆ°è¿ç®—ç¬¦æ—¶ï¼Œæ¯”è¾ƒå…¶ä¸s1æ ˆé¡¶è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§<ol><li>å¦‚æœs1ä¸ºç©ºï¼Œæˆ–æ ˆé¡¶è¿ç®—ç¬¦ä¸ºå·¦æ‹¬å·â€œ(â€ï¼Œåˆ™ç›´æ¥å°†æ¬¡è¿ç®—ç¬¦å…¥æ ˆï¼›</li><li>å¦åˆ™ï¼Œè‹¥ä¼˜å…ˆçº§æ¯”æ ˆé¡¶è¿ç®—ç¬¦çš„é«˜ï¼Œä¹Ÿå°†è¿ç®—ç¬¦å‹å…¥s1</li><li>å¦åˆ™å°†s1æ ˆé¡¶çš„è¿ç®—ç¬¦å¼¹å‡ºå¹¶å‹å…¥åˆ°s2ä¸­ï¼Œå†æ¬¡è½¬åˆ°ï¼ˆ4-1ï¼‰ä¸s1ä¸­æ–°çš„æ ˆé¡¶è¿ç®—ç¬¦ç›¸æ¯”è¾ƒï¼›</li></ol></li><li>é‡åˆ°æ‹¬å·<ol><li>å¦‚æœæ˜¯å·¦æ‹¬å·â€œï¼ˆâ€,åˆ™ç›´æ¥å‹å…¥s1</li><li>å¦‚æœæ˜¯å³æ‹¬å·â€œï¼‰â€,åˆ™ä¾æ¬¡å¼¹å‡ºs1æ ˆé¡¶çš„è¿ç®—ç¬¦ï¼Œå¹¶å‹å…¥s2ï¼Œç›´åˆ°é‡åˆ°å·¦æ‹¬å·ä¸ºæ­¢ï¼Œæ­¤æ—¶å°†è¿™ä¸€å¯¹æ‹¬å·ä¸¢å¼ƒã€‚</li></ol></li><li>é‡å¤æ­¥éª¤2è‡³5ï¼Œç›´åˆ°è¡¨è¾¾å¼çš„æœ€å³è¾¹</li><li>å°†s1ä¸­å‰©ä½™çš„è¿ç®—ç¬¦ä¾æ¬¡å¼¹å‡ºå¹¶å‹å…¥s2</li><li>ä¾æ¬¡å¼¹å‡ºs2ä¸­å…ƒç´ å¹¶è¾“å‡ºï¼Œç»“æœçš„é€†åºå³ä¸ºä¸­ç¼€è¡¨è¾¾å¼å¯¹åº”çš„åç¼€è¡¨è¾¾å¼ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> class é€†æ³¢å…°è¡¨è¾¾å¼ &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…ˆå®šä¹‰ç»™é€†æ³¢å…°è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">//(3+4)*5-6 =&gt; 3 4 + 5 * 6 -</span></span><br><span class="line"><span class="comment">//è¯´æ˜ä¸ºäº†æ–¹ä¾¿ï¼Œé€†æ³¢å…°è¡¨è¾¾å¼çš„æ•°å­—å’Œç¬¦å·ä½¿ç”¨ç©ºæ ¼éš”å¼€</span></span><br><span class="line"><span class="type">String</span> <span class="variable">suffixExpression</span> <span class="operator">=</span> <span class="string">&quot;15 4 + 5 * 6 -&quot;</span>;</span><br><span class="line"><span class="comment">//æ€è·¯</span></span><br><span class="line"><span class="comment">// 1. å…ˆå°† 3 4 + 5 * 6 -  =&gt; æ”¾åˆ°ArrayListä¸­</span></span><br><span class="line"><span class="comment">// 2 å°† ArrayList ä¼ é€’ç»™ä¸€ä¸ªæ–¹æ³•ï¼Œéå†ArrayList é…åˆæ ˆå®Œæˆè®¡ç®—</span></span><br><span class="line"></span><br><span class="line">List&lt;String&gt; rpnList = getListString(suffixExpression);</span><br><span class="line">System.out.println(<span class="string">&quot;é€†æ³¢å…°è¡¨è¾¾å¼ï¼š&quot;</span> + rpnList);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> calculate(rpnList);</span><br><span class="line">System.out.println(<span class="string">&quot;è®¡ç®—çš„ç»“æœä¸ºï¼š&quot;</span> + res);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;=========================ä»¥ä¸Šæ˜¯ä¸­ç¼€è¡¨è¾¾å¼====================&quot;</span>);</span><br><span class="line"><span class="comment">//æ­¤æ—¶æˆ‘ä»¬å®Œæˆä¸€ä¸ªä¸­ç¼€è¡¨è¾¾å¼è½¬æˆåç¼€è¡¨è¾¾å¼çš„åŠŸèƒ½</span></span><br><span class="line"><span class="comment">//è¯´æ˜</span></span><br><span class="line"><span class="comment">//1.  1+((2+3)*4)-5 =&gt; 1 2 3 + 4 * + 5 -</span></span><br><span class="line"><span class="comment">//2 å› ä¸ºç›´æ¥å¯¹strè¿›è¡Œæ“ä½œï¼Œä¸æ–¹ä¾¿ï¼Œå› æ­¤å°†1+((2+3)*4)-5 ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºå¯¹åº”çš„List</span></span><br><span class="line"><span class="comment">// å³&quot;1+((2+3)*4)-5&quot; =&gt; ArrayList[1,+,(,(,2,+,3),*,4),-,5]</span></span><br><span class="line"><span class="comment">//3 å°† å¾—åˆ°çš„ä¸­ç¼€è¡¨è¾¾å¼å¯¹åº”çš„List =&gt;åç¼€è¡¨è¾¾å¼å¯¹åº”çš„List</span></span><br><span class="line"><span class="comment">//å³ArrayList[1, +, (, (, 2, +, 3, ), *, 4, ), -, 5]=&gt;ArrayList[1,2,3,+,4,*,+,5,-]</span></span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">experssion</span> <span class="operator">=</span> <span class="string">&quot;1+((2+3)*4)-5&quot;</span>;</span><br><span class="line">List&lt;String&gt; infixExpressionList = toInfixExpressionList(experssion);</span><br><span class="line">System.out.println(<span class="string">&quot;ä¸­ç¼€è¡¨è¾¾å¼å¯¹åº”çš„List &quot;</span> + infixExpressionList);</span><br><span class="line">List&lt;String&gt; parseSuffixExpressionList = parseSuffixExpressionList(infixExpressionList);</span><br><span class="line">System.out.println(<span class="string">&quot;åç¼€è¡¨è¾¾å¼å¯¹åº”çš„List&quot;</span> + parseSuffixExpressionList);</span><br><span class="line"></span><br><span class="line">System.out.printf(<span class="string">&quot;expression=%d&quot;</span>,calculate(parseSuffixExpressionList));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å°† å¾—åˆ°çš„ä¸­ç¼€è¡¨è¾¾å¼å¯¹åº”çš„List =&gt;åç¼€è¡¨è¾¾å¼å¯¹åº”çš„List</span></span><br><span class="line"><span class="comment">//å³ArrayList[1, +, (, (, 2, +, 3, ), *, 4, ), -, 5]=&gt;ArrayList[1,2,3,+,4,*,+,5,-]</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">parseSuffixExpressionList</span><span class="params">(List&lt;String&gt; ls)</span>&#123;</span><br><span class="line"><span class="comment">//å®šä¹‰ä¸¤ä¸ªæ ˆ</span></span><br><span class="line">Stack&lt;String&gt; s1 = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;String&gt;(); <span class="comment">//ç¬¦å·æ ˆ</span></span><br><span class="line"><span class="comment">//è¯´æ˜ï¼šå› ä¸ºs2è¿™ä¸ªæ ˆï¼Œåœ¨æ•´ä¸ªè½¬æ¢è¿‡ç¨‹ä¸­ï¼Œæ²¡æœ‰pop()æ“ä½œï¼Œåé¢æˆ‘ä»¬è¿˜éœ€è¦é€†åºæ’åº</span></span><br><span class="line"><span class="comment">//å› æ­¤è¿™æ ·æ¯”è¾ƒéº»çƒ¦ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±ä¸åŒStack&lt;String&gt; ç›´æ¥ä½¿ç”¨List&lt;String&gt; s2</span></span><br><span class="line"><span class="comment">//Stack&lt;String&gt; s2  = new Stack&lt;String&gt;();//å­˜å‚¨ä¸­é—´ç»“æœçš„æ ˆS2</span></span><br><span class="line">List&lt;String&gt; s2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();<span class="comment">//å­˜å‚¨ä¸­é—´ç»“æœçš„List2</span></span><br><span class="line"><span class="comment">//éå†ls</span></span><br><span class="line"><span class="keyword">for</span>(String item : ls) &#123;</span><br><span class="line"><span class="comment">//å¦‚æœæ˜¯ä¸€ä¸ªæ•°ï¼ŒåŠ å…¥s2</span></span><br><span class="line"><span class="keyword">if</span>(item.matches(<span class="string">&quot;\\d+&quot;</span>)) &#123;</span><br><span class="line">s2.add(item);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(item.equals(<span class="string">&quot;(&quot;</span>)) &#123;</span><br><span class="line">s1.push(item);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(item.equals(<span class="string">&quot;)&quot;</span>)) &#123;</span><br><span class="line"><span class="comment">//å¦‚æœæ˜¯å³æ‹¬å·&quot;)&quot;ï¼Œåˆ™ä¾æ¬¡å¼¹å‡ºs1æ ˆé¡¶çš„è¿ç®—ç¬¦ï¼Œå¹¶å‹å…¥s2,ç›´åˆ°é‡åˆ°å·¦æ‹¬å·ä¸ºæ­¢ï¼Œæ­¤æ—¶å°†è¿™ä¸€å¯¹æ‹¬å·ä¸¢å¼ƒ</span></span><br><span class="line"><span class="keyword">while</span>(!s1.peek().equals(<span class="string">&quot;(&quot;</span>)) &#123;</span><br><span class="line">s2.add(s1.pop());</span><br><span class="line">&#125;</span><br><span class="line">s1.pop();  <span class="comment">//å°†ï¼ˆå¼¹å‡ºs1æ ˆï¼Œæ¶ˆé™¤å°æ‹¬å·</span></span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//å½“itemçš„ä¼˜å…ˆçº§å°äºæ ˆé¡¶è¿ç®—ç¬¦ï¼Œå°†s1æ ˆé¡¶çš„è¿ç®—ç¬¦å¼¹å‡ºå¹¶åŠ å…¥åˆ°s2ä¸­ï¼Œå†æ¬¡è½¬åˆ°ï¼ˆ4.1ï¼‰ä¸s1ä¸­æ–°çš„æ ˆé¡¶è¿ç®—ç¬¦ç›¸æ¯”è¾ƒ</span></span><br><span class="line"><span class="keyword">while</span>(s1.size() != <span class="number">0</span> &amp;&amp; Operation.getValue(s1.peek()) &gt;= Operation.getValue(item)) &#123;</span><br><span class="line">s2.add(s1.pop());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿˜éœ€è¦å°†itemå‹å…¥æ ˆ</span></span><br><span class="line">s1.push(item);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å°†s1ä¸­å‰©ä½™çš„è¿ç®—ç¬¦ä¾æ¬¡å¼¹å‡ºå¹¶åŠ å…¥s2</span></span><br><span class="line"><span class="keyword">while</span>(s1.size() != <span class="number">0</span>) &#123;</span><br><span class="line">s2.add(s1.pop());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> s2;  <span class="comment">//æ³¨æ„æ˜¯å› ä¸ºå­˜æ”¾åˆ°Listï¼Œå› æ­¤æŒ‰é¡ºåºè¾“å‡º</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–¹æ³•ï¼šå°†ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºå¯¹åº”çš„List</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> s</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">toInfixExpressionList</span><span class="params">(String s)</span>&#123;</span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªList,å­˜æ”¾ä¸­ç¼€è¡¨è¾¾å¼ å¯¹åº”çš„å†…å®¹</span></span><br><span class="line">List&lt;String&gt; ls = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//è¿™ä¸ªæ˜¯ä¸ªæŒ‡é’ˆï¼Œç”¨äºéå†ä¸­ç¼€è¡¨è¾¾å¼å­—ç¬¦ä¸²</span></span><br><span class="line">String str;<span class="comment">//å¯¹å¤šä½æ•°çš„æ‹¼æ¥åˆ°ä¸€ä¸ªå­—ç¬¦ï¼Œå°±æ”¾å…¥åˆ°c</span></span><br><span class="line"><span class="type">char</span> c; <span class="comment">//æ¯éå†åˆ°ä¸€ä¸ªå­—ç¬¦ï¼Œå°±æ”¾å…¥åˆ°c</span></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line"><span class="comment">//å¦‚æœcæ˜¯ä¸€ä¸ªéæ•°å­—ï¼Œåˆ™éœ€è¦åŠ å…¥çš„lsä¸­</span></span><br><span class="line"><span class="keyword">if</span>((c=s.charAt(i)) &lt; <span class="number">48</span> || (c=s.charAt(i))&gt; <span class="number">57</span>)&#123;</span><br><span class="line">ls.add(<span class="string">&quot;&quot;</span>+c );</span><br><span class="line">i++;<span class="comment">//iéœ€è¦åç§»</span></span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//å¦‚æœæ˜¯ä¸€ä¸ªæ•°ï¼Œéœ€è¦è€ƒè™‘å¤šä½æ•°é—®é¢˜</span></span><br><span class="line">str = <span class="string">&quot;&quot;</span>;<span class="comment">//å…ˆå°†strç½®æˆ&quot;&quot; &#x27;0&#x27;[48]-&gt; &#x27;9&#x27;[57]</span></span><br><span class="line"><span class="keyword">while</span>(i &lt; s.length() &amp;&amp; (c=s.charAt(i)) &gt;= <span class="number">48</span> &amp;&amp; (c=s.charAt(i)) &lt;= <span class="number">57</span>) &#123;</span><br><span class="line">str += c; <span class="comment">//æ‹¼æ¥</span></span><br><span class="line">i++;</span><br><span class="line">&#125;</span><br><span class="line">ls.add(str);</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">while</span>(i &lt; s.length());</span><br><span class="line"><span class="keyword">return</span> ls;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†ä¸€ä¸ªé€†æ³¢å…°è¡¨è¾¾å¼ï¼Œä¾æ¬¡å°†æ•°æ®å’Œè¿ç®—ç¬¦æ”¾åˆ°ArrayListä¸­</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">getListString</span><span class="params">(String suffixExpression)</span>&#123;</span><br><span class="line"><span class="comment">//å°†suffixExpression åˆ†å‰²</span></span><br><span class="line">String [] split = suffixExpression.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"><span class="keyword">for</span>(String ele : split) &#123;</span><br><span class="line">list.add(ele);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®Œæˆå¯¹é€†æ³¢å…°è¡¨è¾¾å¼çš„è¿ç®—ã€‚</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ€è·¯ï¼š</span></span><br><span class="line"><span class="comment"> * 1.ä»å·¦åˆ°å³æ‰«æï¼Œå°†3å’Œ4å‹å…¥æ ˆä¸­</span></span><br><span class="line"><span class="comment"> * 2.é‡åˆ° + è¿ç®—ç¬¦ï¼Œå› æ­¤å¼¹å‡º4å’Œ3(4ä¸ºæ ˆé¡¶å…ƒç´ ï¼Œ3ä¸ºæ¬¡é¡¶å…ƒç´ )ï¼Œè®¡ç®—å‡º3+4çš„å€¼ï¼Œå¾—åˆ°7ï¼Œåœ¨å°†7å‹å…¥æ ˆä¸­</span></span><br><span class="line"><span class="comment"> * 3.å°†5å…¥æ ˆ</span></span><br><span class="line"><span class="comment"> * 4.æ¥ä¸‹æ¥æ˜¯*è¿ç®—ç¬¦ï¼Œå› æ­¤å¼¹å‡º5å’Œ7ï¼Œè®¡ç®—7*5=35ï¼Œå°†35å…¥æ ˆã€‚</span></span><br><span class="line"><span class="comment"> * 5.å°†6å…¥æ ˆ</span></span><br><span class="line"><span class="comment"> * 6.æœ€åæ˜¯ - è¿ç®—ç¬¦ï¼Œè®¡ç®—å‡º35 -6 çš„å€¼ï¼Œå³29ï¼Œç”±æ­¤å¾—å‡ºæœ€ç»ˆç»“æœ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">calculate</span><span class="params">(List&lt;String&gt; ls)</span> &#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºç»™æ ˆï¼Œåªéœ€è¦ä¸€ä¸ªæ ˆå³å¯</span></span><br><span class="line">Stack&lt;String&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>();</span><br><span class="line"><span class="comment">//éå† ls</span></span><br><span class="line"><span class="keyword">for</span>(String item : ls) &#123;</span><br><span class="line"><span class="comment">//è¿™é‡Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è¯»å–æ•°</span></span><br><span class="line"><span class="keyword">if</span>(item.matches(<span class="string">&quot;\\d+&quot;</span>)) &#123; <span class="comment">//åŒ¹é…çš„æ˜¯å¤šä½æ•°</span></span><br><span class="line"><span class="comment">//å…¥æ ˆ</span></span><br><span class="line">stack.push(item);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//popå‡ºä¸¤ä½æ•°ï¼Œå¹¶è¿ç®—ï¼Œå†å…¥æ ˆ</span></span><br><span class="line"><span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span> Integer.parseInt(stack.pop());</span><br><span class="line"><span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> Integer.parseInt(stack.pop());</span><br><span class="line"><span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(item.equals(<span class="string">&quot;+&quot;</span>)) &#123;</span><br><span class="line">res = num1 + num2;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(item.equals(<span class="string">&quot;-&quot;</span>)) &#123;</span><br><span class="line">res = num1 - num2;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(item.equals(<span class="string">&quot;*&quot;</span>)) &#123;</span><br><span class="line">res = num1 * num2;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(item.equals(<span class="string">&quot;/&quot;</span>)) &#123;</span><br><span class="line">res = num1 / num2;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;è¿ç®—ç¬¦æœ‰è¯¯&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŠŠreså…¥æ ˆ</span></span><br><span class="line">stack.push(<span class="string">&quot;&quot;</span> + res);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ€åç•™åœ¨stackä¸­çš„æ•°æ®æ˜¯è¿ç®—ç»“æœ</span></span><br><span class="line"><span class="keyword">return</span> Integer.parseInt(stack.pop());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–å†™ä¸€ä¸ªç±»æ¥è¿”å›ä¸€ä¸ªè¿ç®—ç¬¦å¯¹åº”çš„ä¼˜å…ˆçº§</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Operation</span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">ADD</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">SUB</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">MUL</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">DIV</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¿”å›å¯¹åº”çš„ä¼˜å…ˆçº§æ•°å­—</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getValue</span><span class="params">(String operation)</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span>  <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">switch</span>(operation) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">result = ADD;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;-&quot;</span>:</span><br><span class="line">result = SUB;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:</span><br><span class="line">result = MUL;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;/&quot;</span>:</span><br><span class="line">result = DIV;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">System.out.println(<span class="string">&quot;ä¸å­˜åœ¨è¯¥è¿ç®—ç¬¦&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-é€’å½’"><a href="#6-é€’å½’" class="headerlink" title="6.é€’å½’"></a>6.é€’å½’</h2><ol><li>é€’å½’å°±æ˜¯æ–¹æ³•è‡ªå·±è°ƒç”¨è‡ªå·±</li><li><p>é€’å½’è°ƒç”¨è§„åˆ™ï¼š</p><ol><li>å½“ç¨‹åºæ‰§è¡Œåˆ°ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå°±ä¼šå¼€è¾Ÿä¸€ä¸ªç‹¬ç«‹çš„ç©ºé—´ï¼ˆæ ˆï¼‰</li><li>æ–¹æ³•çš„å±€éƒ¨å˜é‡æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¼šç›¸äº’å½±å“ï¼Œæ¯”å¦‚nå˜é‡</li><li>å¦‚æœæ–¹æ³•ä¸­ä½¿ç”¨çš„æ˜¯å¼•ç”¨ç±»å‹å˜é‡(æ¯”å¦‚è¯´æ•°ç»„)ï¼Œå°±ä¼šå…±äº«è¯¥å¼•ç”¨ç±»å‹çš„æ•°æ®</li><li>é€’å½’å¿…é¡»å‘é€€å‡ºé€’å½’çš„æ¡ä»¶é€¼è¿‘ï¼Œå¦åˆ™å°±æ˜¯æ— é™é€’å½’ï¼Œå‡ºç°æ ˆæº¢å‡ºä¹Ÿå°±æ˜¯<code>StackOverFlowError</code>ã€‚</li><li>å½“ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œæˆ–è€…é‡åˆ°return,å°±ä¼šè¿”å›ï¼Œéµå¾ªè°è°ƒç”¨ï¼Œå°±å°†ç»“æœè¿”å›ç»™è°ï¼ŒåŒæ—¶å½“æ–¹æ³•æ‰§è¡Œå®Œæ¯•åè¿”å›æ—¶ï¼Œè¯¥æ–¹æ³•ä¹Ÿå°±æ‰§è¡Œå®Œæ¯•ã€‚</li></ol></li></ol><h3 id="6-1-ä½¿ç”¨é€’å½’è§£å†³è¿·å®«é—®é¢˜ï¼š"><a href="#6-1-ä½¿ç”¨é€’å½’è§£å†³è¿·å®«é—®é¢˜ï¼š" class="headerlink" title="6.1 ä½¿ç”¨é€’å½’è§£å†³è¿·å®«é—®é¢˜ï¼š"></a>6.1 ä½¿ç”¨é€’å½’è§£å†³è¿·å®«é—®é¢˜ï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MiGong</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„æ¨¡æ‹Ÿè¿·å®«</span></span><br><span class="line"><span class="comment">//åœ°å›¾</span></span><br><span class="line"><span class="type">int</span> [][] map = <span class="keyword">new</span> <span class="title class_">int</span> [<span class="number">8</span>][<span class="number">7</span>];</span><br><span class="line"><span class="comment">//ä½¿ç”¨1è¡¨ç¤ºå¢™</span></span><br><span class="line"><span class="comment">//ä¸Šä¸‹å…¨æ˜¯å¢™å£</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">map[<span class="number">0</span>][i] = <span class="number">1</span>;</span><br><span class="line">map[<span class="number">7</span>][i] = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å·¦å³å…¨æ˜¯å¢™å£</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">8</span>; i++ ) &#123;</span><br><span class="line">map[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">map[i][<span class="number">6</span>] = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">map[<span class="number">3</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">map[<span class="number">3</span>][<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¾“å‡ºåœ°å›¾</span></span><br><span class="line">System.out.println(<span class="string">&quot;å½“å‰åœ°å›¾ä¸ºï¼š&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">8</span> ; i ++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span> ;j &lt; <span class="number">7</span>; j++) &#123;</span><br><span class="line">System.out.print(map[i][j] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨é€’å½’å›æº¯ç»™å°çƒæ‰¾è·¯</span></span><br><span class="line"><span class="comment">setWay(map, 1, 1);</span></span><br><span class="line"><span class="comment">//è¾“å‡ºåœ°å›¾</span></span><br><span class="line"><span class="comment">System.out.println(&quot;å°çƒèµ°è¿‡ï¼Œå¹¶æ ‡è¯†ï¼š&quot;);</span></span><br><span class="line"><span class="comment">//è¾“å‡ºæ–°çš„åœ°å›¾ï¼Œå°çƒèµ°è¿‡ï¼Œå¹¶æ ‡è¯†</span></span><br><span class="line"><span class="comment">for(int i = 0; i &lt; 8 ; i ++) &#123;</span></span><br><span class="line"><span class="comment">for(int j = 0 ;j &lt; 7; j++) &#123;</span></span><br><span class="line"><span class="comment">System.out.print(map[i][j] + &quot; &quot;);</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">System.out.println();</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨é€’å½’å›æº¯ç»™å°çƒæ‰¾è·¯</span></span><br><span class="line">setWay1(map, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line"><span class="comment">//è¾“å‡ºåœ°å›¾</span></span><br><span class="line">System.out.println(<span class="string">&quot;å°çƒæ”¹å˜æ–¹å¼ï¼Œå¹¶æ ‡è¯†ï¼š&quot;</span>);</span><br><span class="line"><span class="comment">//è¾“å‡ºæ–°çš„åœ°å›¾ï¼Œå°çƒèµ°è¿‡ï¼Œå¹¶æ ‡è¯†</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">8</span> ; i ++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span> ;j &lt; <span class="number">7</span>; j++) &#123;</span><br><span class="line">System.out.print(map[i][j] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨é€’å½’å›æº¯æ¥ç»™å°çƒæ‰¾è·¯</span></span><br><span class="line"><span class="comment">//è¯´æ˜ï¼š</span></span><br><span class="line"><span class="comment">//1.å¦‚æœå°çƒèƒ½åˆ°map[6][5]çš„ä½ç½®è¯´æ˜é€šè·¯æ‰¾åˆ°äº†ã€‚</span></span><br><span class="line"><span class="comment">//å½“map[i][j]ä¸º0è¯´æ˜è¯¥ç‚¹æ²¡æœ‰èµ°è¿‡   å½“ä¸º1ï¼Œè¡¨ç¤ºå¢™;2 è¡¨ç¤ºé€šè·¯å¯ä»¥èµ°ï¼Œ3è¡¨ç¤ºè¯¥ä½ç½®ä»¥åŠèµ°è¿‡ï¼Œä½†æ˜¯èµ°ä¸é€š</span></span><br><span class="line"><span class="comment">//åœ¨èµ°è¿·å®«çš„æ—¶å€™ï¼Œéœ€è¦ç¡®å®šä¸€ä¸ªç­–ç•¥(æ–¹æ³•)ä¸‹ -&gt;å³ -&gt;ä¸Š-&gt;å·¦è¾¹ï¼Œå¦‚æœæ”¹ç‚¹èµ°ä¸é€šï¼Œåœ¨å›æº¯</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> map è¡¨ç¤ºä¼ å¦‚çš„åœ°å›¾</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> i è¡¨ç¤ºä»å“ªä¸ªä½ç½®å¼€å§‹æ‰¾ï¼Œè¡¨ç¤ºæ¨ªåæ ‡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> j è¡¨ç¤ºåæ ‡ï¼Œè¡¨ç¤ºçºµåæ ‡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> å¦‚æœæ‰¾åˆ°é€šè·¯ï¼Œå°±è¿”å›ä¸ºtrueï¼Œå¦åˆ™è¿”å›false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">setWay</span><span class="params">(<span class="type">int</span> [][] map,<span class="type">int</span> i , <span class="type">int</span> j)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(map[<span class="number">6</span>][<span class="number">5</span>] == <span class="number">2</span>) &#123; <span class="comment">//é€šè·¯å·²ç»æ‰¾åˆ°</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(map[i][j] == <span class="number">0</span>) &#123;  <span class="comment">//å¦‚æœå½“å‰è¿™ä¸ªç‚¹è¿˜æ²¡æœ‰èµ°è¿‡</span></span><br><span class="line"><span class="comment">//æŒ‰ç…§ç­–ç•¥ ä¸‹ -&gt; å³ -&gt;ä¸Š-&gt;å·¦èµ°</span></span><br><span class="line">map[i][j] = <span class="number">2</span>;<span class="comment">//å‡å®šè¯¥ç‚¹æ˜¯å¯ä»¥èµ°é€š</span></span><br><span class="line"><span class="keyword">if</span>(setWay(map,i+<span class="number">1</span>,j)) &#123; <span class="comment">//å¾€ä¸‹èµ°</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(setWay(map, i, j + <span class="number">1</span>)) &#123;<span class="comment">//å‘å³</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(setWay(map, i - <span class="number">1</span>, j)) &#123;<span class="comment">//å‘ä¸Š</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(setWay(map, i, j -<span class="number">1</span>)) &#123;  <span class="comment">//å‘å·¦èµ°</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//è¯´æ˜è¯¥ç‚¹èµ°ä¸é€š</span></span><br><span class="line">map[i][j] = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//å¦‚æœmap[i][j] != 0,å¯èƒ½æ˜¯ 1,2,3</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨é€’å½’å›æº¯æ¥ç»™å°çƒæ‰¾è·¯</span></span><br><span class="line"><span class="comment">//è¯´æ˜ï¼š</span></span><br><span class="line"><span class="comment">//1.å¦‚æœå°çƒèƒ½åˆ°map[6][5]çš„ä½ç½®è¯´æ˜é€šè·¯æ‰¾åˆ°äº†ã€‚</span></span><br><span class="line"><span class="comment">//å½“map[i][j]ä¸º0è¯´æ˜è¯¥ç‚¹æ²¡æœ‰èµ°è¿‡   å½“ä¸º1ï¼Œè¡¨ç¤ºå¢™;2 è¡¨ç¤ºé€šè·¯å¯ä»¥èµ°ï¼Œ3è¡¨ç¤ºè¯¥ä½ç½®ä»¥åŠèµ°è¿‡ï¼Œä½†æ˜¯èµ°ä¸é€š</span></span><br><span class="line"><span class="comment">//åœ¨èµ°è¿·å®«çš„æ—¶å€™ï¼Œéœ€è¦ç¡®å®šä¸€ä¸ªç­–ç•¥(æ–¹æ³•)ä¸Š -&gt;å³ -&gt;ä¸‹-&gt;å·¦è¾¹ï¼Œå¦‚æœæ”¹ç‚¹èµ°ä¸é€šï¼Œåœ¨å›æº¯</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> map è¡¨ç¤ºä¼ å¦‚çš„åœ°å›¾</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> i è¡¨ç¤ºä»å“ªä¸ªä½ç½®å¼€å§‹æ‰¾ï¼Œè¡¨ç¤ºæ¨ªåæ ‡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> j è¡¨ç¤ºåæ ‡ï¼Œè¡¨ç¤ºçºµåæ ‡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> å¦‚æœæ‰¾åˆ°é€šè·¯ï¼Œå°±è¿”å›ä¸ºtrueï¼Œå¦åˆ™è¿”å›false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">setWay1</span><span class="params">(<span class="type">int</span> [][] map,<span class="type">int</span> i , <span class="type">int</span> j)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(map[<span class="number">6</span>][<span class="number">5</span>] == <span class="number">2</span>) &#123; <span class="comment">//é€šè·¯å·²ç»æ‰¾åˆ°</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(map[i][j] == <span class="number">0</span>) &#123;  <span class="comment">//å¦‚æœå½“å‰è¿™ä¸ªç‚¹è¿˜æ²¡æœ‰èµ°è¿‡</span></span><br><span class="line"><span class="comment">//æŒ‰ç…§ç­–ç•¥ ä¸Š -&gt; å³ -&gt;ä¸‹-&gt;å·¦èµ°</span></span><br><span class="line">map[i][j] = <span class="number">2</span>;<span class="comment">//å‡å®šè¯¥ç‚¹æ˜¯å¯ä»¥èµ°é€š</span></span><br><span class="line"><span class="keyword">if</span>(setWay1(map, i - <span class="number">1</span>,j)) &#123; <span class="comment">//å¾€ä¸Šèµ°</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(setWay1(map, i, j + <span class="number">1</span>)) &#123;<span class="comment">//å‘å³</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(setWay1(map, i + <span class="number">1</span>, j)) &#123;<span class="comment">//å‘ä¸‹</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(setWay1(map, i, j -<span class="number">1</span>)) &#123;  <span class="comment">//å‘å·¦èµ°</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//è¯´æ˜è¯¥ç‚¹èµ°ä¸é€š</span></span><br><span class="line">map[i][j] = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//å¦‚æœmap[i][j] != 0,å¯èƒ½æ˜¯ 1,2,3</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-2-å…«çš‡åé—®é¢˜é€’å½’æ€è·¯å’Œå®ç°"><a href="#6-2-å…«çš‡åé—®é¢˜é€’å½’æ€è·¯å’Œå®ç°" class="headerlink" title="6.2 å…«çš‡åé—®é¢˜é€’å½’æ€è·¯å’Œå®ç°"></a>6.2 å…«çš‡åé—®é¢˜é€’å½’æ€è·¯å’Œå®ç°</h3><p>å…«çš‡åé—®é¢˜ç®—æ³•æ€è·¯åˆ†æï¼š</p><p>1ï¼‰ç¬¬ä¸€ä¸ªçš‡åå…ˆæ”¾ç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—</p><p>2ï¼‰ç¬¬äºŒä¸ªçš‡åæ”¾åœ¨ç¬¬äºŒè¡Œç¬¬ä¸€åˆ—ã€ç„¶ååˆ¤æ–­æ˜¯å¦OKï¼Œå¦‚æœä¸OKï¼Œç»§ç»­æ”¾åœ¨ç¬¬äºŒåˆ—ã€ç¬¬ä¸‰åˆ—ã€ä¾æ¬¡æŠŠæ‰€æœ‰åˆ—éƒ½æ”¾å®Œï¼Œæ‰¾åˆ°ä¸€ä¸ªåˆé€‚</p><p>3ï¼‰ç»§ç»­ç¬¬ä¸‰ä¸ªçš‡åï¼Œè¿˜æ˜¯ç¬¬ä¸€åˆ—ã€ç¬¬äºŒåˆ—â€¦â€¦.ç›´åˆ°ç¬¬8ä¸ªçš‡åä¹Ÿèƒ½æ”¾åœ¨ä¸€ä¸ªä¸å†²çªçš„ä½ç½®ï¼Œç®—æ˜¯æ‰¾åˆ°äº†ä¸€ä¸ªæ­£ç¡®è§£</p><p>4ï¼‰å½“å¾—åˆ°ä¸€ä¸ªæ­£ç¡®è§£æ—¶ï¼Œåœ¨æ ˆå›é€€åˆ°ä¸Šä¸€ä¸ªæ ˆæ—¶ï¼Œå°±ä¼šå¼€å§‹å›æº¯ï¼Œå³å°†ç¬¬ä¸€ä¸ªçš‡åï¼Œæ”¾åˆ°ç¬¬ä¸€åˆ—çš„æ‰€æœ‰æ­£ç¡®è§£ï¼Œå…¨éƒ¨å¾—åˆ°.</p><p>5ï¼‰ç„¶åå›å¤´ç»§ç»­ç¬¬ä¸€ä¸ªçš‡åæ”¾ç¬¬äºŒåˆ—ï¼Œåé¢ç»§ç»­å¾ªç¯æ‰§è¡Œ1ï¼Œ2ï¼Œ3ï¼Œ4çš„æ­¥éª¤</p><p>è¯´æ˜ï¼šç†è®ºä¸Šåº”è¯¥åˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„æ¥è¡¨ç¤ºæ£‹ç›˜ï¼Œä½†æ˜¯å®é™…ä¸Šå¯ä»¥é€šè¿‡ç®—æ³•ï¼Œç”¨ä¸€ä¸ªä¸€ç»´æ•°ç»„å³å¯è§£å†³é—®é¢˜.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…«çš‡åé—®é¢˜</span></span><br><span class="line"><span class="comment"> * æè¿°ï¼Œè¦æ±‚æ¯ä¸ªçš‡åä¸åœ¨åŒä¸€è¡Œï¼ŒåŒä¸€åˆ—ï¼Œå¹¶ä¸”ä¸åœ¨åŒä¸€æ–œçº¿ä¸Š</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è€èƒ¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023å¹´4æœˆ8æ—¥</span></span><br><span class="line"><span class="comment"> * Company æš‚æ— </span></span><br><span class="line"><span class="comment"> * Email 2844135670@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EightQueenQuestions</span> &#123;</span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªmaxè¡¨ç¤ºæœ‰å¤šå°‘ä¸ªçš‡å</span></span><br><span class="line"><span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">8</span>;</span><br><span class="line"><span class="comment">//å®šä¹‰æ•°ç»„array,ä¿å­˜çš‡åä½ç½®æ”¾ç½®çš„ç»“æœï¼Œæ¯”å¦‚arr=&#123;0,4,7,5,2,6,1,3&#125;</span></span><br><span class="line"><span class="type">int</span> [] array = <span class="keyword">new</span> <span class="title class_">int</span>[max];</span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€å…±æœ‰å¤šå°‘ç§è§£æ³•</span></span><br><span class="line"><span class="keyword">static</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span> ; </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//æµ‹è¯•ä¸€æŠŠï¼Œ8çš‡åæ˜¯å¦æ­£ç¡®</span></span><br><span class="line"><span class="type">EightQueenQuestions</span> <span class="variable">queue8</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EightQueenQuestions</span>();</span><br><span class="line">System.out.println(<span class="string">&quot;å“ªè¡Œå“ªåˆ—ä»£è¡¨æ•°å­—,&quot;</span></span><br><span class="line">+ <span class="string">&quot;æ¯”å¦‚0 4 7 5 2 6 1 3ï¼Œ&quot;</span></span><br><span class="line">+ <span class="string">&quot;0è¡¨ç¤ºç¬¬0è¡Œ0åˆ—ï¼Œ&quot;</span></span><br><span class="line">+<span class="string">&quot;4è¡¨ç¤ºç¬¬1è¡Œ4åˆ—ï¼Œ&quot;</span></span><br><span class="line">+<span class="string">&quot;5è¡¨ç¤ºç¬¬2è¡Œ6åˆ—ï¼Œ&quot;</span></span><br><span class="line">+<span class="string">&quot;ä»¥æ­¤ç±»æ¨ã€‚&quot;</span>);</span><br><span class="line">queue8.check(<span class="number">0</span>);</span><br><span class="line">System.out.printf(<span class="string">&quot;å…±è®¡æœ‰%dç§è§£æ³•&quot;</span>,count);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œæ”¾ç½®ç¬¬nä¸ªçš‡å</span></span><br><span class="line"><span class="comment">//æ³¨æ„åˆ°ï¼šcheckæ˜¯æ¯ä¸€æ¬¡é€’å½’æ—¶ï¼Œè¿›å…¥checkä¸­éƒ½æœ‰for(int i = 0; i &lt; max ; i ++)ï¼Œå› æ­¤ä¼šæœ‰å›æº¯</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">check</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(n == max ) &#123;</span><br><span class="line"><span class="comment">//n = 8 ï¼Œå…¶å®æ˜¯8ä¸ªçš‡åå°±æ”¾å¥½äº†</span></span><br><span class="line">print();</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¾æ¬¡æ”¾å…¥çš‡åï¼Œå¹¶åˆ¤æ–­æ˜¯å¦å†²çª</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; max; i ++) &#123;<span class="comment">//ä¸å†²çª</span></span><br><span class="line"><span class="comment">//å…ˆæŠŠå½“å‰è¿™ä¸ªçš‡ån,æ”¾åˆ°è¯¥è¡Œçš„ç¬¬1åˆ—</span></span><br><span class="line">array[n] = i;</span><br><span class="line"><span class="keyword">if</span>(judge(n)) &#123;</span><br><span class="line"><span class="comment">//æ¥ç€æ”¾ç½®n + 1çš‡åï¼Œå³å¼€å§‹é€’å½’</span></span><br><span class="line">check(n+<span class="number">1</span>); <span class="comment">//å¦‚æœæœ‰8ä¸ªçš‡åï¼Œæˆ‘ä»¬å°†è°ƒç”¨8æ¬¡</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœæ˜¯å†²çªå°±ç»§ç»­æ‰§è¡Œarray[n] = i; å³å°†ç¬¬nä¸ªçš‡åæ”¾ç½®åœ¨æœ¬è¡Œçš„åç§»ä¸€ä¸ªä½ç½®</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥çœ‹å½“æˆ‘ä»¬æ”¾ç½®ç¬¬nä¸ªçš‡åï¼Œå°±å»æ£€æµ‹è¯¥çš‡åæ˜¯å¦å’Œå‰é¢å·²ç»æ‘†æ”¾çš„çš‡åå†²çª</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> n è¡¨ç¤ºç¬¬nä¸ªçš‡å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">judge</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; n ; i ++) &#123;</span><br><span class="line"><span class="comment">//è¯´æ˜ä¸€ä¸‹</span></span><br><span class="line"><span class="comment">//array[i] == array[n] è¡¨ç¤ºåˆ¤æ–­ç¬¬nä¸ªçš‡åæ˜¯å¦å’Œå‰é¢çš„n-1ä¸ªçš‡ååœ¨åŒä¸€åˆ—</span></span><br><span class="line"><span class="comment">//Math.abs(n-i) == Math.abs(array[n] -  array[i]) è¡¨ç¤ºåˆ¤æ–­ç¬¬nä¸ªçš‡åæ—¶å€™å’Œç¬¬iä¸ªçš‡åæ˜¯å¦åœ¨åŒä¸€æ–œçº¿</span></span><br><span class="line"><span class="comment">// n = 1 æ”¾ç½®ç¬¬2åˆ— n = 1 array[1] = 1</span></span><br><span class="line"><span class="comment">//Math.abs(1 - 0)  == 1 Math.abs(array[n] - array[i]) = Math.abs(1-0) = 1;</span></span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦åœ¨åŒä¸€è¡Œï¼Œå…¶å®æ²¡æœ‰å¿…è¦ï¼Œå› ä¸ºæ¯æ¬¡éƒ½åœ¨é€’å¢</span></span><br><span class="line"><span class="keyword">if</span>(array[i] == array[n] || Math.abs(n-i) == Math.abs(array[n] -  array[i])) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å†™ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å°†çš‡åæ‘†æ”¾çš„ä½ç½®è¾“å‡º</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span> &#123;</span><br><span class="line">count ++;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">System.out.print(array[i] + <span class="string">&quot; &quot;</span> );</span><br><span class="line">&#125;</span><br><span class="line">System.out.println();</span><br><span class="line">System.out.println(<span class="string">&quot;===============&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="7-æ’åº"><a href="#7-æ’åº" class="headerlink" title="7. æ’åº"></a>7. æ’åº</h2><h3 id="7-1-8ç§åŸºæœ¬æ’åº"><a href="#7-1-8ç§åŸºæœ¬æ’åº" class="headerlink" title="7.1 8ç§åŸºæœ¬æ’åº"></a>7.1 8ç§åŸºæœ¬æ’åº</h3><ol><li>æ’åºä¹Ÿç§°ä¸ºæ’åºç®—æ³•ï¼Œæ’åºæ˜¯ä¸€ç»„æ•°æ®ï¼ŒæŒ‰ç…§æŒ‡å®šçš„é¡ºåºè¿›è¡Œæ’åˆ—çš„è¿‡ç¨‹ã€‚</li><li>æ’åºçš„åˆ†ç±»ï¼š<ol><li>å†…éƒ¨æ’åºï¼šå°†éœ€è¦å¤„ç†çš„æ‰€æœ‰æ•°æ®éƒ½åŠ è½½åˆ°å†…éƒ¨å­˜å‚¨å™¨ä¸­è¿›è¡Œæ’åº</li><li>å¤–éƒ¨æ’åºï¼šæ•°æ®é‡è¿‡å¤§ï¼Œæ— æ³•å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œéœ€è¦å€ŸåŠ©å¤–éƒ¨å­˜å‚¨è¿›è¡Œæ’åº</li></ol></li><li>å¸¸è§çš„æ’åºç®—æ³•çš„åˆ†ç±»ï¼š<ol><li>å†…éƒ¨æ’åºï¼š<ol><li>æ’å…¥æ’åºï¼š<ol><li>ç›´æ¥æ’å…¥æ’åº</li><li>å¸Œå°”æ’åº</li></ol></li><li>é€‰æ‹©æ’åº<ol><li>ç®€å•é€‰æ‹©æ’åº</li><li>å †æ’åº</li></ol></li><li>äº¤æ¢æ’åº<ol><li>å†’æ³¡æ’åº</li><li>å¿«é€Ÿæ’åº</li></ol></li><li>å½’å¹¶æ’åº</li><li>åŸºæ•°æ’åº</li></ol></li><li>å¤–éƒ¨æ’åºï¼šå†…å­˜å’Œå¤–å­˜æ’åº</li></ol></li></ol><h3 id="7-2æ—¶é—´å¤æ‚åº¦"><a href="#7-2æ—¶é—´å¤æ‚åº¦" class="headerlink" title="7.2æ—¶é—´å¤æ‚åº¦"></a>7.2æ—¶é—´å¤æ‚åº¦</h3><p>ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦</p><p>ä¸€èˆ¬æˆ‘ä»¬åº¦é‡ä¸€ä¸ªç¨‹åºæ‰§è¡Œæ—¶é—´çš„ä¸¤ç§æ–¹æ³•</p><ol><li><p>äº‹åç»Ÿè®¡ï¼šè¿™ç§æ–¹æ³•å¯è¡Œï¼Œä½†æ˜¯å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€æ˜¯æƒ³è¦å¯¹è®¾è®¡çš„ç®—æ³•çš„è¿è¡Œæ€§èƒ½è¿›è¡Œè¯„æµ‹ï¼Œéœ€è¦å®é™…è¿è¡Œè¯¥ç¨‹åºï¼ŒäºŒæ˜¯æ‰€å¾—æ—¶é—´çš„ç»Ÿè®¡é‡ä¾èµ–äºè®¡ç®—æœºçš„ç¡¬ä»¶ï¼Œè½¯ä»¶ç­‰ç¯å¢ƒå› ç´ ï¼Œè¿™ç§æ–¹å¼è¦æ±‚åœ¨åŒä¸€å°è®¡ç®—æœºçš„ç›¸åŒçŠ¶æ€ä¸‹è¿è¡Œï¼Œæ‰èƒ½æ¯”è¾ƒé‚£ä¸ªç®—æ³•é€Ÿåº¦æ›´å¿«ã€‚</p></li><li><p>äº‹å‰ä¼°ç®—æ³•ï¼šé€šè¿‡åˆ†ææŸä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ¥åˆ¤æ–­å“ªä¸ªç®—æ³•æ›´ä¼˜ã€‚</p></li></ol><p>1ï¼‰ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç®—æ³•ä¸­çš„åŸºæœ¬æ“ä½œè¯­å¥çš„é‡å¤æ‰§è¡Œæ¬¡æ•°æ˜¯é—®é¢˜è§„æ¨¡nçš„æŸä¸ªå‡½æ•°ï¼Œç”¨f(nï¼‰è¡¨ç¤ºï¼Œè‹¥æœ‰æŸä¸ªè¾…åŠ©å‡½æ•°f(nï¼‰ï¼Œä¾¿å¾—å½“nè¶‹è¿‘äºæ— ç©·å¤§æ—¶ï¼ŒT(n)/f(n)çš„æé™å€¼ä¸ºä¸ç­‰äºé›¶çš„å¸¸æ•°ï¼Œåˆ™ç§°fï¼ˆnï¼‰æ˜¯Tï¼ˆnï¼‰çš„åŒæ•°é‡çº§å‡½æ•°ã€‚è®°ä½œTï¼ˆnï¼‰=O(f(n))ï¼Œç§°O(f(n))ä¸ºç®—æ³•çš„æ¸è¿›é—´å¤æ‚åº¦ï¼Œç®€ç§°æ—¶é—´å¤æ‚åº¦ã€‚</p><p>2ï¼‰Tï¼ˆnï¼‰ä¸åŒï¼Œä½†æ—¶é—´å¤æ‚åº¦å¯èƒ½ç›¸åŒã€‚å¦‚ï¼šTï¼ˆnï¼‰=n^2+7n+6ä¸Tï¼ˆnï¼‰=3n^2+2n+2å®ƒä»¬çš„ï¼ˆnï¼‰ä¸åŒï¼Œä½†æ—¶é—´å¤æ‚åº¦ç›¸åŒï¼Œéƒ½ä¸ºO(n^2)ã€‚</p><p>3ï¼‰è®¡ç®—æ—¶é—´å¤æ‚åº¦çš„æ–¹æ³•ï¼š</p><ul><li><p>ç”¨å¸¸æ•°1ä»£æ›¿è¿è¡Œæ—¶é—´ä¸­çš„æ‰€æœ‰åŠ æ³•å¸¸æ•° T(n) = n^2 + 7n + 6; =&gt;T(n) = n^2 + 7n + 1</p></li><li><p>ä¿®æ”¹åçš„è¿è¡Œæ¬¡æ•°å‡½æ•°ä¸­ï¼Œåªä¿ç•™æœ€é«˜é˜¶é¡¹</p><p>T(n) = n^2 + 7n + 1 =&gt; T(n) = n^2</p></li><li><p>å»é™¤æœ€é«˜é˜¶é¡¹çš„ç³»æ•°T(n) =3n^2 =&gt;O(n^2)</p></li></ul><ol><li><p>å¸¸æ•°é˜¶O(1)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">++ i;</span><br><span class="line">j++ ;</span><br><span class="line"><span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> i + j;</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>å¯¹æ•°é˜¶O(log2n)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">i</span>  <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(i&lt;n)&#123;</span><br><span class="line">    i=i*<span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>çº¿æ€§é˜¶O(n)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n ; ++ i)&#123;</span><br><span class="line">    j = i;</span><br><span class="line">    j ++;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></li></ol><ol><li><p>çº¿æ€§å¯¹æ•°é˜¶O(nlog2n)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; m &lt; n; m++ )&#123;</span><br><span class="line">    i = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(i &lt; n)&#123;</span><br><span class="line">        i *= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>å¹³æ–¹é˜¶O(n^2)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>( <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i&lt;= n; i ++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span> ; j &lt;= n; j++)&#123;</span><br><span class="line">        j = i;</span><br><span class="line">        j ++ ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>ç«‹æ–¹é˜¶O(n^3)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>()&#123;</span><br><span class="line">    <span class="keyword">for</span>()&#123;</span><br><span class="line">        <span class="keyword">for</span>()&#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>kæ¬¡æ–¹é˜¶O(n^k)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">nå±‚<span class="keyword">for</span>()&#123;</span><br><span class="line">    <span class="keyword">for</span>()&#123;</span><br><span class="line">        <span class="keyword">for</span>()&#123;</span><br><span class="line">            ......</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><ol><li>æŒ‡æ•°é˜¶O(2^n)</li></ol><p>ä¾æ¬¡å¾€ä¸‹æ—¶é—´å¤æ‚åº¦å¢é•¿</p><div class="table-container"><table><thead><tr><th>æ’åºæ³•</th><th>å¹³å‡æ—¶é—´</th><th>æœ€å·®æƒ…å†µ</th><th>ç¨³å®šåº¦</th><th>ç©ºé—´å¤æ‚åº¦</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>å†’æ³¡</td><td>O(n^2)</td><td>O(n^2)</td><td>ç¨³å®š</td><td>1</td><td>nå°æ¯”è¾ƒå¥½</td></tr><tr><td>äº¤æ¢</td><td>O(n^2)</td><td>O(n^2)</td><td>ä¸ç¨³å®š</td><td>1</td><td>nå°æ¯”è¾ƒå¥½</td></tr><tr><td>é€‰æ‹©</td><td>O(n^2)</td><td>O(n^2)</td><td>ä¸ç¨³å®š</td><td>1</td><td>nå°æ¯”è¾ƒå¥½</td></tr><tr><td>æ’å…¥</td><td>O(n^2)</td><td>O(n^2)</td><td>ç¨³å®š</td><td>1</td><td>å¤§éƒ¨åˆ†å·²æ’åºçš„è¾ƒå¥½</td></tr><tr><td>åŸºæ•°</td><td>O(logRB)</td><td>O(logRB)</td><td>ç¨³å®š</td><td>1</td><td>Bæ˜¯çœŸæ•°(0-9),Ræ˜¯åŸºæ•°ï¼ˆä¸ªåç™¾ï¼‰</td></tr><tr><td>shell</td><td>O(nlogn)</td><td>O(n^s)  1&lt;s&lt;2</td><td>ä¸ç¨³å®š</td><td>1</td><td>sæ˜¯æ‰€é€‰åˆ†ç»„</td></tr><tr><td>å¿«é€Ÿ</td><td>O(nlogn)</td><td>O(n^2)</td><td>ä¸ç¨³å®š</td><td>O(nlogn)</td><td>nå¤§æ—¶è¾ƒå¥½</td></tr><tr><td>å½’å¹¶</td><td>O(nlogn)</td><td>O(nlogn)</td><td>ç¨³å®š</td><td>O(1)</td><td>nå¤§æ—¶è¾ƒå¥½</td></tr><tr><td>å †</td><td>O(nlogn)</td><td>O(nlogn)</td><td>ä¸ç¨³å®š</td><td>O(1)</td><td>nå¤§æ—¶å€™è¾ƒå¥½</td></tr></tbody></table></div><h3 id="7-3-æ’åºç®—æ³•çš„å®ç°ä¸è®¾è®¡"><a href="#7-3-æ’åºç®—æ³•çš„å®ç°ä¸è®¾è®¡" class="headerlink" title="7.3 æ’åºç®—æ³•çš„å®ç°ä¸è®¾è®¡"></a>7.3 æ’åºç®—æ³•çš„å®ç°ä¸è®¾è®¡</h3><h4 id="7-3-1-å†’æ³¡æ’åº"><a href="#7-3-1-å†’æ³¡æ’åº" class="headerlink" title="7.3.1 å†’æ³¡æ’åº"></a>7.3.1 å†’æ³¡æ’åº</h4><p>æ€æƒ³ï¼š</p><p>å†’æ³¡æ’åºé€šè¿‡å¯¹æ’åºåºåˆ—ä»å‰å¾€å(ä»ä¸‹æ ‡è¾ƒå°çš„å…ƒç´ å¼€å§‹)ï¼Œä¾æ¬¡æ¯”è¾ƒç›¸é‚»å…ƒç´ çš„å€¼ï¼Œè‹¥å‘ç°é€†åºåˆ™äº¤æ¢ï¼Œä½¿å€¼è¾ƒå¤§å¤§å…ƒç´ æ…¢æ…¢ä»å‰å¾€åç§»ï¼Œå°±åƒæ°´åº•æ°”æ³¡ä¸€æ ·æ…¢æ…¢å¾€ä¸Šå†’ã€‚</p><p>ä¼˜åŒ–ï¼š</p><p>å› ä¸ºæ’åºçš„è¿‡ç¨‹ä¸­ï¼Œå„å…ƒç´ ä¸æ–­æ¥è¿‘è‡ªå·±çš„ä½ç½®ï¼Œå¦‚æœä¸€è¶Ÿæ¯”è¾ƒä¸‹æ¥æ²¡æœ‰è¿›è¡Œè¿‡äº¤æ¢ï¼Œå°±è¯´æ˜åºåˆ—æœ‰åºï¼Œå› æ­¤è¦åœ¨æ’åºè¿‡ç¨‹ä¸­è®¾ç½®ä¸€ä¸ªæ ‡å¿—flagåˆ¤æ–­å…ƒç´ æ˜¯å¦è¿›è¡Œè¿‡äº¤æ¢ã€‚ä»è€Œå‡å°‘ä¸å¿…è¦çš„æ¯”è¾ƒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BubbleSort</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">int</span> arr[] = &#123;<span class="number">3</span>,<span class="number">9</span>,-<span class="number">1</span>,<span class="number">10</span>,-<span class="number">2</span>&#125;;</span><br><span class="line"><span class="comment">//å†’æ³¡æ’åºçš„è¿‡ç¨‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸€è¶Ÿæ’åºï¼Œå°±æ˜¯å°†æœ€å¤§çš„æ•°æ’åœ¨æœ€å</span></span><br><span class="line"><span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//ä¸´æ—¶å˜é‡</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; arr.length -<span class="number">1</span> ; i ++ ) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span> ; j &lt; arr.length -<span class="number">1</span> -i; j ++) &#123;</span><br><span class="line"><span class="comment">//å¦‚æœå‰é¢è¿™ä¸ªæ•°æ¯”åé¢çš„æ•°æ›´å¤§ï¼Œåˆ™äº¤æ¢</span></span><br><span class="line"><span class="keyword">if</span>(arr[j]&gt;arr[j+<span class="number">1</span>]) &#123;</span><br><span class="line">temp = arr[j];</span><br><span class="line">arr[j] = arr[j+<span class="number">1</span>];</span><br><span class="line">arr[j+<span class="number">1</span>] = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line"><span class="comment">/*System.out.println(&quot;ç¬¬ä¸€å›æ’åºåçš„æ•°ç»„&quot;);</span></span><br><span class="line"><span class="comment">System.out.println(Arrays.toString(arr));</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">//ç¬¬äºŒä¼šæ’åºï¼Œå°±æ˜¯å°†ç¬¬äºŒå¤§çš„æ•°æ’åœ¨å€’æ•°ç¬¬äºŒä½</span></span><br><span class="line"><span class="comment">for(int j = 0 ; j &lt; arr.length -1 - 1; j ++ ) &#123;</span></span><br><span class="line"><span class="comment">//å¦‚æœå‰é¢è¿™ä¸ªæ•°æ¯”åé¢çš„æ•°æ›´å¤§ï¼Œåˆ™äº¤æ¢</span></span><br><span class="line"><span class="comment">if(arr[j]&gt;arr[j+1]) &#123;</span></span><br><span class="line"><span class="comment">temp = arr[j];</span></span><br><span class="line"><span class="comment">arr[j] = arr[j+1];</span></span><br><span class="line"><span class="comment">arr[j+1] = temp;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">System.out.println(&quot;ç¬¬äºŒå›æ’åºåçš„æ•°ç»„&quot;);</span></span><br><span class="line"><span class="comment">System.out.println(Arrays.toString(arr));</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">//ç¬¬ä¸‰ä¼šæ’åºï¼Œå°±æ˜¯å°†ç¬¬ä¸‰å¤§çš„æ•°æ’åœ¨å€’æ•°ç¬¬ä¸‰ä½</span></span><br><span class="line"><span class="comment">for(int j = 0 ; j &lt; arr.length -1 - 2; j ++ ) &#123;</span></span><br><span class="line"><span class="comment">//å¦‚æœå‰é¢è¿™ä¸ªæ•°æ¯”åé¢çš„æ•°æ›´å¤§ï¼Œåˆ™äº¤æ¢</span></span><br><span class="line"><span class="comment">if(arr[j]&gt;arr[j+1]) &#123;</span></span><br><span class="line"><span class="comment">temp = arr[j];</span></span><br><span class="line"><span class="comment">arr[j] = arr[j+1];</span></span><br><span class="line"><span class="comment">arr[j+1] = temp;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">System.out.println(&quot;ç¬¬ä¸‰å›æ’åºåçš„æ•°ç»„&quot;);</span></span><br><span class="line"><span class="comment">System.out.println(Arrays.toString(arr));</span></span><br><span class="line"><span class="comment">//ç¬¬å››ä¼šæ’åºï¼Œå°±æ˜¯å°†ç¬¬å››å¤§çš„æ•°æ’åœ¨å€’æ•°ç¬¬å››ä½</span></span><br><span class="line"><span class="comment">for(int j = 0 ; j &lt; arr.length -1 - 3; j ++ ) &#123;</span></span><br><span class="line"><span class="comment">//å¦‚æœå‰é¢è¿™ä¸ªæ•°æ¯”åé¢çš„æ•°æ›´å¤§ï¼Œåˆ™äº¤æ¢</span></span><br><span class="line"><span class="comment">if(arr[j]&gt;arr[j+1]) &#123;</span></span><br><span class="line"><span class="comment">temp = arr[j];</span></span><br><span class="line"><span class="comment">arr[j] = arr[j+1];</span></span><br><span class="line"><span class="comment">arr[j+1] = temp;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">System.out.println(&quot;ç¬¬å››å›æ’åºåçš„æ•°ç»„&quot;);</span></span><br><span class="line"><span class="comment">System.out.println(Arrays.toString(arr));</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>å†’æ³¡æ’åºçš„ä¼˜åŒ–ï¼š</p><p>å› ä¸ºåœ¨æ’åºè¿‡ç¨‹ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BubbleSortOptimize</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">int arr[] = &#123;3,9,-1,10,-2&#125;;</span></span><br><span class="line"><span class="comment">//å†’æ³¡æ’åºçš„è¿‡ç¨‹</span></span><br><span class="line"><span class="comment">System.out.println(&quot;æ’åºå‰çš„æ•°ç»„ï¼š&quot;);</span></span><br><span class="line"><span class="comment">System.out.println(Arrays.toString(arr));</span></span><br><span class="line"><span class="comment">System.out.println(&quot;=============================&quot;);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•ä¸€ä¸‹å†’æ³¡æ’åºçš„é€Ÿåº¦O(n^2),ç»™8ä¸‡ä¸ªæ•°æ®ï¼Œæµ‹è¯•</span></span><br><span class="line"><span class="comment">//åˆ›å»ºè¦ç»™80000ä¸ªæ•°æ®</span></span><br><span class="line"><span class="type">int</span> [] arr = <span class="keyword">new</span> <span class="title class_">int</span> [<span class="number">80000</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; <span class="number">80000</span> ; i ++) &#123;</span><br><span class="line">arr[i] = (<span class="type">int</span>)(Math.random() * <span class="number">80000</span>); <span class="comment">//ç”Ÿæˆä¸€ä¸ª[0,80000)çš„éšæœºæ•°</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Date</span> <span class="variable">date1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="comment">//è¾“å‡ºä¸€ä¸ªæ—¥æœŸæ ¼å¼</span></span><br><span class="line"><span class="type">SimpleDateFormat</span> <span class="variable">simpleDateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">dateStr</span> <span class="operator">=</span> simpleDateFormat.format(date1);</span><br><span class="line">System.out.println(<span class="string">&quot;æ’åºå‰çš„æ—¶é—´ä¸º=&quot;</span> + dateStr);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•å†’æ³¡æ’åº</span></span><br><span class="line">bubbleSort(arr);</span><br><span class="line"><span class="type">Date</span> <span class="variable">date2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="type">String</span> <span class="variable">dateStr2</span> <span class="operator">=</span> simpleDateFormat.format(date2);</span><br><span class="line">System.out.println(<span class="string">&quot;è¾“å‡ºæ’åºåçš„æ—¶é—´&quot;</span> + dateStr2);</span><br><span class="line"><span class="comment">//System.out.println(Arrays.toString(arr));</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å‰é¢å†’æ³¡æ’åºç®—æ³•å°è£…æˆä¸€ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">bubbleSort</span><span class="params">(<span class="type">int</span> [] arr)</span> &#123;</span><br><span class="line"><span class="comment">//ç¬¬ä¸€è¶Ÿæ’åºï¼Œå°±æ˜¯å°†æœ€å¤§çš„æ•°æ’åœ¨æœ€å</span></span><br><span class="line"><span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//ä¸´æ—¶å˜é‡</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>; <span class="comment">//å®šä¹‰ä¸€ä¸ªæ ‡è¯†ç¬¦</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; arr.length -<span class="number">1</span> ; i ++ ) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span> ; j &lt; arr.length -<span class="number">1</span> -i; j ++) &#123;</span><br><span class="line"><span class="comment">//å¦‚æœå‰é¢è¿™ä¸ªæ•°æ¯”åé¢çš„æ•°æ›´å¤§ï¼Œåˆ™äº¤æ¢</span></span><br><span class="line"><span class="keyword">if</span>(arr[j]&gt;arr[j+<span class="number">1</span>]) &#123;</span><br><span class="line">flag = <span class="literal">true</span>;</span><br><span class="line">temp = arr[j];</span><br><span class="line">arr[j] = arr[j+<span class="number">1</span>];</span><br><span class="line">arr[j+<span class="number">1</span>] = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//System.out.println(&quot;ç¬¬&quot;+(i+1)+&quot;èººæ’åºåçš„æ•°ç»„&quot;);</span></span><br><span class="line"><span class="comment">//System.out.println(Arrays.toString(arr));</span></span><br><span class="line"><span class="keyword">if</span>(flag == <span class="literal">false</span>) &#123; <span class="comment">//åœ¨ä¸€è¶Ÿæ’åºä¸­ä¸€æ¬¡äº¤æ¢éƒ½æ²¡å‘ç”Ÿè¿‡</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">flag = <span class="literal">false</span>; <span class="comment">//é‡ç½®flagï¼ï¼ï¼ï¼Œè¿›è¡Œä¸‹æ¬¡åˆ¤æ–­</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ ¸å¿ƒä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//ä¸´æ—¶å˜é‡</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; arr.length -<span class="number">1</span> ; i ++ ) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span> ; j &lt; arr.length -<span class="number">1</span> -i; j ++) &#123;</span><br><span class="line"><span class="comment">//å¦‚æœå‰é¢è¿™ä¸ªæ•°æ¯”åé¢çš„æ•°æ›´å¤§ï¼Œåˆ™äº¤æ¢</span></span><br><span class="line"><span class="keyword">if</span>(arr[j]&gt;arr[j+<span class="number">1</span>]) &#123;</span><br><span class="line">temp = arr[j];</span><br><span class="line">arr[j] = arr[j+<span class="number">1</span>];</span><br><span class="line">arr[j+<span class="number">1</span>] = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br></pre></td></tr></table></figure><h4 id="7-3-2-é€‰æ‹©æ’åº"><a href="#7-3-2-é€‰æ‹©æ’åº" class="headerlink" title="7.3.2 é€‰æ‹©æ’åº"></a>7.3.2 é€‰æ‹©æ’åº</h4><p>é€‰æ‹©æ’åºä¹Ÿæ˜¯ä¸€ç§ç®€å•çš„æ’åºæ–¹å¼ï¼Œå…¶åŸºæœ¬æ€æƒ³åœ¨äºï¼šç¬¬ä¸€æ¬¡ä»æ•°ç»„(arr[0]-arr[n-1])ä¸­é€‰æ‹©æœ€å°çš„å€¼ï¼Œç„¶åä¸æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ (arr[0])è¿›è¡Œäº¤æ¢ï¼Œç¬¬äºŒæ¬¡ä»<code>arr[1]-arr[n-1</code>]ä¸­é€‰å–æœ€å°å€¼ï¼Œä¸arr[1]äº¤æ¢,â€¦â€¦,çŸ¥é“å°†æ•°ç»„æ’åºå¥½ï¼Œæ€»å…±é€šè¿‡<code>n-1</code>æ¬¡ï¼Œå¾—åˆ°ä¸€ä¸ªæŒ‰ç…§æ’åºç ä»å°åˆ°å¤§çš„æœ‰åºåºåˆ—ã€‚</p><p>æ€è·¯ï¼š</p><p>åŸå§‹æ•°ç»„ ï¼š 101,34,119,1ï¼›</p><p>ç¬¬ä¸€è½®æ’åºï¼š1,34,119,101ï¼›</p><p>ç¬¬äºŒè½®æ’åºï¼š1,34,119,101ï¼›</p><p>ç¬¬ä¸‰è½®æ’åºï¼š1,34,101,119;</p><ol><li>é€‰åˆ™æ’åºä¸€å…±æœ‰æ•°ç»„å¤§å°-1è½®æ’åº</li><li>æ¯1è½®æ’åºï¼Œåˆæ˜¯ä¸€ä¸ªå¾ªç¯ï¼Œå¾ªç¯çš„è§„åˆ™ã€‚<ol><li>å‡å®šå½“å‰è¿™ä¸ªæ•°æ˜¯æœ€å°æ•°</li><li>ç„¶åå’Œåé¢çš„æ¯ä¸ªæ•°è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå‘ç°æœ‰æ¯”å½“å‰æ•°æ›´å°çš„æ•°ï¼Œå°±é‡æ–°ç¡®å®šæœ€å°æ•°ï¼Œå¹¶å¾—åˆ°ä¸‹æ ‡</li><li>å½“éå†åˆ°æ•°ç»„çš„æœ€åï¼Œå°±å¾—åˆ°æœ¬è½®æœ€å°æ•°å’Œä¸‹æ ‡</li><li>äº¤æ¢æ•°ç»„çš„ä½ç½®</li></ol></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SelectSort</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//int [] arr =  &#123;101,34,119,1&#125;;</span></span><br><span class="line"><span class="comment">//åˆ›å»ºè¦ç»™80000ä¸ªæ•°æ®</span></span><br><span class="line"><span class="type">int</span> [] arr = <span class="keyword">new</span> <span class="title class_">int</span> [<span class="number">80000</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; <span class="number">80000</span> ; i ++) &#123;</span><br><span class="line">arr[i] = (<span class="type">int</span>)(Math.random() * <span class="number">80000</span>); <span class="comment">//ç”Ÿæˆä¸€ä¸ª[0,80000)çš„éšæœºæ•°</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Date</span> <span class="variable">date1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="comment">//è¾“å‡ºä¸€ä¸ªæ—¥æœŸæ ¼å¼</span></span><br><span class="line"><span class="type">SimpleDateFormat</span> <span class="variable">simpleDateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">dateStr</span> <span class="operator">=</span> simpleDateFormat.format(date1);</span><br><span class="line">System.out.println(<span class="string">&quot;æ’åºå‰çš„æ—¶é—´ä¸º=&quot;</span> + dateStr);</span><br><span class="line">selectSort(arr);</span><br><span class="line"><span class="comment">//æµ‹è¯•å†’æ³¡æ’åº</span></span><br><span class="line"><span class="type">Date</span> <span class="variable">date2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="type">String</span> <span class="variable">dateStr2</span> <span class="operator">=</span> simpleDateFormat.format(date2);</span><br><span class="line">System.out.println(<span class="string">&quot;è¾“å‡ºæ’åºåçš„æ—¶é—´&quot;</span> + dateStr2);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">System.out.println(&quot;æ’åºå‰ï¼š&quot;);</span></span><br><span class="line"><span class="comment">System.out.println(Arrays.toString(arr));</span></span><br><span class="line"><span class="comment">selectSort(arr);</span></span><br><span class="line"><span class="comment">System.out.println(&quot;æ’åºå&quot;);</span></span><br><span class="line"><span class="comment">System.out.println(Arrays.toString(arr));</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é€‰æ‹©æ’åº</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">selectSort</span><span class="params">(<span class="type">int</span> [] arr)</span> &#123;</span><br><span class="line"><span class="comment">//åœ¨æ¨åˆ°çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å‘ç°è§„å¾‹ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨foræ¥è§£å†³</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; arr.length ; i ++ ) &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">minIndex</span> <span class="operator">=</span> i;</span><br><span class="line"><span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> arr[i];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i +<span class="number">1</span> ; j &lt; arr.length ; j++) &#123;</span><br><span class="line"><span class="keyword">if</span>(min &gt; arr[j]) &#123; <span class="comment">//è¯´æ˜å‡å®šçš„æœ€å°å€¼ï¼Œå¹¶éæœ€å°</span></span><br><span class="line">min = arr[j]; <span class="comment">//é‡ç½®min</span></span><br><span class="line">minIndex = j ;  <span class="comment">//é‡ç½®minInde</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(minIndex != i) &#123;</span><br><span class="line">arr[minIndex] = arr[i];</span><br><span class="line">arr[i] = min;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * System.out.println(&quot;ç¬¬&quot;+(i+1)+&quot;è½®å~~&quot;);</span></span><br><span class="line"><span class="comment"> * System.out.println(Arrays.toString(arr));</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä½¿ç”¨é€æ­¥æ¨å¯¼ï¼Œè¿›è¡Œé€‰æ‹©æ’åºy</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * åŸå§‹çš„æ•°ç»„ï¼š 101,34,119,1</span></span><br><span class="line"><span class="comment"> * ç¬¬ä¸€è½®æ’åºï¼š1,34,119,101ï¼›</span></span><br><span class="line"><span class="comment">      ç¬¬äºŒè½®æ’åºï¼š1,34,119,101ï¼›</span></span><br><span class="line"><span class="comment">      ç¬¬ä¸‰è½®æ’åºï¼š1,34,101,119;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">int minIndex = 0;</span></span><br><span class="line"><span class="comment">int min = arr[0];</span></span><br><span class="line"><span class="comment">for(int j = 0 +1 ; j &lt; arr.length ; j++) &#123;</span></span><br><span class="line"><span class="comment">if(min &gt; arr[j]) &#123; //è¯´æ˜å‡å®šçš„æœ€å°å€¼ï¼Œå¹¶éæœ€å°</span></span><br><span class="line"><span class="comment">min = arr[j]; //é‡ç½®min</span></span><br><span class="line"><span class="comment">minIndex = j ;  //é‡ç½®minInde</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">//æ­¤æ—¶å°†æœ€å°å€¼ï¼Œæ”¾åœ¨arr[0]ä¸­ï¼Œæ­¤æ—¶å°±æ˜¯äº¤æ¢</span></span><br><span class="line"><span class="comment">if(minIndex != 0) &#123;</span></span><br><span class="line"><span class="comment">arr[minIndex] = arr[0];</span></span><br><span class="line"><span class="comment">arr[0] = min;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">System.out.println(&quot;ç¬¬ä¸€è½®å~~&quot;);</span></span><br><span class="line"><span class="comment">System.out.println(Arrays.toString(arr));</span></span><br><span class="line"><span class="comment">//ç¬¬äºŒè½®</span></span><br><span class="line"><span class="comment">minIndex = 1;</span></span><br><span class="line"><span class="comment">min = arr[1];</span></span><br><span class="line"><span class="comment">for(int j = 0 +1 ; j &lt; arr.length ; j++) &#123;</span></span><br><span class="line"><span class="comment">if(min &gt; arr[j]) &#123; //è¯´æ˜å‡å®šçš„æœ€å°å€¼ï¼Œå¹¶éæœ€å°</span></span><br><span class="line"><span class="comment">min = arr[j]; //é‡ç½®min</span></span><br><span class="line"><span class="comment">minIndex = j ;  //é‡ç½®minInde</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">//æ­¤æ—¶å°†æœ€å°å€¼ï¼Œæ”¾åœ¨arr[0]ä¸­ï¼Œæ­¤æ—¶å°±æ˜¯äº¤æ¢</span></span><br><span class="line"><span class="comment">if(minIndex != 1) &#123;</span></span><br><span class="line"><span class="comment">arr[minIndex] = arr[1];</span></span><br><span class="line"><span class="comment">arr[1] = min;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">System.out.println(&quot;ç¬¬äºŒè½®å~~&quot;);</span></span><br><span class="line"><span class="comment">System.out.println(Arrays.toString(arr));</span></span><br><span class="line"><span class="comment">//ç¬¬ä¸‰è½®</span></span><br><span class="line"><span class="comment">minIndex = 2;</span></span><br><span class="line"><span class="comment">min = arr[2];</span></span><br><span class="line"><span class="comment">for(int j = 0 +1 ; j &lt; arr.length ; j++) &#123;</span></span><br><span class="line"><span class="comment">if(min &gt; arr[j]) &#123; //è¯´æ˜å‡å®šçš„æœ€å°å€¼ï¼Œå¹¶éæœ€å°</span></span><br><span class="line"><span class="comment">min = arr[j]; //é‡ç½®min</span></span><br><span class="line"><span class="comment">minIndex = j ;  //é‡ç½®minInde</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">//æ­¤æ—¶å°†æœ€å°å€¼ï¼Œæ”¾åœ¨arr[0]ä¸­ï¼Œæ­¤æ—¶å°±æ˜¯äº¤æ¢</span></span><br><span class="line"><span class="comment">if(minIndex != 2) &#123;</span></span><br><span class="line"><span class="comment">arr[minIndex] = arr[2];</span></span><br><span class="line"><span class="comment">arr[2] = min;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">System.out.println(&quot;ç¬¬ä¸‰è½®å~~&quot;);</span></span><br><span class="line"><span class="comment">System.out.println(Arrays.toString(arr));</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹æ¯”å†’æ³¡æ’åºå‘ç°ï¼Œé€‰æ‹©æ’åºé€Ÿåº¦æ¯”å†’æ³¡æ’åºå¿«ã€‚</p><p>æ ¸å¿ƒä»£ç å±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€‰æ‹©æ’åº</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">selectSort</span><span class="params">(<span class="type">int</span> [] arr)</span> &#123;</span><br><span class="line"><span class="comment">//åœ¨æ¨åˆ°çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å‘ç°è§„å¾‹ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨foræ¥è§£å†³</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; arr.length ; i ++ ) &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">minIndex</span> <span class="operator">=</span> i;</span><br><span class="line"><span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> arr[i];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i +<span class="number">1</span> ; j &lt; arr.length ; j++) &#123;</span><br><span class="line"><span class="keyword">if</span>(min &gt; arr[j]) &#123; <span class="comment">//è¯´æ˜å‡å®šçš„æœ€å°å€¼ï¼Œå¹¶éæœ€å°</span></span><br><span class="line">min = arr[j]; <span class="comment">//é‡ç½®min</span></span><br><span class="line">minIndex = j ;  <span class="comment">//é‡ç½®minInde</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(minIndex != i) &#123;</span><br><span class="line">arr[minIndex] = arr[i];</span><br><span class="line">arr[i] = min;</span><br><span class="line">&#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h4 id="7-3-3-æ’å…¥æ’åº"><a href="#7-3-3-æ’å…¥æ’åº" class="headerlink" title="7.3.3 æ’å…¥æ’åº"></a>7.3.3 æ’å…¥æ’åº</h4><p>æ’å…¥æ’åºçš„åŸºæœ¬æ€æƒ³ï¼š æŠŠnä¸ªå¾…æ’åºçš„å…ƒç´ çœ‹æˆä¸€ä¸ªæœ‰åºè¡¨å’Œä¸€ä¸ªæ— åºè¡¨ï¼Œå¼€å§‹æ—¶ï¼Œæœ‰åºè¡¨åªåŒ…å«ä¸€ä¸ªå…ƒç´ ï¼Œæ— åºè¡¨ä¸­åŒ…å«æœ‰n-1ä¸ªå…ƒç´ ï¼Œæ’åºè¿‡ç¨‹ä¸­æ¯æ¬¡ä»æ— åºè¡¨ä¸­å–å‡ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼ŒæŠŠä»–çš„æ’åºç ä¾æ¬¡ä¸æœ‰åºå…ƒç´ çš„æ’åºç è¿›è¡Œæ¯”è¾ƒï¼Œå°†ä»–æ’å…¥åˆ°æœ‰åºè¡¨ä¸­çš„é€‚å½“ä½ç½®ï¼Œä½¿ä¹‹æˆä¸ºæ–°çš„æœ‰åºè¡¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InsertSort</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">int</span> arr [] = &#123;<span class="number">101</span>,<span class="number">34</span>,-<span class="number">1</span>,<span class="number">119</span>,<span class="number">1</span>,<span class="number">89</span>&#125;;</span><br><span class="line">insertSort(arr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥æ’åº</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">insertSort</span><span class="params">(<span class="type">int</span> [] arr)</span> &#123;</span><br><span class="line"><span class="comment">//ä½¿ç”¨forå¾ªç¯æ¥å°†ä»£ç ç®€åŒ–</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span> ; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="comment">//ä½¿ç”¨é€æ­¥æ¨åˆ°çš„æ–¹å¼æ¥</span></span><br><span class="line"><span class="comment">//å®šä¹‰å¾…æ’å…¥çš„æ•°æ®</span></span><br><span class="line"><span class="type">int</span> <span class="variable">insertVal</span> <span class="operator">=</span> arr[i];</span><br><span class="line"><span class="type">int</span> <span class="variable">insertIndex</span> <span class="operator">=</span> i - <span class="number">1</span>; <span class="comment">//ä¹Ÿå°±æ˜¯arr[1]çš„å‰é¢è¿™ä¸ªæ•°çš„ä¸‹æ ‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»™insertValæ‰¾åˆ°æ’å…¥çš„ä½ç½®</span></span><br><span class="line"><span class="comment">//è¯´æ˜ insertIndex &gt;= 0 ä¿è¯åœ¨ç»™insertVal æ‰¾æ’å…¥ä½ç½®ï¼Œä¸è¶Šç•Œ</span></span><br><span class="line"><span class="comment">//insertVal &lt; arr[insertIndex]å¾…æ’å…¥çš„æ•°ï¼Œè¿˜æ²¡æœ‰æ‰¾åˆ°æ’å…¥ä½ç½®</span></span><br><span class="line"><span class="comment">//éœ€è¦å°†arr[insertIndex]</span></span><br><span class="line"><span class="keyword">while</span>(insertIndex &gt;= <span class="number">0</span> &amp;&amp; insertVal &lt; arr[insertIndex]) &#123;</span><br><span class="line">arr[insertIndex +  <span class="number">1</span>] = arr[insertIndex];</span><br><span class="line">insertIndex -- ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å½“é€€å‡ºwhileå¾ªç¯æ—¶å€™ï¼Œè¯´æ˜æ’å…¥çš„ä½ç½®æ‰¾åˆ°ï¼ŒinsertIndex + 1;</span></span><br><span class="line">arr[insertIndex + <span class="number">1</span>] = insertVal;</span><br><span class="line">System.out.println(<span class="string">&quot;ç¬¬&quot;</span>+i+<span class="string">&quot;è½®&quot;</span>);</span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨é€æ­¥æ¨åˆ°çš„æ–¹å¼æ¥</span></span><br><span class="line"><span class="comment">//å®šä¹‰å¾…æ’å…¥çš„æ•°æ®</span></span><br><span class="line"><span class="comment">int insertVal = arr[1];</span></span><br><span class="line"><span class="comment">int insertIndex = 1 - 1; //ä¹Ÿå°±æ˜¯arr[1]çš„å‰é¢è¿™ä¸ªæ•°çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">//ç»™insertValæ‰¾åˆ°æ’å…¥çš„ä½ç½®</span></span><br><span class="line"><span class="comment">//è¯´æ˜ insertIndex &gt;= 0 ä¿è¯åœ¨ç»™insertVal æ‰¾æ’å…¥ä½ç½®ï¼Œä¸è¶Šç•Œ</span></span><br><span class="line"><span class="comment">//insertVal &lt; arr[insertIndex]å¾…æ’å…¥çš„æ•°ï¼Œè¿˜æ²¡æœ‰æ‰¾åˆ°æ’å…¥ä½ç½®</span></span><br><span class="line"><span class="comment">//éœ€è¦å°†arr[insertIndex]</span></span><br><span class="line"><span class="comment">while(insertIndex &gt;= 0 &amp;&amp; insertVal &lt; arr[insertIndex]) &#123;</span></span><br><span class="line"><span class="comment">arr[insertIndex +  1] = arr[insertIndex];</span></span><br><span class="line"><span class="comment">insertIndex -- ;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">//å½“é€€å‡ºwhileå¾ªç¯æ—¶å€™ï¼Œè¯´æ˜æ’å…¥çš„ä½ç½®æ‰¾åˆ°ï¼ŒinsertIndex + 1;</span></span><br><span class="line"><span class="comment">arr[insertIndex + 1] = insertVal;</span></span><br><span class="line"><span class="comment">System.out.println(&quot;ç¬¬ä¸€è½®&quot;);</span></span><br><span class="line"><span class="comment">System.out.println(Arrays.toString(arr));</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">//ç¬¬äºŒè½®</span></span><br><span class="line"><span class="comment">insertVal = arr[2];</span></span><br><span class="line"><span class="comment">insertIndex = 2 -1;</span></span><br><span class="line"><span class="comment">while(insertIndex &gt;= 0 &amp;&amp; insertVal &lt; arr[insertIndex]) &#123;</span></span><br><span class="line"><span class="comment">arr[insertIndex +  1] = arr[insertIndex];</span></span><br><span class="line"><span class="comment">insertIndex -- ;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">arr[insertIndex + 1] = insertVal;</span></span><br><span class="line"><span class="comment">System.out.println(&quot;ç¬¬äºŒè½®&quot;);</span></span><br><span class="line"><span class="comment">System.out.println(Arrays.toString(arr));</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">//ç¬¬äºŒè½®</span></span><br><span class="line"><span class="comment">insertVal = arr[3];</span></span><br><span class="line"><span class="comment">insertIndex = 3 -1;</span></span><br><span class="line"><span class="comment">while(insertIndex &gt;= 0 &amp;&amp; insertVal &lt; arr[insertIndex]) &#123;</span></span><br><span class="line"><span class="comment">arr[insertIndex +  1] = arr[insertIndex];</span></span><br><span class="line"><span class="comment">insertIndex -- ;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">arr[insertIndex + 1] = insertVal;</span></span><br><span class="line"><span class="comment">System.out.println(&quot;ç¬¬ä¸‰è½®&quot;);</span></span><br><span class="line"><span class="comment">System.out.println(Arrays.toString(arr));</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ ¸å¿ƒä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨forå¾ªç¯æ¥å°†ä»£ç ç®€åŒ–</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span> ; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="comment">//ä½¿ç”¨é€æ­¥æ¨åˆ°çš„æ–¹å¼æ¥</span></span><br><span class="line"><span class="comment">//å®šä¹‰å¾…æ’å…¥çš„æ•°æ®</span></span><br><span class="line"><span class="type">int</span> <span class="variable">insertVal</span> <span class="operator">=</span> arr[i];</span><br><span class="line"><span class="type">int</span> <span class="variable">insertIndex</span> <span class="operator">=</span> i - <span class="number">1</span>; <span class="comment">//ä¹Ÿå°±æ˜¯arr[1]çš„å‰é¢è¿™ä¸ªæ•°çš„ä¸‹æ ‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»™insertValæ‰¾åˆ°æ’å…¥çš„ä½ç½®</span></span><br><span class="line"><span class="comment">//è¯´æ˜ insertIndex &gt;= 0 ä¿è¯åœ¨ç»™insertVal æ‰¾æ’å…¥ä½ç½®ï¼Œä¸è¶Šç•Œ</span></span><br><span class="line"><span class="comment">//insertVal &lt; arr[insertIndex]å¾…æ’å…¥çš„æ•°ï¼Œè¿˜æ²¡æœ‰æ‰¾åˆ°æ’å…¥ä½ç½®</span></span><br><span class="line"><span class="comment">//éœ€è¦å°†arr[insertIndex]</span></span><br><span class="line"><span class="keyword">while</span>(insertIndex &gt;= <span class="number">0</span> &amp;&amp; insertVal &lt; arr[insertIndex]) &#123;</span><br><span class="line">arr[insertIndex +  <span class="number">1</span>] = arr[insertIndex];</span><br><span class="line">insertIndex -- ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å½“é€€å‡ºwhileå¾ªç¯æ—¶å€™ï¼Œè¯´æ˜æ’å…¥çš„ä½ç½®æ‰¾åˆ°ï¼ŒinsertIndex + 1;</span></span><br><span class="line"><span class="keyword">if</span>(insertIndex + <span class="number">1</span> != i) &#123;</span><br><span class="line">arr[insertIndex + <span class="number">1</span>] = insertVal;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//System.out.println(&quot;ç¬¬&quot;+i+&quot;è½®&quot;);</span></span><br><span class="line"><span class="comment">//System.out.println(Arrays.toString(arr));</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ—¶é—´æ¯”è¾ƒï¼Œæˆ‘ä»¬å‘ç°æ’å…¥æ’åºæ¯”é€‰æ‹©æ’åºæ—¶é—´æ›´çŸ­ï¼Œä¹Ÿå°±æ˜¯è¯´æ’å…¥æ’åºçš„æ•ˆç‡é«˜äºé€‰æ‹©æ’åºã€‚</p><p>ç¼ºç‚¹ï¼š å½“æ’å…¥çš„æ•°æ˜¯æœ€å°çš„æ•°æ—¶ï¼Œåç§»çš„æ¬¡æ•°æ˜æ˜¾å¢å¤šï¼Œå¯¹æ•ˆç‡æœ‰å½±å“ã€‚</p><h4 id="7-3-4-å¸Œå°”æ’åº"><a href="#7-3-4-å¸Œå°”æ’åº" class="headerlink" title="7.3.4 å¸Œå°”æ’åº"></a>7.3.4 å¸Œå°”æ’åº</h4><p>ä¹Ÿæ˜¯ä¸€ç§æ’å…¥æ’åºï¼Œå…¶æ˜¯åœ¨æ’å…¥æ’åºçš„ä¸€ç§ä¼˜åŒ–ã€‚å¸Œå°”æ’åºæ˜¯åœ¨æ’å…¥æ’åºä¸Šçš„ç¼ºç‚¹çš„ä¸€ç§è§£å†³åŠæ³•ï¼Œå…¶å®Œç¾è§£å†³äº†æ’å…¥æ’åºçš„ç¼ºç‚¹ã€‚</p><p>åŸºæœ¬æ€æƒ³æ˜¯å¯¹æ•°ç»„è¿›è¡Œåˆ†ç»„ï¼ŒæŒ‰ç…§åˆ†ç»„æ’åºåå†æ’åº</p><p>ç¬¬ä¸€ç§æ€è·¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShellSort</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//å¸Œå°”æ’åºï¼Œå¯¹æœ‰åºåºåˆ—åœ¨æ’å…¥æ—¶é‡‡ç”¨äº¤æ¢æ³•ï¼Œå¹¶æµ‹è¯•æ’åºé€Ÿåº¦</span></span><br><span class="line"><span class="comment">//å¯¹æœ‰åºåºåˆ—åœ¨æ’å…¥å¼é‡‡ç”¨ç§»åŠ¨æ³•ï¼Œå¹¶æµ‹è¯•æ’åºé€Ÿåº¦</span></span><br><span class="line"><span class="type">int</span> []arr = &#123;<span class="number">8</span>,<span class="number">9</span>,<span class="number">1</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">0</span>&#125;;</span><br><span class="line">shellSort(arr);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªç®—æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">shellSort</span><span class="params">(<span class="type">int</span> [] arr)</span> &#123;</span><br><span class="line"><span class="comment">//ä½¿ç”¨forå¾ªç¯ç®€åŒ–ä»£ç </span></span><br><span class="line"><span class="comment">//å¸Œå°”æ’åºçš„ç¬¬ä¸€è½®æ’åº</span></span><br><span class="line"><span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">gap</span> <span class="operator">=</span> arr.length / <span class="number">2</span>; gap &gt; <span class="number">0</span> ;gap /=<span class="number">2</span> ) &#123;</span><br><span class="line"><span class="comment">//å› ä¸ºæ˜¯ç¬¬ä¸€è½®æ’åºï¼Œå°†nä¸ªæ•°æ®åˆ†æˆgapç»„</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> gap; i &lt; arr.length ; i++) &#123;</span><br><span class="line"><span class="comment">//éå†å„ç»„ä¸­æ‰€æœ‰çš„å…ƒç´ ï¼ˆå…±è®¡gapç»„ï¼Œæ¯ç»„n/gapä¸ªå…ƒç´ ï¼‰æ­¥é•¿ä¸ºgap</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i -gap ; j &gt;= <span class="number">0</span>; j -= gap) &#123;</span><br><span class="line"><span class="comment">//å¦‚æœå½“å‰å…ƒç´ å¤§äºåŠ ä¸Šæ­¥é•¿åçš„é‚£ä¸ªå…ƒç´ ï¼Œè¯´æ˜è¦äº¤æ¢</span></span><br><span class="line"><span class="keyword">if</span>(arr[j] &gt; arr[j + gap]) &#123;</span><br><span class="line">temp = arr[j];</span><br><span class="line">arr[j] = arr[j + gap];</span><br><span class="line">arr[j + gap] = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;å¸Œå°”æ’åºåçš„ç¬¬&quot;</span>+(++count)+<span class="string">&quot;è½®ç»“æœä¸ºï¼š&quot;</span> + Arrays.toString(arr));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">//å¸Œå°”æ’åºçš„ç¬¬ä¸€è½®æ’åº</span></span><br><span class="line"><span class="comment">int temp;</span></span><br><span class="line"><span class="comment">//å› ä¸ºæ˜¯ç¬¬ä¸€è½®æ’åºï¼Œå°†10ä¸ªæ•°æ®åˆ†æˆ5ç»„</span></span><br><span class="line"><span class="comment">for(int i = 5; i &lt; arr.length ; i++) &#123;</span></span><br><span class="line"><span class="comment">//éå†å„ç»„ä¸­æ‰€æœ‰çš„å…ƒç´ ï¼ˆå…±è®¡5ç»„ï¼Œæ¯ç»„2ä¸ªå…ƒç´ ï¼‰æ­¥é•¿ä¸º5</span></span><br><span class="line"><span class="comment">for(int j = i -5 ; j &gt;= 0; j -= 5) &#123;</span></span><br><span class="line"><span class="comment">//å¦‚æœå½“å‰å…ƒç´ å¤§äºåŠ ä¸Šæ­¥é•¿åçš„é‚£ä¸ªå…ƒç´ ï¼Œè¯´æ˜è¦äº¤æ¢</span></span><br><span class="line"><span class="comment">if(arr[j] &gt; arr[j + 5]) &#123;</span></span><br><span class="line"><span class="comment">temp = arr[j];</span></span><br><span class="line"><span class="comment">arr[j] = arr[j + 5];</span></span><br><span class="line"><span class="comment">arr[j + 5] = temp;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">System.out.println(&quot;å¸Œå°”æ’åºåçš„ç¬¬ä¸€è½®ç»“æœä¸ºï¼š&quot; + Arrays.toString(arr));</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">//å› ä¸ºæ˜¯ç¬¬äºŒè½®æ’åºï¼Œå°†10ä¸ªæ•°æ®åˆ†æˆ5/2 = 2ç»„</span></span><br><span class="line"><span class="comment">for(int i = 2; i &lt; arr.length ; i++) &#123;</span></span><br><span class="line"><span class="comment">//éå†å„ç»„ä¸­æ‰€æœ‰çš„å…ƒç´ ï¼ˆå…±è®¡5ç»„ï¼Œæ¯ç»„2ä¸ªå…ƒç´ ï¼‰æ­¥é•¿ä¸º5</span></span><br><span class="line"><span class="comment">for(int j = i -2 ; j &gt;= 0; j -= 2) &#123;</span></span><br><span class="line"><span class="comment">//å¦‚æœå½“å‰å…ƒç´ å¤§äºåŠ ä¸Šæ­¥é•¿åçš„é‚£ä¸ªå…ƒç´ ï¼Œè¯´æ˜è¦äº¤æ¢</span></span><br><span class="line"><span class="comment">if(arr[j] &gt; arr[j + 2]) &#123;</span></span><br><span class="line"><span class="comment">temp = arr[j];</span></span><br><span class="line"><span class="comment">arr[j] = arr[j + 2];</span></span><br><span class="line"><span class="comment">arr[j + 2] = temp;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">System.out.println(&quot;å¸Œå°”æ’åºåçš„ç¬¬2è½®ç»“æœä¸ºï¼š&quot; + Arrays.toString(arr));</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">//å› ä¸ºæ˜¯ç¬¬ä¸‰è½®æ’åºï¼Œå°†10ä¸ªæ•°æ®åˆ†æˆ5/2/2 = 1ç»„</span></span><br><span class="line"><span class="comment">for(int i = 1; i &lt; arr.length ; i++) &#123;</span></span><br><span class="line"><span class="comment">//éå†å„ç»„ä¸­æ‰€æœ‰çš„å…ƒç´ ï¼ˆå…±è®¡5ç»„ï¼Œæ¯ç»„2ä¸ªå…ƒç´ ï¼‰æ­¥é•¿ä¸º5</span></span><br><span class="line"><span class="comment">for(int j = i -1 ; j &gt;= 0; j -= 1) &#123;</span></span><br><span class="line"><span class="comment">//å¦‚æœå½“å‰å…ƒç´ å¤§äºåŠ ä¸Šæ­¥é•¿åçš„é‚£ä¸ªå…ƒç´ ï¼Œè¯´æ˜è¦äº¤æ¢</span></span><br><span class="line"><span class="comment">if(arr[j] &gt; arr[j + 1]) &#123;</span></span><br><span class="line"><span class="comment">temp = arr[j];</span></span><br><span class="line"><span class="comment">arr[j] = arr[j + 1];</span></span><br><span class="line"><span class="comment">arr[j + 1] = temp;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">System.out.println(&quot;å¸Œå°”æ’åºåçš„ç¬¬3è½®ç»“æœä¸ºï¼š&quot; + Arrays.toString(arr));</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ–¹å¼ç§»ä½æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¹å¸Œå°”æ’åºè¿›è¡Œä¼˜åŒ–ï¼Œæˆ‘ä»¬ä½¿ç”¨ä½ç§»æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">shellSort2</span><span class="params">(<span class="type">int</span> [] arr)</span> &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">gap</span> <span class="operator">=</span> arr.length / <span class="number">2</span> ; gap &gt; <span class="number">0</span> ; gap /= <span class="number">2</span>) &#123;</span><br><span class="line"><span class="comment">//ä»ç¬¬gapä¸ªå…ƒç´ ï¼Œé€ä¸ªå¯¹å…¶æ‰€åœ¨çš„ç»„è¿›è¡Œç›´æ¥æ’å…¥æ’åº</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> gap ; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i;</span><br><span class="line"><span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[j];</span><br><span class="line"><span class="keyword">if</span>(arr[j] &lt; arr[j - gap]) &#123;</span><br><span class="line"><span class="keyword">while</span>(j - gap &gt;= <span class="number">0</span> &amp;&amp; temp &lt; arr[j - gap]) &#123;</span><br><span class="line"><span class="comment">//ç§»åŠ¨</span></span><br><span class="line">arr[j] = arr[j-gap];</span><br><span class="line">j -= gap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å½“é€€å‡ºwhileåï¼Œå°±ç»™tempæ‰¾åˆ°æ’å…¥çš„ä½ç½®</span></span><br><span class="line">arr[j] = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//System.out.println(Arrays.toString(arr));</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ç§»ä½æ³•åï¼Œæˆ‘ä»¬å‘ç°æ—¶é—´å¿«äº†å¾ˆå¤šå€ã€‚</p><h4 id="7-3-5-å¿«é€Ÿæ’åº"><a href="#7-3-5-å¿«é€Ÿæ’åº" class="headerlink" title="7.3.5 å¿«é€Ÿæ’åº"></a>7.3.5 å¿«é€Ÿæ’åº</h4><p>å¿«é€Ÿæ’åºæ˜¯å¯¹å†’æ³¡æ’åºçš„ä¸€ç§æ”¹è¿›ï¼Œå…¶<strong>åŸºæœ¬æ€æƒ³è®¾è®¡</strong>:é€šè¿‡ä¸€è¶Ÿæ’åºå°†è¦æ’åºçš„æ•°æ®åˆ†å‰²æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½æ¯”å¦ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½è¦å°ï¼Œç„¶åæŒ‰ç…§æ¬¡æ–¹æ³•å¯¹è¿™ä¸¤éƒ¨åˆ†æ•°æ®åˆ†åˆ«è¿›è¡Œå¿«é€Ÿæ’åºï¼Œæ•´ä¸ªæ’åºè¿‡ç¨‹éƒ½å¯ä»¥é€’å½’è¿›è¡Œï¼Œä¾æ­¤è¾¾åˆ°æ•´ä¸ªæ•°æ®å˜æˆæœ‰åºåºåˆ—ã€‚</p><ol><li>å¿«é€Ÿæ’åºï¼Œåœ¨åºåˆ—ä¸­æ‰¾ä¸€ä¸ªåŸºå‡†æ•°ï¼Œç„¶åå°†æ‰€æœ‰æ¯”åŸºæ•°å°çš„æ”¾åˆ°åŸºæ•°çš„å·¦è¾¹ï¼Œæ‰€æœ‰æ¯”åŸºæ•°å¤§çš„æ•°æ”¾åˆ°åŸºå‡†æ•°çš„å³è¾¹ã€‚ç„¶åå†å¯¹å·¦å³ä¸¤ä¸ªå­åºåˆ—é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼ŒçŸ¥é“åºåˆ—ä¸­æ‰€æœ‰çš„æ•°éƒ½æ’åºå¥½ã€‚</li><li>æˆ‘çš„ç†è§£ï¼Œæ‰¾åˆ°ä¸€ä¸ªä¸­ä½æ•°ï¼Œæ¯”ä¸­ä½æ•°å°çš„æ”¾å·¦è¾¹ï¼Œæ¯”ä¸­ä½æ•°å¤§çš„æ”¾å³è¾¹ï¼Œç›´åˆ°æ‰€æœ‰çš„æ•°éƒ½æ’å¥½åºä¸ºæ­¢ã€‚</li></ol><p>å¿«é€Ÿæ’åºçš„æ€è·¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickSort</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//int [] arr = &#123;-9,78,0,23,-567,70&#125;;</span></span><br><span class="line"><span class="type">int</span> [] arr = <span class="keyword">new</span> <span class="title class_">int</span> [<span class="number">80000</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; <span class="number">80000</span> ; i ++) &#123;</span><br><span class="line">arr[i] = (<span class="type">int</span>)(Math.random() * <span class="number">80000</span>); <span class="comment">//ç”Ÿæˆä¸€ä¸ª[0,80000)çš„éšæœºæ•°</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Date</span> <span class="variable">date1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="comment">//è¾“å‡ºä¸€ä¸ªæ—¥æœŸæ ¼å¼</span></span><br><span class="line"><span class="type">SimpleDateFormat</span> <span class="variable">simpleDateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">dateStr</span> <span class="operator">=</span> simpleDateFormat.format(date1);</span><br><span class="line">System.out.println(<span class="string">&quot;æ’åºå‰çš„æ—¶é—´ä¸º=&quot;</span> + dateStr);</span><br><span class="line"></span><br><span class="line">quickSort(arr, <span class="number">0</span>,arr.length - <span class="number">1</span>);</span><br><span class="line"><span class="comment">//shellSort(arr);</span></span><br><span class="line"><span class="comment">//æµ‹è¯•å†’æ³¡æ’åº</span></span><br><span class="line"><span class="type">Date</span> <span class="variable">date2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="type">String</span> <span class="variable">dateStr2</span> <span class="operator">=</span> simpleDateFormat.format(date2);</span><br><span class="line">System.out.println(<span class="string">&quot;è¾“å‡ºæ’åºåçš„æ—¶é—´&quot;</span> + dateStr2);</span><br><span class="line"><span class="comment">//System.out.println(&quot;arr:&quot; + Arrays.toString(arr));</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¿«é€Ÿæ’åºæ€»ä»£ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span> [] arr ,<span class="type">int</span> left,<span class="type">int</span> right)</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> left;<span class="comment">//å·¦ä¸‹æ ‡</span></span><br><span class="line"><span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> right ;<span class="comment">// å³ä¸‹æ ‡</span></span><br><span class="line"><span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">// pivot ä¸­å€¼</span></span><br><span class="line"><span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> arr[(left + right) /<span class="number">2</span> ];</span><br><span class="line"><span class="comment">//whileå¾ªç¯çš„ç›®çš„æ˜¯è®©pivotå€¼å°æ”¾åˆ°å³è¾¹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(l &lt; r) &#123;</span><br><span class="line"><span class="keyword">while</span>(arr[l] &lt; pivot) &#123;</span><br><span class="line">l += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åœ¨pivotçš„å³è¾¹ä¸€ç›´æ‰¾ï¼Œæ‰¾åˆ°å°äºç­‰äºpivotå€¼ï¼Œæ‰é€€å‡º</span></span><br><span class="line"><span class="keyword">while</span>(arr[r] &gt; pivot) &#123;</span><br><span class="line">r -= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœ l &gt;= r è¯´æ˜pivotçš„å·¦å³ä¸¤è¾¹çš„å€¼,å·²ç»æŒ‰ç…§å·¦è¾¹å…¨éƒ¨æ˜¯</span></span><br><span class="line"><span class="comment">//å°äºç­‰äºpivotå€¼ï¼Œå³è¾¹å…¨éƒ¨æ˜¯å¤§äºç­‰äºpivotçš„å€¼</span></span><br><span class="line"><span class="keyword">if</span>( l &gt;= r) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//äº¤æ¢</span></span><br><span class="line">temp = arr[l];</span><br><span class="line">arr[l] = arr[r];</span><br><span class="line">arr[r] = temp;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœäº¤æ¢å®Œåï¼Œå‘ç°è¿™ä¸ªarr[l] == pivotå€¼ç›¸ç­‰ -- ï¼Œå‰ç§»</span></span><br><span class="line"><span class="keyword">if</span>(arr[l] == pivot) &#123;</span><br><span class="line">r -= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœäº¤æ¢å®Œåï¼Œå‘ç°è¿™ä¸ªarr[r] == pivotå€¼ç›¸ç­‰ l ++ ,åç§»</span></span><br><span class="line"><span class="keyword">if</span>(arr[r] == pivot) &#123;</span><br><span class="line">l += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœl == r,å¿…é¡»l++,r-- ,å¦åˆ™å‡ºç°æ ˆæº¢å‡º</span></span><br><span class="line"><span class="keyword">if</span>(l == r) &#123;</span><br><span class="line">l += <span class="number">1</span>;</span><br><span class="line">r -= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‘å·¦é€’å½’</span></span><br><span class="line"><span class="keyword">if</span>(left &lt; r) &#123;</span><br><span class="line">quickSort(arr, left, r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‘å³é€’å½’</span></span><br><span class="line"><span class="keyword">if</span>(right &gt; l) &#123;</span><br><span class="line">quickSort(arr, l, right);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="7-3-6-å½’å¹¶æ’åº"><a href="#7-3-6-å½’å¹¶æ’åº" class="headerlink" title="7.3.6 å½’å¹¶æ’åº"></a>7.3.6 å½’å¹¶æ’åº</h4><p>å½’å¹¶æ’åºæ˜¯ä¸€ç§åˆ†æ²»ç®—æ³•ã€‚</p><p>å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯å°†ä¸¤ä¸ªå·²ç»æ’åºçš„åºåˆ—åˆå¹¶æˆä¸€ä¸ªåºåˆ—ã€‚å…·ä½“æ¥è¯´ï¼Œ<strong>å°±æ˜¯å°†ä¸€ä¸ªåºåˆ—åˆ†æˆä¸¤ä¸ªå­åºåˆ—ï¼Œç„¶åå¯¹è¿™ä¸¤ä¸ªå­åºåˆ—åˆ†åˆ«è¿›è¡Œæ’åºï¼Œæœ€åå°†æ’å¥½åºçš„ä¸¤ä¸ªå­åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ‰åºåºåˆ—ã€‚</strong> </p><p>å½’å¹¶æ’åºçš„è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼š<strong>åˆ†è§£å’Œåˆå¹¶</strong>ã€‚</p><p>åœ¨åˆ†è§£æ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬å°†åºåˆ—ä¸æ–­åˆ†è§£æˆæ›´å°çš„å­åºåˆ—ï¼Œç›´åˆ°æ¯ä¸ªå­åºåˆ—åªåŒ…å«ä¸€ä¸ªå…ƒç´ ã€‚è¿™æ—¶ï¼Œæ¯ä¸ªå­åºåˆ—éƒ½æ˜¯æœ‰åºçš„ã€‚</p><p>åœ¨åˆå¹¶æ­¥éª¤ä¸­ï¼Œ<strong>æˆ‘ä»¬å°†ä¸¤ä¸ªæœ‰åºçš„å­åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ‰åºçš„åºåˆ—</strong>ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬ä»ä¸¤ä¸ªå­åºåˆ—çš„å¼€å¤´å¼€å§‹æ¯”è¾ƒå®ƒä»¬çš„å…ƒç´ ï¼Œæ¯æ¬¡å–å‡ºè¾ƒå°çš„å…ƒç´ æ”¾å…¥ç»“æœåºåˆ—ä¸­ï¼Œå¹¶å°†æŒ‡å‘è¯¥å…ƒç´ çš„æŒ‡é’ˆåç§»ä¸€ä½ã€‚é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°å…¶ä¸­ä¸€ä¸ªå­åºåˆ—ä¸ºç©ºã€‚ç„¶åå†å°†å¦ä¸€ä¸ªå­åºåˆ—ä¸­å‰©ä½™çš„å…ƒç´ å…¨éƒ¨æ”¾å…¥ç»“æœåºåˆ—ä¸­ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MergetSort</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">System.out.println();</span><br><span class="line"><span class="type">int</span> arr [] = &#123;<span class="number">8</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">2</span>&#125;;</span><br><span class="line"><span class="type">int</span> temp [] = <span class="keyword">new</span> <span class="title class_">int</span> [arr.length] ;<span class="comment">//å½’å¹¶æ’åºéœ€è¦ä¸€ä¸ªé¢å¤–ç©ºé—´</span></span><br><span class="line">mergeSort(arr, <span class="number">0</span>, arr.length - <span class="number">1</span>, temp);</span><br><span class="line">System.out.println(<span class="string">&quot;å½’å¹¶æ’åºå = &quot;</span> + Arrays.toString(arr));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ†+å’Œçš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">mergeSort</span><span class="params">(<span class="type">int</span> [] arr,<span class="type">int</span> left, <span class="type">int</span> right, <span class="type">int</span> [] temp)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(left &lt; right) &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (left + right) /<span class="number">2</span> ;<span class="comment">//ä¸­é—´ç´¢å¼•</span></span><br><span class="line"><span class="comment">//å‘å·¦é€’å½’è¿›è¡Œåˆ†è§£</span></span><br><span class="line">mergeSort(arr, left, mid, temp);</span><br><span class="line"><span class="comment">//å‘å³é€’å½’è¿›è¡Œåˆ†è§£</span></span><br><span class="line">mergeSort(arr, mid+<span class="number">1</span>, right, temp);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ°åˆå¹¶</span></span><br><span class="line">merget(arr, left, mid, right, temp);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå¹¶çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr æ’åºçš„åŸå§‹æ•°æ®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> left å·¦è¾¹æœ‰åºåºåˆ—çš„åˆå§‹ç´¢å¼•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> mid ä¸­é—´ç´¢å¼•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> right å³è¾¹ç´¢å¼•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> temp åšä¸­è½¬çš„æ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merget</span><span class="params">(<span class="type">int</span> [] arr, <span class="type">int</span> left , <span class="type">int</span> mid, <span class="type">int</span> right, <span class="type">int</span> [] temp)</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> left; <span class="comment">//åˆå§‹åŒ–i,å·¦è¾¹æœ‰åºåºåˆ—çš„åˆå§‹ç´¢å¼•</span></span><br><span class="line"><span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> mid + <span class="number">1</span>;  <span class="comment">//åˆå§‹åŒ–j,å³è¾¹æœ‰åºåºåˆ—çš„åˆå§‹ç´¢å¼•</span></span><br><span class="line"><span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//æŒ‡å‘tempæ•°ç»„çš„å½“å‰ç´¢å¼•</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ï¼ˆ1ï¼‰</span></span><br><span class="line"><span class="comment">//å…ˆæŠŠå·¦å³ä¸¤è¾¹çš„(æœ‰åº)çš„æ•°æ®æŒ‰ç…§è§„åˆ™å¡«å……åˆ°tempæ•°ç»„</span></span><br><span class="line"><span class="comment">//ç›´åˆ°å·¦å³ä¸¤è¾¹çš„æœ‰åºåºåˆ—ï¼Œæœ‰ä¸€è¾¹å¤„ç†å®Œæ¯•ä¸ºæ­¢</span></span><br><span class="line"><span class="keyword">while</span>(i &lt;= mid &amp;&amp; j &lt;= right) &#123;  <span class="comment">//ç»§ç»­</span></span><br><span class="line"><span class="comment">//å¦‚æœå·¦è¾¹çš„æœ‰åºåºåˆ—çš„å½“å‰å…ƒç´ ï¼Œå°äºç­‰äºå³è¾¹æœ‰åºåºåˆ—çš„å½“å‰å…ƒç´ </span></span><br><span class="line"><span class="comment">//å³å°†å·¦è¾¹çš„å½“å‰å…ƒç´ ï¼Œæ‹·è´åˆ°tempæ•°ç»„</span></span><br><span class="line"><span class="comment">//ç„¶å</span></span><br><span class="line"><span class="keyword">if</span>(arr[i] &lt;= arr[j]) &#123;</span><br><span class="line">temp [t] = arr[i];</span><br><span class="line">t += <span class="number">1</span>;</span><br><span class="line">i += <span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//åä¹‹ï¼Œå°†å³è¾¹çš„æœ‰åºåºåˆ—çš„å½“å‰å…ƒç´ ï¼Œå¡«å……åˆ°tempæ•°ç»„</span></span><br><span class="line">temp[t] = arr[j];</span><br><span class="line">t += <span class="number">1</span>;</span><br><span class="line">j += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//(2) æŠŠæœ‰å‰©ä½™æ•°æ®çš„ä¸€è¾¹çš„æ•°æ®ä¾æ¬¡å…¨éƒ¨å¡«å……åˆ°temp</span></span><br><span class="line"><span class="keyword">while</span>(i &lt;= mid) &#123; <span class="comment">//å·¦è¾¹çš„æœ‰åºåºåˆ—è¿˜æœ‰å‰©ä½™çš„å…ƒç´ ï¼Œå°±å…¨éƒ¨å¡«å……åˆ°temp</span></span><br><span class="line">temp[t]  = arr[i];</span><br><span class="line">t += <span class="number">1</span>;</span><br><span class="line">i += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(j &lt;= right) &#123; <span class="comment">//å³è¾¹çš„æœ‰åºåºåˆ—è¿˜æœ‰å‰©ä½™çš„å…ƒç´ ï¼Œå°±å…¨éƒ¨å¡«å……åˆ°tempä¸­</span></span><br><span class="line">temp[t] = arr[j];</span><br><span class="line">t += <span class="number">1</span>;</span><br><span class="line">j += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//(3)å°†tempæ•°ç»„çš„å…ƒç´ æ‹·è´åˆ°arr</span></span><br><span class="line"><span class="comment">//æ³¨æ„ï¼Œå¹¶éæ¯æ¬¡éƒ½æ‹·è´æ‰€æœ‰</span></span><br><span class="line"> t = <span class="number">0</span>;</span><br><span class="line"> <span class="type">int</span> <span class="variable">tempLeft</span> <span class="operator">=</span> left;</span><br><span class="line"> System.out.println(<span class="string">&quot;tempLeft=&quot;</span> + tempLeft + <span class="string">&quot;,right=&quot;</span> + right);</span><br><span class="line"> <span class="keyword">while</span>(tempLeft &lt;= right) &#123;  </span><br><span class="line"> <span class="comment">////ç¬¬ä¸€æ¬¡åˆå¹¶tempLeft = 0,right = 1// tempLeft = 2  right = 3;// tL = 0,right = 3</span></span><br><span class="line"> <span class="comment">//æœ€åä¸€æ¬¡ï¼ŒtL = 0,right = 7;</span></span><br><span class="line"> arr[tempLeft] = temp[t];</span><br><span class="line"> t += <span class="number">1</span>;</span><br><span class="line"> tempLeft += <span class="number">1</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç»è¿‡æ—¶é—´æµ‹è¯•æˆ‘ä»¬å‘ç°å…¶é€Ÿåº¦å¾ˆå¿«ã€‚</p><h4 id="7-3-7-åŸºæ•°æ’åº"><a href="#7-3-7-åŸºæ•°æ’åº" class="headerlink" title="7.3.7 åŸºæ•°æ’åº"></a>7.3.7 åŸºæ•°æ’åº</h4><ol><li>åŸºæ•°æ’åºå±äºä¸€ç§åˆ†é…å¼æ’åºï¼Œåˆç§°ä¸ºæ¡¶å­æ³•ï¼Œbin sort ï¼Œé¡¾åæ€æ„ï¼Œæ˜¯é€šè¿‡é”®å€¼çš„å„ä¸ªä½çš„å€¼ï¼Œå°†è¦æ’åºçš„å…ƒç´ åˆ†é…åˆ°æŸäº›æ¡¶ä¸­ï¼Œè¾¾åˆ°æ’åºçš„ä½œç”¨ã€‚</li><li>åŸºæ•°æ’åºæ˜¯ä¸€ç§ç¨³å®šçš„æ’åºï¼ŒåŸºæ•°æ’åºæ³•çš„æ˜¯æ•ˆç‡é«˜çš„ç¨³å®šæ€§æ’åºæ³•</li><li>åŸºæ•°æ’åºæ˜¯æ¡¶æ’åºçš„æ‰©å±•</li><li>åŸºæ•°æ’åºèµ·æºäº1887å¹´èµ«å°”æ›¼.ä½•ä¹ç¤¼å‘æ˜çš„ï¼Œå°†æ•´æ•°æŒ‰ç…§ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œç„¶åæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚</li><li>æ‰€æœ‰å¾…æ¯”è¾ƒæ•°å€¼ç»Ÿä¸€ä¸ºåŒæ ·çš„æ•°ä½é•¿åº¦ï¼Œ<strong>æ•°ä½è¾ƒçŸ­çš„æ•°å‰é¢è¡¥é›¶</strong>ã€‚ç„¶åï¼Œ<strong>ä»æœ€ä½ä½å¼€å§‹</strong>ï¼Œä¾æ¬¡è¿›è¡Œä¸€æ¬¡æ’åºã€‚è¿™æ ·ä»<strong>æœ€ä½ä½æ’åºä¸€ç›´åˆ°æœ€é«˜ä½æ’åºå®Œæˆä»¥å</strong>, æ•°åˆ—å°±å˜æˆä¸€ä¸ªæœ‰åºåºåˆ— </li></ol><p>æ€è·¯ï¼š</p><ol><li>ä½¿ç”¨åŸºæ•°æ’åºï¼Œè¿›è¡Œå‡åºæ’åº</li><li>å°†æ¯ä¸ªå…ƒç´ çš„å„ä½æ•°å–å‡ºï¼Œç„¶åçœ‹è¿™ä¸ªæ•°åº”è¯¥æ”¾åœ¨å“ªä¸ªå¯¹åº”çš„æ¡¶</li><li>æŒ‰ç…§è¿™ä¸ªæ¡¶çš„é¡ºåº(ä¸€ç»´æ•°ç»„çš„ä¸‹æ ‡å–å‡ºæ•°æ®ï¼Œæ”¾å…¥åŸæ¥æ•°ç»„ï¼‰</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RadixSort</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">int</span>[] arr=&#123;<span class="number">53</span>, <span class="number">3</span>, <span class="number">542</span>, <span class="number">748</span>, <span class="number">14</span>, <span class="number">214</span>&#125;;</span><br><span class="line">bucketSort(arr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">bucketSort</span><span class="params">(<span class="type">int</span>[] arr)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œå¾—åˆ°æ¯ä¸ªä¸‹æ ‡ä¸‹çš„ä¸ªæ•°</span></span><br><span class="line"><span class="type">int</span>[] bucketRecord=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>];</span><br><span class="line"><span class="comment">//å®šä¹‰æ¡¶ç©ºé—´ï¼Œåˆå§‹åŒ–äºŒç»´æ•°ç»„</span></span><br><span class="line"><span class="type">int</span>[][] bucket=<span class="keyword">new</span> <span class="title class_">int</span>[arr.length][<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="comment">//ä¸ªä½æ•°çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="type">int</span> sub=arr[i]/<span class="number">1</span>%<span class="number">10</span>;</span><br><span class="line"><span class="comment">//ç»™æ¡¶é‡Œé¢èµ‹å€¼</span></span><br><span class="line">bucket[bucketRecord[sub]][sub]=arr[i];</span><br><span class="line"><span class="comment">//å¹¶ä¸”è®°å½•å½“å‰æ¡¶é‡Œé¢å…ƒç´ ä¸ªæ•°ï¼ŒåŠ 1</span></span><br><span class="line">bucketRecord[sub]= bucketRecord[sub]+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’åˆ—å„ä¸ªæ¡¶ï¼Œä»ç¬¬ä¸€åˆ—å¼€å§‹</span></span><br><span class="line"><span class="comment">//ç¬¬1è½®</span></span><br><span class="line"><span class="type">int</span> index=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; bucketRecord.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (bucketRecord[i]&gt;<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; bucketRecord[i]; j++) &#123;</span><br><span class="line">arr[index++]=bucket[j][i];</span><br><span class="line">bucket[j][i]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">bucketRecord[i]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">index=<span class="number">0</span>;</span><br><span class="line">System.out.println(<span class="string">&quot;ç¬¬1æ¬¡æ’åºåå¾—åˆ°çš„ç»“æœï¼š&quot;</span>+ Arrays.toString(arr));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬2è½®</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="comment">//åä½æ•°çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="type">int</span> sub=arr[i]/<span class="number">10</span>%<span class="number">10</span>;</span><br><span class="line"><span class="comment">//ç»™æ¡¶é‡Œé¢èµ‹å€¼</span></span><br><span class="line">bucket[bucketRecord[sub]][sub]=arr[i];</span><br><span class="line"><span class="comment">//å¹¶ä¸”è®°å½•å½“å‰æ¡¶é‡Œé¢å…ƒç´ ä¸ªæ•°ï¼ŒåŠ 1</span></span><br><span class="line">bucketRecord[sub]= bucketRecord[sub]+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’åˆ—å„ä¸ªæ¡¶ï¼Œä»ç¬¬ä¸€åˆ—å¼€å§‹</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; bucketRecord.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (bucketRecord[i]&gt;<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; bucketRecord[i]; j++) &#123;</span><br><span class="line">arr[index++]=bucket[j][i];</span><br><span class="line">bucket[j][i]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">bucketRecord[i]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">index=<span class="number">0</span>;</span><br><span class="line">System.out.println(<span class="string">&quot;ç¬¬2æ¬¡æ’åºåå¾—åˆ°çš„ç»“æœï¼š&quot;</span>+ Arrays.toString(arr));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬3è½®</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="comment">//ç™¾ä½æ•°çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="type">int</span> sub=arr[i]/<span class="number">100</span>%<span class="number">10</span>;</span><br><span class="line"><span class="comment">//ç»™æ¡¶é‡Œé¢èµ‹å€¼</span></span><br><span class="line">bucket[bucketRecord[sub]][sub]=arr[i];</span><br><span class="line"><span class="comment">//å¹¶ä¸”è®°å½•å½“å‰æ¡¶é‡Œé¢å…ƒç´ ä¸ªæ•°ï¼ŒåŠ 1</span></span><br><span class="line">bucketRecord[sub]= bucketRecord[sub]+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ’åˆ—å„ä¸ªæ¡¶ï¼Œä»ç¬¬ä¸€åˆ—å¼€å§‹</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; bucketRecord.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (bucketRecord[i]&gt;<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; bucketRecord[i]; j++) &#123;</span><br><span class="line">arr[index++]=bucket[j][i];</span><br><span class="line">bucket[j][i]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">bucketRecord[i]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">index=<span class="number">0</span>;</span><br><span class="line">System.out.println(<span class="string">&quot;ç¬¬3æ¬¡æ’åºåå¾—åˆ°çš„ç»“æœï¼š&quot;</span>+ Arrays.toString(arr));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨forå¾ªç¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RadixSort2</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">int</span>[] arr=&#123;<span class="number">53</span>, <span class="number">3</span>, <span class="number">542</span>, <span class="number">78</span>, <span class="number">14</span>, <span class="number">214</span>,<span class="number">12</span>,<span class="number">24</span>,<span class="number">56</span>,<span class="number">66</span>,<span class="number">70</span>&#125;;</span><br><span class="line">bucket(arr);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">maxLength</span><span class="params">(<span class="type">int</span>[] arr)</span>&#123;</span><br><span class="line"><span class="type">int</span> max=arr[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (max&lt;arr[i])&#123;</span><br><span class="line">max=arr[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> length=(max+<span class="string">&quot;&quot;</span>).length();</span><br><span class="line"><span class="keyword">return</span> length;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">bucket</span><span class="params">(<span class="type">int</span>[] arr)</span>&#123;</span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªäºŒç»´æ•°ç»„ä½œä¸ºæ¡¶</span></span><br><span class="line"><span class="type">int</span>[][] bucket=<span class="keyword">new</span> <span class="title class_">int</span>[arr.length][<span class="number">10</span>];</span><br><span class="line"><span class="comment">//æ¯ä¸€ä¸ªæ¡¶é‡Œé¢æœ‰å‡ ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="type">int</span>[] bucketRecord=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>];</span><br><span class="line"><span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> maxLength(arr);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">z</span> <span class="operator">=</span> <span class="number">0</span>, n=<span class="number">1</span>; z &lt; length; n=n*<span class="number">10</span>,z++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="comment">//ä¸ªä½æ•°çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="type">int</span> sub=arr[i]/n%<span class="number">10</span>;</span><br><span class="line"><span class="comment">//ç»™æ¡¶é‡Œé¢èµ‹å€¼</span></span><br><span class="line">bucket[bucketRecord[sub]][sub]=arr[i];</span><br><span class="line"><span class="comment">//å¹¶ä¸”è®°å½•å½“å‰æ¡¶é‡Œé¢å…ƒç´ ä¸ªæ•°ï¼ŒåŠ 1</span></span><br><span class="line">bucketRecord[sub]= bucketRecord[sub]+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ’åˆ—å„ä¸ªæ¡¶ï¼Œä»ç¬¬ä¸€åˆ—å¼€å§‹</span></span><br><span class="line"><span class="type">int</span> index=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; bucketRecord.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (bucketRecord[i]&gt;<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; bucketRecord[i]; j++) &#123;</span><br><span class="line">arr[index++]=bucket[j][i];</span><br><span class="line">bucket[j][i]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">bucketRecord[i]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;ç¬¬&quot;</span>+z+<span class="string">&quot;æ¬¡æ’åºåå¾—åˆ°çš„ç»“æœï¼š&quot;</span>+Arrays.toString(arr));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŸºæ•°æ’åºæ˜¯å¯¹ä¼ ç»Ÿæ¡¶æ’åºçš„æ‰©å±•ï¼Œ<strong>é€Ÿåº¦å¾ˆå¿«</strong>.</p><p> åŸºæ•°æ’åºæ˜¯ç»å…¸çš„ç©ºé—´æ¢æ—¶é—´çš„æ–¹å¼ï¼Œ<strong>å ç”¨å†…å­˜å¾ˆå¤§</strong>, å½“å¯¹æµ·é‡æ•°æ®æ’åºæ—¶ï¼Œå®¹æ˜“é€ <strong>OutOfMemoryError</strong> åŸºæ•°æ’åº<strong>æ—¶ç¨³å®šçš„</strong>ã€‚</p><p>[æ³¨:å‡å®šåœ¨å¾…æ’åºçš„è®°å½•åºåˆ—ä¸­ï¼Œå­˜åœ¨å¤šä¸ªå…·æœ‰ç›¸åŒçš„å…³é”®å­—çš„è®°å½•ï¼Œè‹¥ç»è¿‡æ’åºï¼Œè¿™äº›è®°å½•çš„ç›¸å¯¹æ¬¡åºä¿æŒä¸å˜ï¼Œå³åœ¨åŸåºåˆ—ä¸­ï¼Œr[i]=r[j]ï¼Œä¸”r[i]åœ¨r[j]ä¹‹å‰ï¼Œè€Œåœ¨æ’åºåçš„åºåˆ—ä¸­ï¼Œr[i]ä»åœ¨r[j]ä¹‹å‰ï¼Œåˆ™ç§°è¿™ç§æ’åºç®—æ³•æ˜¯ç¨³å®šçš„ï¼›å¦åˆ™ç§°ä¸ºä¸ç¨³å®šçš„] æœ‰è´Ÿæ•°çš„æ•°ç»„ </p><h4 id="7-3-8-å †æ’åº"><a href="#7-3-8-å †æ’åº" class="headerlink" title="7.3.8 å †æ’åº"></a>7.3.8 å †æ’åº</h4><h2 id="8-æŸ¥æ‰¾"><a href="#8-æŸ¥æ‰¾" class="headerlink" title="8. æŸ¥æ‰¾"></a>8. æŸ¥æ‰¾</h2><h3 id="8-1-çº¿æ€§æŸ¥æ‰¾"><a href="#8-1-çº¿æ€§æŸ¥æ‰¾" class="headerlink" title="8. 1 çº¿æ€§æŸ¥æ‰¾"></a>8. 1 çº¿æ€§æŸ¥æ‰¾</h3><p>å¾ˆç®€å•çš„æŸ¥æ‰¾æ–¹å¼,é€šè¿‡é€ä¸€æ¯”å¯¹ï¼Œå¾—åˆ°ç›®æ ‡å€¼ï¼Œç„¶åå‘¢è¿”å›ä¸‹æ ‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SeqSearch</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String [] args)</span>&#123;</span><br><span class="line">        <span class="type">int</span> [] arr = &#123;<span class="number">7</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">11</span>,<span class="number">434</span>,<span class="number">55</span>,<span class="number">0</span>,<span class="number">23</span>&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> seqSearch(arr,<span class="number">55</span>);</span><br><span class="line">        <span class="keyword">if</span>(index == -<span class="number">1</span>)&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ²¡æœ‰æŸ¥æ‰¾åˆ°&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ‰¾åˆ°äº†ï¼Œä¸‹æ ‡ä¸ºï¼š&quot;</span> + index);</span><br><span class="line">System.out.println(<span class="string">&quot;æ­¤æ—¶è¾“å‡ºçš„ç»“æœä¸ºï¼š&quot;</span> + arr[index]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">seqSearch</span><span class="params">(<span class="type">int</span> [] arr ,<span class="type">int</span> value)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; arr.length ; i ++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(value == arr[i])&#123;</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-2-äºŒåˆ†æŸ¥æ‰¾"><a href="#8-2-äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="8.2 äºŒåˆ†æŸ¥æ‰¾"></a>8.2 äºŒåˆ†æŸ¥æ‰¾</h3><ol><li>ç¡®å®šæ•°ä¸­é—´çš„ä¸‹æ ‡ mid = (right + left) / 2;</li><li>ç„¶åè®©éœ€è¦æŸ¥æ‰¾çš„æ•°findValueå’Œarr[mid] æ¯”è¾ƒ<ol><li>findVal &gt; arr[mid]ï¼Œè¯´æ˜ä½ è¦æŸ¥æ‰¾çš„æ•°ï¼Œåœ¨midçš„å³è¾¹ï¼Œå› æ­¤éœ€è¦é€’å½’çš„å‘å³æŸ¥æ‰¾</li><li>å¦‚æœfindVal &lt; arr[mid],è¯´æ˜ä½ è¦æŸ¥æ‰¾çš„æ•°åœ¨midçš„å·¦è¾¹ï¼Œå› æ­¤éœ€è¦é€’å½’çš„å‘å·¦è¾¹æŸ¥æ‰¾</li><li>findVal == arr[mid] è¯´æ˜æ‰¾åˆ°ï¼Œå°±è¿”å›</li></ol></li><li>ä»€ä¹ˆæ—¶å€™æˆ‘ä»¬éœ€è¦ç»“æŸé€’å½’<ol><li>æ‰¾åˆ°å°±ç»“æŸé€’å½’</li><li>é€’å½’å®Œæ•´æ•´ä¸ªæ•°ç»„ï¼Œä»ç„¶æ²¡æœ‰æ‰¾åˆ°findValï¼Œä¹Ÿéœ€è¦ç»“æŸé€’å½’ï¼Œå½“left &gt; rightå°±éœ€è¦é€€å‡º</li></ol></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinarySearch</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">int</span> [] arr = &#123;<span class="number">1</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">12</span>,<span class="number">24</span>,<span class="number">56</span>,<span class="number">78</span>&#125;;</span><br><span class="line"><span class="type">int</span> <span class="variable">resIndex</span> <span class="operator">=</span> binarySearch(arr, <span class="number">0</span>, arr.length -<span class="number">1</span>, <span class="number">78</span>);</span><br><span class="line"><span class="keyword">if</span>(resIndex == -<span class="number">1</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ­¤æ—¶æ²¡æ‰¾åˆ°&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ‰¾åˆ°äº†ï¼Œå…¶ä¸‹æ ‡ä¸ºï¼š&quot;</span> + resIndex);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äºŒåˆ†æŸ¥æ‰¾ç®—æ³•</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> left  å·¦è¾¹çš„ç´¢å¼•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> right å³è¾¹çš„ç´¢å¼•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> findVal è¦æŸ¥è¯¢çš„å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> å¦‚æœæ‚æ‰¾åˆ°å°±è¿”å›ä¸‹æ ‡ï¼Œå¦‚æœæ²¡æ‰¾åˆ°å°±è¿”å›-1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(<span class="type">int</span> [] arr ,<span class="type">int</span> left,<span class="type">int</span> right,<span class="type">int</span> findVal)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿™é‡Œæœ‰ä¸ªbug ï¼Œå¦‚æœæ‰¾ä¸åˆ°å€¼ï¼Œé‚£ä¹ˆé€’å½’å°±ä¸ä¼šç§æ¤å¯¼è‡´å¼‚å¸¸</span></span><br><span class="line"><span class="keyword">if</span>(left &gt; right) &#123;</span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (left + right) / <span class="number">2</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">midVal</span> <span class="operator">=</span> arr[mid];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(findVal &gt; midVal) &#123;  <span class="comment">//å‘å³é€’å½’</span></span><br><span class="line"><span class="keyword">return</span> binarySearch(arr, mid +<span class="number">1</span>, right, findVal);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(findVal &lt; midVal)&#123; <span class="comment">//å‘å·¦é€’å½’</span></span><br><span class="line"><span class="keyword">return</span> binarySearch(arr, left, mid - <span class="number">1</span>, findVal);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> mid;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¾‹é¢˜ï¼š</p><p>å½“ä¸€ä¸ªæœ‰åºæ•°ç»„ä¸­ï¼Œæœ‰å¤šä¸ªç›¸åŒçš„æ•°æ®æ—¶ï¼Œå¦‚æœå°†æ‰€æœ‰çš„æ•°å€¼éƒ½æŸ¥æ‰¾åˆ°ï¼Œæ¯”å¦‚è¿™é‡Œçš„1000</p><p>arr={12,23,34,44,45,46,46,46,47,48};</p><ol><li>åœ¨æ‰¾åˆ°midç´¢å¼•å€¼ï¼Œä¸è¦é©¬ä¸Šè¿”å›</li><li>å‘midç´¢å¼•å€¼çš„å·¦è¾¹æ‰«æï¼Œå°†æ‰€æœ‰æ»¡è¶³46çš„å…ƒç´ çš„ä¸‹æ ‡ï¼ŒåŠ å…¥åˆ°arrayList</li><li>å‘midç´¢å¼•å€¼çš„å³è¾¹æ‰«æï¼Œå°†æ‰€æœ‰æ»¡è¶³46çš„å…ƒç´ çš„ä¸‹æ ‡ï¼ŒåŠ å…¥åˆ°arrayList</li><li>å°†ArrayListè¿”å›</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinarySearch</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">int</span> [] arr = &#123;<span class="number">1</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">12</span>,<span class="number">12</span>,<span class="number">24</span>,<span class="number">56</span>,<span class="number">78</span>&#125;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">int resIndex = binarySearch(arr, 0, arr.length -1, 12);</span></span><br><span class="line"><span class="comment">if(resIndex == -1) &#123;</span></span><br><span class="line"><span class="comment">System.out.println(&quot;æ­¤æ—¶æ²¡æ‰¾åˆ°&quot;);</span></span><br><span class="line"><span class="comment">&#125;else &#123;</span></span><br><span class="line"><span class="comment">System.out.println(&quot;æ‰¾åˆ°äº†ï¼Œå…¶ä¸‹æ ‡ä¸ºï¼š&quot; + resIndex);</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">BinarySearch2(arr, <span class="number">0</span>, arr.length -<span class="number">1</span>, <span class="number">12</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äºŒåˆ†æŸ¥æ‰¾ç®—æ³•</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> left  å·¦è¾¹çš„ç´¢å¼•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> right å³è¾¹çš„ç´¢å¼•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> findVal è¦æŸ¥è¯¢çš„å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> å¦‚æœæ‚æ‰¾åˆ°å°±è¿”å›ä¸‹æ ‡ï¼Œå¦‚æœæ²¡æ‰¾åˆ°å°±è¿”å›-1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(<span class="type">int</span> [] arr ,<span class="type">int</span> left,<span class="type">int</span> right,<span class="type">int</span> findVal)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿™é‡Œæœ‰ä¸ªbug ï¼Œå¦‚æœæ‰¾ä¸åˆ°å€¼ï¼Œé‚£ä¹ˆé€’å½’å°±ä¸ä¼šç§æ¤å¯¼è‡´å¼‚å¸¸</span></span><br><span class="line"><span class="keyword">if</span>(left &gt; right) &#123;</span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (left + right) / <span class="number">2</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">midVal</span> <span class="operator">=</span> arr[mid];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(findVal &gt; midVal) &#123;  <span class="comment">//å‘å³é€’å½’</span></span><br><span class="line"><span class="keyword">return</span> binarySearch(arr, mid +<span class="number">1</span>, right, findVal);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(findVal &lt; midVal)&#123; <span class="comment">//å‘å·¦é€’å½’</span></span><br><span class="line"><span class="keyword">return</span> binarySearch(arr, left, mid - <span class="number">1</span>, findVal);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> mid;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾æœ‰å¤šä¸ªç›¸åŒæ•°å€¼çš„å…¨éƒ¨è¿”å›</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">BinarySearch2</span><span class="params">(<span class="type">int</span>[] array,<span class="type">int</span> left,<span class="type">int</span> right, <span class="type">int</span> value)</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (left + right)/<span class="number">2</span>;</span><br><span class="line">ArrayList&lt;Integer&gt; resIndexlist = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(value &lt; array[mid]) &#123;</span><br><span class="line">BinarySearch2(array,left,mid-<span class="number">1</span>,value);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(value &gt; array[mid]) &#123;</span><br><span class="line">BinarySearch2(array,mid+<span class="number">1</span>,right,value);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(mid);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> mid -<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(temp &lt; <span class="number">0</span> ||array[temp]!= value) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">resIndexlist.add(temp);</span><br><span class="line">temp--;</span><br><span class="line">&#125;</span><br><span class="line">resIndexlist.add(mid);</span><br><span class="line"></span><br><span class="line">temp = mid + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(array[temp]!= value || temp &gt; array.length-<span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">resIndexlist.add(temp);</span><br><span class="line">temp++;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">System.out.println(resIndexlist.toString());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//return resIndexlist.toString();</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="8-3-å·®å€¼æŸ¥æ‰¾"><a href="#8-3-å·®å€¼æŸ¥æ‰¾" class="headerlink" title="8.3  å·®å€¼æŸ¥æ‰¾"></a>8.3  å·®å€¼æŸ¥æ‰¾</h3><p>å·®å€¼æŸ¥æ‰¾ç®—æ³•æ˜¯åœ¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•çš„åŸºç¡€ä¸Šè¿›è¡Œè¿›ä¸€æ­¥è¿›è¡Œçš„ï¼Œå…¶æ˜¯åœ¨äºŒåˆ†æŸ¥æ‰¾çš„åŸºç¡€ä¸Šåšäº†ä¸€ç‚¹å°å°çš„ä¼˜åŒ–ï¼Œå…¶åŸºæœ¬æ€è·¯æ˜¯å°†åŸå…ˆå…¬å¼1çš„æ–¹å¼å˜æˆå…¬å¼2çš„æ–¹å¼ï¼Œç”±äºå…¶å–ä¸­ç‚¹å€¼çš„æ–¹å¼ä¸åŒï¼Œé€ æˆå…¶æ•ˆç‡ä¹Ÿä¸åŒï¼Œ</p><script type="math/tex; mode=display">å…¬å¼1 ï¼š mid = (low+hight)/2 = low + (hight - low)/2</script><script type="math/tex; mode=display">å…¬å¼2ï¼š mid = low + (high - low)*( (key - a[low]))/(a[hight] - a[low])</script><p>ç”±äºäºŒåˆ†æŸ¥æ‰¾éœ€è¦çš„æ¡ä»¶å°†æ•°ç»„è¿›è¡Œæœ‰åºæ’åˆ—ï¼Œæ•…è€Œå†åœ¨æ­¤lowä»£è¡¨å·¦è¾¹ï¼Œhightä»£è¡¨å³è¾¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InterpolationSearch</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;======== å·®å€¼æŸ¥æ‰¾åˆ†å¸ƒç•¥å¾®ä¸å‡åŒ€æ•°ç»„ ===========&quot;</span>);</span><br><span class="line"><span class="type">int</span> arr[] = &#123;<span class="number">1</span> ,<span class="number">4</span>, <span class="number">9</span>, <span class="number">15</span>, <span class="number">27</span>, <span class="number">49</span>, <span class="number">128</span>, <span class="number">157</span>&#125;;</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> interpolationSearch(arr, <span class="number">9</span>, <span class="number">0</span>, arr.length - <span class="number">1</span>);</span><br><span class="line">System.out.println(result==-<span class="number">1</span>?<span class="string">&quot;æœªæ‰¾åˆ°å…ƒç´ ï¼&quot;</span>:<span class="string">&quot;æŸ¥æ‰¾æˆåŠŸï¼&quot;</span> + <span class="number">9</span> + <span class="string">&quot;å¯¹åº”ä¸‹æ ‡ï¼š &quot;</span> + result);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;======== å·®å€¼æŸ¥æ‰¾åˆ†å¸ƒå‡åŒ€æ•°ç»„ ===========&quot;</span>);</span><br><span class="line"><span class="type">int</span> arr1[] = &#123;<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">18</span> ,<span class="number">20</span>&#125;;</span><br><span class="line"><span class="type">int</span> <span class="variable">target</span> <span class="operator">=</span> <span class="number">8</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">result1</span> <span class="operator">=</span> interpolationSearch(arr1, target, <span class="number">0</span>, arr1.length - <span class="number">1</span>);</span><br><span class="line">System.out.println(result1==-<span class="number">1</span>?<span class="string">&quot;æœªæ‰¾åˆ°å…ƒç´ ï¼&quot;</span>:<span class="string">&quot;æŸ¥æ‰¾æˆåŠŸï¼&quot;</span> + target + <span class="string">&quot;å¯¹åº”ä¸‹æ ‡ï¼š &quot;</span> + result1);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;======== å·®å€¼æŸ¥æ‰¾åˆ†å¸ƒæå…¶ä¸å‡åŒ€æ•°ç»„ ===========&quot;</span>);</span><br><span class="line"><span class="type">int</span> arr2[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>,<span class="number">99999</span>&#125;;</span><br><span class="line"><span class="type">int</span> <span class="variable">target2</span> <span class="operator">=</span> <span class="number">8</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">result2</span> <span class="operator">=</span> interpolationSearch(arr2, target2, <span class="number">0</span>, arr2.length - <span class="number">1</span>);</span><br><span class="line">System.out.println(result2==-<span class="number">1</span>?<span class="string">&quot;æœªæ‰¾åˆ°å…ƒç´ ï¼&quot;</span>:<span class="string">&quot;æŸ¥æ‰¾æˆåŠŸï¼&quot;</span> + target2 + <span class="string">&quot;å¯¹åº”ä¸‹æ ‡ï¼š &quot;</span> + result2);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">interpolationSearch</span><span class="params">(<span class="type">int</span> []arr, <span class="type">int</span> target ,<span class="type">int</span> left , <span class="type">int</span> right)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(target &lt; arr[left] || target &gt; arr[right] || left &gt; right) &#123;</span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">leftToTarget</span> <span class="operator">=</span> target - arr[left];</span><br><span class="line"><span class="type">int</span> <span class="variable">rightToLeft</span> <span class="operator">=</span> arr[right] - arr[left];</span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> right - left;</span><br><span class="line"><span class="comment">//ä¸­é—´çš„å€¼çš„ä¸‹æ ‡ï¼Œæ³¨æ„æ­¤è¡Œä¸äºŒåˆ†æŸ¥æ‰¾çš„åŒºåˆ«</span></span><br><span class="line"><span class="type">int</span> <span class="variable">mid</span>  <span class="operator">=</span> left + (leftToTarget * num) /rightToLeft;</span><br><span class="line">System.out.println(<span class="string">&quot;æ‰¾äº†ä¸€æ¬¡ï¼Œä¸­é—´å€¼ä¸ºï¼š&quot;</span> + mid);</span><br><span class="line"><span class="comment">//ç›®æ ‡å€¼å°äºä¸­é—´å€¼ï¼Œ å–å¾—å·¦ä¾§</span></span><br><span class="line"><span class="keyword">if</span>(arr[mid] &gt; target &amp;&amp; left &lt;= right) &#123;</span><br><span class="line"><span class="comment">//é€’å½’å·¦ä¾§</span></span><br><span class="line"><span class="keyword">return</span> interpolationSearch(arr, target, left, mid - <span class="number">1</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(arr[mid] &lt; target &amp;&amp; left &lt;= right) &#123;</span><br><span class="line"><span class="comment">//ç›®æ ‡å€¼å¤§äºä¸­é—´çš„å€¼å–å¾—å³ä¾§ï¼Œå¹¶ä¸”é€’å½’</span></span><br><span class="line"><span class="keyword">return</span> interpolationSearch(arr, target, mid + <span class="number">1</span>, right);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//ä¸å¤§äºä¹Ÿä¸å°äº åˆ™æ˜¯ç­‰äº</span></span><br><span class="line"><span class="keyword">return</span> mid;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-4-æ–æ³¢é‚£å¥‘æŸ¥æ‰¾"><a href="#8-4-æ–æ³¢é‚£å¥‘æŸ¥æ‰¾" class="headerlink" title="8.4 æ–æ³¢é‚£å¥‘æŸ¥æ‰¾"></a>8.4 æ–æ³¢é‚£å¥‘æŸ¥æ‰¾</h3><p>æ–æ³¢é‚£å¥‘æŸ¥æ‰¾ç®—æ³•ï¼Œåˆè¢«ç§°ä¸ºé»„é‡‘åˆ†å‰²æ³•ï¼Œæ˜¯ä¸€ç§æœ‰åºçš„æŸ¥æ‰¾ç®—æ³•ã€‚æ–æ³¢é‚£å¥‘æ•°åˆ—è¢«ç§°ä¸ºé»„é‡‘åˆ†å‰²æ•°åˆ—ï¼Œå…¶æ•°åˆ—å¦‚ï¼š 1,1,2,3,5,8,13,31â€¦â€¦.ã€‚åœ¨æ•°å­¦ä¸Šï¼Œå…¶é€’å½’æ–¹æ³•è¢«å®šä¹‰ä¸º</p><script type="math/tex; mode=display">F(n) = F(n-1) + F(n - 2) (n>=2).</script><p>è¯¥æ•°åˆ—è¶Šå¾€åçš„ä¸¤ä¸ªæ•°çš„æ¯”å€¼è¶‹å‘äºé»„é‡‘æ¯”ä¾‹0.618</p><p><strong>æ–æ³¢é‚£å¥‘æŸ¥æ‰¾æ˜¯åœ¨äºŒåˆ†æŸ¥æ‰¾çš„åŸºç¡€ä¸Šæ ¹æ®æ–æ³¢é‚£å¥‘æ•°åˆ—è¿›è¡Œåˆ†å‰²</strong>ã€‚åœ¨æ–æ³¢é‚£å¥‘æ•°åˆ—æ‰¾ä¸€ä¸ªç­‰äºå¤§äºæŸ¥æ‰¾è¡¨ä¸­å…ƒç´ ä¸ªæ•°çš„æ•°F(n),å°†åŸæŸ¥æ‰¾è¡¨æ‰©å±•ä¸ºé•¿åº¦ä¸ºF(n)(å¦‚æœè¦è¡¥å……å…ƒç´ ï¼Œåˆ™è¡¥å……é‡å¤æœ€åä¸€ä¸ªå…ƒç´ ï¼Œç›´åˆ°æ»¡è¶³F(n)ä¸ªå…ƒç´ )ï¼Œå®Œæˆåè¿›è¡Œæ–æ³¢é‚£å¥‘åˆ†å‰²ï¼Œ<strong>å³F[n]ä¸ªå…ƒç´ åˆ†å‰²ä¸ºå‰åŠéƒ¨åˆ†F(n-1)ä¸ªå…ƒç´ ï¼ŒååŠéƒ¨åˆ†F(n-2)ä¸ªå…ƒç´ ï¼Œæ‰¾å‡ºè¦æŸ¥æ‰¾çš„å…ƒç´ åœ¨é‚£ä¸€éƒ¨åˆ†å¹¶é€’å½’</strong>ï¼Œç›´åˆ°æ‰¾åˆ°ã€‚<strong>æ–æ³¢é‚£å¥‘æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(log2n)</strong>ã€‚ </p><blockquote><p>1ï¼‰ç”±æ–æ³¢é‚£å¥‘æ•°åˆ— F[k]=F[k-1]+F[k-2] çš„æ€§è´¨ï¼Œå¯ä»¥å¾—åˆ° ï¼ˆF[k]-1ï¼‰=ï¼ˆF[k-1]-1ï¼‰+ï¼ˆF[k-2]-1ï¼‰+1 ã€‚è¯¥å¼è¯´æ˜ï¼šåªè¦é¡ºåºè¡¨çš„é•¿åº¦ä¸ºF[k]-1ï¼Œåˆ™å¯ä»¥å°†è¯¥è¡¨åˆ†æˆé•¿åº¦ä¸ºF[k-1]-1å’ŒF[k-2]-1çš„ä¸¤æ®µï¼Œå³å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ä»è€Œä¸­é—´ä½ç½®ä¸ºmid=low+F(k-1)-1ï¼›</p><p>2ï¼‰æ¯ä¸€å­æ®µä¹Ÿå¯ä»¥ç”¨ç›¸åŒçš„æ–¹å¼åˆ†å‰²ï¼› </p><p>3ï¼‰è‹¥é¡ºåºè¡¨é•¿åº¦nä¸ä¸€å®šåˆšå¥½ç­‰äºF[k]-1ï¼Œåˆ™éœ€è¦å°†åŸæ¥çš„é¡ºåºè¡¨é•¿åº¦nå¢åŠ è‡³F[k]-1ã€‚è¿™é‡Œçš„kå€¼åªè¦èƒ½ä½¿å¾—F[k]-1æ°å¥½å¤§äºæˆ–ç­‰äºnå³å¯ã€‚ </p></blockquote><p>ä¾‹å¦‚ï¼šåŸæ•°ç»„ä¸º{1,5,6,33,55,233,455}ï¼Œé•¿åº¦nä¸º7ï¼Œè‹¥ F[ k ] - 1ç­‰äº9ï¼Œåˆ™åº”è¯¥å°†åŸæ•°ç»„æ‰©å®¹åˆ°9ï¼Œå¤šå‡ºçš„ä½ç½®ä½¿ç”¨highä½ç½®çš„455å¡«å……ï¼Œå³å¾—åˆ°{1,5,6,33,55,233,455,455,455}ã€‚ </p><p>ä»£ç å®ç°</p><blockquote><p>ï¼ˆ1ï¼‰æˆ‘ä»¬éœ€è¦å…ˆé€’å½’å®ç°æ–æ³¢æ‹‰å¥‘æ•°åˆ—ï¼Œç„¶åæ ¹æ®åŸæ•°ç»„çš„å¤§å°è®¡ç®—æ–æ³¢æ‹‰å¥‘æ•°åˆ—çš„kå€¼ï¼› </p><p>ï¼ˆ2ï¼‰æ•°ç»„æ‰©å®¹æ¡ä»¶æ˜¯ï¼š<strong>å¢å¤§ k å€¼ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ï¼Œä½¿å¾—æ•°ç»„é•¿åº¦åˆšå¥½å¤§äºæˆ–è€…ç­‰äºæ–æ³¢é‚£å¥‘æ•°åˆ—ä¸­çš„ F[k]-1 ï¼Œæˆ‘ä»¬å®šä¹‰ä¸´æ—¶æ•°ç»„ temp ï¼Œtemp åé¢ä¸º 0 çš„å…ƒç´ éƒ½æŒ‰ç…§æ•°ç»„æœ€å¤§å…ƒç´ å€¼å¡«å……</strong>ï¼›</p><p> ï¼ˆ3ï¼‰midå€¼çš„ç¡®å®šï¼š<strong>mid = low + f[k - 1] - 1</strong> ï¼Œå³ç”¨é»„é‡‘åˆ†å‰²ç‚¹ç¡®å®š mid çš„å€¼ï¼› </p><p>ï¼ˆ4ï¼‰<strong>value&lt;temp[mid]</strong> ï¼šç›®æ ‡å€¼åœ¨é»„é‡‘åˆ†å‰²ç‚¹çš„å·¦è¾¹ï¼Œå› ä¸ºå…¨éƒ¨å…ƒç´  = å‰é¢çš„å…ƒç´  + åè¾¹å…ƒç´ å³ f[k] = f[k-1] + f[k-2]ï¼Œåˆå‰é¢æœ‰ f[k-1]ä¸ªå…ƒç´ ,æ‰€ä»¥å¯ä»¥ç»§ç»­æ‹†åˆ† f[k-1] = f[k-2] + f[k-3]ï¼Œå³ä¸‹æ¬¡å¾ªç¯æœ‰mid=low+f[k-1-1]+1ï¼Œå³éœ€è¦<strong>k-=1</strong>ï¼› </p><p><strong>value&gt; temp[mid]</strong> ï¼šç›®æ ‡å€¼åœ¨é»„é‡‘åˆ†å‰²ç‚¹çš„å³è¾¹ã€‚å› ä¸ºå…¨éƒ¨å…ƒç´  = å‰é¢çš„å…ƒç´  + åè¾¹å…ƒç´ å³ f[k] = f[k-1] + f[k-2]ï¼Œåˆå‰é¢æœ‰ f[k-2]ä¸ªå…ƒç´ ,æ‰€ä»¥å¯ä»¥ç»§ç»­æ‹†åˆ† f[k-1] = f[k-3] + f[k-4]ï¼Œå³ä¸‹æ¬¡å¾ªç¯æœ‰mid=low+f[k-1-2]+1ï¼Œå³éœ€è¦<strong>k-=2</strong>ï¼›</p><p> <strong>value== temp[mid] ï¼š</strong>æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå› ä¸ºæ•°ç»„ç»å†è¿‡æ‰©å®¹ï¼Œåé¢çš„å€¼å…¶å®æœ‰äº›æ˜¯å¤šä½™çš„ï¼Œmid å¯èƒ½ä¼šè¶Šç•Œï¼ˆç›¸å¯¹äºåŸæ•°ç»„æ¥è¯´ï¼‰åˆ™æœ‰ï¼š 1ï¼‰<strong>mid &lt;= high ï¼šè¯æ˜ mid ç´¢å¼•åœ¨åŸæ•°ç»„ä¸­ï¼Œè¿”å› mid</strong>ï¼› 2ï¼‰<strong>mid &gt; high æ—¶ï¼Œè¯æ˜ mid ç´¢å¼•å·²ç»è¶Šç•Œï¼ˆç›¸å¯¹äºåŸæ•°ç»„æ¥è¯´ï¼‰ï¼Œè¿”å› high</strong>ï¼› </p><p>ï¼ˆ5ï¼‰è‹¥æ²¡æœ‰æ‰¾åˆ°åˆ™è¿”å›-1ã€‚ </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FibonacciSearch</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">int</span> arr[] = &#123;<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">33</span>,<span class="number">55</span>,<span class="number">233</span>,<span class="number">455</span>&#125;;</span><br><span class="line">Arrays.sort(arr); <span class="comment">//æ—¢ç„¶æ˜¯äºŒåˆ†æŸ¥æ‰¾è¡ç”Ÿå‡ºæ¥çš„ï¼Œé‚£ä¹ˆå°±éœ€è¦å…ˆå¯¹æ•°ç»„æ’åºï¼Œæ— è®ºæ•°ç»„æ˜¯å¦æ’å¥½åºï¼Œè¿™æ ·åšæ€»å…±æ˜¯ä¸€ç§æ–¹å¼</span></span><br><span class="line"><span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> <span class="number">55</span>;<span class="comment">//è¦æŸ¥æ‰¾çš„å€¼</span></span><br><span class="line"><span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> fibonacciSearch(arr, value);</span><br><span class="line">System.out.println(temp == -<span class="number">1</span> ? <span class="string">&quot;æ²¡æ‰¾åˆ°ä½ æ‰€è¦çš„å€¼ï¼Œå¯èƒ½ä½ è¦æŸ¥æ‰¾çš„å€¼å¹¶ä¸åœ¨æ–æ³¢é‚£å¥‘æ•°åˆ—ä¹‹ä¸­,ä½ è¦æŸ¥æ‰¾çš„å€¼ä¸º:&quot;</span>+value :<span class="string">&quot;æ‚¨æŸ¥æ‰¾çš„å€¼ä¸º&quot;</span>+value+<span class="string">&quot;å…¶ä¸‹æ ‡ä¸º&quot;</span>+temp );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">maxSize</span> <span class="operator">=</span> <span class="number">20</span>; <span class="comment">//æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å¤§å°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> [] fibonacci() &#123; <span class="comment">//æ„å»ºä¸€ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—</span></span><br><span class="line"><span class="type">int</span>[] fib = <span class="keyword">new</span> <span class="title class_">int</span> [maxSize];</span><br><span class="line">fib[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">fib[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt; maxSize ; i++ ) &#123;</span><br><span class="line">fib[i] = fib[i - <span class="number">1</span>] + fib [i -<span class="number">2</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> fib;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">fibonacciSearch</span><span class="params">(<span class="type">int</span> [] arr ,<span class="type">int</span> value )</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//æŒ‡é’ˆlowè¡¨ç¤ºå¾…æŸ¥å…ƒç´ æ‰€åœ¨èŒƒå›´çš„ä¸‹ç•Œï¼Œä¸‹ç•Œç´¢å¼•ä»0å¼€å§‹</span></span><br><span class="line"><span class="type">int</span> <span class="variable">high</span> <span class="operator">=</span> arr.length - <span class="number">1</span> ; <span class="comment">//æŒ‡é’ˆhighè¡¨ç¤ºå¾…æŸ¥å…ƒç´ æ‰€åœ¨èŒƒå›´çš„ä¸Šç•Œ</span></span><br><span class="line"><span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span> ;<span class="comment">// è¡¨ç¤ºæ–æ³¢é‚£å¥‘åˆ†å‰²æ•°å€¼çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> fib[] = fibonacci(); <span class="comment">//è·å–åˆ°æ–æ³¢é‚£å¥‘æ•°åˆ—</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(high &gt; fib[k] - <span class="number">1</span>) &#123;<span class="comment">//è·å–åˆ°æ–æ³¢é‚£å¥‘åˆ†å‰²æ•°å€¼çš„ä¸‹æ ‡</span></span><br><span class="line">k ++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å› ä¸ºf[k]å€¼ï¼Œå¯èƒ½å¤§äºaçš„é•¿åº¦ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨Arrays.copyOfæ–¹æ³•ï¼Œæ„é€ ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå¹¶æŒ‡å‘temp[]</span></span><br><span class="line"><span class="type">int</span> [] temp = Arrays.copyOf(arr, fib[k]);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> high + <span class="number">1</span>; i &lt; temp.length ; i++ ) &#123;</span><br><span class="line"><span class="comment">//ä½¿ç”¨arræ•°ç»„æœ€åçš„æ•°å¡«å……temp</span></span><br><span class="line">temp[i] = arr[high];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(low &lt; high) &#123;</span><br><span class="line">mid = low + fib[k - <span class="number">1</span>] -<span class="number">1</span>; <span class="comment">//æ–æ³¢é‚£å¥‘ä¸­å€¼å…¬å¼</span></span><br><span class="line"><span class="keyword">if</span>(value &lt; temp[mid]) &#123;</span><br><span class="line"><span class="comment">//å…³é”®å­å€¼å°äºä¸­é—´å€¼ï¼Œåº”è¯¥å‘å·¦æ‰«æå³ä½¿high = mid - 1</span></span><br><span class="line">high = mid - <span class="number">1</span>;</span><br><span class="line">k -= <span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(value &gt; temp[mid]) &#123; <span class="comment">//å…³é”®å­—å€¼å¤§äºä¸­é—´å€¼ï¼Œåº”è¯¥å‘å³æ‰«æï¼Œå³ä½¿low = mid + 1</span></span><br><span class="line">low = mid + <span class="number">1</span>;</span><br><span class="line">k -= <span class="number">2</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123; <span class="comment">//æ‰¾åˆ°æ—¶éœ€è¦è¿”å›å“ªä¸ªä¸‹æ ‡</span></span><br><span class="line"><span class="keyword">if</span>(mid &lt;= high) &#123; <span class="comment">//è¯æ˜midç´¢å¼•åœ¨åŸæ•°ç»„ä¸­ï¼Œè¿”å›mid</span></span><br><span class="line"><span class="keyword">return</span> mid;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//è¯æ˜midç´¢å¼•å·²ç»è¶Šç•Œï¼ˆç›¸å¯¹äºåŸæ•°ç»„æ¥è¯´ï¼‰ï¼Œè¿”å›high</span></span><br><span class="line"><span class="keyword">return</span> high;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> - <span class="number">1</span>; <span class="comment">//æ²¡æœ‰æ‰¾åˆ°å³è¿”å› - 1</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦æ˜¯ç¬”è€…åœ¨å­¦ä¹ javaæ•°æ®ç»“æ„å’Œç®—æ³•çš„ç¬”è®°</summary>
    
    
    
    <category term="javaå­¦ä¹ " scheme="https://www.blog.909111.xyz/categories/java%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="javaå­¦ä¹ " scheme="https://www.blog.909111.xyz/tags/java%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>å®‰è£…çºªå½•</title>
    <link href="https://www.blog.909111.xyz/posts/c0b97cce.html"/>
    <id>https://www.blog.909111.xyz/posts/c0b97cce.html</id>
    <published>2023-11-09T02:50:23.341Z</published>
    <updated>2023-11-09T02:50:23.341Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Vueå®‰è£…å’Œå­¦ä¹ "><a href="#Vueå®‰è£…å’Œå­¦ä¹ " class="headerlink" title="Vueå®‰è£…å’Œå­¦ä¹ "></a>Vueå®‰è£…å’Œå­¦ä¹ </h1><p><code>npm install</code></p><p><code>npm run  dev</code></p><h2 id="å…‹éš†é¡¹ç›®"><a href="#å…‹éš†é¡¹ç›®" class="headerlink" title="å…‹éš†é¡¹ç›®"></a>å…‹éš†é¡¹ç›®</h2><p>git clone <a href="https://github.com/daxiongYang/renren-fast-vue.git">https://github.com/daxiongYang/renren-fast-vue.git</a></p><h2 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h2><ol><li><p>npm install -g cnpm â€”registry=<a href="https://registry.npm.taobao.org">https://registry.npm.taobao.org</a></p></li><li><p>cnpm install</p></li></ol><h2 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h2><p>npm run dev</p><hr><p>é¡¹ç›®é…ç½®  ï¼š  1 é“¾æ¥æ•°æ®åº“  å¼€å¯è™šæ‹Ÿæœº<br>               2 å¼€å¯nocas<br>               3 å¼€å¯ vue åç«¯ç®¡ç†ç•Œé¢ npm run dev<br>               4</p><p>vue å‰ç«¯ç™»å½•  admin admin </p><p>nacos  ç™»å½•  nacos  nacos  </p><h2 id="Vueå¸è½½"><a href="#Vueå¸è½½" class="headerlink" title="Vueå¸è½½"></a>Vueå¸è½½</h2><blockquote><p>å®˜æ–¹è§£é‡Š<br>å…³äºæ—§ç‰ˆæœ¬</p><p>Vue CLI çš„åŒ…åç§°ç”± vue-cli æ”¹æˆäº† @vue/cliã€‚ å¦‚æœä½ å·²ç»å…¨å±€å®‰è£…äº†æ—§ç‰ˆæœ¬çš„ vue-cli (1.x æˆ– 2.x)ï¼Œä½ éœ€è¦å…ˆé€šè¿‡ npm uninstall vue-cli -g æˆ– yarn global remove vue-cli å¸è½½å®ƒã€‚</p><p>è¿™æ˜¯vue-cli 3.0ç‰ˆæœ¬çš„å¸è½½</p><p>å°ç¼–ä¹‹å‰æ²¡æ³¨æ„ æ¯æ¬¡å¸è½½ ä¸çŸ¥é“æ€ä¹ˆå›äº‹è€æ˜¯å¸è½½ä¸äº†ï¼Œå› ä¸ºå°ç¼–ä¸€å¼€å§‹å°±å®‰è£…çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå‡ ä¹éƒ½æ˜¯4.xxçš„</p><p>åæ¥å„ç§ç™¾åº¦ ç»ˆäºçŸ¥é“äº†</p><p>//å¸è½½3.0ä¹‹å‰çš„ç‰ˆæœ¬<br><code>npm uninstall -g vue-cli</code><br><code>yarn global remove vue-cli</code></p><p>//å¸è½½3.0ä¹‹åçš„ç‰ˆæœ¬ï¼ˆå¯ä»¥ç»Ÿä¸€ä½¿ç”¨æ­¤æŒ‡ä»¤å¸è½½ï¼‰<br><code>npm uninstall -g @vue/cli</code><br><code>yarn global remove @vue/cli</code></p><p>å®‰è£…<br>ç„¶åæ˜¯å®‰è£…ï¼Œå°ç¼–æ˜¯çœ‹æ•™ç¨‹åœ¨å­¦ä¹  ä¹‹å‰æ²¡æ³¨æ„ç‰ˆæœ¬å·ï¼Œå„ç§å¯¹ä¸ä¸Šæ•™ç¨‹ã€‚ç»ˆäºæ³¨æ„åˆ°äº† æ•™ç¨‹æ˜¯3.3.0 ä¹Ÿæ˜¯å„ç§ç™¾åº¦ æ€ä¹ˆéƒ½å®‰è£…ä¸ä¸Š<br>ä¹‹å‰ç™¾åº¦åˆ°è¿™ä¸ªï¼š</p><p>//å®‰è£…2.9.6ç‰ˆæœ¬<br>npm install -g vue-cli@2.9.6<br>yarn global add vue-cli</p></blockquote><p>Vueæ¨¡å—åŒ–å¼€å‘:</p><ol><li><p>```vue<br>npm install webpack -g</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    å…¨å±€å®‰è£…</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. ```</span><br><span class="line">   npm install -g @vue/cli-init</span><br></pre></td></tr></table></figure><p>å…¨å±€å®‰è£…vueè„šæ‰‹æ¶</p></li><li><p>åˆå§‹åŒ–vueé¡¹ç›®</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue init webpack appname : <span class="type">vue</span> è„šæ‰‹æ¶ä½¿ç”¨webpackæ¨¡å—åˆå§‹åŒ–ä¸€ä¸ªappname(è‡ªå·±å®šä¹‰çš„)é¡¹ç›®</span><br></pre></td></tr></table></figure></li><li><p><code>cd vue-demo</code></p></li><li><p><code>npm run dev</code></p></li></ol><h2 id="vueå¼•å…¥Element-uiè·å–æœ€æ–°ç‰ˆæœ¬çš„èµ„æºï¼Œåœ¨é¡µé¢ä¸Šå¼•å…¥jså’Œcssæ–‡ä»¶å³å¯å¼€å§‹ä½¿ç”¨"><a href="#vueå¼•å…¥Element-uiè·å–æœ€æ–°ç‰ˆæœ¬çš„èµ„æºï¼Œåœ¨é¡µé¢ä¸Šå¼•å…¥jså’Œcssæ–‡ä»¶å³å¯å¼€å§‹ä½¿ç”¨" class="headerlink" title="vueå¼•å…¥Element-uiè·å–æœ€æ–°ç‰ˆæœ¬çš„èµ„æºï¼Œåœ¨é¡µé¢ä¸Šå¼•å…¥jså’Œcssæ–‡ä»¶å³å¯å¼€å§‹ä½¿ç”¨"></a>vueå¼•å…¥Element-uiè·å–æœ€æ–°ç‰ˆæœ¬çš„èµ„æºï¼Œåœ¨é¡µé¢ä¸Šå¼•å…¥jså’Œcssæ–‡ä»¶å³å¯å¼€å§‹ä½¿ç”¨</h2><blockquote><p>npm  i element-ui -s</p></blockquote><p>ç„¶åmain.jså¯¼å…¥</p><p><code>import ElementUI from &#39;element-ui&#39;</code>   //å¯¼å…¥vueå‰ç«¯Elementæ¡†æ¶</p><p><code>import &#39;element-ui/lib/theme-chalk/index.css&#39;;</code></p><p>Vue.use(ElementUI); </p><p><code>alt + shift + fè‡ªåŠ¨å¯¹é½ï¼ˆVSCodeï¼‰</code></p><h1 id="Dockerå®‰è£…å’Œç›¸å…³é…ç½®"><a href="#Dockerå®‰è£…å’Œç›¸å…³é…ç½®" class="headerlink" title="Dockerå®‰è£…å’Œç›¸å…³é…ç½®"></a>Dockerå®‰è£…å’Œç›¸å…³é…ç½®</h1><p>åœ¨å®‰è£…dockerä¹‹å‰æˆ‘ä»¬éœ€è¦å‡†å¤‡yumå·¥å…·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install -y yum-utils \</span><br><span class="line">           device-mapper-persistent-data \</span><br><span class="line">           lvm2 --skip-broken</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ›´æ–°æœ¬åœ°é•œåƒæº</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®dockeré•œåƒæº</span></span><br><span class="line">yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line">    </span><br><span class="line">sed -i &#x27;s/download.docker.com/mirrors.aliyun.com\/docker-ce/g&#x27; /etc/yum.repos.d/docker-ce.repo</span><br><span class="line"></span><br><span class="line">yum makecache fast</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¹‹åè¾“å…¥å®‰è£…dockerå‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install -y docker-ce</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å…³é—­é˜²ç«å¢™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…³é—­</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¦æ­¢å¼€æœºå¯åŠ¨é˜²ç«å¢™</span></span><br><span class="line">systemctl disable firewalld</span><br></pre></td></tr></table></figure><p>é€šè¿‡å‘½ä»¤å¯åŠ¨docker</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker  # å¯åŠ¨dockeræœåŠ¡</span><br><span class="line"></span><br><span class="line">systemctl stop docker  # åœæ­¢dockeræœåŠ¡</span><br><span class="line"></span><br><span class="line">systemctl restart docker  # é‡å¯dockeræœåŠ¡</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="é…ç½®é•œåƒåŠ é€Ÿ"><a href="#é…ç½®é•œåƒåŠ é€Ÿ" class="headerlink" title="é…ç½®é•œåƒåŠ é€Ÿ"></a>é…ç½®é•œåƒåŠ é€Ÿ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">æ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹daemoné…ç½®æ–‡ä»¶/etc/docker/daemon.jsonæ¥ä½¿ç”¨åŠ é€Ÿå™¨</span><br><span class="line"></span><br><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://vwesipli.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>s</p><blockquote><p>docker -v  â€”æŸ¥çœ‹dockerç‰ˆæœ¬<br>docker images â€”æŸ¥çœ‹å½“å‰dockerè¿è¡Œ<br>sudo systemctl start docker â€”å¯åŠ¨docker åœ¨è™šæ‹Ÿæœºé‡Œè¾¹<br>docker images  â€”æœ‰æ—¶å€™æƒé™ä¸è¶³   æˆ‘ä»¬å˜ä¸º  sudo  docker images æ£€æŸ¥æˆ‘ä»¬è™šæ‹Ÿæœºé‡Œè¾¹æœ‰æ— ä¸‹è½½é•œåƒ<br>sudo systemctl enable docker      â€”è®¾ç½®å¼€æœºè‡ªå¯åŠ¨<br>docker é…ç½®é•œåƒåŠ é€Ÿ<br>1        sudo mkdir -p /etc/docker<br>2        sudo tee /etc/docker/daemon.json &lt;&lt;-â€˜EOFâ€™<br>        {<br>        â€œregistry-mirrorsâ€: [â€œ<a href="https://dcyzi7af.mirror.aliyuncs.com">https://dcyzi7af.mirror.aliyuncs.com</a>â€œ]<br>        }<br>        EOF<br>3        sudo systemctl daemon-reload<br>4        sudo systemctl restart docker</p><p>dockeræŒ‡ä»¤å®‰è£…mysql<br>1    sudo docker pull mysql  â€”å®‰è£…æœ€æ–°çš„mysql<br>2    sudo docker pull mysql:ç‰ˆæœ¬å·   æˆ‘ä½¿ç”¨çš„æ˜¯ mysql 8.0.2 â€”å®‰è£…æŒ‡å®šçš„ç‰ˆæœ¬å·</p><h3 id="å¯åŠ¨å®‰è£…çš„é•œåƒ"><a href="#å¯åŠ¨å®‰è£…çš„é•œåƒ" class="headerlink" title="å¯åŠ¨å®‰è£…çš„é•œåƒ"></a>å¯åŠ¨å®‰è£…çš„é•œåƒ</h3><p>æ¯”å¦‚å¯åŠ¨ mysql:<br>docker run -p 3306:3306 â€”name mysql \<br> -v /mydata/mysql/log:/var/log/mysql \<br> -v /mydata/mysql/data:/var/lib/mysql \<br> -v /mydata/mysql/conf:/etc/mysql \<br> -e MYSQL_ROOT_PASSWORD=a \<br> -d mysql:5.7</p></blockquote><p>è¿è¡Œmysql:</p><blockquote><p> docker run -p 3306:3306 â€”name mysql \</p><p>  -v /mydata/mysql/log:/var/log/mysql \<br>  -v /mydata/mysql/data:/var/lib/mysql \<br>  -v /mydata/mysql/conf:/etc/mysql \<br>  -e MYSQL_ROOT_PASSWORD=a \ </p><h2 id="d-mysql-5-7"><a href="#d-mysql-5-7" class="headerlink" title="  -d mysql:5.7"></a>  -d mysql:5.7</h2><pre><code>ä¸Šè¾¹æ˜¯mysql5.7çš„å¯åŠ¨æ–¹å¼-d ä»£è¡¨ä»¥åå°æ–¹å¼è¿è¡Œ</code></pre><h2 id="p-3306-3306-å°†å®¹å™¨çš„3306ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„3306"><a href="#p-3306-3306-å°†å®¹å™¨çš„3306ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„3306" class="headerlink" title="-p 3306:3306 å°†å®¹å™¨çš„3306ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„3306"></a>-p 3306:3306 å°†å®¹å™¨çš„3306ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„3306</h2><pre><code>    -p 3306ï¼š3306ï¼› å°†å®¹å™¨çš„3306ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„3306ç«¯å£    -v/mydata/mysgl/conf:/etc/mysgl  ï¼šå°†é…ç½®æ–‡ä»¶å¤«æŒ‚è½½åˆ°ä¸»æœº    -v/mydata/mysgl/log:/var/log/mysgl  ï¼šå°†æ—¥å¿—æ–‡ä»¶å¤¹æŒ‚è½½åˆ°ä¸»æœº    -w/mydata/mysgl/data:/var/lib/mysgl/  ï¼Œå°†é…ç½®æ–‡ä»¶å¤¹æŒ‚è½½åˆ°ä¸»æœº    -e MYSQL_ROOT_PASSWORD=root           ï¼šåˆå§‹åŒ–rootç”¨æˆ·çš„å¯†ç </code></pre><hr><p> æœ‰æ—¶å€™åˆ‡æ¢æƒé™éº»çƒ¦ æ‰€æœ‰æˆ‘ä»¬åˆ‡æ¢åˆ°<br> su root   â€”æƒé™æœ€é«˜<br> docker ps â€”æŸ¥çœ‹å½“å‰dockeræ­£åœ¨è¿è¡Œä¸­çš„ç¨‹åº</p><p> docker run -dit -p 3306:3306 mysql:8.0.2 bash  â€”å¯åŠ¨mysql 8.0.2</p><p> service mysql status     â€”æŸ¥çœ‹mysqlçš„çŠ¶æ€<br> service mysql start      â€”å¯åŠ¨mys</p><p> docker exec -it mysql /bin/bash  â€”è¿›å…¥mysqlå†…éƒ¨</p><p> whereis mysql<br>        mysql: /usr/bin/mysql /usr/lib64/mysql /usr/share/mysql  /usr/share/man/man1/mysql.1.gz</p><hr></blockquote><p>docokeræŒ‡ä»¤</p><blockquote><p>ä¸€ã€æŸ¥çœ‹å®¹å™¨ï¼Œå¤åˆ¶å®¹å™¨id å³container id<br>docker ps -a<br>äºŒã€åœæ­¢å®¹å™¨<br>docker stop ä½ çš„å®¹å™¨id<br>ä¸‰ã€åˆ é™¤å®¹å™¨<br>docker rm å®¹å™¨id<br>å››ã€æŸ¥çœ‹é•œåƒï¼Œå¤åˆ¶é•œåƒidå³images id<br>docker images<br>äº”ã€‚åˆ é™¤é•œåƒ</p><p>docker rmi é•œåƒid</p><p>è¿™æ˜¯æˆ‘è£…çš„<br>Mysql8.0å®‰è£…</p><p>1ã€æ‹‰å–mysqlé•œåƒ</p><p>docker pull mysql:8.0</p><p>2.docker run -p 3306:3306 â€”name mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql</p><p>docker run -p 3306:3306 â€”name mysql -e MYSQL_ROOT_PASSWORD=a -d mysql</p><p>3.docker exec -it mysql /bin/bash</p><p>4.mysql -uroot -p123456</p><p>5.use mysql;</p><p>6.ALTER USER â€˜rootâ€™@â€™%â€™ IDENTIFIED BY â€˜123456â€™ PASSWORD EXPIRE NEVER;</p><p>7.ALTER USER â€˜rootâ€™@â€™%â€™ IDENTIFIED WITH mysql_native_password BY â€˜123456â€™;</p><p>8.FLUSH PRIVILEGES;</p><p>9.ä¿®æ”¹å¯†ç <br>mysqladmin -uroot -pæ—§å¯†ç  password æ–°å¯†ç    â€”å¯†ç ä¸º 123456<br>æ³¨æ„ä¸€ä¸‹æˆ‘è£…çš„è™šæ‹Ÿæœºç«¯å£å·mysqlä¸º 3307</p><p>29adbe537c3e   mysql     â€œdocker-entrypoint.sâ€¦â€   52 minutes ago   Up 52 minutes   33060/tcp, 0.0.0.0:3307-&gt;3306/tcp, :::3307-&gt;3306/tcp   mysql</p><hr><p>é¦–å…ˆè¿›å…¥</p><p>1ã€docker exec -it mysql bash      //mysqlæ˜¯mysqlå®¹å™¨çš„åˆ«å</p><p>2ã€mysql -uroot -p</p><p>3ã€è¾“å…¥å¯†ç </p><p>4ã€è¿›å…¥mysql&gt;å‘½ä»¤è¡Œç•Œé¢</p><p>1,å®¹å™¨ä¸­ç™»å½•mysql,æŸ¥çœ‹mysqlçš„ç‰ˆæœ¬</p><p>mysql&gt; status;</p><hr><p>mysql  Ver 8.0.11 for Linux on x86_64 (MySQL Community Server - GPL)</p><p>2,è¿›è¡Œæˆæƒè¿œç¨‹è¿æ¥(æ³¨æ„mysql 8.0è·Ÿä¹‹å‰çš„æˆæƒæ–¹å¼ä¸åŒ)</p><p>æˆæƒ</p><p>GRANT ALL ON <em>.</em> TO â€˜rootâ€™@â€™%â€™;</p><p>åˆ·æ–°æƒé™</p><p>flush privileges;</p><p>æ­¤æ—¶,è¿˜ä¸èƒ½è¿œç¨‹è®¿é—®,å› ä¸ºNavicatåªæ”¯æŒæ—§ç‰ˆæœ¬çš„åŠ å¯†,éœ€è¦æ›´æ”¹mysqlçš„åŠ å¯†è§„åˆ™</p><p>3,æ›´æ”¹åŠ å¯†è§„åˆ™</p><p>ALTER USER â€˜rootâ€™@â€™localhostâ€™ IDENTIFIED BY â€˜aâ€™ PASSWORD EXPIRE NEVER;</p><p>4,æ›´æ–°rootç”¨æˆ·å¯†ç </p><p>ALTER USER â€˜rootâ€™@â€™%â€™ IDENTIFIED WITH mysql_native_password BY â€˜aâ€™;</p><p>åˆ·æ–°æƒé™</p><p>flush privileges;</p><p>OKï¼Œè®¾ç½®å®Œæˆï¼Œå†æ¬¡ä½¿ç”¨ Navicat è¿æ¥æ•°æ®åº“</p></blockquote><h3 id="ä¸‹è½½redis"><a href="#ä¸‹è½½redis" class="headerlink" title="ä¸‹è½½redis"></a>ä¸‹è½½redis</h3><p><code>docker pull redis</code></p><p>åˆ›å»ºå®ä¾‹å¹¶å¯åŠ¨<br><code>mkdir -p /mydata/redis/conf</code> </p><p><code>touch redis.conf</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 6379:6379 --name redis -v /mydata/redis/data:/data \</span><br><span class="line"></span><br><span class="line">   -v /mydata/redis/conf/redis.conf:/etc/redis/redis.conf \</span><br><span class="line"></span><br><span class="line">   -d redis redis-server /etc/redis/redis.conf</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> ls   æŸ¥çœ‹å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶<br><code>cat redis.conf</code></p><p> æµ‹è¯•redis </p><p> <code>docker exec -it redis redis-cli</code></p><hr><p> ç”±äºä»¥å‰çš„æ•°æ®å…¨å­˜åœ¨å†…å­˜ä¸­ï¼Œä»è€Œæˆ‘ä»¬é‡å¤è¯»å–get açš„æ—¶å€™ä¼šå¯¼è‡´å¤±è´¥<br>[root@localhost conf]# <code>cat redis.conf</code><br>[root@localhost conf]# <code>docker exec -it redis redis-cli</code><br>127.0.0.1:6379&gt;<code>set a b</code><br>OK<br>127.0.0.1:6379&gt; <code>get a</code><br>â€œbâ€   //ä»è€Œåœ¨ä¸€æ¬¡ä¸Šæ¥çš„æ—¶å€™è¿™å—æ˜¯null<br>127.0.0.1:6379&gt; exit</p><p>â€”è®©redis æŒä¹…åŒ–  â€”-&gt; pwd<br>127.0.0.1:6379&gt; exit<br>[root@localhost conf]# <code>pwd</code><br>/mydata/redis/conf<br>[root@localhost conf]# <code>ls</code><br>redis.conf<br>[root@localhost conf]# <code>vi redis.conf</code><br>æŒ‰  <code>i</code><br>è¾“å…¥<code>appendonly yes</code><br>æŒ‰<code>esc</code>  è¾“å…¥<code>:wq</code></p><p><code>docker restart redis  //é‡å¯redis</code><br>â€”è®¾ç½®å¼€æœºè‡ªå¯åŠ¨docker é‡Œè¾¹å®¹å™¨<br><code>sudo docker update &lt;å®¹å™¨å&gt; --restart=always</code></p><h1 id="LinuxæŒ‡ä»¤"><a href="#LinuxæŒ‡ä»¤" class="headerlink" title="LinuxæŒ‡ä»¤"></a>LinuxæŒ‡ä»¤</h1><p>whoami  â€”è°çš„è´¦å·</p><p>ls /    â€”â€”æŸ¥çœ‹çš„å½“å‰è¿è¡Œçš„</p><p>~ å½“å‰ç”¨æˆ·ç›®å½•   /æ ¹ç›®å½•    . å½“å‰ç›®å½•   .. ä¸Šä¸€çº§ç›®å½•<br>$ å½“å‰ç›®å½•   # root  ç”¨æˆ·ç›®å½•<br>åˆ›å»ºç›®å½• ï¼š mkdir &lt;ç›®å½•å&gt;<br>åˆ é™¤ç›®å½• ï¼š rmdir &lt;ç›®å½•å&gt;<br>åˆ é™¤ ï¼š rm  -rf  &lt;ç›®å½•æˆ–æ–‡ä»¶&gt;<br>ç§»åŠ¨ ï¼š mv<br>åˆ›å»ºæ–‡ä»¶ï¼štouch<br>æ‰“å¼€æ–‡ä»¶ï¼š vi  è¿›å…¥æ–‡ä»¶ç¼–è¾‘å æŒ‰ESC ç„¶åè¾“å…¥ï¼šwqå­˜å¹¶é€€å‡º  ï¼šq,ä¸ä¿å­˜é€€å‡º<br>æŸ¥çœ‹æ–‡ä»¶å†…å®¹ ï¼š cat  </p><p>exit;   â€”- é€€å‡º</p><p> whoamis â€”å½“å‰æ˜¯ä»€ä¹ˆç”¨æˆ·åœ¨ä½¿ç”¨</p><p> whereis mysql   â€”æŸ¥çœ‹åº”ç”¨å®‰è£…çš„ç›®å½• æ ¼å¼ï¼š  whereis åº”ç”¨å </p><p>æƒé™  äºŒè¿›åˆ¶<br> r(4 100)  w(2  010)  x(1 001) è¯» å†™ æ‰§è¡Œ<br>chmod æˆæƒç»™  ä¾‹å¦‚ chmod  775  software</p><p>//å®‰è£…ssh<br>sudo apt-get install openssh-server  sudo spt-get install ssh</p><h1 id="æˆ‘çš„Spring-Cloudçš„é¡¹ç›®é…ç½®æ–‡ä»¶æŒ‡ä»¤ï¼š"><a href="#æˆ‘çš„Spring-Cloudçš„é¡¹ç›®é…ç½®æ–‡ä»¶æŒ‡ä»¤ï¼š" class="headerlink" title="æˆ‘çš„Spring Cloudçš„é¡¹ç›®é…ç½®æ–‡ä»¶æŒ‡ä»¤ï¼š"></a>æˆ‘çš„Spring Cloudçš„é¡¹ç›®é…ç½®æ–‡ä»¶æŒ‡ä»¤ï¼š</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-machine -s &quot;E:\SoftWaves\dicker&quot; create --engine-registry-mirror=https://dcyzi7af.mirror.aliyuncs.com -d virtualbox default</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 6379:6379 redis:latest</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --hostname navy-rabbit -p 5672:5672 -p 15672:15672 rabbitmq:3.8.8-management</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æµè§ˆå™¨è¾“å…¥ipåœ°å€ï¼Œè¿›å…¥rabbitç®¡ç†ç•Œé¢ï¼š 192.168.99.100:15672</span><br></pre></td></tr></table></figure><p>rabbit è´¦å·å¯†ç ï¼š guest  guest</p>]]></content>
    
    
    <summary type="html">å®‰è£…è¿è¡Œç¯å¢ƒå’Œè½¯ä»¶çš„ç›¸å…³çºªå½•</summary>
    
    
    
    <category term="é”™è¯¯è®°å½•" scheme="https://www.blog.909111.xyz/categories/%E9%94%99%E8%AF%AF%E8%AE%B0%E5%BD%95/"/>
    
    
    <category term="è¸©å‘è®°å½•" scheme="https://www.blog.909111.xyz/tags/%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>Hexoçš„å¯åŠ¨æ–¹å¼</title>
    <link href="https://www.blog.909111.xyz/posts/9b1154cd.html"/>
    <id>https://www.blog.909111.xyz/posts/9b1154cd.html</id>
    <published>2023-11-09T02:50:23.341Z</published>
    <updated>2023-11-09T02:50:23.341Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br><span class="line"></span><br><span class="line">hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy  // Git BASHç»ˆç«¯</span><br><span class="line">hexo clean; hexo generate; hexo deploy  // VSCODEç»ˆç«¯</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">hexoçš„å¯åŠ¨æ–¹å¼</summary>
    
    
    
    <category term="æ¼”ç¤º" scheme="https://www.blog.909111.xyz/categories/%E6%BC%94%E7%A4%BA/"/>
    
    
    <category term="æ¼”ç¤º" scheme="https://www.blog.909111.xyz/tags/%E6%BC%94%E7%A4%BA/"/>
    
  </entry>
  
  <entry>
    <title>javaåŸºç¡€é¢è¯•é¢˜</title>
    <link href="https://www.blog.909111.xyz/posts/df71ed7b.html"/>
    <id>https://www.blog.909111.xyz/posts/df71ed7b.html</id>
    <published>2023-11-09T02:50:23.341Z</published>
    <updated>2024-04-22T08:15:28.262Z</updated>
    
    <content type="html"><![CDATA[<h3 id="javaè¯­è¨€æœ‰å“ªäº›ç‰¹å¾ï¼š"><a href="#javaè¯­è¨€æœ‰å“ªäº›ç‰¹å¾ï¼š" class="headerlink" title="javaè¯­è¨€æœ‰å“ªäº›ç‰¹å¾ï¼š"></a>javaè¯­è¨€æœ‰å“ªäº›ç‰¹å¾ï¼š</h3><ol><li>ç®€å•æ˜“å­¦ï¼Œæœ‰ä¸°å¯Œçš„ç±»åº“</li><li>é¢å‘å¯¹è±¡ï¼Œé«˜å†…èšä½è€¦åˆ</li><li>å’Œå¹³å°æ— å…³æ€§ï¼Œå¯ä»¥åšåˆ°ä¸€æ¬¡ç¼–å†™æ°¸ä¹…ä½¿ç”¨ï¼ˆjvmåˆ™æ˜¯javaè·¨å¹³å°çš„æ ¹æœ¬ï¼‰</li><li>å®‰å…¨å¯é </li><li>æ”¯æŒå¤šçº¿ç¨‹</li></ol><h3 id="é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹"><a href="#é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹" class="headerlink" title="é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹"></a>é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹</h3><p><strong>é¢å‘è¿‡ç¨‹ï¼š</strong>åˆ†æè§£å†³é—®é¢˜çš„æ­¥éª¤ï¼Œç„¶åé€šè¿‡å‡½æ•°æŠŠè¿™äº›æ­¥éª¤ä¸€æ­¥ä¸€æ­¥åœ°å®ç°ï¼Œç„¶ååœ¨ä½¿ç”¨çš„æ—¶å€™ä¸€ä¸€è°ƒç”¨ï¼Œæ€§èƒ½æï¼Œæ‰€æœ‰å•ç‰‡æœºï¼ŒåµŒå…¥å¼å¼€å‘ä¸€èˆ¬é‡‡ç”¨é¢å‘è¿‡ç¨‹å¼€å‘ã€‚</p><p><strong>é¢å‘å¯¹è±¡ï¼š</strong>ä¸–ä¸Šçš„ä¸‡äº‹ä¸‡ç‰©çš†å¯çœ‹åšå¯¹è±¡ï¼Œå°†æ„æˆé—®é¢˜çš„äº‹åŠ¡åˆ†è§£æˆä¸ºå„ä¸ªå¯¹è±¡ï¼Œè€Œå»ºç«‹å¯¹è±¡çš„ç›®çš„ä¹Ÿä¸æ˜¯å®Œæˆä¸€ä¸ªä¸ªæ­¥éª¤ï¼Œè€Œæ˜¯æè¿°æŸäº‹ç‰©åœ¨è§£å†³æ•´ä¸ªé—®é¢˜è¿‡ç¨‹ä¸­æ‰€å‘ç”Ÿçš„è¡Œä¸ºã€‚é¢å‘å¯¹è±¡æœ‰ä¸‰å¤§ç‰¹å¾ï¼Œå°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€ã€‚æ•…è€Œæ›´åŠ å®¹æ˜“ç»´æŠ¤ï¼Œå®¹æ˜“å¤ç”¨ï¼Œå®¹æ˜“æ‹“å±•ã€‚å¯ä»¥è®¾è®¡å‡ºä½è€¦åˆçš„ç³»ç»Ÿï¼Œä½†ä»æ€§èƒ½ä¸Šè®²ï¼Œæ¯”é¢å‘è¿‡ç¨‹è¦ä½ã€‚</p><h3 id="java8ç§æ•°æ®ç±»å‹"><a href="#java8ç§æ•°æ®ç±»å‹" class="headerlink" title="java8ç§æ•°æ®ç±»å‹"></a>java8ç§æ•°æ®ç±»å‹</h3><hr><p>â€‹            int         short         byte     long  </p><p>  å­—èŠ‚                4                2                     1             8</p><p>  é»˜è®¤å€¼             0               0                     0             0L</p><p>  å°è£…ç±»         Integer      Short           Byte     Long </p><hr><p>â€‹            float             double</p><p>   å­—èŠ‚               4                                 8</p><p>  é»˜è®¤å€¼             0.0f                           0.0d  </p><p>  å°è£…ç±»            Float                           Double</p><hr><p>â€‹              boolean</p><p>   å­—èŠ‚            -</p><p>  é»˜è®¤å€¼          false     </p><p>  å°è£…ç±»          Boolean  </p><hr><p>â€‹                   char</p><p>   å­—èŠ‚            2</p><p>  é»˜è®¤å€¼                null</p><p>  å°è£…ç±»              Character</p><p><strong>æ³¨æ„ï¼š</strong></p><ol><li>int æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒIntegeræ˜¯intçš„å°è£…ç±»ï¼Œæ˜¯å¼•ç”¨ç±»å‹ï¼Œinté»˜è®¤å€¼æ˜¯0ï¼Œè€ŒIntegeré»˜è®¤å€¼æ˜¯null,æ‰€ä»¥Integerèƒ½åŒºåˆ†å‡º0å’Œnullçš„æƒ…å†µï¼Œä¸€æ—¦javaçœ‹åˆ°nullï¼Œè¿™ä¸ªå¼•ç”¨è¿˜ä¹ˆæŒ‡å‘æŸä¸ªå¯¹è±¡ï¼Œåœ¨ä»»ä½•å¼•ç”¨ä½¿ç”¨å‰ï¼Œå¿…é¡»ä¸ºå…¶æŒ‡å®šä¸€ä¸ªå¯¹è±¡ï¼Œå¦åˆ™æŠ¥é”™</li><li>åŸºæœ¬æ•°æ®ç±»å‹ï¼Œåœ¨å£°æ˜ä¹‹å‰ç³»ç»Ÿä¼šè‡ªåŠ¨ç»™ä»–åˆ†ç©ºé—´è€Œå¼•ç”¨ç±»å‹å£°æ˜æ—¶çŸ¥è¯†åˆ†é…äº†å¼•ç”¨ç©ºé—´ï¼Œå¿…é¡»é€šè¿‡è¯¥å®ä¾‹åŒ–å¼€è¾Ÿå¯¹è±¡ä¹‹åæ‰èƒ½èµ‹å€¼ï¼Œæ•°æ®å¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªå¼•ç”¨å¯¹è±¡ï¼Œå°†ä¸€ä¸ªæ•°ç»„èµ‹å€¼ç»™å¦ä¸€ä¸ªæ•°ç»„æ—¶åªæ˜¯å¤åˆ¶äº†ä¸€ä¸ªå¼•ç”¨ï¼Œæ‰€ä»¥é€šè¿‡æŸä¸€ä¸ªæ•°ç»„æ‰€åšçš„ä¿®æ”¹åœ¨å¦ä¸€ä¸ªæ•°ç»„ä¸­ä¹Ÿçœ‹å¾—è§ã€‚</li><li>è™½ç„¶å®šä¹‰äº†booleanè¿™ç§æ•°æ®ç±»å‹ï¼Œä½†æ˜¯åªå¯¹å®ƒæä¾›äº†éå¸¸æœ‰é™çš„æ”¯æŒã€‚åœ¨Javaè™šæ‹Ÿæœºä¸­æ²¡æœ‰ ä»»ä½•ä¾›booleanå€¼ä¸“ç”¨çš„å­—èŠ‚ç æŒ‡ä»¤ï¼ŒJavaè¯­è¨€è¡¨è¾¾å¼æ‰€æ“ä½œçš„booleanå€¼ï¼Œåœ¨ç¼–è¯‘ä¹‹åéƒ½ä½¿ç”¨Java è™šæ‹Ÿæœºä¸­çš„intæ•°æ®ç±»å‹æ¥ä»£æ›¿ï¼Œè€Œbooleanæ•°ç»„å°†ä¼šè¢«ç¼–ç æˆJavaè™šæ‹Ÿæœºçš„byteæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´  booleanå…ƒç´ å 8ä½ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥å¾—å‡ºbooleanç±»å‹å äº†å•ç‹¬ä½¿ç”¨æ˜¯4ä¸ªå­—èŠ‚ï¼Œåœ¨æ•°ç»„ä¸­åˆæ˜¯1ä¸ªå­— èŠ‚ã€‚ä½¿ç”¨intçš„åŸå› æ˜¯ï¼Œå¯¹äºå½“ä¸‹32ä½çš„å¤„ç†å™¨ï¼ˆCPUï¼‰æ¥è¯´ï¼Œä¸€æ¬¡å¤„ç†æ•°æ®æ˜¯32ä½ï¼ˆè¿™é‡Œä¸æ˜¯æŒ‡çš„ æ˜¯32/64ä½ç³»ç»Ÿï¼Œè€Œæ˜¯æŒ‡CPUç¡¬ä»¶å±‚é¢ï¼‰ï¼Œå…·æœ‰é«˜æ•ˆå­˜å–çš„ç‰¹ç‚¹ã€‚</li></ol><h3 id="instanceofå…³é”®å­—çš„ä½œç”¨"><a href="#instanceofå…³é”®å­—çš„ä½œç”¨" class="headerlink" title="instanceofå…³é”®å­—çš„ä½œç”¨"></a>instanceofå…³é”®å­—çš„ä½œç”¨</h3><p>ç”¨æ¥æµ‹è¯•ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºä¸€ä¸ªç±»çš„å®ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> obj <span class="keyword">instanceof</span> Class;</span><br></pre></td></tr></table></figure><p>objä¸ºå¯¹è±¡ï¼ŒClassè¡¨ç¤ºä¸€ä¸ªç±»æˆ–è€…æ¥å£ã€‚å½“objä¸ºClasså¯¹è±¡æˆ–è€…æ˜¯å…¶ç›´æ¥æˆ–é—´æ¥å­ç±»ï¼Œæˆ–è€…æ˜¯å…¶æ¥å£çš„å®ç°ç±»ï¼Œç»“æœéƒ½æ˜¯resultè¿”å›ä¸ºtrueï¼Œå¦åˆ™false;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">System.out.println(i <span class="keyword">instanceof</span> Integer);<span class="comment">//ç¼–è¯‘ä¸é€šè¿‡ iå¿…é¡»æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¸èƒ½æ˜¯åŸºæœ¬ç±»å‹</span></span><br><span class="line">System.out.println(i <span class="keyword">instanceof</span> Object);<span class="comment">//ç¼–è¯‘ä¸é€šè¿‡</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">integer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">1</span>);</span><br><span class="line">System.out.println(integer <span class="keyword">instanceof</span> Integer);<span class="comment">//true</span></span><br><span class="line"><span class="comment">//false ,åœ¨ JavaSEè§„èŒƒ ä¸­å¯¹ instanceof è¿ç®—ç¬¦çš„è§„å®šå°±æ˜¯ï¼šå¦‚æœ obj ä¸º nullï¼Œé‚£ä¹ˆå°†è¿”å› falseã€‚</span></span><br><span class="line">System.out.println(<span class="literal">null</span> <span class="keyword">instanceof</span> Object);</span><br></pre></td></tr></table></figure><h3 id="javaè‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±"><a href="#javaè‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±" class="headerlink" title="javaè‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±"></a>javaè‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±</h3><p>è£…ç®±æ˜¯è‡ªåŠ¨å°†åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢ä¸ºåŒ…è£…ç±»å‹ï¼ˆint -&gt; Integer ï¼‰;è°ƒç”¨æ–¹æ³•ï¼š Integerçš„valueOf(int)æ–¹æ³•</p><p>æ‹†ç®±å°±æ˜¯è‡ªåŠ¨å°†åŒ…è£…å™¨æ•°æ®ç±»å‹è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹ï¼ˆInteger-&gt;intï¼‰ã€‚è°ƒç”¨æ–¹æ³•ï¼šIntegerçš„intValueæ–¹æ³•ã€‚</p><p>åœ¨javaSE5ä¹‹å‰ï¼Œå¦‚æœè¦ç”Ÿæˆä¸€ä¸ªæ•°å€¼ä¸º10çš„Integerå¯¹è±¡ï¼Œå¿…é¡»è¦</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">10</span>);</span><br></pre></td></tr></table></figure><p>è€Œåœ¨ä»java SE5å¼€å§‹å°±æä¾›äº†è‡ªåŠ¨è£…ç®±çš„ç‰¹æ€§ï¼Œå¦‚æœè¦ç”Ÿæˆä¸€ä¸ªæ•°å€¼ä¸º10çš„Integerå¯¹è±¡ï¼Œåˆ™</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">main:</span><br><span class="line"><span class="type">Integer</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"><span class="type">Integer</span> <span class="variable">i2</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"><span class="type">Integer</span> <span class="variable">i3</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line"><span class="type">Integer</span> <span class="variable">i4</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line">sout(i1 == i2);<span class="comment">//true;</span></span><br><span class="line">sout(i3 == i4);<span class="comment">//true;</span></span><br></pre></td></tr></table></figure><p>å½’æ ¹ç»“åº•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title function_">valueOf</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line"> <span class="keyword">if</span>(i &gt;= -<span class="number">128</span> &amp;&amp; i &lt;= IntegerCache.high)</span><br><span class="line"> <span class="keyword">return</span> IntegerCache.cache[i + <span class="number">128</span>];</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(i);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>IntegerCache</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">IntegerCache</span> &#123;</span><br><span class="line"> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> high;</span><br><span class="line"> <span class="keyword">static</span> <span class="keyword">final</span> Integer cache[];</span><br><span class="line"> <span class="keyword">static</span> &#123;</span><br><span class="line"> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> -<span class="number">128</span>;</span><br><span class="line"> <span class="comment">// high value may be configured by property</span></span><br><span class="line"> <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> <span class="number">127</span>;</span><br><span class="line"> <span class="keyword">if</span> (integerCacheHighPropValue != <span class="literal">null</span>) &#123;</span><br><span class="line"> <span class="comment">// Use Long.decode here to avoid invoking methods that</span></span><br><span class="line"> <span class="comment">// require Integer&#x27;s autoboxing cache to be initialized</span></span><br><span class="line"> <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> Long.decode(integerCacheHighPropValue).intValue();</span><br><span class="line"> i = Math.max(i, <span class="number">127</span>);</span><br><span class="line"> <span class="comment">// Maximum array size is Integer.MAX_VALUE</span></span><br><span class="line"> h = Math.min(i, Integer.MAX_VALUE - -low);</span><br><span class="line"> &#125;</span><br><span class="line"> high = h;</span><br><span class="line"> cache = <span class="keyword">new</span> <span class="title class_">Integer</span>[(high - low) + <span class="number">1</span>];</span><br><span class="line"> <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> low;</span><br><span class="line"> <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; cache.length; k++)</span><br><span class="line"> cache[k] = <span class="keyword">new</span> <span class="title class_">Integer</span>(j++);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">private</span> <span class="title function_">IntegerCache</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>ä»è¿™ä¸¤æ®µä»£ç ä¸Šå¯ä»¥çœ‹å‡ºï¼Œåœ¨é€šè¿‡valueOfæ–¹æ³•åˆ›å»ºIntegerå¯¹è±¡çš„æ—¶å€™ï¼Œå¦‚æœæ•°å€¼åœ¨[-128,127],ä¹‹é—´ä¾¿è¿”å›æŒ‡å‘Integer.cacheä¸­å·²ç»å­˜åœ¨çš„å¯¹è±¡çš„å¼•ç”¨ï¼Œå¦åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„Integerå¯¹è±¡ã€‚</p><p>ä¸Šè¾¹çš„ä»£ç ä¸­i1å’Œi2çš„æ•°å€¼ä¸º100ï¼Œå› æ­¤ä¼šä»cacheä¸­è¯»å–å·²ç»å­˜åœ¨çš„å¯¹è±¡ã€‚æ‰€æœ‰i1å’Œi2æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè€Œi3å’Œi4ï¼Œåˆ†åˆ«æŒ‡å‘çš„æ˜¯ä¸åŒçš„å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">main:</span><br><span class="line"><span class="type">Double</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="number">100.0</span>ï¼›</span><br><span class="line"><span class="type">Double</span> <span class="variable">i2</span> <span class="operator">=</span> <span class="number">100.0</span>ï¼›</span><br><span class="line"><span class="type">Double</span> <span class="variable">i3</span> <span class="operator">=</span> <span class="number">200.0</span>ï¼›</span><br><span class="line"><span class="type">Double</span> <span class="variable">i4</span> <span class="operator">=</span> <span class="number">200.0</span>ï¼›</span><br><span class="line">sout(i1 == i2);   <span class="comment">//false</span></span><br><span class="line">sout(i3 == i4);   <span class="comment">//false</span></span><br></pre></td></tr></table></figure><p>åŸå› åœ¨äºåœ¨æŸä¸ªèŒƒå›´å†…çš„æ•´å‹æ•°å€¼çš„ä¸ªæ•°æ˜¯æœ‰é™çš„ï¼Œè€Œæµ®ç‚¹æ•°ä¸æ˜¯ã€‚</p><h3 id="é‡è½½å’Œé‡å†™"><a href="#é‡è½½å’Œé‡å†™" class="headerlink" title="é‡è½½å’Œé‡å†™"></a>é‡è½½å’Œé‡å†™</h3><p><strong>é‡å†™ï¼ˆOverrideï¼‰</strong>ï¼šé¡¾åæ€ä¹‰ï¼Œé‡å†™å°±æ˜¯é‡æ–°å†™ä¸€éçš„æ„æ€ï¼Œå…¶å®æ€¥é€Ÿåœ¨å­ç±»ä¸­æŠŠçˆ¶ç±»æœ¬èº«æœ‰çš„æ–¹æ³•é‡å†™å†™ä¸€éï¼Œå­ç±»ç»§æ‰¿äº†çˆ¶ç±»çš„åŸæœ‰çš„æ–¹æ³•ï¼Œå•æœ‰æ—¶å€™å­ç±»å¹¶ä¸æƒ³åŸå°ä¸åŠ¨çš„ç»§æ‰¿çˆ¶ç±»çš„æŸä¸ªæ–¹æ³•æ‰€ä»¥åœ¨æ–¹æ³•åï¼Œå‚æ•°åˆ—è¡¨ï¼Œè¿”å›ç±»å‹ï¼ˆé™¤å»å­ç±»ä¸­æ–¹æ³•çš„è¿”å›å€¼æ˜¯çˆ¶ç±»ä¸­æ–¹æ³•è¿”å›å€¼çš„å­ç±»æ—¶ï¼‰éƒ½åœ¨ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œå¯¹æ–¹æ³•ä½“è¿›è¡Œä¿®æ”¹æˆ–è€…é‡å†™ï¼Œä½†æ˜¯æ³¨æ„ï¼Œå­ç±»å‡½æ•°çš„æ–¹æ³•çš„è®¿é—®ä¿®é¥°æƒé™ä¸èƒ½å°‘äºçˆ¶ç±»çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Father</span>()&#123;</span><br><span class="line">    main:&#123;</span><br><span class="line">    <span class="type">Son</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Son</span>();</span><br><span class="line">    s.sayHello();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sayHello</span><span class="params">()</span>&#123;</span><br><span class="line">            sout(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_">Father</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sayHello</span><span class="params">()</span>&#123;</span><br><span class="line">        sout(<span class="string">&quot;Hello --by&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ä¹‹ï¼Œé‡å†™   </p><ol><li>å‘ç”Ÿåœ¨çˆ¶ç±»å’Œå­ç±»ä¹‹é—´.</li><li>æ–¹æ³•åï¼Œå‚æ•°ï¼Œè¿”å›ç±»å‹ï¼ˆé™¤å»å­ç±»æ–¹æ³•çš„è¿”å›ç±»å‹æ˜¯çˆ¶ç±»ä¸­è¿”å›ç±»å‹çš„å­ç±»ï¼‰å¿…é¡»ç›¸åŒ</li><li>è®¿é—®ä¿®é¥°ç¬¦çš„é™åˆ¶ä¸€å®šè¦å¤§äºè¢«é‡å†™æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦ï¼ˆpublic &gt; protected &gt; default &gt; private ï¼‰</li><li>é‡å†™æ–¹æ³•ä¸€å®šä¸èƒ½æŠ›å‡ºæ–°çš„æ£€æŸ¥å¼‚å¸¸æˆ–è€…æ¯”è¢«é‡å†™çš„æ–¹æ³•ç”³æ˜æ›´åŠ å®½æ³›çš„æ£€æŸ¥å‹å¼‚å¸¸ã€‚</li></ol><p><strong>é‡è½½ï¼ˆOverloadï¼‰</strong> ï¼šåŒä¸€ä¸ªç±»ä¸‹ï¼ŒåŒåçš„æ–¹æ³•å¦‚æœæœ‰ä¸åŒçš„å‚æ•°ç±»å‹åˆ—è¡¨<strong>ï¼ˆå‚æ•°ç±»å‹ä¸åŒï¼Œå‚æ•°ä¸ªæ•°ä¸åŒç”šè‡³å‚æ•°é¡ºåºä¸åŒï¼‰</strong>åˆ™è§†ä¸ºé‡è½½ï¼ŒåŒæ—¶ï¼Œé‡è½½å¯¹è¿”å›ç±»å‹æ²¡æœ‰è¦æ±‚ï¼Œå¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸åŒï¼Œ<strong>ä½†ä¸èƒ½é€šè¿‡è¿”å›ç±»å‹æ˜¯å¦ç›¸åŒæ¥åˆ¤æ–­é‡è½½</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"> <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"> <span class="type">Father</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Father</span>();</span><br><span class="line"> s.sayHello();</span><br><span class="line"> s.sayHello(<span class="string">&quot;wintershii&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sayHello</span><span class="params">()</span> &#123;</span><br><span class="line"> System.out.println(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sayHello</span><span class="params">(String name)</span> &#123;</span><br><span class="line"> System.out.println(<span class="string">&quot;Hello&quot;</span> + <span class="string">&quot; &quot;</span> + name);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é‡è½½ï¼š</strong></p><ol><li>é‡è½½æ˜¯ä¸€ä¸ªç±»ä¸­å¤šæ€æ€§çš„ä¸€ç§è¡¨ç°</li><li>é‡è½½è¦å»æ–¹æ³•åç›¸åŒå‚æ•°åˆ—è¡¨ä¸åŒï¼ˆå‚æ•°ç±»å‹ï¼Œå‚æ•°ä¸ªæ•°ï¼Œç”šè‡³å‚æ•°é¡ºåºï¼‰</li><li>é‡è½½çš„æ—¶å€™ï¼Œè¿”å›å€¼ç±»å‹å¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸åŒï¼Œæ— æ³•ä»¥è¿”å›å‹ä½œä¸ºé‡è½½å‡½æ•°çš„åŒºåˆ†æ ‡å‡†ã€‚</li></ol><h3 id="equals-ä¸-çš„åŒºåˆ«"><a href="#equals-ä¸-çš„åŒºåˆ«" class="headerlink" title="equals ä¸ == çš„åŒºåˆ«"></a>equals ä¸ == çš„åŒºåˆ«</h3><p><strong>==æ¯”è¾ƒçš„æ˜¯å˜é‡ï¼ˆæ ˆï¼‰å†…å­˜ä¸­å­˜æ”¾å¯¹è±¡çš„ï¼ˆå †ï¼‰å†…å­˜åœ°å€ï¼Œç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„åœ°å€æ˜¯å¦ç›¸åŒ</strong>ï¼Œä¹Ÿå°±æ˜¯æ˜¯å¦æ¯”è¾ƒç›¸åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ¯”è¾ƒçš„çœŸæ­£æ„ä¹‰ä¸Šçš„æŒ‡é’ˆæ“ä½œã€‚</p><ol><li><p>æ¯”è¾ƒçš„æ˜¯æ“ä½œç¬¦ä¸¤ç«¯çš„æ“ä½œæ•°æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡</p></li><li><p>ä¸¤è¾¹çš„æ“ä½œæ•°å¿…é¡»æ˜¯ç»Ÿä¸€ç±»å‹çš„ï¼ˆå¯ä»¥æ˜¯çˆ¶å­ç±»ä¹‹é—´ï¼‰æ‰èƒ½ç¼–è¯‘é€šè¿‡ã€‚</p></li><li><p>æ¯”è¾ƒçš„æ˜¯åœ°å€ï¼Œå¦‚æœæ˜¯å…·ä½“çš„é˜¿æ‹‰ä¼¯æ•°å­—çš„æ¯”è¾ƒï¼Œå€¼ç›¸ç­‰å°±æ˜¯true,å¦‚ int  a = 10 ,long b=10.0L ,double c = 10.0 éƒ½æ˜¯ç›¸åŒçš„ï¼Œå› ä¸ºä»–ä»¬éƒ½æŒ‡å‘åœ°å€ä¸º10çš„å †ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"> <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"> <span class="type">long</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">10L</span>;</span><br><span class="line"> <span class="type">double</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">10.0</span>;</span><br><span class="line">System.out.println(a == b); <span class="comment">//true</span></span><br><span class="line"> System.out.println(b==c);   <span class="comment">//true</span></span><br><span class="line">  System.out.println(a==c);  <span class="comment">//true</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>equals</strong>:<strong>ç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰</strong>ï¼Œç”±äºæ‰€æœ‰çš„ç±»éƒ½æ˜¯ç»§æ‰¿java.lang.Objectç±»çš„ï¼Œæ‰€ä»¥é€‚ç”¨äºæ‰€æœ‰å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰å¯¹è¯¥æ–¹æ³•è¿›è¡Œè¦†ç›–çš„è¯ï¼Œè°ƒç”¨çš„ä»ç„¶æ˜¯Objectä¸­çš„æ–¹æ³•ï¼Œè€ŒObjectä¸­çš„equalsæ–¹æ³•çš„è¿”å›ç¡®å®==çš„åˆ¤æ–­ã€‚</p></li></ol><p><strong>æ€»ç»“</strong></p><p>æ‰€æœ‰çš„æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰æ—¶ï¼Œéƒ½æ˜¯ç”¨equalså¹¶ä¸”å¯¹å¸¸é‡ç›¸æ¯”è¾ƒæ—¶ï¼ŒæŠŠå¸¸é‡å†™åœ¨å‰é¢ï¼Œå› ä¸ºä½¿ç”¨objectçš„equals object å¯èƒ½ä¸ºnullåˆ™ç©ºæŒ‡é’ˆã€‚åœ¨é˜¿é‡Œçš„ä»£ç è§„èŒƒä¸­åªä½¿ç”¨equals ï¼Œé˜¿é‡Œæ’ä»¶é»˜è®¤ä¼šè¯†åˆ«ï¼Œå¹¶å¯ä»¥å¿«é€Ÿä¿®æ”¹ï¼Œæ¨èå®‰è£…é˜¿é‡Œæ’ä»¶æ¥ æ’æŸ¥è€ä»£ç ä½¿ç”¨â€œ==â€ï¼Œæ›¿æ¢æˆequals</p><h3 id="Hashcodeçš„ä½œç”¨"><a href="#Hashcodeçš„ä½œç”¨" class="headerlink" title="Hashcodeçš„ä½œç”¨"></a>Hashcodeçš„ä½œç”¨</h3><p>javaé›†åˆæœ‰ä¸¤ä¸ªç±»ï¼Œä¸€ç±»æ˜¯Listï¼Œä¸€ç±»æ˜¯Setï¼Œå‰è€…æœ‰åºå¯é‡å¤ï¼Œåè€…æ— åºä¸é‡å¤ï¼Œå½“æˆ‘ä»¬åœ¨setä¸­æ’å…¥çš„æ—¶å€™æ€ä¹ˆåˆ¤æ–­æ˜¯å¦å·²ç»å­˜åœ¨è¯¥å…ƒç´ å‘¢ï¼Ÿå¯ä»¥é€šè¿‡equalsæ–¹æ³•ï¼Œå¦‚æœå…ƒç´ å¤ªå¤šï¼Œè¿™æ ·çš„æ–¹æ³•æ¯”è¾ƒæ»¡ã€‚</p><p>äºæ˜¯æœ‰äººå‘æ˜äº†å“ˆå¸Œç®—æ³•æ¥æé«˜é›†åˆä¸­æŸ¥æ‰¾å…ƒç´ çš„æ•ˆç‡ï¼Œè¿™ç§æ–¹å¼å°†é›†åˆåˆ†æˆè‹¥å¹²ä¸ªå­˜å‚¨åŒºåŸŸï¼Œæ¯ä¸ªå¯¹è±¡å¯ä»¥è®¡ç®—å‡ºä¸€ä¸ªå“ˆå¸Œç ï¼Œå¯ä»¥å°†å“ˆå¸Œç åˆ†ç»„ï¼Œæ¯ç»„åˆ†åˆ«å¯¹åº”æŸä¸ªå­˜å‚¨åŒºåŸŸï¼Œæ ¹æ®ä¸€ä¸ªå¯¹è±¡çš„å“ˆå¸Œç å°±å¯ä»¥ç¡®å®šè¯¥å¯¹è±¡åº”è¯¥å­˜å‚¨çš„é‚£ä¸ªåŒºåŸŸã€‚</p><p>hashCodeæ–¹æ³•å¯ä»¥è¿™æ ·ç†è§£ï¼Œä»–è¿”å›çš„å°±æ˜¯æ›´åŠ å¯¹è±¡çš„å†…å­˜åœ°å€æ¢ç®—å‡ºçš„ä¸€ä¸ªå€¼ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå½“é›†åˆè¦æ·»åŠ æ–°çš„å…ƒç´ çš„æ—¶ï¼Œå…ˆè°ƒç”¨è¿™ä¸ªå…ƒç´ çš„hashCodeæ–¹æ³•ï¼Œå°±ä¸€ä¸‹èƒ½å®šä½åˆ°ä»–åº”è¯¥æ”¾ç½®çš„ç‰©ç†ä½ç½®ï¼Œå¦‚æœè¿™ä¸ªä½ç½®ä¸Šæ²¡æœ‰å…ƒç´ ï¼Œå°±ç›´æ¥å­˜å‚¨åœ¨è¿™ä¸ªä½ç½®ä¸Šï¼Œä¸éœ€è¦åœ¨è¿›è¡Œä»»ä½•æ¯”è¾ƒï¼›å¦‚æœè¿™ä¸ªä½ç½®ä¸Šå·²ç»å­˜åœ¨å…ƒç´ ï¼Œå°±è°ƒç”¨equalsæ–¹æ³•ä¸æ–°å…ƒç´ æ¯”è¾ƒï¼Œç›¸åŒå°±ä¸å­˜ï¼Œä¸ç›¸åŒå°±æ•£åˆ—åˆ°å…¶ä»–åœ°å€ï¼Œè¿™æ ·ä¸€æ¥å®é™…è°ƒç”¨equalsæ–¹æ³•çš„æ¬¡æ•°å°±å¤§å¤§é™ä½äº†å‡ ä¹åªéœ€è¦ä¸€ä¸¤æ¬¡ã€‚</p><h3 id="String-StringBufferå’ŒStringBuilderçš„åŒºåˆ«"><a href="#String-StringBufferå’ŒStringBuilderçš„åŒºåˆ«" class="headerlink" title="String,StringBufferå’ŒStringBuilderçš„åŒºåˆ«"></a>String,StringBufferå’ŒStringBuilderçš„åŒºåˆ«</h3><p>String æ˜¯åªè¯»å­—ç¬¦ä¸²ï¼Œç”±äºè¢«finalä¿®é¥°ï¼Œæ•…stringä¸èƒ½è¢«ç»§æ‰¿ï¼Œä»–ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸”åº•å±‚æºç æ˜¯ä¸€ä¸ªè¢«finalä¿®é¥°çš„å­—ç¬¦æ•°ç»„ï¼Œæ‰€å¼•ç”¨çš„å­—ç¬¦ä¸²ä¸èƒ½è¢«æ”¹å˜ï¼Œä¸€ç»å®šä¹‰ï¼Œæ— æ³•å†å¢åˆ æ”¹ï¼Œæ¯æ¬¡å¯¹stringçš„æ“ä½œéƒ½ä¼šé€ æˆä¸€ä¸ªæ–°çš„stringå¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">string</span> <span class="variable">a</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line"><span class="type">string</span> <span class="variable">b</span> <span class="operator">=</span> <span class="string">&quot;b&quot;</span>;</span><br><span class="line"><span class="type">string</span> <span class="variable">c</span> <span class="operator">=</span> a + b;<span class="comment">//å°†ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„String c ,è€ŒString a,String bçš„å€¼ä¿æŒä¸å˜ã€‚</span></span><br></pre></td></tr></table></figure><p>æ¯æ¬¡+æ“ä½œåï¼šéšå¼åœ¨å †ä¸Šnewäº†ä¸€ä¸ªè·ŸåŸå­—ç¬¦ä¸²ç›¸åŒçš„StringBuilderå¯¹è±¡ï¼Œåœ¨è°ƒç”¨appendæ–¹æ³•æ‹¼æ¥+åè¾¹çš„å­—ç¬¦ã€‚</p><p>StringBufferå’ŒStringBuilderä»–ä»¬ä¸¤ä¸ªéƒ½ç»§æ‰¿äº†AbstractStringBuilderå¯¹è±¡ã€‚ä»–ä»¬çš„åº•å±‚éƒ½æ˜¯å¯å˜çš„å­—ç¬¦æ•°ç»„ï¼Œå¦å¤–StringBufferå¯¹æ–¹æ³•åŠ äº†åŒæ­¥æ‰€æˆ–è€…å¯¹è°ƒç”¨çš„æ–¹æ³•åŠ äº†åŒæ­¥é”ï¼Œæ‰€ä»¥çº¿ç¨‹æ˜¯å®‰å…¨çš„ï¼ŒStringBuilderå¹¶æ²¡æœ‰å¯¹æ–¹æ³•è¿›è¡ŒåŒæ­¥é”ï¼Œæ•…è€Œçº¿ç¨‹ä¸å®‰å…¨çš„ã€‚</p><h3 id="ArrayListå’ŒLinkedListçš„åŒºåˆ«"><a href="#ArrayListå’ŒLinkedListçš„åŒºåˆ«" class="headerlink" title="ArrayListå’ŒLinkedListçš„åŒºåˆ«"></a>ArrayListå’ŒLinkedListçš„åŒºåˆ«</h3><p>Array(æ•°ç»„)æ˜¯åŸºäºç´¢å¼•ï¼ˆindexï¼‰çš„æ•°æ®ç»“æ„ï¼Œå®ƒä½¿ç”¨ç´¢å¼•åœ¨æ•°ç»„ä¸­æœç´¢å’Œè¯»å–æ•°æ®æ˜¯å¾ˆå¿«çš„ã€‚</p><p>Arrayè·<strong>å–æ•°æ®çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1),ä½†æ˜¯åˆ é™¤æ•°æ®å¼€é”€å´å¾ˆå¤§</strong>ï¼Œå› ä¸ºè¿™éœ€è¦é‡æ’æ•°ç»„ä¸­æ‰€æœ‰çš„æ•°æ®ï¼Œï¼ˆå› ä¸ºåˆ é™¤æ•°æ®ä»¥åï¼Œéœ€è¦æŠŠåè¾¹çš„æ‰€æœ‰æ•°æ®å‰ç§»ï¼‰</p><p><strong>ç¼ºç‚¹ï¼šæ•°ç»„åˆå§‹åŒ–å¿…é¡»æŒ‡å®šåˆå§‹åŒ–é•¿åº¦ï¼Œå¦åˆ™æŠ¥é”™ã€‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] a = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">4</span>];<span class="comment">//æ¨ä»‹ä½¿ç”¨int[] è¿™ç§æ–¹å¼åˆå§‹åŒ–</span></span><br><span class="line"><span class="type">int</span> c[] = &#123;<span class="number">23</span>,<span class="number">43</span>,<span class="number">56</span>,<span class="number">78</span>&#125;;<span class="comment">//é•¿åº¦ï¼š4ï¼Œç´¢å¼•èŒƒå›´ï¼š[0,3]</span></span><br></pre></td></tr></table></figure><p><strong>Listæ˜¯ä¸€ä¸ªæœ‰åºçš„é›†åˆ</strong>ï¼Œå¯ä»¥åŒ…å«é‡å¤çš„å…ƒç´ ï¼Œæä¾›äº†æŒ‰ç´¢å¼•è®¿é—®çš„æ–¹å¼ï¼Œå®ƒç»§æ‰¿Collectionã€‚ </p><blockquote><p>Listæœ‰ä¸¤ä¸ªé‡è¦çš„å®ç°ç±»ï¼š<strong>ArrayListå’ŒLinkedList</strong> </p><p><strong>ArrayList: å¯ä»¥çœ‹ä½œæ˜¯èƒ½å¤Ÿè‡ªåŠ¨å¢é•¿å®¹é‡çš„æ•°ç»„</strong> </p><p><strong>ArrayListçš„toArrayæ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„</strong> </p><p><strong>ArrayListçš„asListæ–¹æ³•è¿”å›ä¸€ä¸ªåˆ—è¡¨</strong></p><p><strong>ArrayListåº•å±‚çš„å®ç°æ˜¯Array, æ•°ç»„æ‰©å®¹å®ç°</strong> </p></blockquote><p><strong>LinkListæ˜¯ä¸€ä¸ªåŒé“¾è¡¨ï¼Œåœ¨æ·»åŠ å’Œåˆ é™¤å…ƒç´ æ—¶å…·æœ‰æ¯”ArrayListæ›´å¥½çš„æ€§èƒ½ï¼Œä½†åœ¨getå’Œsetæ–¹é¢å¼±äºArrayList.å½“ç„¶è¿™äº›éƒ½æ˜¯å¯¹æ¯”æ•°æ®äº®å¾ˆå¤§æˆ–è€…æ“ä½œå¾ˆé¢‘ç¹çš„æƒ…å†µä¸‹çš„ã€‚</strong></p><h3 id="Stringç±»å¸¸ç”¨å¯¹è±¡æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ"><a href="#Stringç±»å¸¸ç”¨å¯¹è±¡æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Stringç±»å¸¸ç”¨å¯¹è±¡æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ"></a>Stringç±»å¸¸ç”¨å¯¹è±¡æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ</h3><blockquote><p>indexOf(): è¿”å›æŒ‡å®šå­—ç¬¦çš„ç´¢å¼•</p><p>charAt():è¿”å›æŒ‡å®šç´¢å¼•å¤„çš„å­—ç¬¦</p><p>replace():å­—ç¬¦ä¸²æ›¿æ¢</p><p>trim():å»é™¤å­—ç¬¦ä¸²ç«¯ç©ºç™½</p><p>split():åˆ†å‰²å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªåˆ†å‰²åçš„å­—ç¬¦ä¸²æ•°ç»„</p><p>getBytes():è¿”å›å­—ç¬¦ä¸²çš„byteç±»å‹æ•°ç»„</p><p>length():è¿”å›å­—ç¬¦ä¸²é•¿åº¦</p><p>toLowerCase(): å°†å­—ç¬¦ä¸²è½¬æˆå°å†™å­—æ¯</p><p>toUpperCase():å°†å­—ç¬¦ä¸²è½¬æˆå¤§å†™å­—æ¯</p><p>substring():æˆªå–å­—ç¬¦ä¸²</p><p>equals():å­—ç¬¦ä¸²æ¯”è¾ƒ</p></blockquote>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦ä»‹ç»å¯¹å¤šjavaåŸºç¡€é¢è¯•é¢˜çš„æ€»ç»“</summary>
    
    
    
    <category term="é¢è¯•é¢˜" scheme="https://www.blog.909111.xyz/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    
    <category term="javaé¢è¯•é¢˜" scheme="https://www.blog.909111.xyz/tags/java%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>Vue3å­¦ä¹ ç¬”è®°å’Œå®ä¾‹</title>
    <link href="https://www.blog.909111.xyz/posts/174c6ef5.html"/>
    <id>https://www.blog.909111.xyz/posts/174c6ef5.html</id>
    <published>2023-11-09T02:50:23.340Z</published>
    <updated>2023-11-09T02:50:23.340Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Vue3å­¦ä¹ "><a href="#Vue3å­¦ä¹ " class="headerlink" title="Vue3å­¦ä¹ "></a>Vue3å­¦ä¹ </h1><p>ç¬¬ä¸€ä¸ªvue é¡¹ç›®</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…node.jsè‡ªè¡Œé€‰æ‹©è‡ªå·±éœ€è¦çš„ç‰ˆæœ¬ã€‚æ¨èä½¿ç”¨node.js 16.0</p><p>æ‰“å¼€ä½ çš„ç›®æ ‡æ–‡ä»¶å¤¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init vue@latest  //æˆ–è€…æŒ‡å®šç‰ˆæœ¬å·</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æŒ‡ä»¤å°†ä¼šå®‰è£…å¹¶æ‰§è¡Œ <a href="https://github.com/vuejs/create-vue">create-vue</a>ï¼Œå®ƒæ˜¯ Vue å®˜æ–¹çš„é¡¹ç›®è„šæ‰‹æ¶å·¥å…·ã€‚ä½ å°†ä¼šçœ‹åˆ°ä¸€äº›è¯¸å¦‚ TypeScript å’Œæµ‹è¯•æ”¯æŒä¹‹ç±»çš„å¯é€‰åŠŸèƒ½æç¤ºï¼š </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">âœ” Project name: â€¦ &lt;your-project-name&gt;</span><br><span class="line">âœ” Add TypeScript? â€¦ No / Yes</span><br><span class="line">âœ” Add JSX Support? â€¦ No / Yes</span><br><span class="line">âœ” Add Vue Router for Single Page Application development? â€¦ No / Yes</span><br><span class="line">âœ” Add Pinia for state management? â€¦ No / Yes</span><br><span class="line">âœ” Add Vitest for Unit testing? â€¦ No / Yes</span><br><span class="line">âœ” Add Cypress for both Unit and End-to-End testing? â€¦ No / Yes</span><br><span class="line">âœ” Add ESLint for code quality? â€¦ No / Yes</span><br><span class="line">âœ” Add Prettier for code formatting? â€¦ No / Yes</span><br><span class="line"></span><br><span class="line">Scaffolding project in ./&lt;your-project-name&gt;...</span><br><span class="line">Done.</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸ç¡®å®šæ˜¯å¦è¦å¼€å¯æŸä¸ªåŠŸèƒ½ï¼Œä½ å¯ä»¥ç›´æ¥æŒ‰ä¸‹å›è½¦é”®é€‰æ‹© <code>No</code>ã€‚åœ¨é¡¹ç›®è¢«åˆ›å»ºåï¼Œé€šè¿‡ä»¥ä¸‹æ­¥éª¤å®‰è£…ä¾èµ–å¹¶å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="built_in">cd</span> &lt;your-project-name&gt;</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm install</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm run dev</span></span><br></pre></td></tr></table></figure><p>ä½ ç°åœ¨åº”è¯¥å·²ç»è¿è¡Œèµ·æ¥äº†ä½ çš„ç¬¬ä¸€ä¸ª Vue é¡¹ç›®ï¼è¯·æ³¨æ„ï¼Œç”Ÿæˆçš„é¡¹ç›®ä¸­çš„ç¤ºä¾‹ç»„ä»¶ä½¿ç”¨çš„æ˜¯<a href="https://cn.vuejs.org/guide/introduction.html#composition-api">ç»„åˆå¼ API</a> å’Œ <code>&lt;script setup&gt;</code>ï¼Œè€Œé<a href="https://cn.vuejs.org/guide/introduction.html#options-api">é€‰é¡¹å¼ API</a>ã€‚ä¸‹é¢æ˜¯ä¸€äº›è¡¥å……æç¤ºï¼š</p><ul><li>æ¨èçš„ IDE é…ç½®æ˜¯ <a href="https://code.visualstudio.com/">Visual Studio Code</a> + <a href="https://marketplace.visualstudio.com/items?itemName=Vue.volar">Volar æ‰©å±•</a>ã€‚å¦‚æœä½¿ç”¨å…¶ä»–ç¼–è¾‘å™¨ï¼Œå‚è€ƒ <a href="https://cn.vuejs.org/guide/scaling-up/tooling.html#ide-support">IDE æ”¯æŒç« èŠ‚</a>ã€‚</li><li>æ›´å¤šå·¥å…·ç»†èŠ‚ï¼ŒåŒ…æ‹¬ä¸åç«¯æ¡†æ¶çš„æ•´åˆï¼Œæˆ‘ä»¬ä¼šåœ¨<a href="https://cn.vuejs.org/guide/scaling-up/tooling.html">å·¥å…·é“¾æŒ‡å—</a>è¿›è¡Œè®¨è®ºã€‚</li><li>è¦äº†è§£æ„å»ºå·¥å…· Vite æ›´å¤šèƒŒåçš„ç»†èŠ‚ï¼Œè¯·æŸ¥çœ‹ <a href="https://cn.vitejs.dev/">Vite æ–‡æ¡£</a>ã€‚</li><li>å¦‚æœä½ é€‰æ‹©ä½¿ç”¨ TypeScriptï¼Œè¯·é˜…è¯» <a href="https://cn.vuejs.org/guide/typescript/overview.html">TypeScript ä½¿ç”¨æŒ‡å—</a>ã€‚</li></ul><p>å½“ä½ å‡†å¤‡å°†åº”ç”¨å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒæ—¶ï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm run build</span></span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤ä¼šåœ¨ <code>./dist</code> æ–‡ä»¶å¤¹ä¸­ä¸ºä½ çš„åº”ç”¨åˆ›å»ºä¸€ä¸ªç”Ÿäº§ç¯å¢ƒçš„æ„å»ºç‰ˆæœ¬ã€‚å…³äºå°†åº”ç”¨ä¸Šçº¿ç”Ÿäº§ç¯å¢ƒçš„æ›´å¤šå†…å®¹ï¼Œè¯·é˜…è¯»<a href="https://cn.vuejs.org/guide/best-practices/production-deployment.html">ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æŒ‡å—</a>ã€‚ </p><h2 id="é€šè¿‡-CDN-ä½¿ç”¨-Vue"><a href="#é€šè¿‡-CDN-ä½¿ç”¨-Vue" class="headerlink" title="é€šè¿‡ CDN ä½¿ç”¨ Vue"></a>é€šè¿‡ CDN ä½¿ç”¨ Vue</h2><p>ä½ å¯ä»¥å€ŸåŠ© script æ ‡ç­¾ç›´æ¥é€šè¿‡ CDN æ¥ä½¿ç”¨ Vueï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº† <a href="https://unpkg.com/">unpkg</a>ï¼Œä½†ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»ä½•æä¾› npm åŒ…æœåŠ¡çš„ CDNï¼Œä¾‹å¦‚ <a href="https://www.jsdelivr.com/package/npm/vue">jsdelivr</a> æˆ– <a href="https://cdnjs.com/libraries/vue">cdnjs</a>ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä¸‹è½½æ­¤æ–‡ä»¶å¹¶è‡ªè¡Œæä¾›æœåŠ¡ã€‚</p><p>é€šè¿‡ CDN ä½¿ç”¨ Vue æ—¶ï¼Œä¸æ¶‰åŠâ€œæ„å»ºæ­¥éª¤â€ã€‚è¿™ä½¿å¾—è®¾ç½®æ›´åŠ ç®€å•ï¼Œå¹¶ä¸”å¯ä»¥ç”¨äºå¢å¼ºé™æ€çš„ HTML æˆ–ä¸åç«¯æ¡†æ¶é›†æˆã€‚ä½†æ˜¯ï¼Œä½ å°†æ— æ³•ä½¿ç”¨å•æ–‡ä»¶ç»„ä»¶ (SFC) è¯­æ³•ã€‚</p><h3 id="ä½¿ç”¨å…¨å±€æ„å»ºç‰ˆæœ¬"><a href="#ä½¿ç”¨å…¨å±€æ„å»ºç‰ˆæœ¬" class="headerlink" title="ä½¿ç”¨å…¨å±€æ„å»ºç‰ˆæœ¬"></a>ä½¿ç”¨å…¨å±€æ„å»ºç‰ˆæœ¬</h3><p>ä¸Šé¢çš„ä¾‹å­ä½¿ç”¨äº†<em>å…¨å±€æ„å»ºç‰ˆæœ¬</em>çš„ Vueï¼Œè¯¥ç‰ˆæœ¬çš„æ‰€æœ‰é¡¶å±‚ API éƒ½ä»¥å±æ€§çš„å½¢å¼æš´éœ²åœ¨äº†å…¨å±€çš„ <code>Vue</code> å¯¹è±¡ä¸Šã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä½¿ç”¨å…¨å±€æ„å»ºç‰ˆæœ¬çš„ä¾‹å­ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; createApp &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">message</span>: <span class="string">&#x27;Hello Vue!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-ES-æ¨¡å—æ„å»ºç‰ˆæœ¬"><a href="#ä½¿ç”¨-ES-æ¨¡å—æ„å»ºç‰ˆæœ¬" class="headerlink" title="ä½¿ç”¨ ES æ¨¡å—æ„å»ºç‰ˆæœ¬"></a>ä½¿ç”¨ ES æ¨¡å—æ„å»ºç‰ˆæœ¬</h3><p>åœ¨æœ¬æ–‡æ¡£çš„å…¶ä½™éƒ¨åˆ†æˆ‘ä»¬ä½¿ç”¨çš„ä¸»è¦æ˜¯ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Modules">ES æ¨¡å—</a>è¯­æ³•ã€‚ç°ä»£æµè§ˆå™¨å¤§å¤šéƒ½å·²åŸç”Ÿæ”¯æŒ ES æ¨¡å—ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·é€šè¿‡ CDN ä»¥åŠåŸç”Ÿ ES æ¨¡å—ä½¿ç”¨ Vueï¼š </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;https://unpkg.com/vue@3/dist/vue.esm-browser.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">message</span>: <span class="string">&#x27;Hello Vue!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„æˆ‘ä»¬ä½¿ç”¨äº† <code>&lt;script type=&quot;module&quot;&gt;</code>ï¼Œä¸”å¯¼å…¥çš„ CDN URL æŒ‡å‘çš„æ˜¯ Vue çš„ <strong>ES æ¨¡å—æ„å»ºç‰ˆæœ¬</strong>ã€‚ </p><h3 id="å¯ç”¨-Import-maps"><a href="#å¯ç”¨-Import-maps" class="headerlink" title="å¯ç”¨ Import maps"></a>å¯ç”¨ Import maps</h3><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å®Œæ•´çš„ CDN URL æ¥å¯¼å…¥ï¼Œä½†åœ¨æ–‡æ¡£çš„å…¶ä½™éƒ¨åˆ†ä¸­ï¼Œä½ å°†çœ‹åˆ°å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a href="https://caniuse.com/import-maps">å¯¼å…¥æ˜ å°„è¡¨ (Import Maps)</a> æ¥å‘Šè¯‰æµè§ˆå™¨å¦‚ä½•å®šä½åˆ°å¯¼å…¥çš„ <code>vue</code>ï¼š </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;importmap&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="string">&quot;imports&quot;</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="string">&quot;vue&quot;</span>: <span class="string">&quot;https://unpkg.com/vue@3/dist/vue.esm-browser.js&quot;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">message</span>: <span class="string">&#x27;Hello Vue!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="https://jsfiddle.net/yyx990803/2ke1ab0z/">JSFiddle ä¸­çš„ç¤ºä¾‹</a></p><p>ä½ ä¹Ÿå¯ä»¥åœ¨æ˜ å°„è¡¨ä¸­æ·»åŠ å…¶ä»–çš„ä¾èµ–â€”â€”ä½†è¯·åŠ¡å¿…ç¡®ä¿ä½ ä½¿ç”¨çš„æ˜¯è¯¥åº“çš„ ES æ¨¡å—ç‰ˆæœ¬ã€‚</p><blockquote><p>å¯¼å…¥æ˜ å°„è¡¨çš„æµè§ˆå™¨æ”¯æŒæƒ…å†µ</p><p>ç›®å‰åªæœ‰åŸºäº Chromium çš„æµè§ˆå™¨æ”¯æŒå¯¼å…¥æ˜ å°„è¡¨ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¨èä½ åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ä½¿ç”¨ Chrome æˆ– Edgeã€‚</p><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Firefox æµè§ˆå™¨ï¼Œåˆ™è¯¥åŠŸèƒ½é»˜è®¤åœ¨ 108+ ç‰ˆæœ¬æˆ–é€šè¿‡å¯ç”¨ <code>about:config</code> ä¸­çš„ <code>dom.importMaps.enabled</code> é€‰é¡¹æ”¯æŒã€‚</p><p>å¦‚æœä½ æ›´å–œæ¬¢é‚£äº›è¿˜ä¸æ”¯æŒå¯¼å…¥æ˜ å°„è¡¨çš„æµè§ˆå™¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://github.com/guybedford/es-module-shims">es-module-shims</a> æ¥è¿›è¡Œ polyfill.</p><p>ç”Ÿäº§ç¯å¢ƒä¸­çš„æ³¨æ„äº‹é¡¹</p><p>åˆ°ç›®å‰ä¸ºæ­¢ç¤ºä¾‹ä¸­ä½¿ç”¨çš„éƒ½æ˜¯ Vue çš„å¼€å‘æ„å»ºç‰ˆæœ¬â€”â€”å¦‚æœä½ æ‰“ç®—åœ¨ç”Ÿäº§ä¸­é€šè¿‡ CDN ä½¿ç”¨ Vueï¼Œè¯·åŠ¡å¿…æŸ¥çœ‹<a href="https://cn.vuejs.org/guide/best-practices/production-deployment.html#without-build-tools">ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æŒ‡å—</a>ã€‚</p></blockquote><h3 id="æ‹†åˆ†æ¨¡å—"><a href="#æ‹†åˆ†æ¨¡å—" class="headerlink" title="æ‹†åˆ†æ¨¡å—"></a>æ‹†åˆ†æ¨¡å—</h3><p>éšç€å¯¹è¿™ä»½æŒ‡å—çš„é€æ­¥æ·±å…¥ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å°†ä»£ç åˆ†å‰²æˆå•ç‹¬çš„ JavaScript æ–‡ä»¶ï¼Œä»¥ä¾¿æ›´å®¹æ˜“ç®¡ç†ã€‚ä¾‹å¦‚ï¼š </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- index.html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">MyComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./my-component.js&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">createApp</span>(<span class="title class_">MyComponent</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// my-component.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`&lt;div&gt;count is &#123;&#123; count &#125;&#125;&lt;/div&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€äº†ä¸Šé¢çš„ <code>index.html</code>ï¼Œä½ ä¼šå‘ç°å®ƒæŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸º ES æ¨¡å—ä¸èƒ½é€šè¿‡ <code>file://</code> åè®®å·¥ä½œã€‚ä¸ºäº†ä½¿å…¶å·¥ä½œï¼Œä½ éœ€è¦ä½¿ç”¨æœ¬åœ° HTTP æœåŠ¡å™¨é€šè¿‡ <code>http://</code> åè®®æä¾› <code>index.html</code>ã€‚</p><p>è¦å¯åŠ¨ä¸€ä¸ªæœ¬åœ°çš„ HTTP æœåŠ¡å™¨ï¼Œè¯·å…ˆå®‰è£… <a href="https://nodejs.org/zh/">Node.js</a>ï¼Œç„¶åé€šè¿‡å‘½ä»¤è¡Œåœ¨ HTML æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹ä¸‹è¿è¡Œ <code>npx serve</code>ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–ä»»ä½•å¯ä»¥åŸºäºæ­£ç¡®çš„ MIME ç±»å‹æœåŠ¡é™æ€æ–‡ä»¶çš„ HTTP æœåŠ¡å™¨ã€‚</p><p>å¯èƒ½ä½ ä¹Ÿæ³¨æ„åˆ°äº†ï¼Œè¿™é‡Œå¯¼å…¥çš„ç»„ä»¶æ¨¡æ¿æ˜¯å†…è”çš„ JavaScript å­—ç¬¦ä¸²ã€‚å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ VSCodeï¼Œä½ å¯ä»¥å®‰è£… <a href="https://marketplace.visualstudio.com/items?itemName=Tobermory.es6-string-html">es6-string-html</a> æ‰©å±•ï¼Œç„¶ååœ¨å­—ç¬¦ä¸²å‰åŠ ä¸Šä¸€ä¸ªå‰ç¼€æ³¨é‡Š <code>/*html*/</code> ä»¥é«˜äº®è¯­æ³•ã€‚</p><h3 id="æ— éœ€æ„å»ºçš„ç»„åˆå¼-API-ç”¨æ³•"><a href="#æ— éœ€æ„å»ºçš„ç»„åˆå¼-API-ç”¨æ³•" class="headerlink" title="æ— éœ€æ„å»ºçš„ç»„åˆå¼ API ç”¨æ³•"></a>æ— éœ€æ„å»ºçš„ç»„åˆå¼ API ç”¨æ³•</h3><p>ç»„åˆå¼ API çš„è®¸å¤šç¤ºä¾‹å°†ä½¿ç”¨ <code>&lt;script setup&gt;</code> è¯­æ³•ã€‚å¦‚æœä½ æƒ³åœ¨æ— éœ€æ„å»ºçš„æƒ…å†µä¸‹ä½¿ç”¨ç»„åˆå¼ APIï¼Œè¯·å‚é˜… <a href="https://cn.vuejs.org/api/composition-api-setup.html"><code>setup()</code> é€‰é¡¹</a>ã€‚ </p><h2 id="è¿›å…¥vueå¯åŠ¨é¡µé¢"><a href="#è¿›å…¥vueå¯åŠ¨é¡µé¢" class="headerlink" title="è¿›å…¥vueå¯åŠ¨é¡µé¢"></a>è¿›å…¥vueå¯åŠ¨é¡µé¢</h2><p> <a href="http://127.0.0.1:ç«¯å£å·/">http://127.0.0.1:ç«¯å£å·/</a></p><p>router/index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HomeView</span> <span class="keyword">from</span> <span class="string">&#x27;../views/HomeView.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;  <span class="comment">//å®šä¹‰ä¸å¯å˜çš„è·¯ç”±</span></span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">BASE_URL</span>),</span><br><span class="line"><span class="comment">//åˆ›å»ºè·¯ç”±å¯¹è±¡ï¼Œjsonçš„å½¢å¼</span></span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">HomeView</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/AboutView.vue&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/learn1&#x27;</span>,  <span class="comment">//urlè·¯å¾„æŒ‡å‘</span></span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;learn1&#x27;</span>,  </span><br><span class="line">      <span class="comment">//è·¯ç”±ï¼ŒæŒ‡å‘ç›®æ ‡é¡µé¢</span></span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Learn1.vue&#x27;</span>) </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å£°æ˜å¼æ¸²æŸ“"><a href="#å£°æ˜å¼æ¸²æŸ“" class="headerlink" title="å£°æ˜å¼æ¸²æŸ“"></a>å£°æ˜å¼æ¸²æŸ“</h3><p>ä½ åœ¨ç¼–è¾‘å™¨ä¸­çœ‹åˆ°çš„æ˜¯ä¸€ä¸ª Vue å•æ–‡ä»¶ç»„ä»¶ (Single-File Componentï¼Œç¼©å†™ä¸º SFC)ã€‚SFC æ˜¯ä¸€ç§å¯å¤ç”¨çš„ä»£ç ç»„ç»‡å½¢å¼ï¼Œå®ƒå°†ä»å±äºåŒä¸€ä¸ªç»„ä»¶çš„ HTMLã€CSS å’Œ JavaScript å°è£…åœ¨ä½¿ç”¨ <code>.vue</code> åç¼€çš„æ–‡ä»¶ä¸­ã€‚ </p><p>Vue çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯<strong>å£°æ˜å¼æ¸²æŸ“</strong>ï¼šé€šè¿‡æ‰©å±•äºæ ‡å‡† HTML çš„æ¨¡æ¿è¯­æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ® JavaScript çš„çŠ¶æ€æ¥æè¿° HTML åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚å½“çŠ¶æ€æ”¹å˜æ—¶ï¼ŒHTML ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</p><p>èƒ½åœ¨æ”¹å˜æ—¶è§¦å‘æ›´æ–°çš„çŠ¶æ€è¢«ç§°ä½œæ˜¯<strong>å“åº”å¼</strong>çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Vue çš„ <code>reactive()</code> API æ¥å£°æ˜å“åº”å¼çŠ¶æ€ã€‚ç”± <code>reactive()</code> åˆ›å»ºçš„å¯¹è±¡éƒ½æ˜¯ JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy">Proxy</a>ï¼Œå…¶è¡Œä¸ºä¸æ™®é€šå¯¹è±¡ä¸€æ ·ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const counter = reactive(&#123;</span><br><span class="line">  count: 0</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(counter.count) // 0</span><br><span class="line">counter.count++</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>reactive()</code> åªé€‚ç”¨äºå¯¹è±¡ (åŒ…æ‹¬æ•°ç»„å’Œå†…ç½®ç±»å‹ï¼Œå¦‚ <code>Map</code> å’Œ <code>Set</code>)ã€‚è€Œå¦ä¸€ä¸ª API <code>ref()</code> åˆ™å¯ä»¥æ¥å—ä»»ä½•å€¼ç±»å‹ã€‚<code>ref</code> ä¼šè¿”å›ä¸€ä¸ªåŒ…è£¹å¯¹è±¡ï¼Œå¹¶åœ¨ <code>.value</code> å±æ€§ä¸‹æš´éœ²å†…éƒ¨å€¼ã€‚ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const message = ref(&#x27;Hello World!&#x27;)</span><br><span class="line"></span><br><span class="line">console.log(message.value) // &quot;Hello World!&quot;</span><br><span class="line">message.value = &#x27;Changed&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>reactive()</code> å’Œ <code>ref()</code> çš„ç»†èŠ‚åœ¨<a href="https://cn.vuejs.org/guide/essentials/reactivity-fundamentals.html">æŒ‡å— - å“åº”å¼åŸºç¡€</a>ä¸€èŠ‚ä¸­æœ‰è¿›ä¸€æ­¥è®¨è®ºã€‚</p><p>åœ¨ç»„ä»¶çš„ <code>&lt;script setup&gt;</code> å—ä¸­å£°æ˜çš„å“åº”å¼çŠ¶æ€ï¼Œå¯ä»¥ç›´æ¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚ä¸‹é¢å±•ç¤ºäº†æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨åŒèŠ±æ‹¬å·è¯­æ³•ï¼Œæ ¹æ® <code>counter</code> å¯¹è±¡å’Œ <code>message</code> ref çš„å€¼æ¸²æŸ“åŠ¨æ€æ–‡æœ¬ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;&#123;&#123; message &#125;&#125;&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;count is: &#123;&#123; counter.count &#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure><p>æ³¨æ„æˆ‘ä»¬åœ¨æ¨¡æ¿ä¸­è®¿é—®çš„ <code>message</code> ref æ—¶ä¸éœ€è¦ä½¿ç”¨ <code>.value</code>ï¼šå®ƒä¼šè¢«è‡ªåŠ¨è§£åŒ…ï¼Œè®©ä½¿ç”¨æ›´ç®€å•ã€‚</p><p>åœ¨åŒèŠ±æ‹¬å·ä¸­çš„å†…å®¹å¹¶ä¸åªé™äºæ ‡è¯†ç¬¦æˆ–è·¯å¾„â€”â€”æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»ä½•æœ‰æ•ˆçš„ JavaScript è¡¨è¾¾å¼ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;&#123;&#123; message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125;&#125;&lt;/h1&gt;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œè¯•ç€è‡ªå·±åˆ›å»ºä¸€äº›å“åº”å¼çŠ¶æ€ï¼Œç”¨å®ƒæ¥ä¸ºæ¨¡æ¿ä¸­çš„ <code>&lt;h1&gt;</code> æ¸²æŸ“åŠ¨æ€çš„æ–‡æœ¬å†…å®¹ã€‚ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive, ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const counter = reactive(&#123; count: 0 &#125;)</span><br><span class="line">const message = ref(&#x27;Hello World!&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;&#123;&#123; message &#125;&#125;&lt;/h1&gt;</span><br><span class="line">  &lt;p&gt;Count is: &#123;&#123; counter.count &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>app.vueé¡µé¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; RouterLink, RouterView &#125; from &#x27;vue-router&#x27;</span><br><span class="line">import HelloWorld from &#x27;./components/HelloWorld.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;header&gt;</span><br><span class="line">    &lt;img alt=&quot;Vue logo&quot; class=&quot;logo&quot; src=&quot;@/assets/logo.svg&quot; width=&quot;125&quot; height=&quot;125&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class=&quot;wrapper&quot;&gt;</span><br><span class="line">      &lt;HelloWorld msg=&quot;You did it!&quot; /&gt;</span><br><span class="line"></span><br><span class="line">      &lt;nav&gt;</span><br><span class="line">        &lt;RouterLink to=&quot;/&quot;&gt;Home&lt;/RouterLink&gt;</span><br><span class="line">        &lt;RouterLink to=&quot;/about&quot;&gt;About&lt;/RouterLink&gt;</span><br><span class="line">        &lt;RouterLink to=&quot;/learn1&quot;&gt;å­¦ä¹ 1&lt;/RouterLink&gt;</span><br><span class="line">      &lt;/nav&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/header&gt;</span><br><span class="line">  &lt;RouterView /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>learn1.vue</p><h3 id="Attribute-ç»‘å®š"><a href="#Attribute-ç»‘å®š" class="headerlink" title="Attribute ç»‘å®š"></a>Attribute ç»‘å®š</h3><p>åœ¨ Vue ä¸­ï¼Œmustache è¯­æ³• (å³åŒå¤§æ‹¬å·) åªèƒ½ç”¨äºæ–‡æœ¬æ’å€¼ã€‚ä¸ºäº†ç»™ attribute ç»‘å®šä¸€ä¸ªåŠ¨æ€å€¼ï¼Œéœ€è¦ä½¿ç”¨ <code>v-bind</code> æŒ‡ä»¤ï¼š</p><p>å®ä¾‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:id=&quot;dynamicId&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p><strong>æŒ‡ä»¤</strong>æ˜¯ç”± <code>v-</code> å¼€å¤´çš„ä¸€ç§ç‰¹æ®Š attributeã€‚å®ƒä»¬æ˜¯ Vue æ¨¡æ¿è¯­æ³•çš„ä¸€éƒ¨åˆ†ã€‚å’Œæ–‡æœ¬æ’å€¼ç±»ä¼¼ï¼ŒæŒ‡ä»¤çš„å€¼æ˜¯å¯ä»¥è®¿é—®ç»„ä»¶çŠ¶æ€çš„ JavaScript è¡¨è¾¾å¼ã€‚å…³äº <code>v-bind</code> å’ŒæŒ‡ä»¤è¯­æ³•çš„å®Œæ•´ç»†èŠ‚è¯·è¯¦é˜…<a href="https://cn.vuejs.org/guide/essentials/template-syntax.html">æŒ‡å— - æ¨¡æ¿è¯­æ³•</a>ã€‚</p><p>å†’å·åé¢çš„éƒ¨åˆ† (<code>:id</code>) æ˜¯æŒ‡ä»¤çš„â€œå‚æ•°â€ã€‚æ­¤å¤„ï¼Œå…ƒç´ çš„ <code>id</code> attribute å°†ä¸ç»„ä»¶çŠ¶æ€é‡Œçš„ <code>dynamicId</code> å±æ€§ä¿æŒåŒæ­¥ã€‚</p><p>ç”±äº <code>v-bind</code> ä½¿ç”¨åœ°éå¸¸é¢‘ç¹ï¼Œå®ƒæœ‰ä¸€ä¸ªä¸“é—¨çš„ç®€å†™è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div :id=&quot;dynamicId&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œè¯•ç€æŠŠä¸€ä¸ªåŠ¨æ€çš„ <code>class</code> ç»‘å®šæ·»åŠ åˆ°è¿™ä¸ª <code>&lt;h1&gt;</code> ä¸Šï¼Œå¹¶ä½¿ç”¨ <code>titleClass</code> çš„ ref ä½œä¸ºå®ƒçš„å€¼ã€‚å¦‚æœç»‘å®šæ­£ç¡®ï¼Œæ–‡å­—å°†ä¼šå˜ä¸ºçº¢è‰²ã€‚ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const counter = reactive(&#123; count: 0 &#125;)</span><br><span class="line">const message = ref(&#x27;Hello World!&#x27;)</span><br><span class="line"></span><br><span class="line">const titleClass = ref(&#x27;title&#x27;)  //å®šæ­»titleClass çš„ ref ä½œä¸ºå®ƒçš„å€¼ã€‚å¦‚æœç»‘å®šæ­£ç¡®ï¼Œæ–‡å­—å°†ä¼šå˜ä¸ºçº¢è‰²ã€‚</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;learn1&quot;&gt;</span><br><span class="line">    &lt;h1&gt;ä½ å¥½ä¸–ç•Œ&lt;/h1&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; message &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;p&gt;Count is: &#123;&#123; counter.count &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;h1 :class=&quot;titleClass&quot;&gt;è®©æˆ‘å˜çº¢&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">@media (min-width: 1024px) &#123;</span><br><span class="line">  .learn &#123;</span><br><span class="line">    min-height: 100vh;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.title&#123;</span><br><span class="line">  color: brown;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>å®ä¾‹äºŒ</p><h3 id="äº‹ä»¶ç›‘å¬"><a href="#äº‹ä»¶ç›‘å¬" class="headerlink" title="äº‹ä»¶ç›‘å¬"></a>äº‹ä»¶ç›‘å¬</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>v-on</code> æŒ‡ä»¤ç›‘å¬ DOM äº‹ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button v-on:click=&quot;increment&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/button&gt;</span><br></pre></td></tr></table></figure><p>å› ä¸ºå…¶ç»å¸¸ä½¿ç”¨ï¼Œ<code>v-on</code> ä¹Ÿæœ‰ä¸€ä¸ªç®€å†™è¯­æ³•ï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=&quot;increment&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/button&gt;</span><br></pre></td></tr></table></figure><p>æ­¤å¤„ï¼Œ<code>increment</code> å¼•ç”¨äº†ä¸€ä¸ªåœ¨ <code>&lt;script setup&gt;</code> ä¸­å£°æ˜çš„å‡½æ•°ï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const count = ref(0)</span><br><span class="line"></span><br><span class="line">function increment() &#123;</span><br><span class="line">  // æ›´æ–°ç»„ä»¶çŠ¶æ€</span><br><span class="line">  count.value++</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ ref æ¥æ›´æ–°ç»„ä»¶çŠ¶æ€ã€‚</p><p>äº‹ä»¶å¤„ç†å‡½æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨å†…ç½®è¡¨è¾¾å¼ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ä¿®é¥°ç¬¦ç®€åŒ–å¸¸è§ä»»åŠ¡ã€‚è¿™äº›ç»†èŠ‚åŒ…å«åœ¨<a href="https://cn.vuejs.org/guide/essentials/event-handling.html">æŒ‡å— - äº‹ä»¶å¤„ç†</a>ã€‚</p><p>ç°åœ¨ï¼Œå°è¯•è‡ªè¡Œå®ç° <code>increment</code> å‡½æ•°å¹¶é€šè¿‡ä½¿ç”¨ <code>v-on</code> å°†å…¶ç»‘å®šåˆ°æŒ‰é’®ä¸Šã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const count = ref(0)</span><br><span class="line"></span><br><span class="line">function increment()&#123;</span><br><span class="line">  count.value ++ ;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- ä½¿æ­¤æŒ‰é’®ç”Ÿæ•ˆ --&gt;</span><br><span class="line">  &lt;button @click=&quot;increment()&quot;&gt;count is: &#123;&#123; count &#125;&#125;&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="è¡¨å•ç»‘å®š"><a href="#è¡¨å•ç»‘å®š" class="headerlink" title="è¡¨å•ç»‘å®š"></a>è¡¨å•ç»‘å®š</h3><p>æˆ‘ä»¬å¯ä»¥åŒæ—¶ä½¿ç”¨ <code>v-bind</code> å’Œ <code>v-on</code> æ¥åœ¨è¡¨å•çš„è¾“å…¥å…ƒç´ ä¸Šåˆ›å»ºåŒå‘ç»‘å®šï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input :value=&quot;text&quot; @input=&quot;onInput&quot;&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">onInput</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  <span class="comment">// v-on å¤„ç†å‡½æ•°ä¼šæ¥æ”¶åŸç”Ÿ DOM äº‹ä»¶</span></span><br><span class="line">  <span class="comment">// ä½œä¸ºå…¶å‚æ•°ã€‚</span></span><br><span class="line">  text.<span class="property">value</span> = e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯•ç€åœ¨æ–‡æœ¬æ¡†é‡Œè¾“å…¥â€”â€”ä½ ä¼šçœ‹åˆ° <code>&lt;p&gt;</code> é‡Œçš„æ–‡æœ¬ä¹Ÿéšç€ä½ çš„è¾“å…¥æ›´æ–°äº†ã€‚</p><p>ä¸ºäº†ç®€åŒ–åŒå‘ç»‘å®šï¼ŒVue æä¾›äº†ä¸€ä¸ª <code>v-model</code> æŒ‡ä»¤ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸Šè¿°æ“ä½œçš„è¯­æ³•ç³–ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-model=&quot;text&quot;&gt;</span><br></pre></td></tr></table></figure><p><code>v-model</code> ä¼šå°†è¢«ç»‘å®šçš„å€¼ä¸ <code>&lt;input&gt;</code> çš„å€¼è‡ªåŠ¨åŒæ­¥ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸å¿…å†ä½¿ç”¨äº‹ä»¶å¤„ç†å‡½æ•°äº†ã€‚</p><p><code>v-model</code> ä¸ä»…æ”¯æŒæ–‡æœ¬è¾“å…¥æ¡†ï¼Œä¹Ÿæ”¯æŒè¯¸å¦‚å¤šé€‰æ¡†ã€å•é€‰æ¡†ã€ä¸‹æ‹‰æ¡†ä¹‹ç±»çš„è¾“å…¥ç±»å‹ã€‚æˆ‘ä»¬åœ¨<a href="https://cn.vuejs.org/guide/essentials/forms.html">æŒ‡å— - è¡¨å•ç»‘å®š</a>ä¸­è®¨è®ºäº†æ›´å¤šçš„ç»†èŠ‚ã€‚</p><p>ç°åœ¨ï¼Œè¯•ç€ç”¨ <code>v-model</code> æŠŠä»£ç é‡æ„ä¸€ä¸‹å§ã€‚</p><p>å®ä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const text = ref(&#x27;&#x27;)</span><br><span class="line">function onInput(e) &#123;</span><br><span class="line">  text.value = e.target.value</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input :value=&quot;text&quot; @input=&quot;onInput&quot; placeholder=&quot;Type here&quot;&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123; text &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>å˜åŒ–ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const text = ref(&#x27;&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input v-model=&quot;text&quot; placeholder=&quot;Type here&quot;&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123; text &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="æ¡ä»¶æ¸²æŸ“"><a href="#æ¡ä»¶æ¸²æŸ“" class="headerlink" title="æ¡ä»¶æ¸²æŸ“"></a>æ¡ä»¶æ¸²æŸ“</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>v-if</code> æŒ‡ä»¤æ¥æœ‰æ¡ä»¶åœ°æ¸²æŸ“å…ƒç´ ï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 v-if=&quot;awesome&quot;&gt;Vue is awesome!&lt;/h1&gt;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ª <code>&lt;h1&gt;</code> æ ‡ç­¾åªä¼šåœ¨ <code>awesome</code> çš„å€¼ä¸º<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Truthy">çœŸå€¼ (Truthy)</a> æ—¶æ¸²æŸ“ã€‚è‹¥ <code>awesome</code> æ›´æ”¹ä¸º<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Falsy">å‡å€¼ (Falsy)</a>ï¼Œå®ƒå°†è¢«ä» DOM ä¸­ç§»é™¤ã€‚ </p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>v-else</code> å’Œ <code>v-else-if</code> æ¥è¡¨ç¤ºå…¶ä»–çš„æ¡ä»¶åˆ†æ”¯ï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 v-if=&quot;awesome&quot;&gt;Vue is awesome!&lt;/h1&gt;</span><br><span class="line">&lt;h1 v-else&gt;Oh no ğŸ˜¢&lt;/h1&gt;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œç¤ºä¾‹ç¨‹åºåŒæ—¶å±•ç¤ºäº†ä¸¤ä¸ª <code>&lt;h1&gt;</code> æ ‡ç­¾ï¼Œå¹¶ä¸”æŒ‰é’®ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚å°è¯•ç»™å®ƒä»¬æ·»åŠ  <code>v-if</code> å’Œ <code>v-else</code> æŒ‡ä»¤ï¼Œå¹¶å®ç° <code>toggle()</code> æ–¹æ³•ï¼Œè®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æŒ‰é’®åœ¨å®ƒä»¬ä¹‹é—´åˆ‡æ¢ã€‚</p><p>æ›´å¤šç»†èŠ‚è¯·æŸ¥é˜… <code>v-if</code>ï¼š<a href="https://cn.vuejs.org/guide/essentials/conditional.html">æŒ‡å— - æ¡ä»¶æ¸²æŸ“</a></p><p>å®ä¾‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const awesome = ref(true)</span><br><span class="line">function toggle() &#123;</span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;toggle&quot;&gt;toggle&lt;/button&gt;</span><br><span class="line">  &lt;h1&gt;Vue is awesome!&lt;/h1&gt;</span><br><span class="line">  &lt;h1&gt;Oh no ğŸ˜¢&lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const awesome = ref(true)</span><br><span class="line">function toggle() &#123;</span><br><span class="line">  awesome.value = !awesome.value;//å¦‚æœç‚¹å‡»é€šè¿‡è§¦å‘å‡½æ•°æ”¹å˜å€¼</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;toggle&quot;&gt;toggle&lt;/button&gt;</span><br><span class="line">  &lt;h1 v-if=&quot;awesome&quot;&gt;Vue is awesome!&lt;/h1&gt; &lt;!-- å€¼ä¹‹å‰é‚£æ²¡æœ‰æ”¹å˜çš„å€¼--&gt;</span><br><span class="line">  &lt;h1 v-else&gt;Oh no ğŸ˜¢&lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="åˆ—è¡¨æ¸²æŸ“"><a href="#åˆ—è¡¨æ¸²æŸ“" class="headerlink" title="åˆ—è¡¨æ¸²æŸ“"></a>åˆ—è¡¨æ¸²æŸ“</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>v-for</code> æŒ‡ä»¤æ¥æ¸²æŸ“ä¸€ä¸ªåŸºäºæºæ•°ç»„çš„åˆ—è¡¨ï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li v-for=&quot;todo in todos&quot; :key=&quot;todo.id&quot;&gt;</span><br><span class="line">    &#123;&#123; todo.text &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>todo</code> æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œè¡¨ç¤ºå½“å‰æ­£åœ¨è¿­ä»£çš„æ•°ç»„å…ƒç´ ã€‚å®ƒåªèƒ½åœ¨ <code>v-for</code> æ‰€ç»‘å®šçš„å…ƒç´ ä¸Šæˆ–æ˜¯å…¶å†…éƒ¨è®¿é—®ï¼Œå°±åƒå‡½æ•°çš„ä½œç”¨åŸŸä¸€æ ·ã€‚</p><p>æ³¨æ„ï¼Œæˆ‘ä»¬è¿˜ç»™æ¯ä¸ª todo å¯¹è±¡è®¾ç½®äº†å”¯ä¸€çš„ <code>id</code>ï¼Œå¹¶ä¸”å°†å®ƒä½œä¸º<a href="https://cn.vuejs.org/api/built-in-special-attributes.html#key">ç‰¹æ®Šçš„ <code>key</code> attribute</a> ç»‘å®šåˆ°æ¯ä¸ª <code>&lt;li&gt;</code>ã€‚<code>key</code> ä½¿å¾— Vue èƒ½å¤Ÿç²¾ç¡®çš„ç§»åŠ¨æ¯ä¸ª <code>&lt;li&gt;</code>ï¼Œä»¥åŒ¹é…å¯¹åº”çš„å¯¹è±¡åœ¨æ•°ç»„ä¸­çš„ä½ç½®ã€‚</p><p>æ›´æ–°åˆ—è¡¨æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ol><li><p>åœ¨æºæ•°ç»„ä¸Šè°ƒç”¨<a href="https://stackoverflow.com/questions/9009879/which-javascript-array-functions-are-mutating">å˜æ›´æ–¹æ³•</a>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">todos.<span class="property">value</span>.<span class="title function_">push</span>(newTodo)</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>ä½¿ç”¨æ–°çš„æ•°ç»„æ›¿ä»£åŸæ•°ç»„ï¼š </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">todos.<span class="property">value</span> = todos.<span class="property">value</span>.<span class="title function_">filter</span>(<span class="comment">/* ... */</span>)</span><br></pre></td></tr></table></figure></li></ol><p>è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„ todo åˆ—è¡¨â€”â€”è¯•ç€å®ç°ä¸€ä¸‹ <code>addTodo()</code> å’Œ <code>removeTodo()</code> è¿™ä¸¤ä¸ªæ–¹æ³•çš„é€»è¾‘ï¼Œä½¿åˆ—è¡¨èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼</p><p>å…³äº <code>v-for</code> çš„æ›´å¤šç»†èŠ‚ï¼š<a href="https://cn.vuejs.org/guide/essentials/list.html">æŒ‡å— - åˆ—è¡¨æ¸²æŸ“</a></p><p>vueå®ä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">// ç»™æ¯ä¸ª todo å¯¹è±¡ä¸€ä¸ªå”¯ä¸€çš„ id</span><br><span class="line">let id = 0  //åˆå§‹idä¸º0</span><br><span class="line">const newTodo = ref(&#x27;&#x27;)</span><br><span class="line">const todos = ref([</span><br><span class="line">  &#123; id: id++, text: &#x27;Learn HTML&#x27; &#125;,</span><br><span class="line">  &#123; id: id++, text: &#x27;Learn JavaScript&#x27; &#125;,</span><br><span class="line">  &#123; id: id++, text: &#x27;Learn Vue&#x27; &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">function addTodo() &#123;</span><br><span class="line">  // ...</span><br><span class="line">  newTodo.value = &#x27;&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function removeTodo(todo) &#123;</span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;form @submit.prevent=&quot;addTodo&quot;&gt;</span><br><span class="line">    &lt;input v-model=&quot;newTodo&quot;&gt;</span><br><span class="line">    &lt;button&gt;Add Todo&lt;/button&gt;    </span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">      &lt;!--å¾ªç¯å˜é‡--&gt;</span><br><span class="line">    &lt;li v-for=&quot;todo in todos&quot; :key=&quot;todo.id&quot;&gt;</span><br><span class="line">      &#123;&#123; todo.text &#125;&#125;</span><br><span class="line">      &lt;button @click=&quot;removeTodo(todo)&quot;&gt;X&lt;/button&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// ç»™æ¯ä¸ª todo å¯¹è±¡ä¸€ä¸ªå”¯ä¸€çš„ id</span><br><span class="line">let id = 0</span><br><span class="line">//å®šä¹‰æ–°çš„æ•°ç»„newTodo</span><br><span class="line">//è¿™è¡Œä»£ç ä½¿ç”¨äº† Vue 3 ä¸­çš„å“åº”å¼ï¼ˆreactiveï¼‰åŠŸèƒ½ï¼Œåˆ›å»ºäº†ä¸€ä¸ªåä¸º newTodo çš„å˜é‡ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸ºç©ºå­—ç¬¦ä¸²ã€‚å…¶ä¸­ const å…³é”®å­—è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œè€Œ ref åˆ™è¡¨ç¤ºè¿™ä¸ªå˜é‡æ˜¯å¯å“åº”çš„ï¼ˆreactiveï¼‰ã€‚</span><br><span class="line">const newTodo = ref(&#x27;&#x27;)</span><br><span class="line">//åˆå§‹åŒ–todosçš„æ•°æ®ï¼Œä½œä¸ºæ•°ç»„</span><br><span class="line">const todos = ref([</span><br><span class="line">  &#123; id: id++, text: &#x27;Learn HTML&#x27; &#125;,</span><br><span class="line">  &#123; id: id++, text: &#x27;Learn JavaScript&#x27; &#125;,</span><br><span class="line">  &#123; id: id++, text: &#x27;Learn Vue&#x27; &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">//é€‰æ‹©æ·»åŠ æ–°çš„æ•°æ®è¿›å…¥æ•°ç»„</span><br><span class="line">function addTodo() &#123;</span><br><span class="line">  todos.value.push(&#123; id: id++, text: newTodo.value &#125;)</span><br><span class="line">  newTodo.value = &#x27;&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function removeTodo(todo) &#123;</span><br><span class="line">  todos.value = todos.value.filter((t) =&gt; t !== todo)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;form @submit.prevent=&quot;addTodo&quot;&gt;</span><br><span class="line">    &lt;input v-model=&quot;newTodo&quot;&gt;</span><br><span class="line">    &lt;button&gt;Add Todo&lt;/button&gt;    </span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;todo in todos&quot; :key=&quot;todo.id&quot;&gt;</span><br><span class="line">      &#123;&#123; todo.text &#125;&#125;</span><br><span class="line">      &lt;button @click=&quot;removeTodo(todo)&quot;&gt;X&lt;/button&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="è®¡ç®—å±æ€§"><a href="#è®¡ç®—å±æ€§" class="headerlink" title="è®¡ç®—å±æ€§"></a>è®¡ç®—å±æ€§</h3><p>è®©æˆ‘ä»¬åœ¨ä¸Šä¸€æ­¥çš„ todo åˆ—è¡¨åŸºç¡€ä¸Šç»§ç»­ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»ç»™æ¯ä¸€ä¸ª todo æ·»åŠ äº†åˆ‡æ¢åŠŸèƒ½ã€‚è¿™æ˜¯é€šè¿‡ç»™æ¯ä¸€ä¸ª todo å¯¹è±¡æ·»åŠ  <code>done</code> å±æ€§æ¥å®ç°çš„ï¼Œå¹¶ä¸”ä½¿ç”¨äº† <code>v-model</code> å°†å…¶ç»‘å®šåˆ°å¤é€‰æ¡†ä¸Šï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;li v-for=&quot;todo in todos&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;checkbox&quot; v-model=&quot;todo.done&quot;&gt;</span><br><span class="line">  ...</span><br><span class="line">&lt;/li&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸‹ä¸€ä¸ªå¯ä»¥æ·»åŠ çš„æ”¹è¿›æ˜¯éšè—å·²ç»å®Œæˆçš„ todoã€‚æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªèƒ½å¤Ÿåˆ‡æ¢ <code>hideCompleted</code> çŠ¶æ€çš„æŒ‰é’®ã€‚ä½†æ˜¯åº”è¯¥å¦‚ä½•åŸºäºçŠ¶æ€æ¸²æŸ“ä¸åŒçš„åˆ—è¡¨é¡¹å‘¢ï¼Ÿ</p><p>ä»‹ç»ä¸€ä¸ªæ–° APIï¼š<a href="https://cn.vuejs.org/guide/essentials/computed.html"><code>computed()</code></a>ã€‚å®ƒå¯ä»¥è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè®¡ç®—å±æ€§ refï¼Œè¿™ä¸ª ref ä¼šåŠ¨æ€åœ°æ ¹æ®å…¶ä»–å“åº”å¼æ•°æ®æºæ¥è®¡ç®—å…¶ <code>.value</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref, computed &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const hideCompleted = ref(false)</span><br><span class="line">const todos = ref([</span><br><span class="line">  /* ... */</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">const filteredTodos = computed(() =&gt; &#123;</span><br><span class="line">  // æ ¹æ® `todos.value` &amp; `hideCompleted.value`</span><br><span class="line">  // è¿”å›è¿‡æ»¤åçš„ todo é¡¹ç›®</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;todo in todos&quot;</span>&gt;</span></span><br><span class="line">+ <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;todo in filteredTodos&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è®¡ç®—å±æ€§ä¼šè‡ªåŠ¨è·Ÿè¸ªå…¶è®¡ç®—ä¸­æ‰€ä½¿ç”¨çš„åˆ°çš„å…¶ä»–å“åº”å¼çŠ¶æ€ï¼Œå¹¶å°†å®ƒä»¬æ”¶é›†ä¸ºè‡ªå·±çš„ä¾èµ–ã€‚è®¡ç®—ç»“æœä¼šè¢«ç¼“å­˜ï¼Œå¹¶åªæœ‰åœ¨å…¶ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶æ‰ä¼šè¢«è‡ªåŠ¨æ›´æ–°ã€‚</p><p>ç°åœ¨ï¼Œè¯•ç€æ·»åŠ  <code>filteredTodos</code> è®¡ç®—å±æ€§å¹¶å®ç°è®¡ç®—é€»è¾‘ï¼å¦‚æœå®ç°æ­£ç¡®ï¼Œåœ¨éšè—å·²å®Œæˆé¡¹ç›®çš„çŠ¶æ€ä¸‹å‹¾é€‰ä¸€ä¸ª todoï¼Œå®ƒä¹Ÿåº”å½“è¢«ç«‹å³éšè—ã€‚</p><p>å®ä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">let id = 0</span><br><span class="line">const newTodo = ref(&#x27;&#x27;)</span><br><span class="line">const hideCompleted = ref(false)</span><br><span class="line">const todos = ref([</span><br><span class="line">  &#123; id: id++, text: &#x27;Learn HTML&#x27;, done: true &#125;,</span><br><span class="line">  &#123; id: id++, text: &#x27;Learn JavaScript&#x27;, done: true &#125;,</span><br><span class="line">  &#123; id: id++, text: &#x27;Learn Vue&#x27;, done: false &#125;</span><br><span class="line">])</span><br><span class="line">function addTodo() &#123;</span><br><span class="line">  todos.value.push(&#123; id: id++, text: newTodo.value, done: false &#125;)</span><br><span class="line">  newTodo.value = &#x27;&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function removeTodo(todo) &#123;</span><br><span class="line">  todos.value = todos.value.filter((t) =&gt; t !== todo)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;form @submit.prevent=&quot;addTodo&quot;&gt;</span><br><span class="line">    &lt;input v-model=&quot;newTodo&quot;&gt;</span><br><span class="line">    &lt;button&gt;Add Todo&lt;/button&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;todo in todos&quot; :key=&quot;todo.id&quot;&gt;</span><br><span class="line">      &lt;input type=&quot;checkbox&quot; v-model=&quot;todo.done&quot;&gt;</span><br><span class="line">      &lt;span :class=&quot;&#123; done: todo.done &#125;&quot;&gt;&#123;&#123; todo.text &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;button @click=&quot;removeTodo(todo)&quot;&gt;X&lt;/button&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">  &lt;button @click=&quot;hideCompleted = !hideCompleted&quot;&gt;</span><br><span class="line">    &#123;&#123; hideCompleted ? &#x27;Show all&#x27; : &#x27;Hide completed&#x27; &#125;&#125;</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.done &#123;</span><br><span class="line">  text-decoration: line-through;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, computed &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">let id = 0</span><br><span class="line"></span><br><span class="line">const newTodo = ref(&#x27;&#x27;)</span><br><span class="line">//è®¾ç½®hideCompleytedä¸ºfalse</span><br><span class="line">const hideCompleted = ref(false)</span><br><span class="line">//ä»æ—§æ˜¯å®šä¹‰ä¸€ä¸ªæ•°ç»„</span><br><span class="line">const todos = ref([</span><br><span class="line">  &#123; id: id++, text: &#x27;Learn HTML&#x27;, done: true &#125;,</span><br><span class="line">  &#123; id: id++, text: &#x27;Learn JavaScript&#x27;, done: true &#125;,</span><br><span class="line">  &#123; id: id++, text: &#x27;Learn Vue&#x27;, done: false &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">const filteredTodos = computed(() =&gt; &#123;</span><br><span class="line">    //è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯è¿”å›ä¸€ä¸ªæ ¹æ®hideCompleted.valueæ¥ç­›é€‰çš„todosæ•°ç»„ã€‚å¦‚æœhideCompleted.valueä¸ºtrueï¼Œåˆ™è¿”å›æœªå®Œæˆçš„ä»»åŠ¡æ•°ç»„ï¼ˆå³doneå±æ€§ä¸ºfalseï¼‰ï¼Œå¦åˆ™è¿”å›æ‰€æœ‰ä»»åŠ¡æ•°ç»„ã€‚</span><br><span class="line">  return hideCompleted.value</span><br><span class="line">    ? todos.value.filter((t) =&gt; !t.done)</span><br><span class="line">    : todos.value</span><br><span class="line">&#125;)</span><br><span class="line">function addTodo() &#123;</span><br><span class="line">  todos.value.push(&#123; id: id++, text: newTodo.value, done: false &#125;)</span><br><span class="line">  newTodo.value = &#x27;&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function removeTodo(todo) &#123;</span><br><span class="line">  todos.value = todos.value.filter((t) =&gt; t !== todo)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;form @submit.prevent=&quot;addTodo&quot;&gt;</span><br><span class="line">    &lt;input v-model=&quot;newTodo&quot;&gt;</span><br><span class="line">    &lt;button&gt;Add Todo&lt;/button&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;todo in filteredTodos&quot; :key=&quot;todo.id&quot;&gt;</span><br><span class="line">      &lt;input type=&quot;checkbox&quot; v-model=&quot;todo.done&quot;&gt;</span><br><span class="line">      &lt;span :class=&quot;&#123; done: todo.done &#125;&quot;&gt;&#123;&#123; todo.text &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;button @click=&quot;removeTodo(todo)&quot;&gt;X&lt;/button&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">  &lt;button @click=&quot;hideCompleted = !hideCompleted&quot;&gt;</span><br><span class="line">    &#123;&#123; hideCompleted ? &#x27;Show all&#x27; : &#x27;Hide completed&#x27; &#125;&#125;</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.done &#123;</span><br><span class="line">  text-decoration: line-through;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿå‘½å‘¨æœŸå’Œæ¨¡ç‰ˆå¼•ç”¨"><a href="#ç”Ÿå‘½å‘¨æœŸå’Œæ¨¡ç‰ˆå¼•ç”¨" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸå’Œæ¨¡ç‰ˆå¼•ç”¨"></a>ç”Ÿå‘½å‘¨æœŸå’Œæ¨¡ç‰ˆå¼•ç”¨</h3><p>ç›®å‰ä¸ºæ­¢ï¼ŒVue ä¸ºæˆ‘ä»¬å¤„ç†äº†æ‰€æœ‰çš„ DOM æ›´æ–°ï¼Œè¿™è¦å½’åŠŸäºå“åº”æ€§å’Œå£°æ˜å¼æ¸²æŸ“ã€‚ç„¶è€Œï¼Œæœ‰æ—¶æˆ‘ä»¬ä¹Ÿä¼šä¸å¯é¿å…åœ°éœ€è¦æ‰‹åŠ¨æ“ä½œ DOMã€‚</p><blockquote><p>â€œvarâ€ã€â€letâ€å’Œâ€constâ€åœ¨JavaScriptä¸­æ˜¯ç”¨äºå£°æ˜å˜é‡çš„å…³é”®å­—ã€‚â€varâ€å£°æ˜çš„å˜é‡æ˜¯å‡½æ•°çº§ä½œç”¨åŸŸï¼Œå®ƒçš„ä½œç”¨èŒƒå›´åœ¨æ•´ä¸ªå‡½æ•°ä¸­ï¼›</p><p>è€Œâ€letâ€å’Œâ€constâ€å£°æ˜çš„å˜é‡æ˜¯å—çº§ä½œç”¨åŸŸï¼Œå®ƒä»¬çš„ä½œç”¨èŒƒå›´åœ¨å£°æ˜çš„ä»£ç å—å†…ã€‚</p><p><strong>ä¸åŒä¹‹å¤„åœ¨äº</strong>ï¼Œâ€letâ€å£°æ˜çš„å˜é‡å¯ä»¥è¢«é‡æ–°èµ‹å€¼ï¼Œè€Œâ€constâ€å£°æ˜çš„å˜é‡æ˜¯å¸¸é‡ï¼Œä¸èƒ½è¢«æ›´æ”¹ã€‚åœ¨é¢è¯•ä¸­å¸¸å¸¸æ¶‰åŠåˆ°è¿™äº›å…³é”®å­—çš„ä½¿ç”¨åŠå…¶åŒºåˆ«ã€‚ </p></blockquote><p>è¿™æ—¶æˆ‘ä»¬éœ€è¦ä½¿ç”¨<strong>æ¨¡æ¿å¼•ç”¨</strong>â€”â€”ä¹Ÿå°±æ˜¯æŒ‡å‘æ¨¡æ¿ä¸­ä¸€ä¸ª DOM å…ƒç´ çš„ refã€‚æˆ‘ä»¬éœ€è¦é€šè¿‡<a href="https://cn.vuejs.org/api/built-in-special-attributes.html#ref">è¿™ä¸ªç‰¹æ®Šçš„ <code>ref</code> attribute</a> æ¥å®ç°æ¨¡æ¿å¼•ç”¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p ref=&quot;p&quot;&gt;hello&lt;/p&gt;</span><br></pre></td></tr></table></figure><p>è¦è®¿é—®è¯¥å¼•ç”¨ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜ä¸€ä¸ªåŒåçš„ refï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const p = ref(null)</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™ä¸ª ref ä½¿ç”¨ <code>null</code> å€¼æ¥åˆå§‹åŒ–ã€‚è¿™æ˜¯å› ä¸ºå½“ <code>&lt;script setup&gt;</code> æ‰§è¡Œæ—¶ï¼ŒDOM å…ƒç´ è¿˜ä¸å­˜åœ¨ã€‚æ¨¡æ¿å¼•ç”¨ ref åªèƒ½åœ¨ç»„ä»¶<strong>æŒ‚è½½</strong>åè®¿é—®ã€‚</p><p>è¦åœ¨æŒ‚è½½ä¹‹åæ‰§è¡Œä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>onMounted()</code> å‡½æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import &#123; onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  // æ­¤æ—¶ç»„ä»¶å·²ç»æŒ‚è½½ã€‚</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿™è¢«ç§°ä¸º<strong>ç”Ÿå‘½å‘¨æœŸé’©å­</strong>â€”â€”å®ƒå…è®¸æˆ‘ä»¬æ³¨å†Œä¸€ä¸ªåœ¨ç»„ä»¶çš„ç‰¹å®šç”Ÿå‘½å‘¨æœŸè°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚è¿˜æœ‰ä¸€äº›å…¶ä»–çš„é’©å­å¦‚ <code>onUpdated</code> å’Œ <code>onUnmounted</code>ã€‚æ›´å¤šç»†èŠ‚è¯·æŸ¥é˜…<a href="https://cn.vuejs.org/guide/essentials/lifecycle.html#lifecycle-diagram">ç”Ÿå‘½å‘¨æœŸå›¾ç¤º</a>ã€‚</p><p>ç°åœ¨ï¼Œå°è¯•æ·»åŠ ä¸€ä¸ª <code>onMounted</code> é’©å­ï¼Œç„¶åé€šè¿‡ <code>p.value</code> è®¿é—® <code>&lt;p&gt;</code>ï¼Œå¹¶ç›´æ¥å¯¹å…¶æ‰§è¡Œä¸€äº› DOM æ“ä½œã€‚(ä¾‹å¦‚ä¿®æ”¹å®ƒçš„ <code>textContent</code>)ã€‚</p><p>å®ä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const p = ref(null)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;p ref=&quot;p&quot;&gt;hello&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line">const p = ref(null)</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  p.value.textContent = &#x27;mounted!&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;p ref=&quot;p&quot;&gt;hello&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="ä¾¦å¬å™¨"><a href="#ä¾¦å¬å™¨" class="headerlink" title="ä¾¦å¬å™¨"></a>ä¾¦å¬å™¨</h3><p>æœ‰æ—¶æˆ‘ä»¬éœ€è¦å“åº”æ€§åœ°æ‰§è¡Œä¸€äº›â€œå‰¯ä½œç”¨â€â€”â€”ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªæ•°å­—æ”¹å˜æ—¶å°†å…¶è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¾¦å¬å™¨æ¥å®ç°å®ƒï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">const count = ref(0)</span><br><span class="line">watch(count, (newCount) =&gt; &#123;</span><br><span class="line">  // æ²¡é”™ï¼Œconsole.log() æ˜¯ä¸€ä¸ªå‰¯ä½œç”¨</span><br><span class="line">  console.log(`new count is: $&#123;newCount&#125;`)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>watch()</code> å¯ä»¥ç›´æ¥ä¾¦å¬ä¸€ä¸ª refï¼Œå¹¶ä¸”åªè¦ <code>count</code> çš„å€¼æ”¹å˜å°±ä¼šè§¦å‘å›è°ƒã€‚<code>watch()</code> ä¹Ÿå¯ä»¥ä¾¦å¬å…¶ä»–ç±»å‹çš„æ•°æ®æºâ€”â€”æ›´å¤šè¯¦æƒ…è¯·å‚é˜…<a href="https://cn.vuejs.org/guide/essentials/watchers.html">æŒ‡å— - ä¾¦å¬å™¨</a>ã€‚ </p><p>ä¸€ä¸ªæ¯”åœ¨æ§åˆ¶å°è¾“å‡ºæ›´åŠ å®é™…çš„ä¾‹å­æ˜¯å½“ ID æ”¹å˜æ—¶æŠ“å–æ–°çš„æ•°æ®ã€‚åœ¨å³è¾¹çš„ä¾‹å­ä¸­å°±æ˜¯è¿™æ ·ä¸€ä¸ªç»„ä»¶ã€‚è¯¥ç»„ä»¶è¢«æŒ‚è½½æ—¶ï¼Œä¼šä»æ¨¡æ‹Ÿ API ä¸­æŠ“å– todo æ•°æ®ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€ä¸ªæŒ‰é’®å¯ä»¥æ”¹å˜è¦æŠ“å–çš„ todo çš„ IDã€‚ç°åœ¨ï¼Œå°è¯•å®ç°ä¸€ä¸ªä¾¦å¬å™¨ï¼Œä½¿å¾—ç»„ä»¶èƒ½å¤Ÿåœ¨æŒ‰é’®è¢«ç‚¹å‡»æ—¶æŠ“å–æ–°çš„ todo é¡¹ç›®ã€‚ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const todoId = ref(1)</span><br><span class="line">const todoData = ref(null)</span><br><span class="line"></span><br><span class="line">async function fetchData() &#123;</span><br><span class="line">  todoData.value = null</span><br><span class="line">  const res = await fetch(</span><br><span class="line">    `https://jsonplaceholder.typicode.com/todos/$&#123;todoId.value&#125;`</span><br><span class="line">  )</span><br><span class="line">  todoData.value = await res.json()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fetchData()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;p&gt;Todo id: &#123;&#123; todoId &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;button @click=&quot;todoId++&quot;&gt;Fetch next todo&lt;/button&gt;</span><br><span class="line">  &lt;p v-if=&quot;!todoData&quot;&gt;Loading...&lt;/p&gt;</span><br><span class="line">  &lt;pre v-else&gt;&#123;&#123; todoData &#125;&#125;&lt;/pre&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const todoId = ref(1)</span><br><span class="line">const todoData = ref(null)</span><br><span class="line"></span><br><span class="line">async function fetchData() &#123;</span><br><span class="line">  todoData.value = null</span><br><span class="line">  const res = await fetch(</span><br><span class="line">    `https://jsonplaceholder.typicode.com/todos/$&#123;todoId.value&#125;`</span><br><span class="line">  )</span><br><span class="line">  todoData.value = await res.json()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fetchData()</span><br><span class="line"></span><br><span class="line">watch(todoId, fetchData)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;p&gt;Todo id: &#123;&#123; todoId &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;button @click=&quot;todoId++&quot;&gt;Fetch next todo&lt;/button&gt;</span><br><span class="line">  &lt;p v-if=&quot;!todoData&quot;&gt;Loading...&lt;/p&gt;</span><br><span class="line">  &lt;pre v-else&gt;&#123;&#123; todoData &#125;&#125;&lt;/pre&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h3><p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªä½¿ç”¨äº†å•ä¸ªç»„ä»¶ã€‚çœŸæ­£çš„ Vue åº”ç”¨å¾€å¾€æ˜¯ç”±åµŒå¥—ç»„ä»¶åˆ›å»ºçš„ã€‚</p><p>çˆ¶ç»„ä»¶å¯ä»¥åœ¨æ¨¡æ¿ä¸­æ¸²æŸ“å¦ä¸€ä¸ªç»„ä»¶ä½œä¸ºå­ç»„ä»¶ã€‚è¦ä½¿ç”¨å­ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¯¼å…¥å®ƒï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import ChildComp from &#x27;./ChildComp.vue&#x27;</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ç»„ä»¶ï¼Œå°±åƒè¿™æ ·ï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ChildComp /&gt;</span><br></pre></td></tr></table></figure><p>ç°åœ¨è‡ªå·±å°è¯•ä¸€ä¸‹â€”â€”å¯¼å…¥å­ç»„ä»¶å¹¶åœ¨æ¨¡æ¿ä¸­æ¸²æŸ“å®ƒã€‚ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import ChildComp from &#x27;./ChildComp.vue&#x27;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- render child component --&gt;</span><br><span class="line">&lt;ChildComp&gt;&lt;/ChildComp&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="Props"><a href="#Props" class="headerlink" title="Props"></a>Props</h3><p>å­ç»„ä»¶å¯ä»¥é€šè¿‡ <strong>props</strong> ä»çˆ¶ç»„ä»¶æ¥å—åŠ¨æ€æ•°æ®ã€‚é¦–å…ˆï¼Œéœ€è¦å£°æ˜å®ƒæ‰€æ¥å—çš„ propsï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ChildComp.vue --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  msg: String</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„ <code>defineProps()</code> æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶å®ï¼Œå¹¶ä¸éœ€è¦å¯¼å…¥ã€‚ä¸€æ—¦å£°æ˜ï¼Œ<code>msg</code> prop å°±å¯ä»¥åœ¨å­ç»„ä»¶çš„æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚å®ƒä¹Ÿå¯ä»¥é€šè¿‡ <code>defineProps()</code> æ‰€è¿”å›çš„å¯¹è±¡åœ¨ JavaScript ä¸­è®¿é—®ã€‚</p><p>çˆ¶ç»„ä»¶å¯ä»¥åƒå£°æ˜ HTML attributes ä¸€æ ·ä¼ é€’ propsã€‚è‹¥è¦ä¼ é€’åŠ¨æ€å€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>v-bind</code> è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ChildComp :msg=&quot;greeting&quot; /&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import ChildComp from &#x27;./ChildComp.vue&#x27;</span><br><span class="line"></span><br><span class="line">  const props = defineProps(&#123;</span><br><span class="line">    msg:String</span><br><span class="line">  &#125;)</span><br><span class="line">  //é—®å€™å˜é‡</span><br><span class="line">const greeting = ref(&#x27;Hello from parent&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!--:msgå¯¼å‘--&gt;</span><br><span class="line">  &lt;ChildComp :msg=&quot;greeting&quot;/&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="Emits"><a href="#Emits" class="headerlink" title="Emits"></a>Emits</h3><p>é™¤äº†æ¥å—propsï¼Œå­ç»„ä»¶è¿˜å¯ä»¥å‘çˆ¶ç»„ä»¶è§¦å‘äº‹ä»¶ï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// å£°æ˜è§¦å‘çš„äº‹ä»¶</span><br><span class="line">const emit = defineEmits([&#x27;response&#x27;])</span><br><span class="line"></span><br><span class="line">// å¸¦å‚æ•°è§¦å‘</span><br><span class="line">emit(&#x27;response&#x27;, &#x27;hello from child&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>emit()</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯äº‹ä»¶çš„åç§°ã€‚å…¶ä»–æ‰€æœ‰å‚æ•°éƒ½å°†ä¼ é€’ç»™äº‹ä»¶ç›‘å¬å™¨ã€‚</p><p>çˆ¶ç»„ä»¶å¯ä»¥ä½¿ç”¨ <code>v-on</code> ç›‘å¬å­ç»„ä»¶è§¦å‘çš„äº‹ä»¶â€”â€”è¿™é‡Œçš„å¤„ç†å‡½æ•°æ¥æ”¶äº†å­ç»„ä»¶è§¦å‘äº‹ä»¶æ—¶çš„é¢å¤–å‚æ•°å¹¶å°†å®ƒèµ‹å€¼ç»™äº†æœ¬åœ°çŠ¶æ€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ChildComp @response=&quot;(msg) =&gt; childMsg = msg&quot; /&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import ChildComp from &#x27;./ChildComp.vue&#x27;</span><br><span class="line">const childMsg = ref(&#x27;No child msg yet&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ChildComp @response=&quot;(msg) =&gt; childMsg = msg&quot; /&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123; childMsg &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="æ’æ§½"><a href="#æ’æ§½" class="headerlink" title="æ’æ§½"></a>æ’æ§½</h3><p>é™¤äº†é€šè¿‡ props ä¼ é€’æ•°æ®å¤–ï¼Œçˆ¶ç»„ä»¶è¿˜å¯ä»¥é€šè¿‡<strong>æ’æ§½</strong> (slots) å°†æ¨¡æ¿ç‰‡æ®µä¼ é€’ç»™å­ç»„ä»¶ï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;ChildComp&gt;</span><br><span class="line">  This is some slot content!</span><br><span class="line">&lt;/ChildComp&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨å­ç»„ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>&lt;slot&gt;</code> å…ƒç´ ä½œä¸ºæ’æ§½å‡ºå£ (slot outlet) æ¸²æŸ“çˆ¶ç»„ä»¶ä¸­çš„æ’æ§½å†…å®¹ (slot content)ï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- åœ¨å­ç»„ä»¶çš„æ¨¡æ¿ä¸­ --&gt;</span><br><span class="line">&lt;slot/&gt;</span><br></pre></td></tr></table></figure><p><code>&lt;slot&gt;</code> æ’å£ä¸­çš„å†…å®¹å°†è¢«å½“ä½œâ€œé»˜è®¤â€å†…å®¹ï¼šå®ƒä¼šåœ¨çˆ¶ç»„ä»¶æ²¡æœ‰ä¼ é€’ä»»ä½•æ’æ§½å†…å®¹æ—¶æ˜¾ç¤ºï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;slot&gt;Fallback content&lt;/slot&gt;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬æ²¡æœ‰ç»™ <code>&lt;ChildComp&gt;</code> ä¼ é€’ä»»ä½•æ’æ§½å†…å®¹ï¼Œæ‰€ä»¥ä½ å°†çœ‹åˆ°é»˜è®¤å†…å®¹ã€‚è®©æˆ‘ä»¬åˆ©ç”¨çˆ¶ç»„ä»¶çš„ <code>msg</code> çŠ¶æ€ä¸ºå­ç»„ä»¶æä¾›ä¸€äº›æ’æ§½å†…å®¹å§ã€‚ </p>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦è®°å½•å‰ç«¯vueå­¦ä¹ çš„ä¸€äº›ç¬”è®°ï¼Œä»¥åŠå¦‚ä½•å»å¿«é€Ÿæ­å»ºä¸€ä¸ªvueæ¡†æ¶å’Œå¯åŠ¨vueå®ä¾‹ã€‚</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://www.blog.909111.xyz/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="vue3" scheme="https://www.blog.909111.xyz/tags/vue3/"/>
    
  </entry>
  
  <entry>
    <title>Spring</title>
    <link href="https://www.blog.909111.xyz/posts/6c92115f.html"/>
    <id>https://www.blog.909111.xyz/posts/6c92115f.html</id>
    <published>2023-11-09T02:50:23.339Z</published>
    <updated>2023-11-09T02:50:23.339Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-Spring"><a href="#1-Spring" class="headerlink" title="1.Spring"></a>1.Spring</h1><p>spring ï¼š æ˜¥å¤©ç»™â€”â€”ã€‹è½¯ä»¶è¡Œä¸šå¸¦æ¥äº†æ˜¥å¤©ã€‚</p><p>å¼€å‘ç›®çš„ï¼š è§£å†³ä¼ä¸šçº§å¼€å‘çš„å¤æ‚æ€§ã€‚</p><p>ä½¿ç”¨javaBean ä»£æ›¿ EDG </p><p>å®˜ç½‘ï¼š <a href="https://spring.io/">https://spring.io/</a></p><p>spring ç†å¿µï¼š ä½¿å¾—ç°æœ‰çš„æŠ€æœ¯æ›´åŠ å®¹æ˜“ä½¿ç”¨ï¼Œæœ¬èº«å°±æ˜¯ä¸€ä¸ªå¤§æ‚çƒ©ï¼Œæ•´åˆäº†ç°æœ‰çš„æŠ€æœ¯æ¡†æ¶</p><p>SSH ï¼š Struct + Spring + Hibernate </p><p>SSM : Spring + SpringMVC + Maven</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- spring web mvc--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-JDBC<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="1-1-ä¼˜ç‚¹"><a href="#1-1-ä¼˜ç‚¹" class="headerlink" title="1.1  ä¼˜ç‚¹"></a>1.1  ä¼˜ç‚¹</h2><ul><li><h5 id="Spring-æ˜¯ä¸€ä¸ªè½»é‡çº§å…è´¹çš„å¼€æºæ¡†æ¶ï¼ˆå®¹å™¨ï¼‰"><a href="#Spring-æ˜¯ä¸€ä¸ªè½»é‡çº§å…è´¹çš„å¼€æºæ¡†æ¶ï¼ˆå®¹å™¨ï¼‰" class="headerlink" title="Spring æ˜¯ä¸€ä¸ªè½»é‡çº§å…è´¹çš„å¼€æºæ¡†æ¶ï¼ˆå®¹å™¨ï¼‰"></a>Spring æ˜¯ä¸€ä¸ªè½»é‡çº§å…è´¹çš„å¼€æºæ¡†æ¶ï¼ˆå®¹å™¨ï¼‰</h5></li><li><h5 id="Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ï¼Œéå…¥ä¾µå¼çš„æ¡†æ¶ï¼"><a href="#Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ï¼Œéå…¥ä¾µå¼çš„æ¡†æ¶ï¼" class="headerlink" title="Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ï¼Œéå…¥ä¾µå¼çš„æ¡†æ¶ï¼"></a>Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ï¼Œéå…¥ä¾µå¼çš„æ¡†æ¶ï¼</h5></li><li><h5 id="IOC-æ§åˆ¶åè½¬"><a href="#IOC-æ§åˆ¶åè½¬" class="headerlink" title="IOC:æ§åˆ¶åè½¬"></a>IOC:æ§åˆ¶åè½¬</h5></li><li><h5 id="AOP-é¢å‘åˆ‡é¢ç¼–ç¨‹"><a href="#AOP-é¢å‘åˆ‡é¢ç¼–ç¨‹" class="headerlink" title="AOP: é¢å‘åˆ‡é¢ç¼–ç¨‹"></a>AOP: é¢å‘åˆ‡é¢ç¼–ç¨‹</h5></li><li><h5 id="æ”¯æŒäº‹åŠ¡å¤„ç†ï¼Œå¯¹æ¡†æ¶æ•´åˆçš„æ”¯æŒ"><a href="#æ”¯æŒäº‹åŠ¡å¤„ç†ï¼Œå¯¹æ¡†æ¶æ•´åˆçš„æ”¯æŒ" class="headerlink" title="æ”¯æŒäº‹åŠ¡å¤„ç†ï¼Œå¯¹æ¡†æ¶æ•´åˆçš„æ”¯æŒ"></a>æ”¯æŒäº‹åŠ¡å¤„ç†ï¼Œå¯¹æ¡†æ¶æ•´åˆçš„æ”¯æŒ</h5><p><strong><em>ä¸€å¥è¯ï¼š Springå°±æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬ï¼ˆIOCï¼‰å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰çš„å®¹å™¨</em></strong></p></li></ul><h3 id="1-1-1SpringBeançš„ç”Ÿå‘½å‘¨æœŸï¼š"><a href="#1-1-1SpringBeançš„ç”Ÿå‘½å‘¨æœŸï¼š" class="headerlink" title="1.1.1SpringBeançš„ç”Ÿå‘½å‘¨æœŸï¼š"></a>1.1.1<strong>SpringBeançš„ç”Ÿå‘½å‘¨æœŸï¼š</strong></h3><p>è¯¦ç»†</p><ol><li><p>å®ä¾‹åŒ–beanå¯¹è±¡ï¼šåå°„çš„æ–¹å¼ç”Ÿæˆå¯¹è±¡</p></li><li><p>è®¾ç½®å¯¹è±¡å±æ€§ï¼ˆå¡«å……beançš„å±æ€§ï¼‰ï¼š</p><ol><li>populateBeanï¼ˆï¼‰,å¾ªç¯ä¾èµ–çš„é—®é¢˜</li></ol></li><li><p>æ£€æŸ¥Awareç›¸å…³æ¥å£å¹¶è®¾ç½®ç›¸å…³ä¾èµ–ï¼š</p><ol><li>invokeAwareMethod(å®ŒæˆBeanName,BeanFactory,BeanClassLoaderå¯¹è±¡çš„å±æ€§è®¾ç½®)</li></ol></li><li><p>beanPostProcessorå‰ç½®å¤„ç†ï¼š</p><ol><li>ä½¿ç”¨æ¯”è¾ƒå¤šçš„ï¼ˆApplicationContextPostProcessï¼Œè®¾ç½®ApplicationContextç­‰å¯¹è±¡ï¼‰</li></ol></li><li><p>æ£€æŸ¥æ˜¯å¦initalizingBeanä»¥å†³å®šæ˜¯å¦è°ƒç”¨afterPropertiesSetæ–¹æ³•</p></li><li><p>æ£€æŸ¥æ˜¯å¦é…ç½®æœ‰è‡ªå®šä¹‰çš„init-methodï¼šåˆ¤æ–­æ˜¯å¦å®ç°initalizingbeanæ¥å£ï¼Œå¦‚æœæœ‰ï¼Œè°ƒç”¨AfterPropertiesSetæ–¹æ³•ï¼Œæ²¡æœ‰å°±ä¸è°ƒç”¨</p></li><li><p>BeanPostProcessoråç½®å¤„ç†å¯¹è±¡ï¼š</p><ol><li>Springçš„AOPå°±æ˜¯åœ¨æ­¤å¤„å®ç°çš„ï¼ŒAbstractAutoProxyCreatoræ³¨å†ŒDestuctionç›¸å…³çš„å›è°ƒæ¥å£</li></ol></li><li><p>æ˜¯å¦å®ç°DisposableBeanæ¥å£ï¼Œè°ƒç”¨DestoryMethodæ–¹æ³•</p></li></ol><h2 id="1-2-ç»„æˆ"><a href="#1-2-ç»„æˆ" class="headerlink" title="1.2 ç»„æˆ"></a>1.2 ç»„æˆ</h2><div class="table-container"><table><thead><tr><th>AOP</th><th>ORM</th><th>Spring Web</th><th>Spring Web MVC</th></tr></thead><tbody><tr><td>AOP</td><td>DAO</td><td>Spring Context</td><td>Spring Web MVC</td></tr><tr><td>CORE</td><td>CORE</td><td>CORE</td><td>CORE</td></tr></tbody></table></div><p><strong>æ ¸å¿ƒå®¹å™¨ï¼ˆSpring Coreï¼‰</strong></p><p>ã€€ã€€æ ¸å¿ƒå®¹å™¨æä¾›Springæ¡†æ¶çš„åŸºæœ¬åŠŸèƒ½ã€‚Springä»¥beançš„æ–¹å¼ç»„ç»‡å’Œç®¡ç†Javaåº”ç”¨ä¸­çš„å„ä¸ªç»„ä»¶åŠå…¶å…³ç³»ã€‚Springä½¿ç”¨BeanFactoryæ¥äº§ç”Ÿå’Œç®¡ç†Beanï¼Œå®ƒæ˜¯å·¥å‚æ¨¡å¼çš„å®ç°ã€‚BeanFactoryä½¿ç”¨æ§åˆ¶åè½¬(IoC)æ¨¡å¼å°†åº”ç”¨çš„é…ç½®å’Œä¾èµ–æ€§è§„èŒƒä¸å®é™…çš„åº”ç”¨ç¨‹åºä»£ç åˆ†å¼€ã€‚</p><p><strong>åº”ç”¨ä¸Šä¸‹æ–‡ï¼ˆSpring Contextï¼‰</strong></p><p>ã€€ã€€Springä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå‘Springæ¡†æ¶æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚Springä¸Šä¸‹æ–‡åŒ…æ‹¬ä¼ä¸šæœåŠ¡ï¼Œå¦‚JNDIã€EJBã€ç”µå­é‚®ä»¶ã€å›½é™…åŒ–ã€æ ¡éªŒå’Œè°ƒåº¦åŠŸèƒ½ã€‚</p><p><strong>Springé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆSpring AOPï¼‰</strong></p><p>ã€€ã€€é€šè¿‡é…ç½®ç®¡ç†ç‰¹æ€§ï¼ŒSpring AOP æ¨¡å—ç›´æ¥å°†é¢å‘æ–¹é¢çš„ç¼–ç¨‹åŠŸèƒ½é›†æˆåˆ°äº† Springæ¡†æ¶ä¸­ã€‚æ‰€ä»¥ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ Springæ¡†æ¶ç®¡ç†çš„ä»»ä½•å¯¹è±¡æ”¯æŒ AOPã€‚Spring AOP æ¨¡å—ä¸ºåŸºäº Spring çš„åº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡æä¾›äº†äº‹åŠ¡ç®¡ç†æœåŠ¡ã€‚é€šè¿‡ä½¿ç”¨ Spring AOPï¼Œä¸ç”¨ä¾èµ– EJB ç»„ä»¶ï¼Œå°±å¯ä»¥å°†å£°æ˜æ€§äº‹åŠ¡ç®¡ç†é›†æˆåˆ°åº”ç”¨ç¨‹åºä¸­ã€‚</p><p><strong>JDBCå’ŒDAOæ¨¡å—ï¼ˆSpring DAOï¼‰</strong></p><p>ã€€ã€€JDBCã€DAOçš„æŠ½è±¡å±‚æä¾›äº†æœ‰æ„ä¹‰çš„å¼‚å¸¸å±‚æ¬¡ç»“æ„ï¼Œå¯ç”¨è¯¥ç»“æ„æ¥ç®¡ç†å¼‚å¸¸å¤„ç†ï¼Œå’Œä¸åŒæ•°æ®åº“ä¾›åº”å•†æ‰€æŠ›å‡ºçš„é”™è¯¯ä¿¡æ¯ã€‚å¼‚å¸¸å±‚æ¬¡ç»“æ„ç®€åŒ–äº†é”™è¯¯å¤„ç†ï¼Œå¹¶ä¸”æå¤§çš„é™ä½äº†éœ€è¦ç¼–å†™çš„ä»£ç æ•°é‡ï¼Œæ¯”å¦‚æ‰“å¼€å’Œå…³é—­é“¾æ¥ã€‚</p><p><strong>å¯¹è±¡å®ä½“æ˜ å°„ï¼ˆSpring ORMï¼‰</strong></p><p>ã€€ã€€Springæ¡†æ¶æ’å…¥äº†è‹¥å¹²ä¸ªORMæ¡†æ¶ï¼Œä»è€Œæä¾›äº†ORMå¯¹è±¡çš„å…³ç³»å·¥å…·ï¼Œå…¶ä¸­åŒ…æ‹¬äº†Hibernateã€JDOå’Œ IBatis SQL Mapç­‰ï¼Œæ‰€æœ‰è¿™äº›éƒ½éµä»Springçš„é€šç”¨äº‹ç‰©å’ŒDAOå¼‚å¸¸å±‚æ¬¡ç»“æ„ã€‚</p><p><strong>Webæ¨¡å—ï¼ˆSpring Webï¼‰</strong></p><p>ã€€ã€€Webä¸Šä¸‹æ–‡æ¨¡å—å»ºç«‹åœ¨åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡æ¨¡å—ä¹‹ä¸Šï¼Œä¸ºåŸºäºwebçš„åº”ç”¨ç¨‹åºæä¾›äº†ä¸Šä¸‹æ–‡ã€‚æ‰€ä»¥Springæ¡†æ¶æ”¯æŒä¸Strutsé›†æˆï¼Œwebæ¨¡å—è¿˜ç®€åŒ–äº†å¤„ç†å¤šéƒ¨åˆ†è¯·æ±‚ä»¥åŠå°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ°åŸŸå¯¹è±¡çš„å·¥ä½œã€‚</p><p><strong>MVCæ¨¡å—ï¼ˆSpring Web MVCï¼‰</strong></p><p>ã€€ã€€MVCæ¡†æ¶æ˜¯ä¸€ä¸ªå…¨åŠŸèƒ½çš„æ„å»ºWebåº”ç”¨ç¨‹åºçš„MVCå®ç°ã€‚é€šè¿‡ç­–ç•¥æ¥å£ï¼ŒMVCæ¡†æ¶å˜æˆä¸ºé«˜åº¦å¯é…ç½®çš„ã€‚MVCå®¹çº³äº†å¤§é‡è§†å›¾æŠ€æœ¯ï¼Œå…¶ä¸­åŒ…æ‹¬JSPã€POIç­‰ï¼Œæ¨¡å‹æ¥æœ‰JavaBeanæ¥æ„æˆï¼Œå­˜æ”¾äºmå½“ä¸­ï¼Œè€Œè§†å›¾æ˜¯ä¸€ä¸ªè¡—å£ï¼Œè´Ÿè´£å®ç°æ¨¡å‹ï¼Œæ§åˆ¶å™¨è¡¨ç¤ºé€»è¾‘ä»£ç ï¼Œç”±cçš„äº‹æƒ…ã€‚Springæ¡†æ¶çš„åŠŸèƒ½å¯ä»¥ç”¨åœ¨ä»»ä½•J2EEæœåŠ¡å™¨å½“ä¸­ï¼Œå¤§å¤šæ•°åŠŸèƒ½ä¹Ÿé€‚ç”¨äºä¸å—ç®¡ç†çš„ç¯å¢ƒã€‚Springçš„æ ¸å¿ƒè¦ç‚¹å°±æ˜¯æ”¯æŒä¸ç»‘å®šåˆ°ç‰¹å®šJ2EEæœåŠ¡çš„å¯é‡ç”¨ä¸šåŠ¡å’Œæ•°æ®çš„è®¿é—®çš„å¯¹è±¡ï¼Œæ¯«æ— ç–‘é—®è¿™æ ·çš„å¯¹è±¡å¯ä»¥åœ¨ä¸åŒçš„J2EEç¯å¢ƒï¼Œç‹¬ç«‹åº”ç”¨ç¨‹åºå’Œæµ‹è¯•ç¯å¢ƒä¹‹é—´é‡ç”¨ã€‚</p><h1 id="2-IOCç†è®º"><a href="#2-IOCç†è®º" class="headerlink" title="2. IOCç†è®º"></a>2. IOCç†è®º</h1><ol><li><p>userDao</p></li><li><p>UserDaoImpl</p></li><li><p>UserService</p></li><li><p>UserServiceImpl</p><p>åœ¨æˆ‘ä»¬ä¹‹å‰çš„ä¸šåŠ¡ä¸­ï¼Œç”¨æˆ·çš„éœ€æ±‚å¯èƒ½ä¼šå½±å“æˆ‘ä»¬åŸæ¥çš„ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">UserDao</span>  <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">UserDao</span> <span class="variable">userDao1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserMysqlDaoImpl</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">UserDao</span> <span class="variable">userDao2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserOracleDaoImpl</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//å½“ç”¨æˆ·éœ€æ±‚æ”¹å˜ï¼Œæˆ‘ä»¬å°†è¦æ¯æ¬¡éƒ½è¦æ”¹å˜ä»£ç ï¼Œå¾ˆéº»çƒ¦ï¼Œä»è€ŒspringIocçš„ç®€å•å°±æ¥äº†ã€‚</span></span><br><span class="line">        userDao1.getUser();<span class="comment">//è¿™æ˜¯æ–°æ·»åŠ çš„éœ€æ±‚ï¼Œæˆ‘è¦æ”¹æºä»£ç </span></span><br><span class="line">        userDao2.getUser();  <span class="comment">//è¿™åˆæ˜¯æ–°æ·»åŠ çš„éœ€æ±‚ï¼Œæˆ‘åˆè¦æ”¹ã€‚</span></span><br><span class="line">        userDao.getUser();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line">        userService.getUser();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;Hello world!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="2-1-IOCæœ¬è´¨"><a href="#2-1-IOCæœ¬è´¨" class="headerlink" title="2.1 IOCæœ¬è´¨"></a>2.1 IOCæœ¬è´¨</h2><p>æ§åˆ¶åè½¬IOCæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼ŒDIï¼ˆä¾èµ–æ³¨å…¥ï¼‰å®ç°IOCçš„ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥è¯´Iocæ˜¯æ€æƒ³  DIåˆ™æ˜¯å®ç°æ–¹å¼ã€‚</p><p>IOCå¯ä»¥è¯´æ˜¯ï¼š<strong>æŠŠåˆ›å»ºå’ŒæŸ¥æ‰¾ä¾èµ–å¯¹è±¡çš„æ§åˆ¶æƒäº¤ç»™äº†å®¹å™¨ï¼Œç”±å®¹å™¨è¿›è¡Œæ³¨å…¥ç»„åˆå¯¹è±¡ï¼Œæ‰€ä»¥å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´æ˜¯ æ¾æ•£è€¦åˆï¼Œè¿™æ ·ä¹Ÿæ–¹ä¾¿æµ‹è¯•ï¼Œåˆ©äºåŠŸèƒ½å¤ç”¨ï¼Œæ›´é‡è¦çš„æ˜¯ä½¿å¾—ç¨‹åºçš„æ•´ä¸ªä½“ç³»ç»“æ„å˜å¾—éå¸¸çµæ´»ã€‚</strong> </p><p>é‡‡ç”¨XMLçš„æ–¹å¼é…ç½®beanæ—¶å€™ï¼Œbeançš„å®šä¹‰ä¿¡æ¯å’Œå®ç°åˆ†ç¦»çš„ï¼Œè€Œé‡‡ç”¨æ³¨è§£çš„æ–¹å¼å¯ä»¥æŠŠä¸¤è€…åˆä¸ºä¸€ä½“ï¼Œbeançš„å®šä¹‰ç›´æ¥ä»¥æ³¨è§£çš„å½¢å¼å®šä¹‰åœ¨å®ç°ç±»ä¸­ï¼Œä»è€Œè¾¾åˆ°é›¶é…ç½®çš„ç›®çš„ã€‚</p><p>æ§åˆ¶åè½¬æ˜¯ä¸€ç§é€šè¿‡æè¿°ï¼ˆXMLæˆ–æ³¨è§£ï¼‰å¹¶é€šè¿‡ç¬¬ä¸‰æ–¹å»ç”Ÿäº§æˆ–è·å–ç‰¹å®šå¯¹è±¡çš„æ–¹å¼ï¼Œåœ¨springä¸­å®ç°æ§åˆ¶åè½¬çš„æ˜¯IOCå®¹å™¨ï¼Œå…¶å®ç°å®ä¾èµ–æ³¨å…¥ï¼ˆDI)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é»˜è®¤è·å–æ•°æ®&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    <span class="keyword">private</span> UserDao userDao1;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*    private UserDao  userDao = new UserDaoImpl();</span></span><br><span class="line"><span class="comment">    private UserDao userDao1 = new UserMysqlDaoImpl();</span></span><br><span class="line"><span class="comment">    private UserDao userDao2 = new UserOracleDaoImpl();*/</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//å½“ç”¨æˆ·éœ€æ±‚æ”¹å˜ï¼Œæˆ‘ä»¬å°†è¦æ¯æ¬¡éƒ½è¦æ”¹å˜ä»£ç ï¼Œå¾ˆéº»çƒ¦ï¼Œä»è€ŒspringIocçš„ç®€å•å°±æ¥äº†ã€‚</span></span><br><span class="line">        <span class="comment">//userDao1.getUser();//è¿™æ˜¯æ–°æ·»åŠ çš„éœ€æ±‚ï¼Œæˆ‘è¦æ”¹æºä»£ç </span></span><br><span class="line">       <span class="comment">// userDao2.getUser();  //è¿™åˆæ˜¯æ–°æ·»åŠ çš„éœ€æ±‚ï¼Œæˆ‘åˆè¦æ”¹ã€‚</span></span><br><span class="line">        userDao.getUser();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;mysqlImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.dao.impl.UserMysqlDaoImpl&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;oracleImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.dao.impl.UserOracleDaoImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;UserServiceImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.service.impl.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">             refï¼š å¼•ç”¨springå®¹å™¨ä¸­åˆ›å»ºå¥½çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">             valueï¼š å…·ä½“çš„å€¼ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;mysqlImpl&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--   æˆ‘æ¥æ‹ä¸€æ‹</span></span><br><span class="line"><span class="comment">    UserDaoä½œä¸ºæ¥å£ï¼Œæœ‰ä¸€ä¸ªæ–¹æ³•  UserDaoImpl å®ç°è¯¥æ–¹æ³•</span></span><br><span class="line"><span class="comment">    ç„¶åUserServiceæ¥å£ç±»æ–¹æ³•åŒå UserServiceImplå®ç°æ”¹æ–¹æ³•</span></span><br><span class="line"><span class="comment">    id    = oracle ä¹Ÿå°±æ˜¯context.getBean(&quot;oracle&quot;); æ ‡è¯†ç¬¦</span></span><br><span class="line"><span class="comment">     UserServiceImpl userService1 = (UserServiceImpl) context.getBean(&quot;oracle&quot;);</span></span><br><span class="line"><span class="comment">      &lt;property name=&quot;userDao&quot; ref=&quot;oracleImpl&quot; /&gt;</span></span><br><span class="line"><span class="comment">      userDao ä¹Ÿå°±æ˜¯ setæ–¹æ³•çš„åå­—</span></span><br><span class="line"><span class="comment">      ref æŒ‡å‘  oracleImplä¹Ÿå°±æ˜¯ä¸‹è¾¹è¿™æ¡è¯­å¥</span></span><br><span class="line"><span class="comment">          &lt;bean id=&quot;oracleImpl&quot; class=&quot;com.xh.dao.impl.UserOracleDaoImpl&quot;&gt;</span></span><br><span class="line"><span class="comment">    &lt;/bean&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;oracle&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.service.impl.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">             refï¼š å¼•ç”¨springå®¹å™¨ä¸­åˆ›å»ºå¥½çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">             valueï¼š å…·ä½“çš„å€¼ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;oracleImpl&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2-2-IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼"><a href="#2-2-IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼" class="headerlink" title="2.2 IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼"></a>2.2 IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼</h2><ol><li><p>ä½¿ç”¨æ— å‚æ„é€ åˆ›å»ºå¯¹è±¡ï¼Œæ²¡æœ‰æ— å‚æ„é€ å°†ä¼šæŠ¥é”™ï¼Œé»˜è®¤</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  æ— å‚æ„é€ </span></span><br><span class="line"><span class="comment">  &lt;bean id=&quot;main&quot; class=&quot;com.xh.Main&quot;&gt;</span></span><br><span class="line"><span class="comment">       &lt;property name=&quot;user&quot; value=&quot;ä½œè€…&quot;/&gt;</span></span><br><span class="line"><span class="comment">   &lt;/bean&gt;--&gt;</span></span><br></pre></td></tr></table></figure></li></ol><ol><li>å‡è®¾æˆ‘ä»¬è¦ä½¿ç”¨æœ‰å‚æ„é€ ã€‚</li></ol>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String user;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Main&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;user=&#x27;&quot;</span> + user + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*  public Main() &#123;</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;æ— å‚æ„é€ &quot;);</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Main</span><span class="params">(String user)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.user = user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUser</span><span class="params">(String user)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.user = user;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span>  <span class="title function_">show</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user:&quot;</span>+user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-----------------------------------------------------</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//springç›¸å½“äºå©šä»‹ç½‘ç«™</span></span><br><span class="line">        ApplicationContext context=  <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Main</span> <span class="variable">main</span> <span class="operator">=</span> (Main) context.getBean(<span class="string">&quot;main&quot;</span>);</span><br><span class="line">        main.show();</span><br><span class="line">      <span class="comment">//  Main main1 = (Main) context.getBean(&quot;main1&quot;);</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><pre><code>   1. ä¸‹æ ‡èµ‹å€¼</code></pre>   <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.Main&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å°é»‘&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li><p>é€šè¿‡ç±»å‹åˆ›å»ºï¼Œä¸æ¨èä½¿ç”¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç¬¬äºŒç§</span></span><br><span class="line"><span class="comment">       é€šè¿‡ç±»å‹åˆ›å»ºï¼Œä¸æ¨èä½¿ç”¨</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.Main&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å°é»‘&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ç›´æ¥é€šè¿‡å‚æ•°å</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.Main&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å°é»‘&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><p>é‡ç‚¹ä½¿ç”¨nameæœ‰å‚æ„é€ å¥½ç”¨ï¼Œæ— å‚æ„é€ ç›´æ¥ç¬¬ä¸€ä¸ªé…ç½®</p><p>æ€»ç»“ï¼šåœ¨é…ç½®æ–‡ä»¶åŠ è½½çš„æ—¶å€™ï¼Œå®¹å™¨ä¸­çš„ç®¡ç†å¯¹è±¡å°±å·²ç»åˆå§‹åŒ–äº†</p><h1 id="3-Springé…ç½®"><a href="#3-Springé…ç½®" class="headerlink" title="3 Springé…ç½®"></a>3 Springé…ç½®</h1><h2 id="3-1-åˆ«å"><a href="#3-1-åˆ«å" class="headerlink" title="3.1 åˆ«å"></a>3.1 åˆ«å</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å‚æ•°å--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.Main&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å°é»‘&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- alias èµ·åˆ«å  name æ˜¯  Main main = (Main) context.getBean(&quot;main&quot;); --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&quot;main&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;yanliang&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Main</span> <span class="variable">main</span> <span class="operator">=</span> (Main) context.getBean(<span class="string">&quot;yanliang&quot;</span>);</span><br><span class="line"><span class="type">Main</span> <span class="variable">main1</span> <span class="operator">=</span> (Main) context.getBean(<span class="string">&quot;main&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="3-2-Beané…ç½®"><a href="#3-2-Beané…ç½®" class="headerlink" title="3.2 Beané…ç½®"></a>3.2 Beané…ç½®</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.UserT&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user2,u2 u3;u4&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å°é»‘&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--    // åˆ«åå¯æ§åˆ¶ UserT userT = (UserT) context.getBean(&quot;u2&quot;);--&gt;</span></span><br></pre></td></tr></table></figure><h2 id="3-3-Import"><a href="#3-3-Import" class="headerlink" title="3.3 Import"></a>3.3 Import</h2><p>ä¸€èˆ¬ç”¨äºå›¢é˜Ÿå¼€å‘ï¼Œå°†å¤šä¸ªæ¨¡å—å¯¼ç¨‹ä¸€ä¸ª</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//        ApplicationContext context=  new ClassPathXmlApplicationContext(&quot;application.xml&quot;);</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">application.xml</span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;bean.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;bean2.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;bean1.xml&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>æ— éœ€æ‹…å¿ƒé‡åä»–ä¼šè‡ªå·±é€‰æ‹©ã€‚</p><h1 id="4-ä¾èµ–æ³¨å…¥-DI"><a href="#4-ä¾èµ–æ³¨å…¥-DI" class="headerlink" title="4 ä¾èµ–æ³¨å…¥(DI)"></a>4 ä¾èµ–æ³¨å…¥(DI)</h1><h3 id="4-1-æ„é€ å™¨æ³¨å…¥"><a href="#4-1-æ„é€ å™¨æ³¨å…¥" class="headerlink" title="4.1 æ„é€ å™¨æ³¨å…¥"></a>4.1 æ„é€ å™¨æ³¨å…¥</h3><p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„æœ‰å‚æ„é€ å’Œæ— å‚æ„é€ </p><h3 id="4-2-Setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘"><a href="#4-2-Setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘" class="headerlink" title="4.2 Setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘"></a>4.2 Setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘</h3><p>ä¾èµ–æ³¨å…¥ï¼šsetæ³¨å…¥</p><p> ä¾èµ–: beanå¯¹è±¡çš„åˆ›å»ºä¾èµ–äºå®¹å™¨</p><p>æ³¨å…¥ï¼š beanå¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§ç”±å®¹å™¨æ³¨å…¥</p><p>ç¯å¢ƒæ­å»º</p><ol><li><p>å¤æ‚ç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">    <span class="keyword">private</span>  String address;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><ol><li>çœŸå®æµ‹è¯•</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line">    <span class="keyword">private</span> String[] books;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; hobby;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; card;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; games;</span><br><span class="line">    <span class="keyword">private</span> String wife;</span><br><span class="line">    <span class="keyword">private</span> Properties info;</span><br></pre></td></tr></table></figure><ol><li><p>Bean.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç¬¬ä¸€ç§æ™®é€šå€¼æ³¨å…¥ value--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å°é»‘&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) context.getBean(<span class="string">&quot;student&quot;</span>);</span><br><span class="line">        System.out.println(student.getName());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ol></li></ol><h3 id="4-3-æ‹“å±•æ–¹å¼æ³¨å…¥"><a href="#4-3-æ‹“å±•æ–¹å¼æ³¨å…¥" class="headerlink" title="4.3 æ‹“å±•æ–¹å¼æ³¨å…¥"></a>4.3 æ‹“å±•æ–¹å¼æ³¨å…¥</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡på‘½åç©ºé—´æ³¨å…¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:c</span>=<span class="string">&quot;http://www.springframework.org/schema/c&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--   p set å‘½åç©ºé—´æ³¨å…¥ï¼Œå¯ä»¥ç®€ä»‹æ³¨å…¥ ï¼š property--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.User&quot;</span> <span class="attr">p:uname</span>=<span class="string">&quot;å°é»‘&quot;</span> <span class="attr">p:age</span>=<span class="string">&quot;18&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  Cå‘½åç©ºé—´å¿…é¡»é€šè¿‡æ„é€ å™¨æ³¨å…¥æ‰è¡Œ æœ‰å‚æ— å‚æ„é€  construct-args æ³¨å…¥  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.User&quot;</span> <span class="attr">c:age</span>=<span class="string">&quot;18&quot;</span> <span class="attr">c:uname</span>=<span class="string">&quot;é¢œäº®&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">P:   </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) context.getBean(<span class="string">&quot;student&quot;</span>);</span><br><span class="line">        <span class="comment">//System.out.println(student.getName());</span></span><br><span class="line">        System.out.println(student.toString());</span><br><span class="line">    </span><br><span class="line">C:</span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span></span><br><span class="line">                <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;userBean.xml&quot;</span>);</span><br><span class="line">       <span class="type">User</span>  <span class="variable">user</span> <span class="operator">=</span>  context.getBean(<span class="string">&quot;user2&quot;</span>, User.class);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br></pre></td></tr></table></figure><p>æ³¨æ„p:å‘½åç©ºé—´ä½¿ç”¨Setæ–¹å¼æ³¨å…¥ï¼Œè€ŒC:å‘½åç©ºé—´æ˜¯ä½¿ç”¨æ„é€ å™¨æ³¨å…¥ï¼Œæœ‰å‚æ„é€ ï¼Œæ— å‚æ„é€ éƒ½è¦æœ‰ï¼Œä¸”p,céƒ½éœ€è¦å¯¼å…¥ä¾èµ–æ‰èƒ½ä½¿ç”¨ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br><span class="line">xmlns:c=&quot;http://www.springframework.org/schema/c&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-4-Beanä½œç”¨åŸŸ"><a href="#4-4-Beanä½œç”¨åŸŸ" class="headerlink" title="4.4 Beanä½œç”¨åŸŸ"></a>4.4 Beanä½œç”¨åŸŸ</h3><p>å•ä¾‹æ¨¡å¼ï¼šï¼ˆSpringé»˜è®¤æœºåˆ¶ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user3&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.User&quot;</span> <span class="attr">c:age</span>=<span class="string">&quot;18&quot;</span> <span class="attr">c:uname</span>=<span class="string">&quot;é¢œäº®&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;singleton&quot;</span>/&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åŸå‹æ¨¡å¼ï¼šæ¯æ¬¡ä»å®¹å™¨ä¸­getçš„æ—¶å€™éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°å¯¹è±¡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user4&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.User&quot;</span> <span class="attr">c:age</span>=<span class="string">&quot;18&quot;</span> <span class="attr">c:uname</span>=<span class="string">&quot;é¢œäº®&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>/&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å…¶ä½™çš„request ,session,applicationè¿™äº›åªèƒ½åœ¨webå¼€å‘ä¸­ä½¿ç”¨ï¼</p><h1 id="5-beançš„è‡ªåŠ¨è£…é…"><a href="#5-beançš„è‡ªåŠ¨è£…é…" class="headerlink" title="5 beançš„è‡ªåŠ¨è£…é…"></a>5 beançš„è‡ªåŠ¨è£…é…</h1><p>è‡ªåŠ¨è£…é…æ˜¯springæ»¡è¶³beanä¾èµ–çš„ä¸€ç§æ–¹å¼</p><p>spring ä¼šåœ¨ä¸Šä¸‹æ–‡è‡ªåŠ¨å¯»æ‰¾ï¼Œå¹¶è‡ªåŠ¨ç»™beanè£…é…å±æ€§</p><p>åœ¨springä¸­æœ‰ä¸‰ç§è£…é…æ–¹å¼ï¼š</p><ol><li>åœ¨xmlä¸­æ˜¾ç¤ºçš„é…ç½®</li><li>åœ¨javaä¸­æ˜¾ç¤ºçš„é…ç½®</li><li>éšå¼çš„è‡ªåŠ¨è£…é…beanã€é‡è¦ã€‘</li></ol><h3 id="5-1æµ‹è¯•"><a href="#5-1æµ‹è¯•" class="headerlink" title="5.1æµ‹è¯•"></a>5.1æµ‹è¯•</h3><p>ç¯å¢ƒæ­å»ºä¸€ä¸ªäººæœ‰ä¸¤ä¸ªå® ç‰©</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shout</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è‹—&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shout</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ çš„ç‹—å«ä»€ä¹ˆï¼Ÿ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line">    <span class="keyword">private</span>  Cat cat;</span><br><span class="line">    <span class="keyword">private</span>  Dog dog;</span><br><span class="line">    <span class="keyword">private</span>  String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;People&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;cat=&quot;</span> + cat +</span><br><span class="line">                <span class="string">&quot;, dog=&quot;</span> + dog +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Cat <span class="title function_">getCat</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cat;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCat</span><span class="params">(Cat cat)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.cat = cat;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Dog <span class="title function_">getDog</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDog</span><span class="params">(Dog dog)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dog = dog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">    <span class="type">People</span> <span class="variable">people</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;people&quot;</span>,People.class);</span><br><span class="line">    people.getDog().shout();</span><br><span class="line">    people.getCat().shout();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.Dog&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.Cat&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.People&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;èƒ¡å°é»‘&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cat&quot;</span>  <span class="attr">ref</span>=<span class="string">&quot;cat&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dog&quot;</span>  <span class="attr">ref</span>=<span class="string">&quot;dog&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5-2-ByNameè‡ªåŠ¨è£…é…"><a href="#5-2-ByNameè‡ªåŠ¨è£…é…" class="headerlink" title="5.2 ByNameè‡ªåŠ¨è£…é…"></a>5.2 ByNameè‡ªåŠ¨è£…é…</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--   ByName:ä¼šè‡ªåŠ¨ åœ¨å®¹å™¨ä¸Šä¸‹æ–‡æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡setæ–¹æ³•åè¾¹å¯¹åº”çš„ bean id --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.People&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ˜¯å°èƒ¡å‘€&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.Dog&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.Cat&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCat</span><span class="params">(Cat cat)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.cat = cat;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDog</span><span class="params">(Dog dog)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.dog = dog;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-3-ByType"><a href="#5-3-ByType" class="headerlink" title="5.3 ByType"></a>5.3 ByType</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    ByType ä¸ä¼šæ ¹æ®idè¿›è¡ŒæŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡å±æ€§ç±»å‹ç›¸åŒçš„bean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.People&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ˜¯å°èƒ¡å‘€&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.Dog&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;11cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.Cat&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å°ç»“ï¼š</p><p>byNameçš„æ—¶å€™éœ€è¦ä¿è¯beançš„idå”¯ä¸€ï¼Œå¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„setæ–¹æ³•çš„å€¼ä¸€è‡´ã€‚</p><p>byTypeçš„æ—¶å€™éœ€è¦ä¿è¯beançš„classå”¯ä¸€ï¼Œå¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„ç±»å‹ä¸€è‡´ã€‚</p><h3 id="5-4-æ³¨è§£å®ç°è‡ªåŠ¨é…ç½®"><a href="#5-4-æ³¨è§£å®ç°è‡ªåŠ¨é…ç½®" class="headerlink" title="5.4 æ³¨è§£å®ç°è‡ªåŠ¨é…ç½®"></a>5.4 æ³¨è§£å®ç°è‡ªåŠ¨é…ç½®</h3><p>JDk1.5ä»¥åæ”¯æŒæ³¨è§£ï¼Œspring 2.5æ”¯æŒæ³¨è§£â€˜</p><p>ä½¿ç”¨æ³¨è§£éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p><ol><li><p>å¯¼å…¥çº¦æŸcontextçº¦æŸ</p></li><li><p>é…ç½®æ³¨è§£çš„æ”¯æŒ  <context:annotation-config/></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;example.SimpleMovieCatalog&quot;</span> <span class="attr">primary</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- inject any dependencies required by this bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;example.SimpleMovieCatalog&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- inject any dependencies required by this bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;movieRecommender&quot;</span> <span class="attr">class</span>=<span class="string">&quot;example.MovieRecommender&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="5-4-1-Autowired"><a href="#5-4-1-Autowired" class="headerlink" title="5.4.1 @Autowired"></a>5.4.1 @Autowired</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¼€å¯æ³¨è§£çš„æ”¯æŒ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.Dog&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.Cat&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.People&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;bean id=&quot;people&quot; class=&quot;com.xh.People&quot;&gt;</span></span><br><span class="line"><span class="comment">         &lt;property name=&quot;name&quot; value=&quot;èƒ¡å°é»‘&quot;/&gt;</span></span><br><span class="line"><span class="comment">         &lt;property name=&quot;cat&quot;  ref=&quot;cat&quot;/&gt;</span></span><br><span class="line"><span class="comment">         &lt;property name=&quot;dog&quot;  ref=&quot;dog&quot;/&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">     &lt;/bean&gt;</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--   ByName:ä¼šè‡ªåŠ¨ åœ¨å®¹å™¨ä¸Šä¸‹æ–‡æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡setæ–¹æ³•åè¾¹å¯¹åº”çš„ beanid--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    &lt;bean id=&quot;people&quot; class=&quot;com.xh.People&quot; autowire=&quot;byName&quot;&gt;</span></span><br><span class="line"><span class="comment">            &lt;property name=&quot;name&quot; value=&quot;æ˜¯å°èƒ¡å‘€&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;/bean&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    ByType ä¸ä¼šæ ¹æ®idè¿›è¡ŒæŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡å±æ€§ç±»å‹ç›¸åŒçš„bean--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    &lt;bean id=&quot;people&quot; class=&quot;com.xh.People&quot; autowire=&quot;byType&quot;&gt;</span></span><br><span class="line"><span class="comment">        &lt;property name=&quot;name&quot; value=&quot;æ˜¯å°èƒ¡å‘€&quot;/&gt;</span></span><br><span class="line"><span class="comment">    &lt;/bean&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xh;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span>  Cat cat;</span><br><span class="line">    <span class="meta">@Autowired</span>  <span class="comment">//ä½¿ç”¨ä¹‹åget setæ–¹æ³•éƒ½ä¸éœ€è¦äº†ã€‚</span></span><br><span class="line">    <span class="keyword">private</span>  Dog dog;</span><br><span class="line">    <span class="keyword">private</span>  String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;People&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;cat=&quot;</span> + cat +</span><br><span class="line">                <span class="string">&quot;, dog=&quot;</span> + dog +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Cat <span class="title function_">getCat</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cat;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCat</span><span class="params">(Cat cat)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.cat = cat;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Dog <span class="title function_">getDog</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDog</span><span class="params">(Dog dog)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dog = dog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç›´æ¥åœ¨å±æ€§ä¸Šä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨setæ–¹å¼ä¸Šä½¿ç”¨</p><p>ä½¿ç”¨Autowiredæˆ‘ä»¬è¿setæ–¹æ³•éƒ½ä¸éœ€è¦ä½¿ç”¨äº†ï¼Œå‰ææ¡ä»¶æ˜¯ä½ è¿™ä¸ªè‡ªåŠ¨è£…é…çš„å±æ€§åœ¨IOCï¼ˆSpringï¼‰å®¹å™¨ä¸­å­˜åœ¨ï¼Œä¸”ç¬¦åˆbyName;</p><p>ç§‘æ™®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Nullable</span> å­—æ®µæ ‡è®°äº†è¿™ä¸ªæ³¨è§£ï¼Œè¯´æ˜å­—æ®µå¯ä»¥ä¸º<span class="literal">null</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Autowired &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">required</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired(required = false)</span> <span class="comment">//å¦‚æœæ˜¾ç¤ºçš„å®šä¹‰äº†Autowiredçš„requiredä¸ºfalseæ ‡å¿—è¿™ä¸ªå€¼å¯ä»¥ä¸ºç©ºå¦åˆ™ä¸å…è®¸ä¸ºç©º</span></span><br><span class="line">   </span><br></pre></td></tr></table></figure><p>å¦‚æœ@Autowiredè‡ªåŠ¨è£…é…ç¯å¢ƒæ¯”è¾ƒå¤æ‚çš„æ—¶å€™è‡ªåŠ¨è£…é…æ— æ³•é€šè¿‡ä¸€ä¸ªæ³¨è§£@Autowiredå®Œæˆçš„æ—¶å€™ï¼Œä½¿ç”¨@Qualifier(value=â€<em>*</em>â€œ)å»é…ç½®@Autowiredçš„ä½¿ç”¨ï¼ŒæŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„beanå¯¹è±¡æ³¨å…¥</p><p>javaè‡ªå¸¦@Resource</p><p>@Resourceæ³¨è§£ï¼Œé¦–å…ˆå»springå®¹å™¨ä¸­æŸ¥æ‰¾idåå­—ï¼Œæ‰¾ä¸åˆ°æŸ¥æ‰¾ç±»å‹ï¼Œåœ¨æ‰¾ä¸åˆ°æŠ¥é”™ã€‚å”¯ä¸€ï¼Œä¸èƒ½æŸ¥æ‰¾é‡å¤çš„.</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Autowired</span><span class="comment">//ä½¿ç”¨ä¹‹åget setæ–¹æ³•éƒ½ä¸éœ€è¦äº†ã€‚</span></span><br><span class="line"><span class="variable">@Qualifier</span>(value = <span class="string">&quot;dog&quot;</span>) <span class="comment">//å¦‚æœå­˜åœ¨å¤šå¯¹ç›¸åŒçš„ï¼Œéœ€è¦ç²¾å‡†æŸ¥æ‰¾åˆ°ä¸€ä¸ªï¼Œå°±éœ€è¦è¿™ä¸ªæ³¨è§£æŒ‡å®šäº†</span></span><br><span class="line">private  Dog dog;</span><br></pre></td></tr></table></figure></li></ol><p>   @Resource</p>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Resource(name=&quot;cat&quot;)</span></span><br><span class="line">    <span class="keyword">private</span>  Cat cat;</span><br><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span>  Dog dog;</span><br></pre></td></tr></table></figure><p>   @Resource å’Œ     @AutowiredåŒºåˆ«</p><ol><li>éƒ½æ˜¯ç”¨æ¥è‡ªåŠ¨è£…é…çš„ï¼Œéƒ½å¯ä»¥æ”¾åˆ°å±æ€§å­—æ®µä¸Š</li><li>@Autowired é€šè¿‡bynameçš„æ–¹å¼å®ç°,è€Œä¸”å¿…é¡»è¦æ±‚è¿™ä¸ªå¯¹è±¡å­˜åœ¨ï¼Œå¦åˆ™æŠ¥é”™</li><li>@Resourceé¦–å…ˆå»springå®¹å™¨ä¸­æŸ¥æ‰¾idåå­—ï¼Œæ‰¾ä¸åˆ°æŸ¥æ‰¾ç±»å‹ï¼ˆByTypeï¼‰ï¼Œåœ¨æ‰¾ä¸åˆ°æŠ¥é”™ã€‚å”¯ä¸€ï¼Œä¸èƒ½æŸ¥æ‰¾é‡å¤çš„.</li><li>æ‰§è¡Œé¡ºåºä¸åŒ @Autowiredé€šè¿‡ByTypeçš„æ–¹å¼å®ç°ï¼Œ@Resourceé»˜è®¤é€šè¿‡byNameçš„æ–¹å¼å®ç°</li></ol><h1 id="6-ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#6-ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="6 ä½¿ç”¨æ³¨è§£å¼€å‘"></a>6 ä½¿ç”¨æ³¨è§£å¼€å‘</h1><p>åœ¨spring4ä»¥åï¼Œè¦ä½¿ç”¨æ³¨è§£å¼€å‘ï¼Œå¿…é¡»å¯¼å…¥Aopä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æŒ‡å®šè¦æ‰«æçš„åŒ…ï¼Œè¿™ä¸ªåŒ…ä¸‹é¢çš„æ³¨è§£å°±ä¼šç”Ÿæ•ˆ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.xh&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>&gt;</span><span class="tag">&lt;/<span class="name">context:annotation-config</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;bean id=&quot;user&quot; class=&quot;com.xh.dao.User&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li><p>beanæ³¨å…¥</p></li><li><p>å±æ€§å¦‚ä½•æ³¨å…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span> <span class="comment">// ç»„ä»¶ ç­‰ä»·äº&lt;bean id=&quot;user&quot; class=&quot;com.xh.dao.User&quot;/&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span>  String name ; <span class="comment">//= &quot;å°é»‘&quot;;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç›¸å½“äº&lt;property name=&quot;name&quot; value=&quot;å°é»‘&quot;&gt;</span></span><br><span class="line">    <span class="meta">@Value(&quot;å°é»‘&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><ol><li><p>è¡ç”Ÿçš„æ³¨è§£</p><p>@Component æœ‰å‡ ä¸ªè¡ç”Ÿæ³¨è§£ï¼Œæˆ‘ä»¬åœ¨webå¼€å‘ä¸­ï¼Œä¼šæŒ‰ç…§mvcä¸‰å±‚æ¶æ„åˆ†å±‚</p><p>dao ã€@Repositoryã€‘</p><p>bean ã€@Serviceã€‘</p><p>service ã€@Controllerã€‘</p><p>è¿™å››ä¸ªæ³¨è§£åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä»£è¡¨å°†æŸä¸ªç±»æ³¨å†Œåˆ°springä¸­è£…é…ã€‚</p></li><li><p>è‡ªåŠ¨è£…é…é…ç½®</p><p>@Autowired</p></li><li><p>ä½œç”¨åŸŸ</p><p>@Scope(â€œâ€)  æŒ‡å®šæ¨¡å¼ å•ä¾‹æˆ–è€…åŸå‹æ¨¡å¼</p></li><li><p>æ€»ç»“</p><p>xmlä¸æ³¨è§£</p><ul><li><p>Xmlæ›´åŠ ä¸‡èƒ½ï¼Œé€‚ç”¨äºä»»ä½•åœºæ‰€ï¼ç»´æŠ¤æ–¹ä¾¿ç®€å•</p></li><li><p>æ³¨è§£ ä¸æ˜¯è‡ªå·±çš„ç±»ä½¿ç”¨ä¸äº†ï¼Œç»´æŠ¤ç›¸å¯¹å¤æ‚ï¼</p></li></ul><p>Xmlä¸æ³¨è§£æœ€ä½³å®è·µ</p><ul><li><p>xmlç”¨æ¥ç®¡ç†bean</p></li><li><p>æ³¨è§£åªè´Ÿè´£å®Œæˆå±æ€§çš„æ³¨å…¥</p></li><li><p>æˆ‘ä»¬åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­åªéœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼šåªéœ€è¦å¼€å¯æ³¨è§£çš„æ”¯æŒã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.xh&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>&gt;</span><span class="tag">&lt;/<span class="name">context:annotation-config</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li></ol><h1 id="7-ä½¿ç”¨javaæ–¹å¼é…ç½®spring"><a href="#7-ä½¿ç”¨javaæ–¹å¼é…ç½®spring" class="headerlink" title="7 ä½¿ç”¨javaæ–¹å¼é…ç½®spring"></a>7 ä½¿ç”¨javaæ–¹å¼é…ç½®spring</h1><p>javaConfig</p><p>å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xh.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>  <span class="comment">//è¿™é‡Œè¿™ä¸ªæ³¨è§£çš„æ„æ€è¯´æ˜è¿™ä¸ªç±»è¢«æ³¨å†Œåˆ°Springä¸­</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Value(&quot;ç½—å°é»‘&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xh.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xh.bean.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">//è¿™ä¸ªä¹Ÿä¼šè¢«Springå®¹å™¨æ‰˜ç®¡ï¼Œæ³¨å†Œåˆ°å®¹å™¨ä¸­</span></span><br><span class="line"><span class="comment">//å› ä¸ºä»–@Configurationä»£è¡¨è¿™ä¸ªæ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå°±å’Œæˆ‘ä»¬ä¹‹å‰çœ‹çš„bean.xml</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.xh&quot;)</span></span><br><span class="line"><span class="meta">@Import(UserConfig1.class)</span> <span class="comment">//å¯¼å…¥å¦ä¸€ä¸ªé…ç½®ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserConfig</span> &#123;</span><br><span class="line">   <span class="meta">@Bean</span>  <span class="comment">//æ³¨å†Œä¸€ä¸ªbeanå°±ç›¸å½“äºä¸€ä¸ªSpringxmlçš„beanè¡¨æƒ…</span></span><br><span class="line">   <span class="comment">//è¿™ä¸ªåå­—çš„æ–¹æ³•ï¼Œå°±æƒ³å½“ä¸</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span>  <span class="title class_">User</span>();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.xh.bean.User;</span><br><span class="line"><span class="keyword">import</span> com.xh.config.UserConfig;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span>  <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//å¦‚æœå®Œå…¨ä½¿ç”¨äº†é…ç½®ç±»çš„æ–¹å¼å»åšï¼Œæˆ‘ä»¬å°±åªèƒ½é€šè¿‡AnnotationConfig ä¸Šä¸‹æ–‡æ¥è·å–å®¹å™¨</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(UserConfig.class);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;user&quot;</span>,User.class);</span><br><span class="line">        System.out.println(</span><br><span class="line">                user.getName()</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™ç§çº¯javaçš„é…ç½®åœ¨SringBootéšå¤„å¯è§ã€‚</p><h1 id="8-AOP-ä¹‹å‰ä»£ç†æ¨¡å¼"><a href="#8-AOP-ä¹‹å‰ä»£ç†æ¨¡å¼" class="headerlink" title="8 AOP ä¹‹å‰ä»£ç†æ¨¡å¼"></a>8 AOP ä¹‹å‰ä»£ç†æ¨¡å¼</h1><p>ä¸ºä»€ä¹ˆè¦å­¦ä¹ ä»£ç†æ¨¡å¼ï¼Ÿ</p><p>è¿™å°±æ˜¯SpringAopçš„åº•å±‚ ã€Spring AOP ã€‘ ã€Spring MVCã€‘ </p><h3 id="8-1-é™æ€ä»£ç†æ¨¡å¼-ï¼š"><a href="#8-1-é™æ€ä»£ç†æ¨¡å¼-ï¼š" class="headerlink" title="8.1 é™æ€ä»£ç†æ¨¡å¼ ï¼š"></a>8.1 é™æ€ä»£ç†æ¨¡å¼ ï¼š</h3><ul><li><p>é™æ€ä»£ç†æ¨¡å¼ ï¼š</p><ul><li><p>æŠ½è±¡è§’è‰²ï¼š ä¸€èˆ¬ä½¿ç”¨æ¥å£å’ŒæŠ½è±¡ç±»æ¥è§£å†³</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Rent</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li></ul><ul><li><p>çœŸå®è§’è‰²ï¼š è¢«ä»£ç†çš„è§’è‰² </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Host</span> <span class="keyword">implements</span> <span class="title class_">Rent</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ¿ä¸œå‡ºç§Ÿæˆ¿å­&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>ä»£ç†è§’è‰²ï¼š ä»£ç†çœŸå®è§’è‰²ï¼Œä»£ç†çœŸå®è§’è‰²åï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šåšä¸€äº›é™„å±æ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Proxy</span> <span class="keyword">implements</span> <span class="title class_">Rent</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Host host;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Proxy</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Proxy</span><span class="params">(Host host)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.host = host;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span> &#123;</span><br><span class="line">        host.rent();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸­ä»‹å¸¦ä½ çœ‹æˆ¿</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">seeHouse</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸­ä»‹å¸¦ä½ çœ‹æˆ¿&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ”¶å–ä¸­ä»‹è´¹ç”¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fare</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ”¶å–ä¸­ä»‹è´¹&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>å®¢æˆ·:è®¿é—®ä»£ç†è§’è‰²</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="comment">/* Host host = new Host();</span></span><br><span class="line"><span class="comment">        host.rent();*/</span></span><br><span class="line">        <span class="comment">//æˆ¿ä¸œä¸åœ¨ï¼Œæ‰¾ä»£ç†</span></span><br><span class="line">        <span class="type">Host</span> <span class="variable">host</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Host</span>();</span><br><span class="line">        <span class="comment">//ä»£ç† ä¸­ä»‹å¸®æˆ¿ä¸œç§Ÿæˆ¿å­ï¼Œä»£ç†ä¸€èˆ¬æœ‰é™„å±æ¡ä»¶</span></span><br><span class="line">        <span class="type">Proxy</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Proxy</span>(host);</span><br><span class="line">        <span class="comment">//ä½ ä¸éœ€è¦é¢å¯¹æˆ¿ä¸œï¼Œç›´æ¥å¯ä»¥ç§Ÿåˆ°æˆ¿å­</span></span><br><span class="line">        proxy.rent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>ä»£ç†æ¨¡å¼çš„å¥½å¤„</p><ul><li><p>å¯ä»¥ä½¿å¾—çœŸå®è§’è‰²çš„æ“ä½œæ›´åŠ çº¯ç²¹ï¼Œä¸ç”¨å»å…³æ³¨ä¸€äº›å…¬å…±çš„ä¸šåŠ¡</p></li><li><p>å…¬å…±ä¹Ÿå°±äº¤ç»™ä»£ç†è§’è‰²ï¼Œå®ç°äº†ä¸šåŠ¡åˆ†å·¥</p></li><li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‹“å±•çš„æ—¶å€™ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†</li></ul><p>ç¼ºç‚¹</p><p>ä¸€ä¸ªçœŸå®çš„è§’è‰²ä¼šäº§ç”Ÿä¸€ä¸ªä»£ç†è§’è‰²ï¼Œä»£ç é‡ä¼šç¿»å€ï¼Œå¼€å‘æ•ˆç‡ä¼šå˜ä½ã€‚</p></li></ul><h3 id="8-2-å†æ¬¡ç†è§£"><a href="#8-2-å†æ¬¡ç†è§£" class="headerlink" title="8.2 å†æ¬¡ç†è§£"></a>8.2 å†æ¬¡ç†è§£</h3><p>å¯¹åº”demo02.</p><h3 id="8-3-åŠ¨æ€ä»£ç†"><a href="#8-3-åŠ¨æ€ä»£ç†" class="headerlink" title="8.3 åŠ¨æ€ä»£ç†"></a>8.3 åŠ¨æ€ä»£ç†</h3><ul><li><p>åŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†ä¸€æ ·</p></li><li><p>åŠ¨æ€ä»£ç†çš„ä»£ç†æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œä¸æ˜¯æˆ‘ä»¬ç›´æ¥å†™å¥½çš„</p></li><li><p>åŠ¨æ€ä»£ç†åº•å±‚æ˜¯åå°„</p></li><li><p>åŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤å¤§ç±»ï¼š åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†ï¼ŒåŸºäºç±»çš„åŠ¨æ€ä»£ç†</p><ul><li>åŸºäºæ¥å£ â€”- JDKå®ç°åŠ¨æ€ä»£ç†</li><li>åŸºäºç±»ï¼š cglib</li><li>javaå­—èŠ‚ç å®ç°ï¼šjavaist</li></ul><p>éœ€è¦äº†è§£ä¸¤ä¸ªç±»Proxyï¼ŒInvocationHandler</p><p>åŠ¨æ€ä»£ç†çš„å¥½å¤„ï¼š</p><ul><li><p>å¯ä»¥ä½¿å¾—çœŸå®è§’è‰²çš„æ“ä½œæ›´åŠ çº¯ç²¹ï¼Œä¸ç”¨å»å…³æ³¨ä¸€äº›å…¬å…±çš„ä¸šåŠ¡ã€‚</p></li><li><p>å…¬å…±ä¸šç»©äº¤ç»™äº†ä»£ç†è§’è‰²ï¼Œå®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥</p></li><li><p>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‹“å±•çš„æ—¶å€™ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†</p></li><li><p>ä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»ä»£ç†çš„æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸€èˆ¬å°±æ˜¯å¯¹åº”ä¸€ç±»æ¥å£ã€‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//çœŸå®è§’è‰²</span></span><br><span class="line">        <span class="type">Host</span> <span class="variable">host</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Host</span>();</span><br><span class="line">        <span class="comment">//ä»£ç†è§’è‰²ï¼šç°åœ¨æ²¡æœ‰</span></span><br><span class="line">        <span class="type">ProxyInvocationHandler</span> <span class="variable">proxyInvocationHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProxyInvocationHandler</span>();</span><br><span class="line">        proxyInvocationHandler.setRent(host);</span><br><span class="line">        <span class="type">Rent</span> <span class="variable">proxy</span> <span class="operator">=</span> (Rent) proxyInvocationHandler.getProxy();</span><br><span class="line">        proxy.rent();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Host</span> <span class="keyword">implements</span> <span class="title class_">Rent</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ¿ä¸œå‡ºç§Ÿæˆ¿å­&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyInvocationHandler</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line">    <span class="comment">//è¢«ä»£ç†çš„æ¥å£</span></span><br><span class="line">    <span class="keyword">private</span> Rent rent;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Rent <span class="title function_">getRent</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> rent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRent</span><span class="params">(Rent rent)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rent = rent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getProxy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span>  Proxy.newProxyInstance(<span class="built_in">this</span>.getClass().getClassLoader(),rent.getClass().getInterfaces(),<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//åŠ¨æ€ä»£ç†å®ä¾‹ï¼Œå¹¶è¿”å›ç»“æœ</span></span><br><span class="line">        seeHouse();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(rent,args);</span><br><span class="line">        face();</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">void</span>  <span class="title function_">seeHouse</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸­ä»‹çœ‹æˆ¿å­&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">void</span>  <span class="title function_">face</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ”¶å–ä¸­ä»‹è´¹ç”¨&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Rent</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">UserServiceImpl</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line">        <span class="comment">//ä»£ç†è§’è‰²ä¸å­˜åœ¨</span></span><br><span class="line">        <span class="type">ProxyInvocationHandler</span> <span class="variable">pih</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProxyInvocationHandler</span>();</span><br><span class="line">        pih.setTarget(userService);</span><br><span class="line">        <span class="type">UserService</span> <span class="variable">proxy</span> <span class="operator">=</span> (UserService) pih.getProxy();</span><br><span class="line">        proxy.delete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyInvocationHandler</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line">    <span class="comment">//è¢«ä»£ç†çš„æ¥å£</span></span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTarget</span><span class="params">(Object target)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getProxy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span>  Proxy.newProxyInstance(<span class="built_in">this</span>.getClass().getClassLoader(),target.getClass().getInterfaces(),<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//åŠ¨æ€ä»£ç†å®ä¾‹ï¼Œå¹¶è¿”å›ç»“æœ</span></span><br><span class="line">        log(method.getName());<span class="comment">//åå°„æ–¹æ³•</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(target,args);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†&quot;</span>+ msg + <span class="string">&quot;æ–¹æ³•&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>â€‹    </p></li></ul><h1 id="9-spring-Aop-é¢å‘åˆ‡é¢ç¼–ç¨‹"><a href="#9-spring-Aop-é¢å‘åˆ‡é¢ç¼–ç¨‹" class="headerlink" title="9 spring Aop(é¢å‘åˆ‡é¢ç¼–ç¨‹)"></a>9 spring Aop(é¢å‘åˆ‡é¢ç¼–ç¨‹)</h1><h3 id="9-1ä»€ä¹ˆæ˜¯Aop"><a href="#9-1ä»€ä¹ˆæ˜¯Aop" class="headerlink" title="9.1ä»€ä¹ˆæ˜¯Aop"></a>9.1ä»€ä¹ˆæ˜¯Aop</h3><p>aopæ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œé€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€å®ç°ç¨‹åºåŠŸèƒ½çš„å”¯ä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ï¼ŒAopæ˜¯OOPçš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§è¡ç”ŸèŒƒå¼ï¼Œåˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„ä¸ªéƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜å¼€å‘çš„æ•ˆç‡ã€‚</p><h3 id="9-2-Aopåœ¨springçš„ä½œç”¨"><a href="#9-2-Aopåœ¨springçš„ä½œç”¨" class="headerlink" title="9. 2 Aopåœ¨springçš„ä½œç”¨"></a>9. 2 Aopåœ¨springçš„ä½œç”¨</h3><p><strong>æä¾›å£°æ˜å¼äº‹åŠ¡ï¼›å…è®¸ç”¨æˆ·è‡ªå®šä¹‰åˆ‡é¢</strong></p><ul><li>æ¨ªåˆ‡å…³æ³¨ï¼ˆASPECTï¼‰:æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œè¢«æ¨¡å—åŒ–çš„ç‰¹æ®Šå¯¹è±¡ã€‚ï¼ˆç±»ï¼‰</li><li>åˆ‡é¢ï¼ˆASPECTï¼‰:åˆ‡é¢å¿…é¡»è¦å®Œæˆçš„å·¥ä½œã€‚ï¼ˆç±»çš„æ–¹æ³•ï¼‰</li><li>ç›®æ ‡ï¼ˆAdviceï¼‰: è¢«é€šçŸ¥å¯¹è±¡ã€‚</li><li>ä»£ç†ï¼ˆProxyï¼‰:å‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„å¯¹è±¡ã€‚</li><li>åˆ‡å…¥ç‚¹ï¼ˆPointCutï¼‰:åˆ‡é¢é€šçŸ¥æ‰§è¡Œçš„â€œåœ°ç‚¹â€çš„å®šä¹‰</li><li>è¿æ¥ç‚¹ï¼ˆjoinPointï¼‰: ä¸åˆ‡å…¥ç‚¹åŒ¹é…çš„æ‰§è¡Œç‚¹ã€‚</li></ul><p>Spring Aopä¸­æ”¯æŒ5ç§ç±»å‹çš„Advice</p><p>å‰ç½®é€šçŸ¥ï¼š æ–¹æ³•å‰</p><p>åç½®é€šçŸ¥ï¼š æ–¹æ³•å</p><p>ç¯ç»•é€šçŸ¥ï¼šæ–¹æ³•å‰å</p><p>å¼‚å¸¸æŠ›å‡ºé€šçŸ¥ï¼š æ–¹æ³•æŠ›å‡ºå¼‚å¸¸</p><p>å¼•ä»‹é€šçŸ¥ï¼šç±»ä¸­å¢åŠ æ–°çš„æ–¹æ³•å±æ€§</p><h3 id="9-3-Springä¸­ä½¿ç”¨Aop"><a href="#9-3-Springä¸­ä½¿ç”¨Aop" class="headerlink" title="9.3 Springä¸­ä½¿ç”¨Aop"></a>9.3 Springä¸­ä½¿ç”¨Aop</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--ä½¿ç”¨springApiå¿…é¡»å¿…é¡»å¯¼å…¥çš„åŒ…--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- an HTTP Session-scoped bean exposed as a proxy --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userPreferences&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.something.UserPreferences&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;session&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- instructs the container to proxy the surrounding bean --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:scoped-proxy</span>/&gt;</span> (1)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- a singleton-scoped bean injected with a proxy to the above bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.something.SimpleUserService&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- a reference to the proxied userPreferences bean --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userPreferences&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userPreferences&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ–¹å¼ä¸€ï¼šä½¿ç”¨springçš„APIæ¥å£ã€ä¸»è¦SpringAPIæ¥å£å®ç°ã€‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;addä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;deleteä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;updateä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;queryä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Log</span> <span class="keyword">implements</span> <span class="title class_">MethodBeforeAdvice</span> &#123;</span><br><span class="line">   <span class="comment">//method:è¦æ‰§è¡Œçš„ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line">    <span class="comment">//objects: å‚æ•°</span></span><br><span class="line">    <span class="comment">//target ç›®æ ‡å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(Method method, Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(target.getClass().getName()+<span class="string">&quot;çš„&quot;</span>+method.getName()+<span class="string">&quot;è¢«æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AfterLog</span> <span class="keyword">implements</span> <span class="title class_">AfterReturningAdvice</span> &#123;</span><br><span class="line">   <span class="comment">//returnValue:è¿”å›å€¼</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">(Object returnValue, Method method, Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†&quot;</span>+ method.getName()+ <span class="string">&quot;æ–¹æ³•ï¼Œè¿”å›ç»“æœä¸º&quot;</span>+returnValue);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">     <span class="comment">//æ³¨æ„ï¼ŒåŠ¨æ€ä»£ç†ï¼Œä»£ç†çš„æ˜¯æ¥å£</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> (UserService) context.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line">        userService.add();</span><br><span class="line">        userService.query();</span><br><span class="line">        userService.update();</span><br><span class="line">        userService.delete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--        æ³¨å†Œbean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.service.UserServiceImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;log&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.log.Log&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;afterLog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.log.AfterLog&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--   é…ç½®aop--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        åˆ‡å…¥ç‚¹--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.xh.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--æ‰§è¡Œç¯ç»•å¢åŠ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;log&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;afterLog&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ–¹å¼äºŒï¼šè‡ªå®šä¹‰æ¥å®ç°AOPã€ä¸»è¦æ˜¯åˆ‡é¢å®šä¹‰ã€‘</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--        æ³¨å†Œbean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.service.UserServiceImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;log&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.log.Log&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;afterLog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.log.AfterLog&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ–¹å¼ä¸€ï¼šéœ€è¦åŸç”ŸSpringAopæ¥å£</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      é…ç½®aopï¼šéœ€è¦å¯¼å…¥AOpçº¦æŸ--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  &lt;aop:config&gt;</span></span><br><span class="line"><span class="comment">          &amp;lt;!&amp;ndash;åˆ‡å…¥ç‚¹&amp;ndash;&amp;gt;</span></span><br><span class="line"><span class="comment">          &lt;aop:pointcut id=&quot;pointcut&quot; expression=&quot;execution(* com.xh.service.UserServiceImpl.*(..))&quot;/&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">          &amp;lt;!&amp;ndash;æ‰§è¡Œç¯ç»•å¢åŠ &amp;ndash;&amp;gt;</span></span><br><span class="line"><span class="comment">          &lt;aop:advisor advice-ref=&quot;log&quot; pointcut-ref=&quot;pointcut&quot;/&gt;</span></span><br><span class="line"><span class="comment">          &lt;aop:advisor advice-ref=&quot;afterLog&quot; pointcut-ref=&quot;pointcut&quot;/&gt;</span></span><br><span class="line"><span class="comment">      &lt;/aop:config&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ–¹å¼äºŒ  è‡ªå®šä¹‰ç±» --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;diy&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.diy.DiyPointCut&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è‡ªå®šä¹‰åˆ‡é¢ refè¦å¼•ç”¨çš„ç±»--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;diy&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--åˆ‡å…¥ç‚¹--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;point&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.xh.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--  é€šçŸ¥ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;point&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;after&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;point&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DiyPointCut</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•æ‰§è¡Œå‰&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">void</span>  <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•æ‰§è¡Œå&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line">     <span class="comment">//æ³¨æ„ï¼ŒåŠ¨æ€ä»£ç†ï¼Œä»£ç†çš„æ˜¯æ¥å£</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> (UserService) context.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line">        userService.add();</span><br><span class="line">        userService.query();</span><br><span class="line">        userService.update();</span><br><span class="line">        userService.delete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ–¹æ³•ä¸‰ï¼šä½¿ç”¨æ³¨è§£</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">&lt;!--æ–¹å¼ä¸‰--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;annotationPointCut&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.xh.diy.AnnotationPointCut&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--   å¼€å¯æ³¨è§£æ”¯æŒ  JDKï¼ˆé»˜è®¤ proxy-target-class=&quot;false&quot;ï¼‰ cglib(proxy-target-class=&quot;true&quot;)--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//æ–¹å¼ä¸‰ä½¿ç”¨æ³¨è§£æ¥å®ç°</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//æ ‡æ³¨è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªåˆ‡é¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationPointCut</span> &#123;</span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.xh.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;=====æ–¹æ³•æ‰§è¡Œå‰======&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After(&quot;execution(* com.xh.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;=====æ–¹æ³•æ‰§è¡Œå======&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åœ¨ç¯ç»•å¢å¼ºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å®šä¸€ä¸ªç±»ï¼Œä»£è¡¨æˆ‘ä»¬è¦å¤„ç†åˆ‡å…¥çš„ç‚¹</span></span><br><span class="line">    <span class="meta">@Around(&quot;execution(* com.xh.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//  Signature signature = proceedingJoinPoint.getSignature();//è·å¾—ç­¾å</span></span><br><span class="line"></span><br><span class="line">     <span class="comment">//   System.out.println(&quot;signature:&quot; + signature);</span></span><br><span class="line">        <span class="comment">//æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•å‰&quot;</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">proceed</span> <span class="operator">=</span>  proceedingJoinPoint.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•å&quot;</span>);</span><br><span class="line">        System.out.println(proceed);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="10-springæ•´åˆMybatis"><a href="#10-springæ•´åˆMybatis" class="headerlink" title="10  springæ•´åˆMybatis"></a>10  springæ•´åˆMybatis</h1><p>å›é¡¾mybatis:</p><ol><li><p>ç¼–å†™å®ä½“ç±»</p></li><li><p>ç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶</p></li><li><p>ç¼–å†™æ¥å£</p></li><li><p>ç¼–å†™mapper.xml</p></li><li><p>æµ‹è¯•</p></li></ol><h1 id="11-Springå£°æ˜äº‹åŠ¡"><a href="#11-Springå£°æ˜äº‹åŠ¡" class="headerlink" title="11 .Springå£°æ˜äº‹åŠ¡"></a>11 .Springå£°æ˜äº‹åŠ¡</h1><p>æŠŠä¸€ç»„ä¸šåŠ¡å½“æˆä¸€ä¸ªä¸šåŠ¡æ¥åšï¼Œè¦ä¹ˆæˆåŠŸè¦ä¹ˆå¤±è´¥</p><p>äº‹åŠ¡åœ¨é¡¹ç›®ä¸­ï¼Œååˆ†é‡è¦ï¼Œæ¶‰åŠåˆ°æ•°æ®çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œä¸èƒ½é©¬è™ã€‚</p><p>ç¡®ä¿å®Œæ•´æ€§å’Œä¸€è‡´æ€§</p><h4 id="ACID"><a href="#ACID" class="headerlink" title="ACID:"></a>ACID:</h4><p>åŸå­æ€§ï¼šè¦ä¹ˆæ‰§è¡Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œ</p><p>éš”ç¦»æ€§ï¼šå¤šä¸ªä¸šåŠ¡å¯ä»¥æ“ä½œåŒä¸€ä¸ªèµ„æºé˜²æ­¢æ•°æ®æŸå</p><p>æŒä¹…æ€§ï¼š äº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œæ— è®ºç³»ç»Ÿå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Œç»“æœéƒ½ä¸ä¼šå†è¢«å½±å“ï¼Œè¢«æŒä¹…åŒ–çš„å†™åˆ°å­˜å‚¨å™¨ä¸­ã€‚</p><p>ä¸€è‡´æ€§ï¼š</p><h4 id="Springä¸­äº‹åŠ¡çš„å£°æ˜ï¼š"><a href="#Springä¸­äº‹åŠ¡çš„å£°æ˜ï¼š" class="headerlink" title="Springä¸­äº‹åŠ¡çš„å£°æ˜ï¼š"></a>Springä¸­äº‹åŠ¡çš„å£°æ˜ï¼š</h4><p>AOP ï¼š å£°æ˜å¼äº‹åŠ¡</p><p>ç¼–ç¨‹å¼äº‹åŠ¡ï¼šéœ€è¦åœ¨ä»£ç ä¸­è¿›è¡Œäº‹åŠ¡çš„ç®¡ç†</p><h4 id="ä¸ºä»€ä¹ˆè¦äº‹åŠ¡ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦äº‹åŠ¡ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦äº‹åŠ¡ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦äº‹åŠ¡ï¼Ÿ</h4><blockquote><p>å¦‚æœæ²¡æœ‰äº‹åŠ¡ï¼Œå¯èƒ½å­˜åœ¨æ•°æ®æäº¤ä¸ä¸€è‡´ã€‚</p><p>å¦‚æœæˆ‘ä»¬ä¸åœ¨Springä¸­å»é…ç½®å£°æ˜å¼äº‹åŠ¡ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨ä»£ç ä¸­æ‰‹åŠ¨è®¾ç½®äº‹åŠ¡ã€‚</p><p>äº‹åŠ¡åœ¨é¡¹ç›®çš„å¼€å‘ä¸­å¾ˆé‡è¦ï¼Œæ¶‰åŠåˆ°é¡¹ç›®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚</p><p>åœ¨springä¸­éœ€è¦æ³¨æ„ï¼šåœ¨é…ç½®çš„è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„ç©ºæ ¼ã€‚</p><p>æœ‰ç©ºæ ¼å’Œæ²¡æœ‰ç©ºæ ¼çš„åŒºåˆ«æ˜¯å¾ˆå¤§çš„ã€‚</p></blockquote>]]></content>
    
    
    <summary type="html">ä½œä¸ºjavaæ¡†æ¶ç•Œæœ€å—æ¬¢è¿çš„æ¡†æ¶ä¹‹ä¸€ï¼ŒSpringçš„IOCå’ŒAOPä¸¤å¤§æ€æƒ³åŠå…¶é‡è¦ï¼Œä»¥è‡³äºä¹‹åè¡ç”Ÿå‡ºæ¥çš„Springæ¡†æ¶éƒ½ä½¿ç”¨äº†è¿™ä¸€æ“ä½œ</summary>
    
    
    
    <category term="javaå­¦ä¹ " scheme="https://www.blog.909111.xyz/categories/java%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="Spring" scheme="https://www.blog.909111.xyz/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>Vue2å­¦ä¹ ç¬”è®°å’Œå®ä¾‹</title>
    <link href="https://www.blog.909111.xyz/posts/640a35.html"/>
    <id>https://www.blog.909111.xyz/posts/640a35.html</id>
    <published>2023-11-09T02:50:23.339Z</published>
    <updated>2024-04-22T08:23:52.781Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Vue2"><a href="#Vue2" class="headerlink" title="Vue2"></a>Vue2</h1><h2 id="ä¸€-ä»€ä¹ˆæ˜¯Vue"><a href="#ä¸€-ä»€ä¹ˆæ˜¯Vue" class="headerlink" title="ä¸€.ä»€ä¹ˆæ˜¯Vue?"></a>ä¸€.ä»€ä¹ˆæ˜¯Vue?</h2><p>Vue (è¯»éŸ³ /vjuË/ï¼Œç±»ä¼¼äº <strong>view</strong>) æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„<strong>æ¸è¿›å¼æ¡†æ¶</strong>ã€‚ä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVue è¢«è®¾è®¡ä¸ºå¯ä»¥è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨ã€‚Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œä¸ä»…æ˜“äºä¸Šæ‰‹ï¼Œè¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢ï¼Œå½“ä¸<a href="https://v2.cn.vuejs.org/v2/guide/single-file-components.html">ç°ä»£åŒ–çš„å·¥å…·é“¾</a>ä»¥åŠå„ç§<a href="https://github.com/vuejs/awesome-vue#libraries--plugins">æ”¯æŒç±»åº“</a>ç»“åˆä½¿ç”¨æ—¶ï¼ŒVue ä¹Ÿå®Œå…¨èƒ½å¤Ÿä¸ºå¤æ‚çš„å•é¡µåº”ç”¨æä¾›é©±åŠ¨ã€‚</p><h3 id="1-1-å®‰è£…vue"><a href="#1-1-å®‰è£…vue" class="headerlink" title="1.1 å®‰è£…vue"></a>1.1 å®‰è£…vue</h3><p>å°è¯• Vue.js æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <a href="https://codesandbox.io/s/github/vuejs/v2.vuejs.org/tree/master/src/v2/examples/vue-20-hello-world">Hello World ä¾‹å­</a>ã€‚ä½ å¯ä»¥åœ¨æµè§ˆå™¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€å®ƒï¼Œè·Ÿç€ä¾‹å­å­¦ä¹ ä¸€äº›åŸºç¡€ç”¨æ³•ã€‚æˆ–è€…ä½ ä¹Ÿå¯ä»¥<a href="https://github.com/vuejs/v2.vuejs.org/blob/master/src/v2/examples/vue-20-hello-world/index.html">åˆ›å»ºä¸€ä¸ª <code>.html</code> æ–‡ä»¶</a>ï¼Œç„¶åé€šè¿‡å¦‚ä¸‹æ–¹å¼å¼•å…¥ Vueï¼š </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç”Ÿäº§ç¯å¢ƒç‰ˆæœ¬ï¼Œä¼˜åŒ–äº†å°ºå¯¸å’Œé€Ÿåº¦ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="1-2-å£°æ˜å¼æ¸²æŸ“"><a href="#1-2-å£°æ˜å¼æ¸²æŸ“" class="headerlink" title="1.2 å£°æ˜å¼æ¸²æŸ“"></a>1.2 å£°æ˜å¼æ¸²æŸ“</h3><p>å®é™…ä¸Šè¿™ä¸ªå°±æ˜¯å°†æ•°æ®å¯ä»¥åŠ¨æ€é‡‡ç”¨ç®€ä»‹çš„æ¨¡ç‰ˆè¯­æ³•æ¥å£°æ˜å¼åœ°å°†æ•°æ®æ¸²æŸ“è¿›DOMç³»ç»Ÿä¸­ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123; message &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>:&#123;</span><br><span class="line">        <span class="attr">message</span>:<span class="string">&quot;Miaow.Y.Hu!&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ç¬¬ä¸€ä¸ªvueåº”ç”¨ï¼Œç²—çœ‹å°±æ˜¯æ¸²æŸ“äº†ä¸€ä¸ªå­—ç¬¦ä¸²æ¨¡ç‰ˆï¼Œä½†æ˜¯å…¶å®vueåœ¨èƒŒååšäº†å¤§é‡çš„å·¥ä½œã€‚å…¶æ‰€æœ‰çš„ä¸œè¥¿éƒ½æ˜¯å“åº”å¼çš„ã€‚æˆ‘ä»¬é€šè¿‡ç¡®è®¤çš„æ–¹æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vm.message;</span><br><span class="line">//æˆ–è€…</span><br><span class="line">vm.message = <span class="string">&quot;miao&quot;</span>;</span><br></pre></td></tr></table></figure><p>ä½ å°±å¯ä»¥çœ‹åˆ°ä¸Šä¾‹ç›¸åº”çš„è¿›è¡Œæ›´æ–°ã€‚</p><p>æ³¨æ„æˆ‘ä»¬ä¸å†å’ŒHTMLè¿›è¡Œäº¤äº’å¤„ç†äº†ã€‚ä¸€ä¸ªvueåº”ç”¨å°†ä¼šæŒ‚è½½åˆ°ä¸€ä¸ªDOMå…ƒç´ ä¸Šï¼Œè¿™ä¸ªä¾‹å­æ˜¯<code>#app</code>ç„¶åå¯¹å…¶è¿›è¡Œå®Œå…¨æ§åˆ¶ã€‚</p><p>é™¤äº†æ–‡æœ¬æ’å…¥å€¼ï¼Œè¿˜æœ‰ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app-2&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-bind:title</span>=<span class="string">&quot;message&quot;</span>&gt;</span></span><br><span class="line">    é¼ æ ‡æ‚¬åœå‡ ç§’é’ŸæŸ¥çœ‹æ­¤å¤„åŠ¨æ€ç»‘å®šçš„æç¤ºä¿¡æ¯ï¼</span><br><span class="line">  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app2 = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app-2&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;é¡µé¢åŠ è½½äº &#x27;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toLocaleString</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬é‡åˆ°äº†ä¸€ç‚¹æ–°ä¸œè¥¿ã€‚ä½ çœ‹åˆ°çš„ <code>v-bind</code> attribute è¢«ç§°ä¸º<strong>æŒ‡ä»¤</strong>ã€‚æŒ‡ä»¤å¸¦æœ‰å‰ç¼€ <code>v-</code>ï¼Œä»¥è¡¨ç¤ºå®ƒä»¬æ˜¯ Vue æä¾›çš„ç‰¹æ®Š attributeã€‚å¯èƒ½ä½ å·²ç»çŒœåˆ°äº†ï¼Œå®ƒä»¬ä¼šåœ¨æ¸²æŸ“çš„ DOM ä¸Šåº”ç”¨ç‰¹æ®Šçš„å“åº”å¼è¡Œä¸ºã€‚åœ¨è¿™é‡Œï¼Œè¯¥æŒ‡ä»¤çš„æ„æ€æ˜¯ï¼šâ€œå°†è¿™ä¸ªå…ƒç´ èŠ‚ç‚¹çš„ <code>title</code> attribute å’Œ Vue å®ä¾‹çš„ <code>message</code> property ä¿æŒä¸€è‡´â€ã€‚</p><p>å¦‚æœä½ å†æ¬¡æ‰“å¼€æµè§ˆå™¨çš„ JavaScript æ§åˆ¶å°ï¼Œè¾“å…¥ <code>app2.message = &#39;æ–°æ¶ˆæ¯&#39;</code>ï¼Œå°±ä¼šå†ä¸€æ¬¡çœ‹åˆ°è¿™ä¸ªç»‘å®šäº† <code>title</code> attribute çš„ HTML å·²ç»è¿›è¡Œäº†æ›´æ–°ã€‚</p><h3 id="1-3-æ¡ä»¶ä¸å¾ªç¯"><a href="#1-3-æ¡ä»¶ä¸å¾ªç¯" class="headerlink" title="1.3 æ¡ä»¶ä¸å¾ªç¯"></a>1.3 æ¡ä»¶ä¸å¾ªç¯</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app-3&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;seen&quot;</span>&gt;</span>ç°åœ¨ä½ çœ‹åˆ°æˆ‘äº†<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app3 = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app-3&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">seen</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç»§ç»­åœ¨æ§åˆ¶å°è¾“å…¥ <code>app3.seen = false</code>ï¼Œä½ ä¼šå‘ç°ä¹‹å‰æ˜¾ç¤ºçš„æ¶ˆæ¯æ¶ˆå¤±äº†ã€‚</p><p>è¿™ä¸ªä¾‹å­æ¼”ç¤ºäº†æˆ‘ä»¬ä¸ä»…å¯ä»¥æŠŠæ•°æ®ç»‘å®šåˆ° DOM æ–‡æœ¬æˆ– attributeï¼Œè¿˜å¯ä»¥ç»‘å®šåˆ° DOM <strong>ç»“æ„</strong>ã€‚æ­¤å¤–ï¼ŒVue ä¹Ÿæä¾›ä¸€ä¸ªå¼ºå¤§çš„è¿‡æ¸¡æ•ˆæœç³»ç»Ÿï¼Œå¯ä»¥åœ¨ Vue æ’å…¥/æ›´æ–°/ç§»é™¤å…ƒç´ æ—¶è‡ªåŠ¨åº”ç”¨<a href="https://v2.cn.vuejs.org/v2/guide/transitions.html">è¿‡æ¸¡æ•ˆæœ</a>ã€‚</p><p>è¿˜æœ‰å…¶å®ƒå¾ˆå¤šæŒ‡ä»¤ï¼Œæ¯ä¸ªéƒ½æœ‰ç‰¹æ®Šçš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œ<code>v-for</code> æŒ‡ä»¤å¯ä»¥ç»‘å®šæ•°ç»„çš„æ•°æ®æ¥æ¸²æŸ“ä¸€ä¸ªé¡¹ç›®åˆ—è¡¨ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app-4&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;todo in todos&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123; todo.text &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app4 = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app-4&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">todos</span>: [</span><br><span class="line">      &#123; <span class="attr">text</span>: <span class="string">&#x27;å­¦ä¹  JavaScript&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">text</span>: <span class="string">&#x27;å­¦ä¹  Vue&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">text</span>: <span class="string">&#x27;æ•´ä¸ªç‰›é¡¹ç›®&#x27;</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>åœ¨æ§åˆ¶å°é‡Œï¼Œè¾“å…¥ <code>app4.todos.push(&#123; text: &#39;æ–°é¡¹ç›®&#39; &#125;)</code>ï¼Œä½ ä¼šå‘ç°åˆ—è¡¨æœ€åæ·»åŠ äº†ä¸€ä¸ªæ–°é¡¹ç›®ã€‚ </p><h3 id="1-4-å¤„ç†ç”¨è¾“å…¥"><a href="#1-4-å¤„ç†ç”¨è¾“å…¥" class="headerlink" title="1.4 å¤„ç†ç”¨è¾“å…¥"></a>1.4 å¤„ç†ç”¨è¾“å…¥</h3><p>ä¸ºäº†è®©ç”¨æˆ·å’Œä½ çš„åº”ç”¨è¿›è¡Œäº¤äº’ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <code>v-on</code> æŒ‡ä»¤æ·»åŠ ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œé€šè¿‡å®ƒè°ƒç”¨åœ¨ Vue å®ä¾‹ä¸­å®šä¹‰çš„æ–¹æ³•ï¼š </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app-5&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;reverseMessage&quot;</span>&gt;</span>åè½¬æ¶ˆæ¯<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app5 = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app-5&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;Hello Vue.js!&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="attr">reverseMessage</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">message</span> = <span class="variable language_">this</span>.<span class="property">message</span>.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>).<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ³¨æ„åœ¨ <code>reverseMessage</code> æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æ›´æ–°äº†åº”ç”¨çš„çŠ¶æ€ï¼Œä½†æ²¡æœ‰è§¦ç¢° DOMâ€”â€”æ‰€æœ‰çš„ DOM æ“ä½œéƒ½ç”± Vue æ¥å¤„ç†ï¼Œä½ ç¼–å†™çš„ä»£ç åªéœ€è¦å…³æ³¨é€»è¾‘å±‚é¢å³å¯ã€‚ </p><p>Vue è¿˜æä¾›äº† <code>v-model</code> æŒ‡ä»¤ï¼Œå®ƒèƒ½è½»æ¾å®ç°è¡¨å•è¾“å…¥å’Œåº”ç”¨çŠ¶æ€ä¹‹é—´çš„åŒå‘ç»‘å®šã€‚ </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app-6&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;message&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app6 = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app-6&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;Hello Vue!&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="1-5-ç»„ä»¶åŒ–åº”ç”¨æ„å»º"><a href="#1-5-ç»„ä»¶åŒ–åº”ç”¨æ„å»º" class="headerlink" title="1.5 ç»„ä»¶åŒ–åº”ç”¨æ„å»º"></a>1.5 ç»„ä»¶åŒ–åº”ç”¨æ„å»º</h3><p>ç»„ä»¶ç³»ç»Ÿæ˜¯ Vue çš„å¦ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ç§æŠ½è±¡ï¼Œå…è®¸æˆ‘ä»¬ä½¿ç”¨å°å‹ã€ç‹¬ç«‹å’Œé€šå¸¸å¯å¤ç”¨çš„ç»„ä»¶æ„å»ºå¤§å‹åº”ç”¨ã€‚ä»”ç»†æƒ³æƒ³ï¼Œå‡ ä¹ä»»æ„ç±»å‹çš„åº”ç”¨ç•Œé¢éƒ½å¯ä»¥æŠ½è±¡ä¸ºä¸€ä¸ªç»„ä»¶æ ‘ï¼š </p><p><img src="https://v2.cn.vuejs.org/images/components.png" alt="Component Tree"> </p><p>åœ¨ Vue é‡Œï¼Œä¸€ä¸ªç»„ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ‹¥æœ‰é¢„å®šä¹‰é€‰é¡¹çš„ä¸€ä¸ª Vue å®ä¾‹ã€‚åœ¨ Vue ä¸­æ³¨å†Œç»„ä»¶å¾ˆç®€å•ï¼š </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>ç½—å°é»‘<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- åˆ›å»ºä¸€ä¸ªtodo-itemç»„ä»¶çš„ç¤ºä¾‹ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      ç°åœ¨æˆ‘ä»¬ä¸ºæ¯ä¸ª todo-item æä¾› todo å¯¹è±¡</span></span><br><span class="line"><span class="comment">      todo å¯¹è±¡æ˜¯å˜é‡ï¼Œå³å…¶å†…å®¹å¯ä»¥æ˜¯åŠ¨æ€çš„ã€‚</span></span><br><span class="line"><span class="comment">      æˆ‘ä»¬ä¹Ÿéœ€è¦ä¸ºæ¯ä¸ªç»„ä»¶æä¾›ä¸€ä¸ªâ€œkeyâ€ï¼Œç¨åå†</span></span><br><span class="line"><span class="comment">      ä½œè¯¦ç»†è§£é‡Šã€‚</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">todo-item</span></span></span><br><span class="line"><span class="tag"><span class="attr">v-for</span>=<span class="string">&quot;item in groceryList&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">v-bind:todo</span>=<span class="string">&quot;item&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">v-bind:key</span>=<span class="string">&quot;item.id&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">todo-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">todo-item</span></span></span><br><span class="line"><span class="tag"><span class="attr">v-for</span>=<span class="string">&quot;item in secondList&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">v-bind:todo</span>=<span class="string">&quot;item&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">v-bind:key</span>=<span class="string">&quot;item.id&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">todo-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥vue.js --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥element uiæ ·å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../css/element/index.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/element/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> <span class="title class_">TodoItem</span>=&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">props</span>:[<span class="string">&quot;todo&quot;</span>],</span></span><br><span class="line"><span class="language-javascript"><span class="attr">template</span>:<span class="string">&quot;&lt;li&gt;&#123;&#123;todo.text&#125;&#125;&lt;/li&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> secondItem=&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">props</span>:[<span class="string">&quot;todo1&quot;</span>],</span></span><br><span class="line"><span class="language-javascript"><span class="attr">template</span>:<span class="string">&quot;&lt;li&gt;&#123;&#123;todo1.text&#125;&#125;&lt;/li&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// æ³¨æ„new çš„Vueå¿…é¡»æ˜¯å¤§å†™å­—æ¯å¼€å¤´çš„</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">components</span>:&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title class_">TodoItem</span>:<span class="title class_">TodoItem</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">secondItem</span>:secondItem</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">groceryList</span>:[</span></span><br><span class="line"><span class="language-javascript">&#123;<span class="attr">id</span>:<span class="number">0</span>,<span class="attr">text</span>:<span class="string">&quot;è”¬èœ&quot;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">&#123;<span class="attr">id</span>:<span class="number">1</span>,<span class="attr">text</span>:<span class="string">&quot;å¥¶é…ª&quot;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">&#123;<span class="attr">id</span>:<span class="number">2</span>,<span class="attr">text</span>:<span class="string">&quot;éšä¾¿å…¶ä»–ä»€ä¹ˆäººåƒçš„ä¸œè¥¿&quot;</span>&#125;</span></span><br><span class="line"><span class="language-javascript">],</span></span><br><span class="line"><span class="language-javascript"><span class="attr">secondList</span>:[</span></span><br><span class="line"><span class="language-javascript">&#123;<span class="attr">id</span>:<span class="number">0</span>,<span class="attr">text</span>:<span class="string">&quot;å­¦ä¹ é›·é”‹å¥½æ¦œæ ·&quot;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">&#123;<span class="attr">id</span>:<span class="number">1</span>,<span class="attr">text</span>:<span class="string">&quot;å¿ äºé©å‘½å¿ äºå…š&quot;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">&#123;<span class="attr">id</span>:<span class="number">2</span>,<span class="attr">text</span>:<span class="string">&quot;å¤©å¤©å‘ä¸Š&quot;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">]</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// è¿™æ ·çš„æ–¹å¼æ˜¯ä¸è¡Œçš„</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// Vue.component(&quot;todo-item&quot;,&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// //todo-item ç»„ä»¶ç°åœ¨æ¥æ”¶ä¸€ä¸ª</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// // &quot;prop&quot; , ç±»ä¼¼äºä¸€ä¸ªè‡ªå®šä¹‰attribute.</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// //è¿™ä¸ªpropåå­—å«åštodo</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// props:[&quot;todo&quot;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// template:&quot;&lt;li&gt;è¿™æ˜¯ä¸ªå¾…åŠé¡¹&#123;&#123;todo.text&#125;&#125;&lt;/li&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// &#125;)</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-6-ä¸è‡ªå®šä¹‰å…ƒç´ çš„å…³ç³»"><a href="#1-6-ä¸è‡ªå®šä¹‰å…ƒç´ çš„å…³ç³»" class="headerlink" title="1.6 ä¸è‡ªå®šä¹‰å…ƒç´ çš„å…³ç³»"></a>1.6 ä¸è‡ªå®šä¹‰å…ƒç´ çš„å…³ç³»</h3><p>ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ° Vue ç»„ä»¶éå¸¸ç±»ä¼¼äº<strong>è‡ªå®šä¹‰å…ƒç´ </strong>â€”â€”å®ƒæ˜¯ <a href="https://www.w3.org/wiki/WebComponents/">Web ç»„ä»¶è§„èŒƒ</a>çš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ˜¯å› ä¸º Vue çš„ç»„ä»¶è¯­æ³•éƒ¨åˆ†å‚è€ƒäº†è¯¥è§„èŒƒã€‚ä¾‹å¦‚ Vue ç»„ä»¶å®ç°äº† <a href="https://github.com/w3c/webcomponents/blob/gh-pages/proposals/Slots-Proposal.md">Slot API</a> ä¸ <code>is</code> attributeã€‚ä½†æ˜¯ï¼Œè¿˜æ˜¯æœ‰å‡ ä¸ªå…³é”®å·®åˆ«ï¼š</p><ol><li>Web Components è§„èŒƒå·²ç»å®Œæˆå¹¶é€šè¿‡ï¼Œä½†æœªè¢«æ‰€æœ‰æµè§ˆå™¨åŸç”Ÿå®ç°ã€‚ç›®å‰ Safari 10.1+ã€Chrome 54+ å’Œ Firefox 63+ åŸç”Ÿæ”¯æŒ Web Componentsã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒVue ç»„ä»¶ä¸éœ€è¦ä»»ä½• polyfillï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰æ”¯æŒçš„æµè§ˆå™¨ (IE9 åŠæ›´é«˜ç‰ˆæœ¬) ä¹‹ä¸‹è¡¨ç°ä¸€è‡´ã€‚å¿…è¦æ—¶ï¼ŒVue ç»„ä»¶ä¹Ÿå¯ä»¥åŒ…è£…äºåŸç”Ÿè‡ªå®šä¹‰å…ƒç´ ä¹‹å†…ã€‚</li><li>Vue ç»„ä»¶æä¾›äº†çº¯è‡ªå®šä¹‰å…ƒç´ æ‰€ä¸å…·å¤‡çš„ä¸€äº›é‡è¦åŠŸèƒ½ï¼Œæœ€çªå‡ºçš„æ˜¯è·¨ç»„ä»¶æ•°æ®æµã€è‡ªå®šä¹‰äº‹ä»¶é€šä¿¡ä»¥åŠæ„å»ºå·¥å…·é›†æˆã€‚</li></ol><p>è™½ç„¶ Vue å†…éƒ¨æ²¡æœ‰ä½¿ç”¨è‡ªå®šä¹‰å…ƒç´ ï¼Œä¸è¿‡åœ¨åº”ç”¨ä½¿ç”¨è‡ªå®šä¹‰å…ƒç´ ã€æˆ–ä»¥è‡ªå®šä¹‰å…ƒç´ å½¢å¼å‘å¸ƒæ—¶ï¼Œ<a href="https://custom-elements-everywhere.com/#vue">ä¾ç„¶æœ‰å¾ˆå¥½çš„äº’æ“ä½œæ€§</a>ã€‚Vue CLI ä¹Ÿæ”¯æŒå°† Vue ç»„ä»¶æ„å»ºæˆä¸ºåŸç”Ÿçš„è‡ªå®šä¹‰å…ƒç´ ã€‚</p><h2 id="äºŒã€Vueå®ä¾‹"><a href="#äºŒã€Vueå®ä¾‹" class="headerlink" title="äºŒã€Vueå®ä¾‹"></a>äºŒã€Vueå®ä¾‹</h2><h3 id="æ¨¡ç‰ˆè¯­æ³•"><a href="#æ¨¡ç‰ˆè¯­æ³•" class="headerlink" title="æ¨¡ç‰ˆè¯­æ³•"></a>æ¨¡ç‰ˆè¯­æ³•</h3><p>Vue.js ä½¿ç”¨äº†åŸºäº HTML çš„æ¨¡æ¿è¯­æ³•ï¼Œå…è®¸å¼€å‘è€…å£°æ˜å¼åœ°å°† DOM ç»‘å®šè‡³åº•å±‚ Vue å®ä¾‹çš„æ•°æ®ã€‚æ‰€æœ‰ Vue.js çš„æ¨¡æ¿éƒ½æ˜¯åˆæ³•çš„ HTMLï¼Œæ‰€ä»¥èƒ½è¢«éµå¾ªè§„èŒƒçš„æµè§ˆå™¨å’Œ HTML è§£æå™¨è§£æã€‚</p><p>åœ¨åº•å±‚çš„å®ç°ä¸Šï¼ŒVue å°†æ¨¡æ¿ç¼–è¯‘æˆè™šæ‹Ÿ DOM æ¸²æŸ“å‡½æ•°ã€‚ç»“åˆå“åº”ç³»ç»Ÿï¼ŒVue èƒ½å¤Ÿæ™ºèƒ½åœ°è®¡ç®—å‡ºæœ€å°‘éœ€è¦é‡æ–°æ¸²æŸ“å¤šå°‘ç»„ä»¶ï¼Œå¹¶æŠŠ DOM æ“ä½œæ¬¡æ•°å‡åˆ°æœ€å°‘ã€‚</p><p>æœ€å¸¸è§çš„è¯­æ³•æ˜¯</p><p><code>åªè¦messageçš„ propertyå€¼æ”¹å˜ï¼Œé‚£ä¹ˆä»¥ä¸Šçš„messageçš„å€¼ä¹Ÿä¼šéšä¹‹æ”¹å˜ã€‚</code></p><p>ä½†æ˜¯é€šè¿‡ä½¿ç”¨v-onceæŒ‡ä»¤ï¼Œå¯ä»¥æ‰§è¡Œä¸€æ¬¡æ€§åœ°æ’å€¼ï¼Œå½“æ•°æ®æ”¹å˜çš„æ—¶å€™ï¼Œæ’å€¼å¤„çš„å†…å®¹å¹¶ä¸ä¼šæ›´æ–°</p><p><code>&lt;span v-once&gt;è¿™ä¸ªå€¼ä¸ä¼šè¢«æ”¹å˜ï¼š &#123;&#123;message&#125;&#125; &lt;/span&gt;</code></p><p><strong>v-htmlä¸v-textæœ‰åŒºåˆ«ï¼Œv-htmlä¼šæ¸²æŸ“æˆæˆ‘ä»¬çš„htmlä»£ç ï¼Œå› ä¸ºä¸€èˆ¬åŒå¤§æ‹¬å·å°†æ•°æ®è§£é‡Šä¸ºæ™®é€šæ–‡æœ¬ï¼Œå¹¶éHTMLä»£ç ï¼Œä¸ºäº†æˆä¸ºHTMLä»£ç ï¼Œæˆ‘ä»¬å°†é‡‡ç”¨v-html;</strong></p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Using mustaches: &#123;&#123; rawHtml &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Using v-html directive: <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-html</span>=<span class="string">&quot;rawHtml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Mustache è¯­æ³•ä¸èƒ½ä½œç”¨åœ¨ HTML attribute ä¸Šï¼Œé‡åˆ°è¿™ç§æƒ…å†µåº”è¯¥ä½¿ç”¨ <a href="https://v2.cn.vuejs.org/v2/api/#v-bind"><code>v-bind</code> æŒ‡ä»¤</a>ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">div</span> v-bind:<span class="built_in">id</span>=<span class="string">&quot;dynamicId&quot;</span>&gt;&lt;/<span class="keyword">div</span>&gt;</span><br></pre></td></tr></table></figure><p>å¯¹äºå¸ƒå°” attribute (å®ƒä»¬åªè¦å­˜åœ¨å°±æ„å‘³ç€å€¼ä¸º <code>true</code>)ï¼Œ<code>v-bind</code> å·¥ä½œèµ·æ¥ç•¥æœ‰ä¸åŒï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p><figure class="highlight hsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">button</span> v-bind:disabled=<span class="string">&quot;isButtonDisabled&quot;</span>&gt;<span class="keyword">Button</span>&lt;/<span class="keyword">button</span>&gt;</span><br></pre></td></tr></table></figure><p>å¦‚æœ <code>isButtonDisabled</code> çš„å€¼æ˜¯ <code>null</code>ã€<code>undefined</code> æˆ– <code>false</code>ï¼Œåˆ™ <code>disabled</code> attribute ç”šè‡³ä¸ä¼šè¢«åŒ…å«åœ¨æ¸²æŸ“å‡ºæ¥çš„ <code>&lt;button&gt;</code> å…ƒç´ ä¸­ã€‚</p><h4 id="ä½¿ç”¨-JavaScript-è¡¨è¾¾å¼"><a href="#ä½¿ç”¨-JavaScript-è¡¨è¾¾å¼" class="headerlink" title="ä½¿ç”¨ JavaScript è¡¨è¾¾å¼"></a>ä½¿ç”¨ JavaScript è¡¨è¾¾å¼</h4><p>è¿„ä»Šä¸ºæ­¢ï¼Œåœ¨æˆ‘ä»¬çš„æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬ä¸€ç›´éƒ½åªç»‘å®šç®€å•çš„ property é”®å€¼ã€‚ä½†å®é™…ä¸Šï¼Œå¯¹äºæ‰€æœ‰çš„æ•°æ®ç»‘å®šï¼ŒVue.js éƒ½æä¾›äº†å®Œå…¨çš„ JavaScript è¡¨è¾¾å¼æ”¯æŒã€‚ </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; number + 1 &#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123; ok ? &#x27;YES&#x27; : &#x27;NO&#x27; &#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123; message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:id</span>=<span class="string">&quot;&#x27;list-&#x27; + id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™äº›è¡¨è¾¾å¼ä¼šåœ¨æ‰€å± Vue å®ä¾‹çš„æ•°æ®ä½œç”¨åŸŸä¸‹ä½œä¸º JavaScript è¢«è§£æã€‚æœ‰ä¸ªé™åˆ¶å°±æ˜¯ï¼Œæ¯ä¸ªç»‘å®šéƒ½åªèƒ½åŒ…å«<strong>å•ä¸ªè¡¨è¾¾å¼</strong>ï¼Œæ‰€ä»¥ä¸‹é¢çš„ä¾‹å­éƒ½<strong>ä¸ä¼š</strong>ç”Ÿæ•ˆã€‚ </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¿™æ˜¯è¯­å¥ï¼Œä¸æ˜¯è¡¨è¾¾å¼ --&gt;</span></span><br><span class="line">&#123;&#123; var a = 1 &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æµæ§åˆ¶ä¹Ÿä¸ä¼šç”Ÿæ•ˆï¼Œè¯·ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ --&gt;</span></span><br><span class="line">&#123;&#123; if (ok) &#123; return message &#125; &#125;&#125;</span><br></pre></td></tr></table></figure><p>æ¨¡æ¿è¡¨è¾¾å¼éƒ½è¢«æ”¾åœ¨æ²™ç›’ä¸­ï¼Œåªèƒ½è®¿é—®<a href="https://github.com/vuejs/vue/blob/v2.6.10/src/core/instance/proxy.js#L9">å…¨å±€å˜é‡çš„ä¸€ä¸ªç™½åå•</a>ï¼Œå¦‚ <code>Math</code> å’Œ <code>Date</code> ã€‚ä½ ä¸åº”è¯¥åœ¨æ¨¡æ¿è¡¨è¾¾å¼ä¸­è¯•å›¾è®¿é—®ç”¨æˆ·å®šä¹‰çš„å…¨å±€å˜é‡ã€‚</p><h4 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h4><p>ä¸€äº›æŒ‡ä»¤èƒ½å¤Ÿæ¥æ”¶ä¸€ä¸ªâ€œå‚æ•°â€ï¼Œåœ¨æŒ‡ä»¤åç§°ä¹‹åä»¥å†’å·è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œ<code>v-bind</code> æŒ‡ä»¤å¯ä»¥ç”¨äºå“åº”å¼åœ°æ›´æ–° HTML attributeï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œ <code>href</code> æ˜¯å‚æ•°ï¼Œå‘ŠçŸ¥ <code>v-bind</code> æŒ‡ä»¤å°†è¯¥å…ƒç´ çš„ <code>href</code> attribute ä¸è¡¨è¾¾å¼ <code>url</code> çš„å€¼ç»‘å®šã€‚</p><p>å¦ä¸€ä¸ªä¾‹å­æ˜¯ <code>v-on</code> æŒ‡ä»¤ï¼Œå®ƒç”¨äºç›‘å¬ DOM äº‹ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click</span>=<span class="string">&quot;doSomething&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="åŠ¨æ€å‚æ•°"><a href="#åŠ¨æ€å‚æ•°" class="headerlink" title="åŠ¨æ€å‚æ•°"></a>åŠ¨æ€å‚æ•°</h4><p>ä» 2.6.0 å¼€å§‹ï¼Œå¯ä»¥ç”¨æ–¹æ‹¬å·æ‹¬èµ·æ¥çš„ JavaScript è¡¨è¾¾å¼ä½œä¸ºä¸€ä¸ªæŒ‡ä»¤çš„å‚æ•°ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">æ³¨æ„ï¼Œå‚æ•°è¡¨è¾¾å¼çš„å†™æ³•å­˜åœ¨ä¸€äº›çº¦æŸï¼Œå¦‚ä¹‹åçš„â€œå¯¹åŠ¨æ€å‚æ•°è¡¨è¾¾å¼çš„çº¦æŸâ€ç« èŠ‚æ‰€è¿°ã€‚</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:</span>[<span class="attr">attributeName</span>]=<span class="string">&quot;url&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>attributeName</code> ä¼šè¢«ä½œä¸ºä¸€ä¸ª JavaScript è¡¨è¾¾å¼è¿›è¡ŒåŠ¨æ€æ±‚å€¼ï¼Œæ±‚å¾—çš„å€¼å°†ä¼šä½œä¸ºæœ€ç»ˆçš„å‚æ•°æ¥ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„ Vue å®ä¾‹æœ‰ä¸€ä¸ª <code>data</code> property <code>attributeName</code>ï¼Œå…¶å€¼ä¸º <code>&quot;href&quot;</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªç»‘å®šå°†ç­‰ä»·äº <code>v-bind:href</code>ã€‚</p><p>åŒæ ·åœ°ï¼Œä½ å¯ä»¥ä½¿ç”¨åŠ¨æ€å‚æ•°ä¸ºä¸€ä¸ªåŠ¨æ€çš„äº‹ä»¶åç»‘å®šå¤„ç†å‡½æ•°ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:</span>[<span class="attr">eventName</span>]=<span class="string">&quot;doSomething&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå½“ <code>eventName</code> çš„å€¼ä¸º <code>&quot;focus&quot;</code> æ—¶ï¼Œ<code>v-on:[eventName]</code> å°†ç­‰ä»·äº <code>v-on:focus</code>ã€‚</p><h5 id="å¯¹åŠ¨æ€å‚æ•°çš„å€¼çš„çº¦æŸ"><a href="#å¯¹åŠ¨æ€å‚æ•°çš„å€¼çš„çº¦æŸ" class="headerlink" title="å¯¹åŠ¨æ€å‚æ•°çš„å€¼çš„çº¦æŸ"></a>å¯¹åŠ¨æ€å‚æ•°çš„å€¼çš„çº¦æŸ</h5><p>åŠ¨æ€å‚æ•°é¢„æœŸä¼šæ±‚å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¼‚å¸¸æƒ…å†µä¸‹å€¼ä¸º <code>null</code>ã€‚è¿™ä¸ªç‰¹æ®Šçš„ <code>null</code> å€¼å¯ä»¥è¢«æ˜¾æ€§åœ°ç”¨äºç§»é™¤ç»‘å®šã€‚ä»»ä½•å…¶å®ƒéå­—ç¬¦ä¸²ç±»å‹çš„å€¼éƒ½å°†ä¼šè§¦å‘ä¸€ä¸ªè­¦å‘Šã€‚</p><h5 id="å¯¹åŠ¨æ€å‚æ•°è¡¨è¾¾å¼çš„çº¦æŸ"><a href="#å¯¹åŠ¨æ€å‚æ•°è¡¨è¾¾å¼çš„çº¦æŸ" class="headerlink" title="å¯¹åŠ¨æ€å‚æ•°è¡¨è¾¾å¼çš„çº¦æŸ"></a>å¯¹åŠ¨æ€å‚æ•°è¡¨è¾¾å¼çš„çº¦æŸ</h5><p>åŠ¨æ€å‚æ•°è¡¨è¾¾å¼æœ‰ä¸€äº›è¯­æ³•çº¦æŸï¼Œå› ä¸ºæŸäº›å­—ç¬¦ï¼Œå¦‚ç©ºæ ¼å’Œå¼•å·ï¼Œæ”¾åœ¨ HTML attribute åé‡Œæ˜¯æ— æ•ˆçš„ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¿™ä¼šè§¦å‘ä¸€ä¸ªç¼–è¯‘è­¦å‘Š --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:</span>[&#x27;<span class="attr">foo</span>&#x27; + <span class="attr">bar</span>]=<span class="string">&quot;value&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å˜é€šçš„åŠæ³•æ˜¯ä½¿ç”¨æ²¡æœ‰ç©ºæ ¼æˆ–å¼•å·çš„è¡¨è¾¾å¼ï¼Œæˆ–ç”¨è®¡ç®—å±æ€§æ›¿ä»£è¿™ç§å¤æ‚è¡¨è¾¾å¼ã€‚</p><p>åœ¨ DOM ä¸­ä½¿ç”¨æ¨¡æ¿æ—¶ (ç›´æ¥åœ¨ä¸€ä¸ª HTML æ–‡ä»¶é‡Œæ’°å†™æ¨¡æ¿)ï¼Œè¿˜éœ€è¦é¿å…ä½¿ç”¨å¤§å†™å­—ç¬¦æ¥å‘½åé”®åï¼Œå› ä¸ºæµè§ˆå™¨ä¼šæŠŠ attribute åå…¨éƒ¨å¼ºåˆ¶è½¬ä¸ºå°å†™ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">åœ¨ DOM ä¸­ä½¿ç”¨æ¨¡æ¿æ—¶è¿™æ®µä»£ç ä¼šè¢«è½¬æ¢ä¸º `v-bind:[someattr]`ã€‚</span></span><br><span class="line"><span class="comment">é™¤éåœ¨å®ä¾‹ä¸­æœ‰ä¸€ä¸ªåä¸ºâ€œsomeattrâ€çš„ propertyï¼Œå¦åˆ™ä»£ç ä¸ä¼šå·¥ä½œã€‚</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:</span>[<span class="attr">someAttr</span>]=<span class="string">&quot;value&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ä¿®é¥°ç¬¦"><a href="#ä¿®é¥°ç¬¦" class="headerlink" title="ä¿®é¥°ç¬¦"></a>ä¿®é¥°ç¬¦</h4><p>ä¿®é¥°ç¬¦ (modifier) æ˜¯ä»¥åŠè§’å¥å· <code>.</code> æŒ‡æ˜çš„ç‰¹æ®Šåç¼€ï¼Œç”¨äºæŒ‡å‡ºä¸€ä¸ªæŒ‡ä»¤åº”è¯¥ä»¥ç‰¹æ®Šæ–¹å¼ç»‘å®šã€‚ä¾‹å¦‚ï¼Œ<code>.prevent</code> ä¿®é¥°ç¬¦å‘Šè¯‰ <code>v-on</code> æŒ‡ä»¤å¯¹äºè§¦å‘çš„äº‹ä»¶è°ƒç”¨ <code>event.preventDefault()</code>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">v-on:submit.prevent</span>=<span class="string">&quot;onSubmit&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ç¼©å†™"><a href="#ç¼©å†™" class="headerlink" title="ç¼©å†™"></a>ç¼©å†™</h4><p><code>v-</code> å‰ç¼€ä½œä¸ºä¸€ç§è§†è§‰æç¤ºï¼Œç”¨æ¥è¯†åˆ«æ¨¡æ¿ä¸­ Vue ç‰¹å®šçš„ attributeã€‚å½“ä½ åœ¨ä½¿ç”¨ Vue.js ä¸ºç°æœ‰æ ‡ç­¾æ·»åŠ åŠ¨æ€è¡Œä¸º (dynamic behavior) æ—¶ï¼Œ<code>v-</code> å‰ç¼€å¾ˆæœ‰å¸®åŠ©ï¼Œç„¶è€Œï¼Œå¯¹äºä¸€äº›é¢‘ç¹ç”¨åˆ°çš„æŒ‡ä»¤æ¥è¯´ï¼Œå°±ä¼šæ„Ÿåˆ°ä½¿ç”¨ç¹çã€‚åŒæ—¶ï¼Œåœ¨æ„å»ºç”± Vue ç®¡ç†æ‰€æœ‰æ¨¡æ¿çš„<a href="https://en.wikipedia.org/wiki/Single-page_application">å•é¡µé¢åº”ç”¨ç¨‹åº (SPA - single page application)</a> æ—¶ï¼Œ<code>v-</code> å‰ç¼€ä¹Ÿå˜å¾—æ²¡é‚£ä¹ˆé‡è¦äº†ã€‚å› æ­¤ï¼ŒVue ä¸º <code>v-bind</code> å’Œ <code>v-on</code> è¿™ä¸¤ä¸ªæœ€å¸¸ç”¨çš„æŒ‡ä»¤ï¼Œæä¾›äº†ç‰¹å®šç®€å†™ï¼š </p><h5 id="v-bind"><a href="#v-bind" class="headerlink" title="v-bind"></a>v-bind</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å®Œæ•´è¯­æ³• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç¼©å†™ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åŠ¨æ€å‚æ•°çš„ç¼©å†™ (2.6.0+) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">:</span>[<span class="attr">key</span>]=<span class="string">&quot;url&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="v-on"><a href="#v-on" class="headerlink" title="v-on"></a>v-on</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å®Œæ•´è¯­æ³• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click</span>=<span class="string">&quot;doSomething&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç¼©å†™ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> @<span class="attr">click</span>=<span class="string">&quot;doSomething&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åŠ¨æ€å‚æ•°çš„ç¼©å†™ (2.6.0+) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> @[<span class="attr">event</span>]=<span class="string">&quot;doSomething&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å®ƒä»¬çœ‹èµ·æ¥å¯èƒ½ä¸æ™®é€šçš„ HTML ç•¥æœ‰ä¸åŒï¼Œä½† <code>:</code> ä¸ <code>@</code> å¯¹äº attribute åæ¥è¯´éƒ½æ˜¯åˆæ³•å­—ç¬¦ï¼Œåœ¨æ‰€æœ‰æ”¯æŒ Vue çš„æµè§ˆå™¨éƒ½èƒ½è¢«æ­£ç¡®åœ°è§£æã€‚è€Œä¸”ï¼Œå®ƒä»¬ä¸ä¼šå‡ºç°åœ¨æœ€ç»ˆæ¸²æŸ“çš„æ ‡è®°ä¸­ã€‚</p><h2 id="ä¸‰ã€è®¡ç®—å±æ€§å’Œä¾¦å¬å™¨"><a href="#ä¸‰ã€è®¡ç®—å±æ€§å’Œä¾¦å¬å™¨" class="headerlink" title="ä¸‰ã€è®¡ç®—å±æ€§å’Œä¾¦å¬å™¨"></a>ä¸‰ã€è®¡ç®—å±æ€§å’Œä¾¦å¬å™¨</h2><p>Vueè„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®çš„æ–¹å¼</p><p>è¿™é‡Œæä¾›å‡ ç§æ–¹æ¡ˆï¼š</p><ol><li>å‡çº§ä¸ºvue 3.xç‰ˆæœ¬<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall vue-cli -g</span><br><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></figure>2.é™çº§ä¸ºvue2.xæ–¹æ³•<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall @vue/cli -g</span><br><span class="line">npm install -g vue-cli</span><br></pre></td></tr></table></figure>3.vue2.xè„šæ‰‹æ¶çš„å®‰è£…å’Œåˆå§‹åŒ–é¡¹ç›®<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºé¡¹ç›®</span></span><br><span class="line">vue init webpack é¡¹ç›®åå­—</span><br></pre></td></tr></table></figure>4.vue3.xè„šæ‰‹æ¶çš„å®‰è£…å’Œåˆå§‹åŒ–é¡¹ç›®<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºé¡¹ç›®</span></span><br><span class="line">vue create é¡¹ç›®åå­—</span><br></pre></td></tr></table></figure></li></ol><p>å¦‚ä½•è®©vueé¡¹ç›®è·‘èµ·æ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install dependencies</span></span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line"><span class="comment"># serve with hot reload at localhost:8080</span></span><br><span class="line">npm run dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># build for production with minification</span></span><br><span class="line">npm run build</span><br><span class="line"></span><br><span class="line"><span class="comment"># build for production and view the bundle analyzer report</span></span><br><span class="line">npm run build --report</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦è®°å½•å‰ç«¯vue2å­¦ä¹ çš„ä¸€äº›ç¬”è®°</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://www.blog.909111.xyz/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="vue2" scheme="https://www.blog.909111.xyz/tags/vue2/"/>
    
  </entry>
  
  <entry>
    <title>Rediså­¦ä¹ </title>
    <link href="https://www.blog.909111.xyz/posts/8434e219.html"/>
    <id>https://www.blog.909111.xyz/posts/8434e219.html</id>
    <published>2023-11-09T02:50:23.338Z</published>
    <updated>2024-04-22T08:23:23.411Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Rediså­¦ä¹ "><a href="#Rediså­¦ä¹ " class="headerlink" title="Rediså­¦ä¹ "></a>Rediså­¦ä¹ </h1><p>redisæ˜¯ä¸€ä¸ªNoSqlçš„ï¼ˆè¿œç¨‹å­—å…¸æœåŠ¡çš„ï¼Œkey_valueçš„æ•°æ®åº“ï¼‰</p><p><strong>redis èƒ½å¹²å˜›</strong></p><ol><li>å†…å­˜å­˜å‚¨ï¼ŒæŒä¹…åŒ–ï¼Œå†…å­˜ä¸­æ˜¯æ–­ç”µå°±å¤±å»ï¼Œæ‰€æœ‰è¯´æŒä¹…åŒ–å¾ˆé‡è¦</li><li>æ•ˆç‡é«˜ï¼Œå¯ä»¥ç”¨äºé«˜é€Ÿç¼“å­˜</li><li>å‘å¸ƒè®¢é˜…ç³»ç»Ÿ</li><li>åœ°å›¾ä¿¡æ¯ç»Ÿè®¡</li><li>è®¡æ—¶å™¨ï¼Œè®°æ•°å™¨</li><li>ã€‚ã€‚ã€‚ã€‚</li></ol><blockquote><p>ç‰¹æ€§</p></blockquote><ol><li>å¤šæ ·çš„æ•°æ®ç±»å‹ï¼ˆHashMap ,set ,String ,List ,Zsetï¼‰</li><li>æŒä¹…åŒ–</li><li>é›†ç¾¤</li><li>äº‹åŠ¡</li><li>ã€‚ã€‚ã€‚ã€‚</li></ol><blockquote><p>å¦‚ä½•å»å­¦ä¹ redis</p></blockquote><p>rediså®˜ç½‘ ï¼š <a href="https://www.redis.net.cn/">https://www.redis.net.cn/</a></p><p>å®‰è£…Redis : è¿™é‡Œä¸å†™</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">ä¸‹è½½redis </span><br><span class="line">docker pull redis</span><br><span class="line"></span><br><span class="line">åˆ›å»ºå®ä¾‹å¹¶å¯åŠ¨</span><br><span class="line">mkdir <span class="operator">-</span>p <span class="operator">/</span>mydata<span class="operator">/</span>redis<span class="operator">/</span>conf      </span><br><span class="line"></span><br><span class="line">touch redis.conf</span><br><span class="line"></span><br><span class="line">docker run <span class="operator">-</span>p <span class="number">6379</span>:<span class="number">6379</span> <span class="comment">--name redis -v /mydata/redis/data:/data \</span></span><br><span class="line">   <span class="operator">-</span>v <span class="operator">/</span>mydata<span class="operator">/</span>redis<span class="operator">/</span>conf<span class="operator">/</span>redis.conf:<span class="operator">/</span>etc<span class="operator">/</span>redis<span class="operator">/</span>redis.conf \</span><br><span class="line">   <span class="operator">-</span>d redis redis<span class="operator">-</span>server <span class="operator">/</span>etc<span class="operator">/</span>redis<span class="operator">/</span>redis.conf</span><br><span class="line"></span><br><span class="line"> ls   æŸ¥çœ‹å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶</span><br><span class="line"> cat redis.conf</span><br><span class="line"></span><br><span class="line"> æµ‹è¯•redis </span><br><span class="line">  </span><br><span class="line"> docker <span class="keyword">exec</span> <span class="operator">-</span>it redis redis<span class="operator">-</span>cli</span><br><span class="line"> </span><br><span class="line"> <span class="comment">---</span></span><br><span class="line"> ç”±äºä»¥å‰çš„æ•°æ®å…¨å­˜åœ¨å†…å­˜ä¸­ï¼Œä»è€Œæˆ‘ä»¬é‡å¤è¯»å–<span class="keyword">get</span> açš„æ—¶å€™ä¼šå¯¼è‡´å¤±è´¥</span><br><span class="line">[root<span class="variable">@localhost</span> conf]# cat redis.conf</span><br><span class="line">[root<span class="variable">@localhost</span> conf]# docker <span class="keyword">exec</span> <span class="operator">-</span>it redis redis<span class="operator">-</span>cli</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span><span class="operator">&gt;</span> <span class="keyword">set</span> a b</span><br><span class="line">OK</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span><span class="operator">&gt;</span> <span class="keyword">get</span> a</span><br><span class="line">&quot;b&quot;   <span class="operator">/</span><span class="operator">/</span>ä»è€Œåœ¨ä¸€æ¬¡ä¸Šæ¥çš„æ—¶å€™è¿™å—æ˜¯<span class="keyword">null</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span><span class="operator">&gt;</span> exit</span><br><span class="line"></span><br><span class="line"><span class="comment">--è®©redis æŒä¹…åŒ–  ---&gt; pwd</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span><span class="operator">&gt;</span> exit</span><br><span class="line">[root<span class="variable">@localhost</span> conf]# pwd</span><br><span class="line"><span class="operator">/</span>mydata<span class="operator">/</span>redis<span class="operator">/</span>conf</span><br><span class="line">[root<span class="variable">@localhost</span> conf]# ls</span><br><span class="line">redis.conf</span><br><span class="line">[root<span class="variable">@localhost</span> conf]# vi redis.conf </span><br><span class="line">i</span><br><span class="line">appendonly yes</span><br><span class="line">esc  :wq</span><br><span class="line"> <span class="comment">--ç”±äºè¿›å…¥æ–‡æ¡£åæˆ‘ä¸çŸ¥é“å¦‚ä½•ä¿å­˜ï¼Œæ•…æ­¤æˆ‘ä¸åœ¨ç»§ç»­æŒä¹…åŒ–äº† äº‹å®ä¸Šæœ€æ–°çš„redisè‡ªå¸¦æŒä¹…åŒ–äº†</span></span><br><span class="line"></span><br><span class="line">docker restart redis  <span class="operator">/</span><span class="operator">/</span>é‡å¯redis</span><br><span class="line"><span class="comment">--è®¾ç½®å¼€æœºè‡ªå¯åŠ¨docker é‡Œè¾¹å®¹å™¨</span></span><br><span class="line">sudo docker <span class="keyword">update</span> <span class="operator">&lt;</span>å®¹å™¨å<span class="operator">&gt;</span> <span class="comment">--restart=always</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Redisçš„åŸºç¡€çŸ¥è¯†"><a href="#Redisçš„åŸºç¡€çŸ¥è¯†" class="headerlink" title="Redisçš„åŸºç¡€çŸ¥è¯†"></a>Redisçš„åŸºç¡€çŸ¥è¯†</h2><p><code>select</code> é€‰æ‹©æ•°æ®åº“</p><p><code>keys *</code>  æŸ¥çœ‹æ‰€æœ‰çš„key</p><p><code>exists</code> key  æŸ¥çœ‹keyæ˜¯å¦å­˜åœ¨</p><p><code>move  key  id</code> æ ¹æ®idå’Œkeyå€¼ç§»é™¤</p><p><code>flushdb</code> æ¸…é™¤å½“å‰æ•°æ®åº“</p><p><code>flushAll</code> æ¸…é™¤å…¨éƒ¨æ•°æ®åº“ä¸­æ‰€æœ‰æ•°æ®</p><p><code>set  key value</code> è®¾ç½®Keyå’Œvalue</p><p><code>get key</code>  è·å¾—keyçš„å€¼</p><p><code>expire key æ—¶é—´</code> è®¾ç½®è¿‡æœŸæ—¶é—´å•ä½ç§’</p><p><code>ttl key</code> æŸ¥çœ‹è¿‡æœŸæ—¶é—´</p><p><code>type key</code> æŸ¥çœ‹å½“å‰keyå­˜åˆ°valueçš„æ•°æ®ç±»å‹</p><p>ä¸ºä»€ä¹ˆredisç«¯å£å·ä¸º6379ã€‚(ä½œè€…ä½¿ç”¨ä¸€ä¸ªæ˜æ˜Ÿçš„åå­—)</p><blockquote><p>redisæ˜¯å•çº¿ç¨‹çš„</p></blockquote><p>ç”±äºrediså¾ˆå¿«ï¼Œå®˜æ–¹è®¤ä¸ºï¼Œredisæ˜¯åŸºäºå†…å­˜æ“ä½œï¼ŒCPUå¹¶ä¸æ˜¯Redisçš„æ€§èƒ½ç“¶é¢ˆï¼ŒRedisçš„ç“¶é¢ˆæ˜¯æ ¹æ®æœºæ¢°çš„å†…å­˜å’Œç½‘ç»œå¸¦å®½ï¼Œæ—¢ç„¶å¯ä»¥ä½¿ç”¨å•çº¿ç¨‹æ¥å®ç°ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨å•çº¿ç¨‹äº†ã€‚</p><h3 id="Redisä¸ºå•¥ä½¿ç”¨å•çº¿ç¨‹è¿˜æ˜¯è¿™ä¹ˆå¿«ï¼Ÿ"><a href="#Redisä¸ºå•¥ä½¿ç”¨å•çº¿ç¨‹è¿˜æ˜¯è¿™ä¹ˆå¿«ï¼Ÿ" class="headerlink" title="Redisä¸ºå•¥ä½¿ç”¨å•çº¿ç¨‹è¿˜æ˜¯è¿™ä¹ˆå¿«ï¼Ÿ"></a>Redisä¸ºå•¥ä½¿ç”¨å•çº¿ç¨‹è¿˜æ˜¯è¿™ä¹ˆå¿«ï¼Ÿ</h3><ol><li><p>è¯¯åŒºï¼Œé«˜æ€§èƒ½çš„æœåŠ¡å™¨ä¸ä¸€ç‚¹å…¨æ˜¯å¤šçº¿ç¨‹çš„ã€‚</p></li><li><p>è¯¯åŒº2ï¼Œå¤šçº¿ç¨‹å¹¶ä¸ä¸€å®šéƒ½æ¯”å•çº¿ç¨‹æ•ˆç‡é«˜ã€‚</p><blockquote><p>redisæ˜¯å°†æ•°æ®å­˜æ”¾åœ¨å†…å­˜ä¸­çš„ï¼Œæ•…è€Œä½¿ç”¨å•çº¿ç¨‹å»æ“ä½œå°±æ¯”è¾ƒå¿«ï¼Œå¤šçº¿ç¨‹ä¼šè¿›è¡ŒCPUä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè€—æ—¶ï¼Œå¯¹äºå†…å­˜ç³»ç»Ÿæ¥è¯´ï¼Œå¦‚æœæ²¡æœ‰ä¸Šä¸‹æ–‡åˆ‡æ¢æ•ˆç‡å°±æ˜¯æœ€é«˜çš„ï¼Œå¤šæ¬¡è¯»å†™éƒ½æ˜¯åœ¨ä¸€ä¸ªcpuä¸Šï¼Œåœ¨å†…å­˜æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå°±æ˜¯æœ€ä½³æ–¹æ¡ˆã€‚</p></blockquote></li></ol><h3 id="RedisæŒ‡ä»¤å¤§å…¨"><a href="#RedisæŒ‡ä»¤å¤§å…¨" class="headerlink" title="RedisæŒ‡ä»¤å¤§å…¨"></a>RedisæŒ‡ä»¤å¤§å…¨</h3><h4 id="Redis-Key"><a href="#Redis-Key" class="headerlink" title="Redis-Key"></a>Redis-Key</h4><p><code>select</code> é€‰æ‹©æ•°æ®åº“</p><p><code>keys *</code>  æŸ¥çœ‹æ‰€æœ‰çš„key</p><p><code>exists</code> key  æŸ¥çœ‹keyæ˜¯å¦å­˜åœ¨</p><p><code>move  key  id</code> æ ¹æ®idå’Œkeyå€¼ç§»é™¤</p><p><code>flushdb</code> æ¸…é™¤å½“å‰æ•°æ®åº“</p><p><code>flushAll</code> æ¸…é™¤å…¨éƒ¨æ•°æ®åº“ä¸­æ‰€æœ‰æ•°æ®</p><p><code>set  key value</code> è®¾ç½®Keyå’Œvalue</p><p><code>get key</code>  è·å¾—keyçš„å€¼</p><p><code>expire key æ—¶é—´</code> è®¾ç½®è¿‡æœŸæ—¶é—´å•ä½ç§’</p><p><code>ttl key</code> æŸ¥çœ‹è¿‡æœŸæ—¶é—´</p><p><code>type key</code> æŸ¥çœ‹å½“å‰keyå­˜åˆ°valueçš„æ•°æ®ç±»å‹</p><p><code>incr  key</code>æ¯æ¬¡æ‰§è¡Œéƒ½è¿›è¡ŒåŠ ä¸€æ“ä½œ</p><p><code>desc key</code> æ¯æ¬¡æ‰§è¡Œéƒ½è¿›è¡Œå‡ä¸€æ“ä½œ</p><p><code>getRange key 0 3</code> æˆªå–å­—ç¬¦ä¸²ã€0,3ã€‘</p><p><code>getRange key 0 -1</code> æˆªå–å…¨éƒ¨çš„å­—ç¬¦ä¸²å’Œget key æ˜¯ä¸€æ ·çš„</p><p><code>setrange key 1 xx</code>  æ›¿æ¢æŒ‡å®šä½ç½®å¼€å§‹çš„å­—ç¬¦ä¸²</p><p><code>settex (set with expire)  key è¿‡æœŸæ—¶é—´ value</code> è®¾ç½®è¿‡æœŸæ—¶é—´ä¸”å€¼ä¸ºvalue</p><p><code>setnx (set if not expire)  key</code>   ä¸å­˜åœ¨çš„æ—¶å€™è®¾ç½®ï¼ˆåœ¨åˆ†å¸ƒå¼ä¸­ä¼šç»å¸¸ä½¿ç”¨ï¼‰ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å­˜åœ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªkey,å¦‚æœä»–å­˜åœ¨çš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šåˆ›å»ºå¤±è´¥</p><p><code>mset key1 value1   key2 value2  ...</code> å¯ä»¥åˆ›å»ºå¤šå¯¹keyå’Œvalue</p><p><code>mget  key1 key2 key3 ...</code>å¯ä»¥åŒæ—¶è·å–å¤šä¸ªå€¼</p><p><code>msetnx k1 v1 k2 v2 ...</code>æ˜¯ä¸€ä¸ªåŸå­æ€§æ“ä½œï¼Œè¦ä¹ˆä¸€èµ·æˆåŠŸï¼Œè¦ä¹ˆä¸€èµ·å¤±è´¥ã€‚</p><h3 id="Redisçš„æ•°æ®ç±»å‹ï¼ˆString-hash-list-set-zsetï¼‰"><a href="#Redisçš„æ•°æ®ç±»å‹ï¼ˆString-hash-list-set-zsetï¼‰" class="headerlink" title="Redisçš„æ•°æ®ç±»å‹ï¼ˆString,hash,list,set,zsetï¼‰"></a>Redisçš„æ•°æ®ç±»å‹ï¼ˆString,hash,list,set,zsetï¼‰</h3><p>Redisæ˜¯ä¸€ä¸ªå¼€æºï¼ˆBSDè®¸å¯ï¼‰ï¼Œå†…å­˜å­˜å‚¨çš„æ•°æ®ç»“æ„æœåŠ¡å™¨ï¼Œå¯ç”¨ä½œæ•°æ®åº“ï¼Œé«˜é€Ÿç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—ä»£ç†ã€‚å®ƒæ”¯æŒ<a href="https://www.redis.net.cn/tutorial/3508.html">å­—ç¬¦ä¸²</a>ã€<a href="https://www.redis.net.cn/tutorial/3509.html">å“ˆå¸Œè¡¨</a>ã€<a href="https://www.redis.net.cn/tutorial/3510.html">åˆ—è¡¨</a>ã€<a href="https://www.redis.net.cn/tutorial/3511.html">é›†åˆ</a>ã€<a href="https://www.redis.net.cn/tutorial/3512.html">æœ‰åºé›†åˆ</a>ï¼Œ<a href="https://www.redis.net.cn/tutorial/3508.html">ä½å›¾</a>ï¼Œ<a href="https://www.redis.net.cn/tutorial/3513.html">hyperloglogs</a>ç­‰æ•°æ®ç±»å‹ã€‚å†…ç½®å¤åˆ¶ã€<a href="https://www.redis.net.cn/tutorial/3516.html">Luaè„šæœ¬</a>ã€LRUæ”¶å›ã€<a href="https://www.redis.net.cn/tutorial/3515.html">äº‹åŠ¡</a>ä»¥åŠä¸åŒçº§åˆ«ç£ç›˜æŒä¹…åŒ–åŠŸèƒ½ï¼ŒåŒæ—¶é€šè¿‡Redis Sentinelæä¾›é«˜å¯ç”¨ï¼Œé€šè¿‡Redis Clusteræä¾›è‡ªåŠ¨<a href="https://www.redis.net.cn/tutorial/3524.html">åˆ†åŒº</a>ã€‚ </p><h4 id="Redis-é”®-key-å‘½ä»¤"><a href="#Redis-é”®-key-å‘½ä»¤" class="headerlink" title="Redis é”®(key) å‘½ä»¤"></a>Redis é”®(key) å‘½ä»¤</h4><div class="table-container"><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>Type å‘½ä»¤</td><td>è¿”å› key æ‰€å‚¨å­˜çš„å€¼çš„ç±»å‹ã€‚</td></tr><tr><td>PEXPIREAT</td><td>è®¾ç½® key çš„è¿‡æœŸæ—¶é—´äº¿ä»¥æ¯«ç§’è®¡ã€‚</td></tr><tr><td>PEXPIREAT</td><td>è®¾ç½® key è¿‡æœŸæ—¶é—´çš„æ—¶é—´æˆ³(unix timestamp) ä»¥æ¯«ç§’è®¡</td></tr><tr><td>Rename</td><td>ä¿®æ”¹ key çš„åç§°</td></tr><tr><td>PERSIST</td><td>ç§»é™¤ key çš„è¿‡æœŸæ—¶é—´ï¼Œkey å°†æŒä¹…ä¿æŒã€‚</td></tr><tr><td>Move</td><td>å°†å½“å‰æ•°æ®åº“çš„ key ç§»åŠ¨åˆ°ç»™å®šçš„æ•°æ®åº“ db å½“ä¸­ã€‚</td></tr><tr><td>RANDOMKEY</td><td>ä»å½“å‰æ•°æ®åº“ä¸­éšæœºè¿”å›ä¸€ä¸ª key ã€‚</td></tr><tr><td>Dump</td><td>åºåˆ—åŒ–ç»™å®š key ï¼Œå¹¶è¿”å›è¢«åºåˆ—åŒ–çš„å€¼ã€‚</td></tr><tr><td>TTL</td><td>ä»¥ç§’ä¸ºå•ä½ï¼Œè¿”å›ç»™å®š key çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´(TTL, time to live)ã€‚</td></tr><tr><td>Expire</td><td>seconds ä¸ºç»™å®š key è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚</td></tr><tr><td>DEL</td><td>è¯¥å‘½ä»¤ç”¨äºåœ¨ key å­˜åœ¨æ˜¯åˆ é™¤ keyã€‚</td></tr><tr><td>Pttl</td><td>ä»¥æ¯«ç§’ä¸ºå•ä½è¿”å› key çš„å‰©ä½™çš„è¿‡æœŸæ—¶é—´ã€‚</td></tr><tr><td>Renamenx</td><td>ä»…å½“ newkey ä¸å­˜åœ¨æ—¶ï¼Œå°† key æ”¹åä¸º newkey ã€‚</td></tr><tr><td>EXISTS</td><td>æ£€æŸ¥ç»™å®š key æ˜¯å¦å­˜åœ¨ã€‚</td></tr><tr><td>Expireat</td><td>EXPIREAT çš„ä½œç”¨å’Œ EXPIRE ç±»ä¼¼ï¼Œéƒ½ç”¨äºä¸º key è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚ ä¸åŒåœ¨äº EXPIREAT å‘½ä»¤æ¥å—çš„æ—¶é—´å‚æ•°æ˜¯ UNIX æ—¶é—´æˆ³(unix timestamp)ã€‚</td></tr><tr><td>Keys</td><td>æ‰¾æ‰€æœ‰ç¬¦åˆç»™å®šæ¨¡å¼( pattern)çš„ key ã€‚</td></tr></tbody></table></div><h4 id="Redis-å­—ç¬¦ä¸²-String-å‘½ä»¤"><a href="#Redis-å­—ç¬¦ä¸²-String-å‘½ä»¤" class="headerlink" title="Redis å­—ç¬¦ä¸²(String) å‘½ä»¤"></a>Redis å­—ç¬¦ä¸²(String) å‘½ä»¤</h4><div class="table-container"><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>Setnx</td><td>åªæœ‰åœ¨ key ä¸å­˜åœ¨æ—¶è®¾ç½® key çš„å€¼ã€‚</td></tr><tr><td>Getrange</td><td>è¿”å› key ä¸­å­—ç¬¦ä¸²å€¼çš„å­å­—ç¬¦</td></tr><tr><td>Mset</td><td>åŒæ—¶è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ª key-value å¯¹ã€‚</td></tr><tr><td>Setex</td><td>å°†å€¼ value å…³è”åˆ° key ï¼Œå¹¶å°† key çš„è¿‡æœŸæ—¶é—´è®¾ä¸º seconds (ä»¥ç§’ä¸ºå•ä½)ã€‚</td></tr><tr><td>SET</td><td>è®¾ç½®æŒ‡å®š key çš„å€¼</td></tr><tr><td>Get</td><td>è·å–æŒ‡å®š key çš„å€¼ã€‚</td></tr><tr><td>Getbit</td><td>å¯¹ key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼ï¼Œè·å–æŒ‡å®šåç§»é‡ä¸Šçš„ä½(bit)ã€‚</td></tr><tr><td>Setbit</td><td>å¯¹ key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼ï¼Œè®¾ç½®æˆ–æ¸…é™¤æŒ‡å®šåç§»é‡ä¸Šçš„ä½(bit)ã€‚</td></tr><tr><td>Decr</td><td>å°† key ä¸­å‚¨å­˜çš„æ•°å­—å€¼å‡ä¸€ã€‚</td></tr><tr><td>Decrby</td><td>key æ‰€å‚¨å­˜çš„å€¼å‡å»ç»™å®šçš„å‡é‡å€¼ï¼ˆdecrementï¼‰ ã€‚</td></tr><tr><td>Strlen</td><td>è¿”å› key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼çš„é•¿åº¦ã€‚</td></tr><tr><td>Msetnx</td><td>åŒæ—¶è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ª key-value å¯¹ï¼Œå½“ä¸”ä»…å½“æ‰€æœ‰ç»™å®š key éƒ½ä¸å­˜åœ¨ã€‚</td></tr><tr><td>Incrby</td><td>å°† key æ‰€å‚¨å­˜çš„å€¼åŠ ä¸Šç»™å®šçš„å¢é‡å€¼ï¼ˆincrementï¼‰ ã€‚</td></tr><tr><td>Incrbyfloat</td><td>å°† key æ‰€å‚¨å­˜çš„å€¼åŠ ä¸Šç»™å®šçš„æµ®ç‚¹å¢é‡å€¼ï¼ˆincrementï¼‰ ã€‚</td></tr><tr><td>Setrange</td><td>ç”¨ value å‚æ•°è¦†å†™ç»™å®š key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼ï¼Œä»åç§»é‡ offset å¼€å§‹ã€‚</td></tr><tr><td>Psetex</td><td>è¿™ä¸ªå‘½ä»¤å’Œ SETEX å‘½ä»¤ç›¸ä¼¼ï¼Œä½†å®ƒä»¥æ¯«ç§’ä¸ºå•ä½è®¾ç½® key çš„ç”Ÿå­˜æ—¶é—´ï¼Œè€Œä¸æ˜¯åƒ SETEX å‘½ä»¤é‚£æ ·ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</td></tr><tr><td>Append</td><td>å¦‚æœ key å·²ç»å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ APPEND å‘½ä»¤å°† value è¿½åŠ åˆ° key åŸæ¥çš„å€¼çš„æœ«å°¾ã€‚</td></tr><tr><td>Getset</td><td>å°†ç»™å®š key çš„å€¼è®¾ä¸º value ï¼Œå¹¶è¿”å› key çš„æ—§å€¼(old value)ã€‚</td></tr><tr><td>Mget</td><td>è·å–æ‰€æœ‰(ä¸€ä¸ªæˆ–å¤šä¸ª)ç»™å®š key çš„å€¼ã€‚</td></tr><tr><td>Incr</td><td>å°† key ä¸­å‚¨å­˜çš„æ•°å­—å€¼å¢ä¸€ã€‚</td></tr></tbody></table></div><h4 id="Redis-å“ˆå¸Œ-Hash-å‘½ä»¤"><a href="#Redis-å“ˆå¸Œ-Hash-å‘½ä»¤" class="headerlink" title="Redis å“ˆå¸Œ(Hash) å‘½ä»¤"></a>Redis å“ˆå¸Œ(Hash) å‘½ä»¤</h4><div class="table-container"><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>Hmset</td><td>åŒæ—¶å°†å¤šä¸ª field-value (åŸŸ-å€¼)å¯¹è®¾ç½®åˆ°å“ˆå¸Œè¡¨ key ä¸­ã€‚</td></tr><tr><td>Hmget</td><td>è·å–æ‰€æœ‰ç»™å®šå­—æ®µçš„å€¼</td></tr><tr><td>Hset</td><td>å°†å“ˆå¸Œè¡¨ key ä¸­çš„å­—æ®µ field çš„å€¼è®¾ä¸º value ã€‚</td></tr><tr><td>Hgetall</td><td>è·å–åœ¨å“ˆå¸Œè¡¨ä¸­æŒ‡å®š key çš„æ‰€æœ‰å­—æ®µå’Œå€¼</td></tr><tr><td>Hget</td><td>è·å–å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­æŒ‡å®šå­—æ®µçš„å€¼/td&gt;</td></tr><tr><td>Hexists</td><td>æŸ¥çœ‹å“ˆå¸Œè¡¨ key ä¸­ï¼ŒæŒ‡å®šçš„å­—æ®µæ˜¯å¦å­˜åœ¨ã€‚</td></tr><tr><td>Hincrby</td><td>ä¸ºå“ˆå¸Œè¡¨ key ä¸­çš„æŒ‡å®šå­—æ®µçš„æ•´æ•°å€¼åŠ ä¸Šå¢é‡ increment ã€‚</td></tr><tr><td>Hlen</td><td>è·å–å“ˆå¸Œè¡¨ä¸­å­—æ®µçš„æ•°é‡</td></tr><tr><td>Hdel</td><td>åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå“ˆå¸Œè¡¨å­—æ®µ</td></tr><tr><td>Hvals</td><td>è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰å€¼</td></tr><tr><td>Hincrbyfloat</td><td>ä¸ºå“ˆå¸Œè¡¨ key ä¸­çš„æŒ‡å®šå­—æ®µçš„æµ®ç‚¹æ•°å€¼åŠ ä¸Šå¢é‡ increment ã€‚</td></tr><tr><td>Hkeys</td><td>è·å–æ‰€æœ‰å“ˆå¸Œè¡¨ä¸­çš„å­—æ®µ</td></tr><tr><td>Hsetnx</td><td>åªæœ‰åœ¨å­—æ®µ field ä¸å­˜åœ¨æ—¶ï¼Œè®¾ç½®å“ˆå¸Œè¡¨å­—æ®µçš„å€¼ã€‚</td></tr></tbody></table></div><h4 id="Redis-åˆ—è¡¨-List-å‘½ä»¤"><a href="#Redis-åˆ—è¡¨-List-å‘½ä»¤" class="headerlink" title="Redis åˆ—è¡¨(List) å‘½ä»¤"></a>Redis åˆ—è¡¨(List) å‘½ä»¤</h4><div class="table-container"><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>Lindex</td><td>é€šè¿‡ç´¢å¼•è·å–åˆ—è¡¨ä¸­çš„å…ƒç´ </td></tr><tr><td>Rpush</td><td>åœ¨åˆ—è¡¨ä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå€¼</td></tr><tr><td>Lrange</td><td>è·å–åˆ—è¡¨æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ </td></tr><tr><td>Rpoplpush</td><td>ç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†è¯¥å…ƒç´ æ·»åŠ åˆ°å¦ä¸€ä¸ªåˆ—è¡¨å¹¶è¿”å›</td></tr><tr><td>Blpop</td><td>ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ å¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚</td></tr><tr><td>Brpop</td><td>ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œ å¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚</td></tr><tr><td>Brpoplpush</td><td>ä»åˆ—è¡¨ä¸­å¼¹å‡ºä¸€ä¸ªå€¼ï¼Œå°†å¼¹å‡ºçš„å…ƒç´ æ’å…¥åˆ°å¦å¤–ä¸€ä¸ªåˆ—è¡¨ä¸­å¹¶è¿”å›å®ƒï¼› å¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚</td></tr><tr><td>Lrem</td><td>ç§»é™¤åˆ—è¡¨å…ƒç´ </td></tr><tr><td>Llen</td><td>è·å–åˆ—è¡¨é•¿åº¦</td></tr><tr><td>Ltrim</td><td>å¯¹ä¸€ä¸ªåˆ—è¡¨è¿›è¡Œä¿®å‰ª(trim)ï¼Œå°±æ˜¯è¯´ï¼Œè®©åˆ—è¡¨åªä¿ç•™æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ ï¼Œä¸åœ¨æŒ‡å®šåŒºé—´ä¹‹å†…çš„å…ƒç´ éƒ½å°†è¢«åˆ é™¤ã€‚</td></tr><tr><td>Lpop</td><td>å‡ºå¹¶è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td></tr><tr><td>Lpushx</td><td>å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°å·²å­˜åœ¨çš„åˆ—è¡¨å¤´éƒ¨</td></tr><tr><td>Linsert</td><td>åœ¨åˆ—è¡¨çš„å…ƒç´ å‰æˆ–è€…åæ’å…¥å…ƒç´ </td></tr><tr><td>Rpop</td><td>ç§»é™¤å¹¶è·å–åˆ—è¡¨æœ€åä¸€ä¸ªå…ƒç´ </td></tr><tr><td>Lset</td><td>é€šè¿‡ç´¢å¼•è®¾ç½®åˆ—è¡¨å…ƒç´ çš„å€¼</td></tr><tr><td>Lpush</td><td>å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨å¤´éƒ¨</td></tr><tr><td>Rpushx</td><td>ä¸ºå·²å­˜åœ¨çš„åˆ—è¡¨æ·»åŠ å€¼</td></tr></tbody></table></div><h4 id="Redis-é›†åˆ-Set-å‘½ä»¤"><a href="#Redis-é›†åˆ-Set-å‘½ä»¤" class="headerlink" title="Redis é›†åˆ(Set) å‘½ä»¤"></a>Redis é›†åˆ(Set) å‘½ä»¤</h4><div class="table-container"><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>Sunion</td><td>è¿”å›æ‰€æœ‰ç»™å®šé›†åˆçš„å¹¶é›†</td></tr><tr><td>Scard</td><td>è·å–é›†åˆçš„æˆå‘˜æ•°</td></tr><tr><td>Srandmember</td><td>è¿”å›é›†åˆä¸­ä¸€ä¸ªæˆ–å¤šä¸ªéšæœºæ•°</td></tr><tr><td>Smembers</td><td>è¿”å›é›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜</td></tr><tr><td>Sinter</td><td>è¿”å›ç»™å®šæ‰€æœ‰é›†åˆçš„äº¤é›†</td></tr><tr><td>Srem</td><td>é™¤é›†åˆä¸­ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</td></tr><tr><td>Smove</td><td>å°† member å…ƒç´ ä» source é›†åˆç§»åŠ¨åˆ° destination é›†åˆ</td></tr><tr><td>Sadd</td><td>å‘é›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</td></tr><tr><td>Sismember</td><td>åˆ¤æ–­ member å…ƒç´ æ˜¯å¦æ˜¯é›†åˆ key çš„æˆå‘˜</td></tr><tr><td>Sdiffstore</td><td>è¿”å›ç»™å®šæ‰€æœ‰é›†åˆçš„å·®é›†å¹¶å­˜å‚¨åœ¨ destination ä¸­</td></tr><tr><td>Sdiff</td><td>è¿”å›ç»™å®šæ‰€æœ‰é›†åˆçš„å·®é›†</td></tr><tr><td>Sscan</td><td>è¿­ä»£é›†åˆä¸­çš„å…ƒç´ </td></tr><tr><td>Sinterstore</td><td>è¿”å›ç»™å®šæ‰€æœ‰é›†åˆçš„äº¤é›†å¹¶å­˜å‚¨åœ¨ destination ä¸­</td></tr><tr><td>Sunionstore</td><td>æ‰€æœ‰ç»™å®šé›†åˆçš„å¹¶é›†å­˜å‚¨åœ¨ destination é›†åˆä¸­</td></tr><tr><td>Spop</td><td>ç§»é™¤å¹¶è¿”å›é›†åˆä¸­çš„ä¸€ä¸ªéšæœºå…ƒç´ </td></tr></tbody></table></div><h4 id="Redis-æœ‰åºé›†åˆ-sorted-set-å‘½ä»¤"><a href="#Redis-æœ‰åºé›†åˆ-sorted-set-å‘½ä»¤" class="headerlink" title="Redis æœ‰åºé›†åˆ(sorted set) å‘½ä»¤"></a>Redis æœ‰åºé›†åˆ(sorted set) å‘½ä»¤</h4><div class="table-container"><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>Zrevrank</td><td>è¿”å›æœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„æ’åï¼Œæœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å‡(ä»å¤§åˆ°å°)æ’åº</td></tr><tr><td>Zlexcount</td><td>åœ¨æœ‰åºé›†åˆä¸­è®¡ç®—æŒ‡å®šå­—å…¸åŒºé—´å†…æˆå‘˜æ•°é‡</td></tr><tr><td>Zunionstore</td><td>è®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„å¹¶é›†ï¼Œå¹¶å­˜å‚¨åœ¨æ–°çš„ key ä¸­</td></tr><tr><td>Zremrangebyrank</td><td>ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„æ’ååŒºé—´çš„æ‰€æœ‰æˆå‘˜</td></tr><tr><td>Zcard</td><td>è·å–æœ‰åºé›†åˆçš„æˆå‘˜æ•°</td></tr><tr><td>Zrem</td><td>ç§»é™¤æœ‰åºé›†åˆä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</td></tr><tr><td>Zinterstore</td><td>è®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„äº¤é›†å¹¶å°†ç»“æœé›†å­˜å‚¨åœ¨æ–°çš„æœ‰åºé›†åˆ key ä¸­</td></tr><tr><td>Zrank</td><td>è¿”å›æœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„ç´¢å¼•</td></tr><tr><td>Zincrby</td><td>æœ‰åºé›†åˆä¸­å¯¹æŒ‡å®šæˆå‘˜çš„åˆ†æ•°åŠ ä¸Šå¢é‡ increment</td></tr><tr><td>Zrangebyscore</td><td>é€šè¿‡åˆ†æ•°è¿”å›æœ‰åºé›†åˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜</td></tr><tr><td>Zrangebylex</td><td>é€šè¿‡å­—å…¸åŒºé—´è¿”å›æœ‰åºé›†åˆçš„æˆå‘˜</td></tr><tr><td>Zscore</td><td>è¿”å›æœ‰åºé›†ä¸­ï¼Œæˆå‘˜çš„åˆ†æ•°å€¼</td></tr><tr><td>Zremrangebyscore</td><td>ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„åˆ†æ•°åŒºé—´çš„æ‰€æœ‰æˆå‘˜</td></tr><tr><td>Zscan</td><td>è¿­ä»£æœ‰åºé›†åˆä¸­çš„å…ƒç´ ï¼ˆåŒ…æ‹¬å…ƒç´ æˆå‘˜å’Œå…ƒç´ åˆ†å€¼ï¼‰</td></tr><tr><td>Zrevrangebyscore</td><td>è¿”å›æœ‰åºé›†ä¸­æŒ‡å®šåˆ†æ•°åŒºé—´å†…çš„æˆå‘˜ï¼Œåˆ†æ•°ä»é«˜åˆ°ä½æ’åº</td></tr><tr><td>Zremrangebylex</td><td>ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„å­—å…¸åŒºé—´çš„æ‰€æœ‰æˆå‘˜</td></tr><tr><td>Zrevrange</td><td>è¿”å›æœ‰åºé›†ä¸­æŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ï¼Œé€šè¿‡ç´¢å¼•ï¼Œåˆ†æ•°ä»é«˜åˆ°åº•</td></tr><tr><td>Zrange</td><td>é€šè¿‡ç´¢å¼•åŒºé—´è¿”å›æœ‰åºé›†åˆæˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜</td></tr><tr><td>Zcount</td><td>è®¡ç®—åœ¨æœ‰åºé›†åˆä¸­æŒ‡å®šåŒºé—´åˆ†æ•°çš„æˆå‘˜æ•°</td></tr><tr><td>Zadd</td><td>å‘æœ‰åºé›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ï¼Œæˆ–è€…æ›´æ–°å·²å­˜åœ¨æˆå‘˜çš„åˆ†æ•°</td></tr></tbody></table></div><h4 id="Redis-è¿æ¥-å‘½ä»¤"><a href="#Redis-è¿æ¥-å‘½ä»¤" class="headerlink" title="Redis è¿æ¥ å‘½ä»¤"></a>Redis è¿æ¥ å‘½ä»¤</h4><div class="table-container"><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>Echo</td><td>æ‰“å°å­—ç¬¦ä¸²</td></tr><tr><td>Select</td><td>åˆ‡æ¢åˆ°æŒ‡å®šçš„æ•°æ®åº“</td></tr><tr><td>Ping</td><td>æŸ¥çœ‹æœåŠ¡æ˜¯å¦è¿è¡Œ</td></tr><tr><td>Quit</td><td>å…³é—­å½“å‰è¿æ¥</td></tr><tr><td>Auth</td><td>éªŒè¯å¯†ç æ˜¯å¦æ­£ç¡®</td></tr></tbody></table></div><h4 id="Redis-æœåŠ¡å™¨-å‘½ä»¤"><a href="#Redis-æœåŠ¡å™¨-å‘½ä»¤" class="headerlink" title="Redis æœåŠ¡å™¨ å‘½ä»¤"></a>Redis æœåŠ¡å™¨ å‘½ä»¤</h4><div class="table-container"><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>Client Pause</td><td>åœ¨æŒ‡å®šæ—¶é—´å†…ç»ˆæ­¢è¿è¡Œæ¥è‡ªå®¢æˆ·ç«¯çš„å‘½ä»¤</td></tr><tr><td>Debug Object</td><td>è·å– key çš„è°ƒè¯•ä¿¡æ¯</td></tr><tr><td>Flushdb</td><td>åˆ é™¤å½“å‰æ•°æ®åº“çš„æ‰€æœ‰key</td></tr><tr><td>Save</td><td>å¼‚æ­¥ä¿å­˜æ•°æ®åˆ°ç¡¬ç›˜</td></tr><tr><td>Showlog</td><td>ç®¡ç† redis çš„æ…¢æ—¥å¿—</td></tr><tr><td>Lastsave</td><td>è¿”å›æœ€è¿‘ä¸€æ¬¡ Redis æˆåŠŸå°†æ•°æ®ä¿å­˜åˆ°ç£ç›˜ä¸Šçš„æ—¶é—´ï¼Œä»¥ UNIX æ—¶é—´æˆ³æ ¼å¼è¡¨ç¤º</td></tr><tr><td>Config Get</td><td>è·å–æŒ‡å®šé…ç½®å‚æ•°çš„å€¼</td></tr><tr><td>Command</td><td>è·å– Redis å‘½ä»¤è¯¦æƒ…æ•°ç»„</td></tr><tr><td>Slaveof</td><td>å°†å½“å‰æœåŠ¡å™¨è½¬å˜ä¸ºæŒ‡å®šæœåŠ¡å™¨çš„ä»å±æœåŠ¡å™¨(slave server)</td></tr><tr><td>Debug Segfault</td><td>è®© Redis æœåŠ¡å´©æºƒ</td></tr><tr><td>Flushall</td><td>åˆ é™¤æ‰€æœ‰æ•°æ®åº“çš„æ‰€æœ‰key</td></tr><tr><td>Dbsize</td><td>è¿”å›å½“å‰æ•°æ®åº“çš„ key çš„æ•°é‡</td></tr><tr><td>Bgrewriteaof</td><td>å¼‚æ­¥æ‰§è¡Œä¸€ä¸ª AOFï¼ˆAppendOnly Fileï¼‰ æ–‡ä»¶é‡å†™æ“ä½œ</td></tr><tr><td>Cluster Slots</td><td>è·å–é›†ç¾¤èŠ‚ç‚¹çš„æ˜ å°„æ•°ç»„</td></tr><tr><td>Config Set</td><td>ä¿®æ”¹ redis é…ç½®å‚æ•°ï¼Œæ— éœ€é‡å¯</td></tr><tr><td>Command Info</td><td>è·å–æŒ‡å®š Redis å‘½ä»¤æè¿°çš„æ•°ç»„</td></tr><tr><td>Shutdown</td><td>å¼‚æ­¥ä¿å­˜æ•°æ®åˆ°ç¡¬ç›˜ï¼Œå¹¶å…³é—­æœåŠ¡å™¨</td></tr><tr><td>Sync</td><td>ç”¨äºå¤åˆ¶åŠŸèƒ½(replication)çš„å†…éƒ¨å‘½ä»¤</td></tr><tr><td>Client Kill</td><td>å…³é—­å®¢æˆ·ç«¯è¿æ¥</td></tr><tr><td>Role</td><td>è¿”å›ä¸»ä»å®ä¾‹æ‰€å±çš„è§’è‰²</td></tr><tr><td>Monitor</td><td>å®æ—¶æ‰“å°å‡º Redis æœåŠ¡å™¨æ¥æ”¶åˆ°çš„å‘½ä»¤ï¼Œè°ƒè¯•ç”¨</td></tr><tr><td>Command Getkeys</td><td>è·å–ç»™å®šå‘½ä»¤çš„æ‰€æœ‰é”®</td></tr><tr><td>Client Getname</td><td>è·å–è¿æ¥çš„åç§°</td></tr><tr><td>Config Resetstat</td><td>é‡ç½® INFO å‘½ä»¤ä¸­çš„æŸäº›ç»Ÿè®¡æ•°æ®</td></tr><tr><td>Command Count</td><td>è·å– Redis å‘½ä»¤æ€»æ•°</td></tr><tr><td>Time</td><td>è¿”å›å½“å‰æœåŠ¡å™¨æ—¶é—´</td></tr><tr><td>Info</td><td>è·å– Redis æœåŠ¡å™¨çš„å„ç§ä¿¡æ¯å’Œç»Ÿè®¡æ•°å€¼</td></tr><tr><td>Config rewrite</td><td>å¯¹å¯åŠ¨ Redis æœåŠ¡å™¨æ—¶æ‰€æŒ‡å®šçš„ redis.conf é…ç½®æ–‡ä»¶è¿›è¡Œæ”¹å†™</td></tr><tr><td>Client List</td><td>è·å–è¿æ¥åˆ°æœåŠ¡å™¨çš„å®¢æˆ·ç«¯è¿æ¥åˆ—è¡¨</td></tr><tr><td>Client Setname</td><td>è®¾ç½®å½“å‰è¿æ¥çš„åç§°</td></tr><tr><td>Bgsave</td><td>åœ¨åå°å¼‚æ­¥ä¿å­˜å½“å‰æ•°æ®åº“çš„æ•°æ®åˆ°ç£ç›˜</td></tr></tbody></table></div><h4 id="Redis-è„šæœ¬-å‘½ä»¤"><a href="#Redis-è„šæœ¬-å‘½ä»¤" class="headerlink" title="Redis è„šæœ¬ å‘½ä»¤"></a>Redis è„šæœ¬ å‘½ä»¤</h4><div class="table-container"><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>Script kill</td><td>æ€æ­»å½“å‰æ­£åœ¨è¿è¡Œçš„ Lua è„šæœ¬ã€‚</td></tr><tr><td>Script Load</td><td>å°†è„šæœ¬ script æ·»åŠ åˆ°è„šæœ¬ç¼“å­˜ä¸­ï¼Œä½†å¹¶ä¸ç«‹å³æ‰§è¡Œè¿™ä¸ªè„šæœ¬ã€‚</td></tr><tr><td>Eval</td><td>æ‰§è¡Œ Lua è„šæœ¬ã€‚</td></tr><tr><td>Evalsha</td><td>æ‰§è¡Œ Lua è„šæœ¬ã€‚</td></tr><tr><td>Script Exists</td><td>æŸ¥çœ‹æŒ‡å®šçš„è„šæœ¬æ˜¯å¦å·²ç»è¢«ä¿å­˜åœ¨ç¼“å­˜å½“ä¸­ã€‚</td></tr><tr><td>Script Flush</td><td>ä»è„šæœ¬ç¼“å­˜ä¸­ç§»é™¤æ‰€æœ‰è„šæœ¬ã€‚</td></tr></tbody></table></div><h4 id="Redis-äº‹åŠ¡-å‘½ä»¤"><a href="#Redis-äº‹åŠ¡-å‘½ä»¤" class="headerlink" title="Redis äº‹åŠ¡ å‘½ä»¤"></a>Redis äº‹åŠ¡ å‘½ä»¤</h4><div class="table-container"><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>Exec</td><td>æ‰§è¡Œæ‰€æœ‰äº‹åŠ¡å—å†…çš„å‘½ä»¤ã€‚</td></tr><tr><td>Watch</td><td>ç›‘è§†ä¸€ä¸ª(æˆ–å¤šä¸ª) key ï¼Œå¦‚æœåœ¨äº‹åŠ¡æ‰§è¡Œä¹‹å‰è¿™ä¸ª(æˆ–è¿™äº›) key è¢«å…¶ä»–å‘½ä»¤æ‰€æ”¹åŠ¨ï¼Œé‚£ä¹ˆäº‹åŠ¡å°†è¢«æ‰“æ–­ã€‚</td></tr><tr><td>Discard</td><td>å–æ¶ˆäº‹åŠ¡ï¼Œæ”¾å¼ƒæ‰§è¡Œäº‹åŠ¡å—å†…çš„æ‰€æœ‰å‘½ä»¤ã€‚</td></tr><tr><td>Unwatch</td><td>å–æ¶ˆ WATCH å‘½ä»¤å¯¹æ‰€æœ‰ key çš„ç›‘è§†ã€‚</td></tr><tr><td>Multi</td><td>æ ‡è®°ä¸€ä¸ªäº‹åŠ¡å—çš„å¼€å§‹ã€‚</td></tr></tbody></table></div><h4 id="Redis-HyperLogLog-å‘½ä»¤"><a href="#Redis-HyperLogLog-å‘½ä»¤" class="headerlink" title="Redis HyperLogLog å‘½ä»¤"></a>Redis HyperLogLog å‘½ä»¤</h4><div class="table-container"><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>Pgmerge</td><td>å°†å¤šä¸ª HyperLogLog åˆå¹¶ä¸ºä¸€ä¸ª HyperLogLog</td></tr><tr><td>Pfadd</td><td>æ·»åŠ æŒ‡å®šå…ƒç´ åˆ° HyperLogLog ä¸­ã€‚</td></tr><tr><td>Pfcount</td><td>è¿”å›ç»™å®š HyperLogLog çš„åŸºæ•°ä¼°ç®—å€¼ã€‚</td></tr></tbody></table></div><h4 id="Redis-å‘å¸ƒè®¢é˜…-å‘½ä»¤"><a href="#Redis-å‘å¸ƒè®¢é˜…-å‘½ä»¤" class="headerlink" title="Redis å‘å¸ƒè®¢é˜… å‘½ä»¤"></a>Redis å‘å¸ƒè®¢é˜… å‘½ä»¤</h4><div class="table-container"><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>Unsubscribe</td><td>æŒ‡é€€è®¢ç»™å®šçš„é¢‘é“ã€‚</td></tr><tr><td>Subscribe</td><td>è®¢é˜…ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“çš„ä¿¡æ¯ã€‚</td></tr><tr><td>Pubsub</td><td>æŸ¥çœ‹è®¢é˜…ä¸å‘å¸ƒç³»ç»ŸçŠ¶æ€ã€‚</td></tr><tr><td>Punsubscribe</td><td>é€€è®¢æ‰€æœ‰ç»™å®šæ¨¡å¼çš„é¢‘é“ã€‚</td></tr><tr><td>Publish</td><td>å°†ä¿¡æ¯å‘é€åˆ°æŒ‡å®šçš„é¢‘é“ã€‚</td></tr><tr><td>Psubscribe</td><td>è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªç¬¦åˆç»™å®šæ¨¡å¼çš„é¢‘é“ã€‚</td></tr></tbody></table></div><h4 id="Redis-åœ°ç†ä½ç½®-geo-å‘½ä»¤"><a href="#Redis-åœ°ç†ä½ç½®-geo-å‘½ä»¤" class="headerlink" title="Redis åœ°ç†ä½ç½®(geo) å‘½ä»¤"></a>Redis åœ°ç†ä½ç½®(geo) å‘½ä»¤</h4><div class="table-container"><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>GEOHASH</td><td>è¿”å›ä¸€ä¸ªæˆ–å¤šä¸ªä½ç½®å…ƒç´ çš„ Geohash è¡¨ç¤º</td></tr><tr><td>GEOPOS</td><td>ä»keyé‡Œè¿”å›æ‰€æœ‰ç»™å®šä½ç½®å…ƒç´ çš„ä½ç½®ï¼ˆç»åº¦å’Œçº¬åº¦ï¼‰</td></tr><tr><td>GEODIST</td><td>è¿”å›ä¸¤ä¸ªç»™å®šä½ç½®ä¹‹é—´çš„è·ç¦»</td></tr><tr><td>GEORADIUS</td><td>ä»¥ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œ æ‰¾å‡ºæŸä¸€åŠå¾„å†…çš„å…ƒç´ </td></tr><tr><td>GEOADD</td><td>å°†æŒ‡å®šçš„åœ°ç†ç©ºé—´ä½ç½®ï¼ˆçº¬åº¦ã€ç»åº¦ã€åç§°ï¼‰æ·»åŠ åˆ°æŒ‡å®šçš„keyä¸­</td></tr><tr><td>GEORADIUSBYMEMBER</td><td>æ‰¾å‡ºä½äºæŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ï¼Œä¸­å¿ƒç‚¹æ˜¯ç”±ç»™å®šçš„ä½ç½®å…ƒç´ å†³å®š</td></tr></tbody></table></div><h3 id="å¦‚ä½•åœ¨Redisä¸­ä½¿ç”¨æ‚²è§‚é”å’Œä¹è§‚é”"><a href="#å¦‚ä½•åœ¨Redisä¸­ä½¿ç”¨æ‚²è§‚é”å’Œä¹è§‚é”" class="headerlink" title="å¦‚ä½•åœ¨Redisä¸­ä½¿ç”¨æ‚²è§‚é”å’Œä¹è§‚é”"></a>å¦‚ä½•åœ¨Redisä¸­ä½¿ç”¨æ‚²è§‚é”å’Œä¹è§‚é”</h3><p>ä¹è§‚é”ä¸€èˆ¬é‡‡å–çš„æ–¹å¼ï¼š</p><p>è·å–ç‰ˆæœ¬å·ï¼Œä¹Ÿå°±æ˜¯version</p><p>ç„¶åæ›´æ–°çš„æ—¶å€™æ¯”è¾ƒç‰ˆæœ¬å·</p><blockquote><p>Redisæ£€æµ‹æµ‹è¯•</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; select 2  é€‰æ‹©æ•°æ®åº“</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[2]&gt; <span class="built_in">set</span> money 100  </span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[2]&gt; <span class="built_in">set</span> out 0</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[2]&gt; watch money <span class="comment">#ç›‘è§†moneyå¯¹è±¡</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[2]&gt; multi <span class="comment"># äº‹åŠ¡æ­£å¸¸ç»“æŸï¼Œæ•°æ®æ²¡æœ‰å‘ç”Ÿå˜åŠ¨ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ­£å¸¸æ‰§è¡ŒæˆåŠŸ</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[2](TX)&gt; decrby money 20</span><br><span class="line">QUEUED</span><br><span class="line">127.0.0.1:6379[2](TX)&gt; incrby out 20</span><br><span class="line">QUEUED</span><br></pre></td></tr></table></figure><p>ä¹è§‚é”</p><p>æµç¨‹</p><ol><li>å…ˆ<strong>watch   key</strong> ç›‘è§†                     </li><li>ç„¶å         <strong>multi</strong>          ç›‘æµ‹äº‹åŠ¡,ç›‘æµ‹äº‹åŠ¡æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œå¦‚æœæ²¡æœ‰å˜åŒ–é‚£å°±å¯ä»¥æ‰§è¡ŒæˆåŠŸï¼Œå¦‚æœå‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆå¯¹ä¸èµ·ï¼Œæ‰§è¡Œå¤±è´¥</li><li>å¦‚æœå‘ç°äº‹åŠ¡æ‰§è¡Œå¤±è´¥ï¼Œé‚£ä¹ˆå°±å…ˆè§£é”          ä¹Ÿå°±æ˜¯<strong>unwatch</strong></li><li>è·å–æœ€æ–°çš„å€¼ï¼Œå†æ¬¡ç›‘è§†ï¼Œselect version , <strong>watch key</strong><br> . <strong>decrby key</strong> å€¼             å‡å°‘<br> . <strong>incrby key</strong> å€¼             å¢åŠ </li></ol><h3 id="Jedis"><a href="#Jedis" class="headerlink" title="Jedis"></a>Jedis</h3><p>:arrow_down_small:æ˜¯javaæ“ä½œredisä¸­çš„ä¸­é—´ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯¼å…¥jedisçš„åŒ…--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.41<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªnew Jediså¯¹è±¡</span></span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;192.168.1.100&quot;</span>,<span class="number">6379</span>);</span><br><span class="line">        <span class="comment">//jedisæ‰€æœ‰çš„æŒ‡ä»¤å°±æ˜¯æˆ‘ä»¬å­¦çš„æ‰€æœ‰çš„æŒ‡ä»¤</span></span><br><span class="line">        System.out.println(jedis.ping());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><p>PONG  è¯´æ˜é“¾æ¥æˆåŠŸ</p><h3 id="Redisäº‹åŠ¡"><a href="#Redisäº‹åŠ¡" class="headerlink" title="Redisäº‹åŠ¡"></a>Redisäº‹åŠ¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">redisçš„äº‹åŠ¡å¤„ç†</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Redis</span>äº‹åŠ¡ &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//å¼€å¯é“¾æ¥</span></span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;192.168.1.100&quot;</span>,<span class="number">6379</span>);</span><br><span class="line">        <span class="comment">//æ¸…ç©ºå½“å‰æ•°æ®åº“</span></span><br><span class="line">        jedis.flushDB();</span><br><span class="line">        <span class="comment">//å°†æ•°æ®è½¬æ¢ä¸ºjsonæ ¼å¼ï¼Œç›®å‰å…¬å¸å¤§éƒ¨åˆ†ä½¿ç”¨çš„å‡æ˜¯json</span></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        jsonObject.put(<span class="string">&quot;u1&quot;</span>,<span class="string">&quot;æˆ‘å–œæ¬¢&quot;</span>);</span><br><span class="line">        jsonObject.put(<span class="string">&quot;u2&quot;</span>,<span class="string">&quot;ä½ &quot;</span>);</span><br><span class="line">        <span class="comment">//å¼€å¯äº‹åŠ¡</span></span><br><span class="line">        <span class="type">Transaction</span> <span class="variable">multi</span> <span class="operator">=</span> jedis.multi();</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> jsonObject.toJSONString();</span><br><span class="line">        <span class="comment">//  System.out.println(jedis.ping());</span></span><br><span class="line">        <span class="comment">//å¦‚æœæˆ‘éœ€è¦ç›‘æ§ï¼Œé‚£ä¹ˆæˆ‘å°±éœ€è¦åŠ ä¸€ä¸ªä¹è§‚é”</span></span><br><span class="line">        jedis.watch(result);<span class="comment">//åŠ ä¸€ä¸ªé”</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            multi.set(<span class="string">&quot;u1&quot;</span>,result);</span><br><span class="line">            multi.set(<span class="string">&quot;u2&quot;</span>,result);</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">            multi.exec();<span class="comment">//å¦‚æœæˆåŠŸæ‰§è¡Œäº‹åŠ¡</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            multi.discard(); <span class="comment">//å¦‚æœå¤±è´¥äº†ï¼Œé‚£ä¹ˆå°±äº‹åŠ¡å›æ»šï¼Œæˆ–è€…äº‹åŠ¡æ”¾å¼ƒ</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(jedis.get(<span class="string">&quot;u1&quot;</span>));</span><br><span class="line">            System.out.println(jedis.get(<span class="string">&quot;u2&quot;</span>));</span><br><span class="line">            jedis.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//multi.set(&quot;u1&quot;,&quot;è€èƒ¡&quot;);</span></span><br><span class="line">       <span class="comment">/*</span></span><br><span class="line"><span class="comment">        HashMap map = new HashMap();</span></span><br><span class="line"><span class="comment">        String ke = &quot;k1&quot;;</span></span><br><span class="line"><span class="comment">        map.put(ke,&quot;å°é»‘&quot;);</span></span><br><span class="line"><span class="comment">        map.put(ke,&quot;ä½ å¥½&quot;);</span></span><br><span class="line"><span class="comment">        System.out.println(map);</span></span><br><span class="line"><span class="comment">        System.out.println(map.size());</span></span><br><span class="line"><span class="comment">        &#123;k1=ä½ å¥½&#125;</span></span><br><span class="line"><span class="comment">            1</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">        <span class="comment">//è¿æ¥å…³é—­</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="SpringBootæ•´åˆRedis"><a href="#SpringBootæ•´åˆRedis" class="headerlink" title="SpringBootæ•´åˆRedis"></a>SpringBootæ•´åˆRedis</h3><p>springBootæ“ä½œæ•°æ®ï¼š spring-data         jpa         JDBC     MONGODB      Redis</p><blockquote><p>æ³¨æ„åœ¨springBoot 2.xä¹‹åï¼ŒåŸæ¥çš„rediséƒ½è¢«æ›¿æ¢ä¸ºlettuce</p></blockquote><p>Jedis ï¼š é‡‡ç”¨çš„ç›´è¿ï¼Œå¤šä¸ªçº¿ç¨‹æ“ä½œçš„è¯æ˜¯ä¸å®‰å…¨çš„ï¼Œå¦‚æœæƒ³è¦é¿å…ä¸å®‰å…¨ï¼Œä½¿ç”¨jedis poolé“¾æ¥æ± ã€‚BIO</p><p>lettuceï¼šé‡‡ç”¨nettyï¼Œå®ä¾‹å¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸‹ä½¿ç”¨ï¼Œä¸å­˜åœ¨çº¿ç¨‹ä¸å®‰å…¨çš„æƒ…å†µï¼Œå¯ä»¥å‡å°‘çº¿ç¨‹æ•°æ®ï¼Œæ›´åŠ åƒNIOæ¨¡å¼ã€‚</p><ol><li><p>å¯¼å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯¼å…¥jedisçš„åŒ…--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.41<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><ol><li><p>é…ç½®æ–‡ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é…ç½®redis</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.100</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br></pre></td></tr></table></figure></li></ol><ol><li><p>æµ‹è¯•</p><p>æºç åˆ†æ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(</span></span><br><span class="line"><span class="meta">    proxyBeanMethods = false</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123;RedisOperations.class&#125;)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123;RedisProperties.class&#125;)</span></span><br><span class="line"><span class="meta">@Import(&#123;LettuceConnectionConfiguration.class, JedisConnectionConfiguration.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisAutoConfiguration</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RedisAutoConfiguration</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean( //åªæœ‰åœ¨æ²¡æœ‰çš„æ—¶å€™ä½¿ç”¨ï¼Œæ•…è€Œï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªRedisTemplate</span></span><br><span class="line"><span class="meta">        name = &#123;&quot;redisTemplate&quot;&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">        <span class="comment">//é»˜è®¤çš„ï¼ŒredisTemplate ï¼Œæ²¡æœ‰è¿‡å¤šçš„è®¾ç½®ï¼Œrediså¯¹è±¡éƒ½æ˜¯éœ€è¦åºåˆ—åŒ–</span></span><br><span class="line">    <span class="comment">//ä¸¤ä¸ªæ³›å‹è¯»ä¹¦Object,Objectçš„ç±»å‹ï¼Œæˆ‘ä»¬ä½¿ç”¨éœ€è¦å¼ºåˆ¶è½¬æ¢ä¸º&lt;String,Obeject&gt;</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;Object, Object&gt; <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span> <span class="keyword">throws</span> UnknownHostException &#123;</span><br><span class="line">        RedisTemplate&lt;Object, Object&gt; template = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>();</span><br><span class="line">        template.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line">    <span class="comment">//ç”±äºStringæ˜¯Redisçš„æœ€å¸¸ä½¿ç”¨çš„ç±»å‹ï¼Œæ‰€ä»¥ä½†å¯¹æå‡ºæ¥äº†ä¸€ä¸ªbean</span></span><br><span class="line">    <span class="keyword">public</span> StringRedisTemplate <span class="title function_">stringRedisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span> <span class="keyword">throws</span> UnknownHostException &#123;</span><br><span class="line">        <span class="type">StringRedisTemplate</span> <span class="variable">template</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringRedisTemplate</span>();</span><br><span class="line">        template.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RedisSpringBootApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate redisTemplate ;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="comment">/*</span></span><br><span class="line"><span class="comment">        redisTemplate æ“ä½œä¸åŒçš„æ•°æ®ç±»å‹ã€‚apiå’Œæˆ‘ä»¬çš„æŒ‡ä»¤æ˜¯ä¸€æ ·çš„</span></span><br><span class="line"><span class="comment">        opsForValue  æ“ä½œå­—ç¬¦ä¸²ï¼Œç±»ä¼¼String</span></span><br><span class="line"><span class="comment">        opsForList æ“ä½œlist ç›¸å½“äºlist</span></span><br><span class="line"><span class="comment">        opsForSet</span></span><br><span class="line"><span class="comment">        opsForHash</span></span><br><span class="line"><span class="comment">        opsForZSet</span></span><br><span class="line"><span class="comment">        opsForGeo</span></span><br><span class="line"><span class="comment">        opsForHyperLogLogLog</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        é™¤äº†åŸºæœ¬çš„æ“ä½œï¼Œæˆ‘ä»¬å¸¸ç”¨æ–¹æ³•éƒ½å¯ä»¥ä½¿ç”¨redisTemplateæ“ä½œ</span></span><br><span class="line"><span class="comment">        æ¯”å¦‚äº‹åŠ¡å’ŒåŸºæœ¬çš„æ“ä½œ</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        è·å–redisçš„é“¾æ¥å¯¹è±¡</span></span><br><span class="line"><span class="comment">        RedisConnection redisConnection = redisTemplate.getConnectionFactory().getConnection();</span></span><br><span class="line"><span class="comment">        redisConnection.flushDb();</span></span><br><span class="line"><span class="comment">        redisConnection.flushAll();</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">&quot;k&quot;</span>,<span class="number">123</span>);</span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">&quot;k1&quot;</span>,<span class="string">&quot;ç½—å°é»‘&quot;</span>);</span><br><span class="line">        System.out.println(redisTemplate.opsForValue().get(<span class="string">&quot;k&quot;</span>));</span><br><span class="line">        System.out.println(redisTemplate.opsForValue().get(<span class="string">&quot;k1&quot;</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é…ç½®ä¿¡æ¯ï¼›</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xh<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Redis_SpringBoot<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Redis_SpringBoot<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Redis_SpringBoot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring-boot.version</span>&gt;</span>2.3.7.RELEASE<span class="tag">&lt;/<span class="name">spring-boot.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--   é‡ç‚¹jacksonï¼Œæ˜¯æˆ‘ä»¬å°†redisçš„æ ¼å¼è½¬æ¢ä¸ºredisæ ¼å¼ï¼Œæ–¹ä¾¿æˆ‘ä»¬æœ€ç›´è§‚çš„æŸ¥çœ‹     --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis-reactive<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.taobao.arthas<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>arthas-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.projectreactor<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>reactor-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-boot.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.xh.redis_springboot.RedisSpringBootApplication<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span>repackage<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>repackage<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è‡ªå®šä¹‰RedisTemplate</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Title è‡ªå®šä¹‰ä¸€ä¸ªTemplate</span></span><br><span class="line"><span class="comment"> * @Description </span></span><br><span class="line"><span class="comment"> * @author  ç½—å°é»‘</span></span><br><span class="line"><span class="comment"> * @param null</span></span><br><span class="line"><span class="comment"> * @return </span></span><br><span class="line"><span class="comment"> * @date 2022/10/12 19:34</span></span><br><span class="line"><span class="comment"> * @email </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Redis_self_RedisTemplate</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory factory)</span></span><br><span class="line">            <span class="keyword">throws</span> UnknownHostException &#123;</span><br><span class="line">        RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>&lt;String, Object&gt;();</span><br><span class="line">        template.setConnectionFactory(factory);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åºåˆ—åŒ–é…ç½®</span></span><br><span class="line">        <span class="comment">// jsonåºåˆ—åŒ–é…ç½®</span></span><br><span class="line">        <span class="type">Jackson2JsonRedisSerializer</span> <span class="variable">objectJackson2JsonRedisSerializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jackson2JsonRedisSerializer</span>&lt;&gt;(Object.class);</span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        objectMapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">        <span class="comment">// Stringåºåˆ—åŒ–é…ç½®</span></span><br><span class="line">        <span class="type">StringRedisSerializer</span> <span class="variable">stringRedisSerializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>();</span><br><span class="line"></span><br><span class="line">        template.setHashValueSerializer(objectJackson2JsonRedisSerializer);</span><br><span class="line">        template.setValueSerializer(objectJackson2JsonRedisSerializer);</span><br><span class="line"></span><br><span class="line">        template.setHashKeySerializer(stringRedisSerializer);</span><br><span class="line">        template.setKeySerializer(stringRedisSerializer);</span><br><span class="line">        template.afterPropertiesSet();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è‡ªå®šä¹‰RedisUtilå·¥å…·ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xh.redis_springboot.Util;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.RedisConnection;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Title æˆ‘ä»¬åœ¨ä½¿ç”¨Redisçš„æ—¶å€™é€šå¸¸ä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„å·¥å…·ç±»</span></span><br><span class="line"><span class="comment"> * @Description è¿™æ˜¯ä¸€ç§æ€æƒ³ï¼Œä¸€ç§å°è£…é‡ç”¨çš„æ€æƒ³ï¼Œé¿å…æˆ‘ä»¬ç›´æ¥å»ä½¿ç”¨redisè‡ªå¸¦çš„æŒ‡ä»¤</span></span><br><span class="line"><span class="comment"> * @author  ç½—å°é»‘</span></span><br><span class="line"><span class="comment"> * @param null</span></span><br><span class="line"><span class="comment"> * @return</span></span><br><span class="line"><span class="comment"> * @date 2022/10/12 20:19</span></span><br><span class="line"><span class="comment"> * @email 2844135670@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisUtil</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//============================Common=============================</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å…³é—­</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//è·å–é“¾æ¥ç„¶åå¯¼å…¥</span></span><br><span class="line">        <span class="type">RedisConnection</span> <span class="variable">redisConnection</span> <span class="operator">=</span> Objects.requireNonNull(redisTemplate.getConnectionFactory()).getConnection();</span><br><span class="line">        redisConnection.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¸…ç©º</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">flushDB</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">RedisConnection</span> <span class="variable">redisConnection</span> <span class="operator">=</span> Objects.requireNonNull(redisTemplate.getConnectionFactory()).getConnection();</span><br><span class="line">        redisConnection.flushDb();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŒ‡å®šç¼“å­˜å¤±æ•ˆæ—¶é—´</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time æ—¶é—´(ç§’)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">expire</span><span class="params">(String key, Long time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                redisTemplate.expire(key, time, TimeUnit.SECONDS);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®key è·å–è¿‡æœŸæ—¶é—´</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”® ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ—¶é—´(ç§’) è¿”å›0ä»£è¡¨ä¸ºæ°¸ä¹…æœ‰æ•ˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getExpire</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.getExpire(key, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true å­˜åœ¨ falseä¸å­˜åœ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">hasKey</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.hasKey(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤ç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key å¯ä»¥ä¼ ä¸€ä¸ªå€¼ æˆ–å¤šä¸ª</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">del</span><span class="params">(String... key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (key != <span class="literal">null</span> &amp;&amp; key.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (key.length == <span class="number">1</span>) &#123;</span><br><span class="line">                redisTemplate.delete(key[<span class="number">0</span>]);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                redisTemplate.delete(Arrays.asList(key));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//============================String=============================</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ™®é€šç¼“å­˜è·å–</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">get</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> key == <span class="literal">null</span> ? <span class="literal">null</span> : redisTemplate.opsForValue().get(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ™®é€šç¼“å­˜æ”¾å…¥</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> trueæˆåŠŸ falseå¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">set</span><span class="params">(String key, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForValue().set(key, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ™®é€šç¼“å­˜æ”¾å…¥å¹¶è®¾ç½®æ—¶é—´</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time  æ—¶é—´(ç§’) timeè¦å¤§äº0 å¦‚æœtimeå°äºç­‰äº0 å°†è®¾ç½®æ— é™æœŸ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> trueæˆåŠŸ false å¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">set</span><span class="params">(String key, Object value, Long time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                redisTemplate.opsForValue().set(key, value, time, TimeUnit.SECONDS);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                set(key, value);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€’å¢</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> delta è¦å¢åŠ å‡ (å¤§äº0)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">incr</span><span class="params">(String key, Long delta)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (delta &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;é€’å¢å› å­å¿…é¡»å¤§äº0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForValue().increment(key, delta);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€’å‡</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> delta è¦å‡å°‘å‡ (å°äº0)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">decr</span><span class="params">(String key, Long delta)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (delta &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;é€’å‡å› å­å¿…é¡»å¤§äº0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForValue().increment(key, -delta);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//================================Map=================================</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * HashGet</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”® ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item é¡¹ ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">hget</span><span class="params">(String key, String item)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().get(key, item);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–hashKeyå¯¹åº”çš„æ‰€æœ‰é”®å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¯¹åº”çš„å¤šä¸ªé”®å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;Object, Object&gt; <span class="title function_">hmget</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().entries(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * HashSet</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> map å¯¹åº”å¤šä¸ªé”®å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true æˆåŠŸ false å¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">hmset</span><span class="params">(String key, Map&lt;String, Object&gt; map)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().putAll(key, map);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * HashSet å¹¶è®¾ç½®æ—¶é—´</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> map  å¯¹åº”å¤šä¸ªé”®å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time æ—¶é—´(ç§’)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> trueæˆåŠŸ falseå¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">hmset</span><span class="params">(String key, Map&lt;String, Object&gt; map, Long time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().putAll(key, map);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                expire(key, time);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘ä¸€å¼ hashè¡¨ä¸­æ”¾å…¥æ•°æ®,å¦‚æœä¸å­˜åœ¨å°†åˆ›å»º</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item  é¡¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true æˆåŠŸ falseå¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">hset</span><span class="params">(String key, String item, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().put(key, item, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘ä¸€å¼ hashè¡¨ä¸­æ”¾å…¥æ•°æ®,å¦‚æœä¸å­˜åœ¨å°†åˆ›å»º</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item  é¡¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time  æ—¶é—´(ç§’)  æ³¨æ„:å¦‚æœå·²å­˜åœ¨çš„hashè¡¨æœ‰æ—¶é—´,è¿™é‡Œå°†ä¼šæ›¿æ¢åŸæœ‰çš„æ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true æˆåŠŸ falseå¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">hset</span><span class="params">(String key, String item, Object value, Long time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().put(key, item, value);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                expire(key, time);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤hashè¡¨ä¸­çš„å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”® ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item é¡¹ å¯ä»¥ä½¿å¤šä¸ª ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hdel</span><span class="params">(String key, Object... item)</span> &#123;</span><br><span class="line">        redisTemplate.opsForHash().delete(key, item);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­hashè¡¨ä¸­æ˜¯å¦æœ‰è¯¥é¡¹çš„å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”® ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item é¡¹ ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true å­˜åœ¨ falseä¸å­˜åœ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">hHasKey</span><span class="params">(String key, String item)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().hasKey(key, item);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * hashé€’å¢ å¦‚æœä¸å­˜åœ¨,å°±ä¼šåˆ›å»ºä¸€ä¸ª å¹¶æŠŠæ–°å¢åçš„å€¼è¿”å›</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item é¡¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> by   è¦å¢åŠ å‡ (å¤§äº0)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">hincr</span><span class="params">(String key, String item, <span class="type">double</span> by)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().increment(key, item, by);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * hashé€’å‡</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item é¡¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> by   è¦å‡å°‘è®°(å°äº0)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">hdecr</span><span class="params">(String key, String item, <span class="type">double</span> by)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().increment(key, item, -by);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//============================set=============================</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®keyè·å–Setä¸­çš„æ‰€æœ‰å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Set&lt;Object&gt; <span class="title function_">sGet</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().members(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®valueä»ä¸€ä¸ªsetä¸­æŸ¥è¯¢,æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true å­˜åœ¨ falseä¸å­˜åœ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">sHasKey</span><span class="params">(String key, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().isMember(key, value);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†æ•°æ®æ”¾å…¥setç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key    é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values å€¼ å¯ä»¥æ˜¯å¤šä¸ª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æˆåŠŸä¸ªæ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">sSet</span><span class="params">(String key, Object... values)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().add(key, values);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0L</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†setæ•°æ®æ”¾å…¥ç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key    é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time   æ—¶é—´(ç§’)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values å€¼ å¯ä»¥æ˜¯å¤šä¸ª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æˆåŠŸä¸ªæ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">sSetAndTime</span><span class="params">(String key, Long time, Object... values)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForSet().add(key, values);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                expire(key, time);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> count;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0L</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–setç¼“å­˜çš„é•¿åº¦</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">sGetSetSize</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().size(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0L</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç§»é™¤å€¼ä¸ºvalueçš„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key    é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values å€¼ å¯ä»¥æ˜¯å¤šä¸ª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç§»é™¤çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">setRemove</span><span class="params">(String key, Object... values)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().remove(key, values);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0L</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//===============================list=================================</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–listç¼“å­˜çš„å†…å®¹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> start å¼€å§‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> end   ç»“æŸ  0 åˆ° -1ä»£è¡¨æ‰€æœ‰å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">lGet</span><span class="params">(String key, Long start, Long end)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().range(key, start, end);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–listç¼“å­˜çš„é•¿åº¦</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">lGetListSize</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().size(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0L</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡ç´¢å¼• è·å–listä¸­çš„å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index ç´¢å¼•  index&gt;=0æ—¶ï¼Œ 0 è¡¨å¤´ï¼Œ1 ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä¾æ¬¡ç±»æ¨ï¼›index&lt;0æ—¶ï¼Œ-1ï¼Œè¡¨å°¾ï¼Œ-2å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä¾æ¬¡ç±»æ¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">lGetIndex</span><span class="params">(String key, Long index)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().index(key, index);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†listæ”¾å…¥ç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">lSet</span><span class="params">(String key, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPush(key, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†listæ”¾å…¥ç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time  æ—¶é—´(ç§’)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">lSet</span><span class="params">(String key, Object value, Long time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPush(key, value);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                expire(key, time);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†listæ”¾å…¥ç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">lSet</span><span class="params">(String key, List&lt;Object&gt; value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPushAll(key, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†listæ”¾å…¥ç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time  æ—¶é—´(ç§’)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">lSet</span><span class="params">(String key, List&lt;Object&gt; value, Long time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPushAll(key, value);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                expire(key, time);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç´¢å¼•ä¿®æ”¹listä¸­çš„æŸæ¡æ•°æ®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index ç´¢å¼•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">lUpdateIndex</span><span class="params">(String key, Long index, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().set(key, index, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç§»é™¤Nä¸ªå€¼ä¸ºvalue</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> count ç§»é™¤å¤šå°‘ä¸ª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç§»é™¤çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">lRemove</span><span class="params">(String key, Long count, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().remove(key, count, value);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0L</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><p>æ‰€æœ‰çš„Redisæ“ä½œï¼Œå…¶å®éƒ½å¾ˆç®€å•ï¼Œä¸»è¦çš„æ˜¯ç†è§£redisçš„æ€æƒ³å’Œå…¶ä¸­æ¯ä¸€ç§æ•°æ®ç»“æ„çš„ç”¨å¤„å’Œä½œç”¨ã€‚</p><h3 id="Redis-confè¯¦ç»†"><a href="#Redis-confè¯¦ç»†" class="headerlink" title="Redis.confè¯¦ç»†"></a>Redis.confè¯¦ç»†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">ä¸‹è½½redis </span><br><span class="line">docker pull redis</span><br><span class="line"></span><br><span class="line">åˆ›å»ºå®ä¾‹å¹¶å¯åŠ¨</span><br><span class="line"><span class="built_in">mkdir</span> -p /mydata/redis/conf      </span><br><span class="line"></span><br><span class="line"><span class="built_in">touch</span> redis.conf</span><br><span class="line"></span><br><span class="line">docker run -p 6379:6379 --name redis -v /mydata/redis/data:/data \</span><br><span class="line">   -v /mydata/redis/conf/redis.conf:/etc/redis/redis.conf \</span><br><span class="line">   -d redis redis-server /etc/redis/redis.conf</span><br><span class="line"></span><br><span class="line"> <span class="built_in">ls</span>   æŸ¥çœ‹å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶</span><br><span class="line"> <span class="built_in">cat</span> redis.conf</span><br><span class="line"></span><br><span class="line"> æµ‹è¯•redis </span><br><span class="line">  </span><br><span class="line"> docker <span class="built_in">exec</span> -it redis redis-cli</span><br><span class="line"> </span><br><span class="line"> ---</span><br><span class="line"> ç”±äºä»¥å‰çš„æ•°æ®å…¨å­˜åœ¨å†…å­˜ä¸­ï¼Œä»è€Œæˆ‘ä»¬é‡å¤è¯»å–get açš„æ—¶å€™ä¼šå¯¼è‡´å¤±è´¥</span><br><span class="line">[root@localhost conf]<span class="comment"># cat redis.conf</span></span><br><span class="line">[root@localhost conf]<span class="comment"># docker exec -it redis redis-cli</span></span><br><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> a b</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get a</span><br><span class="line"><span class="string">&quot;b&quot;</span>   //ä»è€Œåœ¨ä¸€æ¬¡ä¸Šæ¥çš„æ—¶å€™è¿™å—æ˜¯null</span><br><span class="line">127.0.0.1:6379&gt; <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">--è®©redis æŒä¹…åŒ–  ---&gt; <span class="built_in">pwd</span></span><br><span class="line">127.0.0.1:6379&gt; <span class="built_in">exit</span></span><br><span class="line">[root@localhost conf]<span class="comment"># pwd</span></span><br><span class="line">/mydata/redis/conf</span><br><span class="line">[root@localhost conf]<span class="comment"># ls</span></span><br><span class="line">redis.conf</span><br><span class="line">[root@localhost conf]<span class="comment"># vi redis.conf </span></span><br><span class="line">i</span><br><span class="line">appendonly <span class="built_in">yes</span></span><br><span class="line">esc  :wq</span><br><span class="line"></span><br><span class="line">docker restart redis  //é‡å¯redis</span><br><span class="line">--è®¾ç½®å¼€æœºè‡ªå¯åŠ¨docker é‡Œè¾¹å®¹å™¨</span><br><span class="line">sudo docker update &lt;å®¹å™¨å&gt; --restart=always</span><br></pre></td></tr></table></figure><p>å¯åŠ¨çš„æ—¶å€™é€šè¿‡é…ç½®æ–‡ä»¶å¤„ç†ï¼›</p><blockquote><p>å•ä½</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost conf]<span class="comment"># pwd</span></span><br><span class="line">/mydata/redis/conf</span><br><span class="line">[root@localhost conf]<span class="comment"># ls</span></span><br><span class="line">redis.conf</span><br><span class="line">[root@localhost conf]<span class="comment"># vi redis.conf </span></span><br></pre></td></tr></table></figure><ol><li><p>é…ç½®æ–‡ä»¶unitå•ä½å¯¹ä¸æ•æ„Ÿ</p></li><li><p>åŒ…å«</p></li><li><p>ç½‘ç»œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bind</span> 127.0.0.1 <span class="comment">#ç»‘å®šçš„IP</span></span><br><span class="line">protected-mode <span class="built_in">yes</span> <span class="comment">#åŒ…å«æ¨¡å¼</span></span><br><span class="line">port 6379 <span class="comment">#ç«¯å£é…ç½®ï¼Œä¸æ¨èä¿®æ”¹</span></span><br></pre></td></tr></table></figure></li></ol><ol><li><p>é€šç”¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">daemonize <span class="built_in">yes</span> <span class="comment">#ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡Œï¼Œé»˜è®¤æ˜¯noï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±å¼€å¯ä¸ºyes!</span></span><br><span class="line"></span><br><span class="line">pidfile /var/run/redis_6379.pid  <span class="comment">#å¦‚æœä»¥åå°ç¨‹åºè¿è¡Œï¼Œæˆ‘ä»¬å°±éœ€è¦ç»™ä¸€ä¸ªpidæ–‡ä»¶</span></span><br><span class="line">loglevel notice <span class="comment"># æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">logfile <span class="string">&quot;&quot;</span> <span class="comment">#æ—¥å¿—æ–‡ä»¶ä½ç½®å</span></span><br><span class="line">databases 16 <span class="comment">#æ•°æ®åº“çš„æ•°é‡ï¼Œé»˜è®¤æ˜¯16ä¸ªæ•°æ®åº“</span></span><br><span class="line">always-show-logo <span class="built_in">yes</span> <span class="comment">#æ˜¯å¦æ˜¾ç¤ºlogo </span></span><br></pre></td></tr></table></figure></li><li><p>å¿«ç…§</p><p>æŒä¹…åŒ–ï¼Œåœ¨è§„å®šçš„æ—¶é—´å†…ï¼Œæ‰§è¡Œäº†å¤šå°‘æ¬¡æ“ä½œï¼Œåˆ™ä¼šæŒä¹…åŒ–åˆ°æ–‡ä»¶ .rdb.aof</p><p>redisæ˜¯å†…å­˜æ•°æ®åº“ï¼Œå¦‚æœæ²¡æœ‰æŒä¹…åŒ–ï¼Œé‚£ä¹ˆæ•°æ®æ–­ç”µå°±ä¼šä¸¢å¤±</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¦‚æœåœ¨900ç§’å†…ï¼Œå¦‚æœæœ‰è‡³å°‘ä¸€ä¸ªkey è¿›è¡Œä¿®æ”¹ï¼Œæˆ‘ä»¬å°±éœ€è¦è¿›è¡ŒæŒä¹…åŒ–æ“ä½œ</span></span><br><span class="line">save 900 1  </span><br><span class="line"><span class="comment">#å¦‚æœåœ¨300ç§’å†…ï¼Œæœ‰10ä¸ªkeyè¿›è¡Œä¿®æ”¹ï¼Œæˆ‘ä»¬å°±éœ€è¦è¿›è¡ŒæŒä¹…åŒ–</span></span><br><span class="line">save  300 10</span><br><span class="line"><span class="comment">#å¦‚æœ60ç§’å†…ã€‚è‡³å°‘10000keyè¿›è¡Œä¿®æ”¹ï¼Œæˆ‘ä»¬è¿›è¡ŒæŒä¹…åŒ–æ“ä½œ</span></span><br><span class="line">save 60 10000</span><br><span class="line"><span class="comment">#ä¹‹åæˆ‘ä»¬å¯ä»¥è‡ªå·±è‡ªå®šä¹‰</span></span><br><span class="line"></span><br><span class="line">stop-writes-on-bgsave-error <span class="built_in">yes</span> <span class="comment">#æŒä¹…åŒ–å¦‚æœå‡ºé”™ï¼Œæ˜¯å¦è¿˜éœ€è¦ç»§ç»­å·¥ä½œï¼</span></span><br><span class="line"></span><br><span class="line">rdbcompression <span class="built_in">yes</span> <span class="comment">#æ˜¯å¦å‹ç¼©rdbæ–‡ä»¶ï¼Œéœ€è¦å ç”¨ä¸€å®šçš„cpuçš„èµ„æº</span></span><br><span class="line">rdbchecksum <span class="built_in">yes</span> <span class="comment">#æ˜¯å¦ä¿æŒrdbæ–‡ä»¶çš„æ—¶å€™ï¼Œè¿›è¡Œé”™è¯¯çš„æ£€æŸ¥æ ¡éªŒ</span></span><br><span class="line"><span class="built_in">dir</span> ./ <span class="comment">#rdbæ–‡ä»¶ä¿å­˜è·¯å¾„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#=============================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å¯†ç  </span></span><br><span class="line">config <span class="built_in">set</span> requirepass <span class="string">&quot;å¯†ç &quot;</span></span><br><span class="line"><span class="comment">#æ­¤æ—¶å°±éœ€è¦æƒé™äº†ï¼Œä¹Ÿå°±æ˜¯éœ€è¦å¯†ç äº†</span></span><br><span class="line">config get requirepass </span><br><span class="line"><span class="comment">#è¾“å…¥å¯†ç </span></span><br><span class="line">auth å¯†ç </span><br><span class="line"><span class="comment">#æ­¤æ—¶å°±å¯ä»¥æŸ¥çœ‹</span></span><br><span class="line">config get requirepass </span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>é™åˆ¶å®¢æˆ·ç«¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">maxclients 10000  <span class="comment">#è®¾ç½®èƒ½é“¾æ¥ä¸Šçš„redisçš„æœ€å¤§å®¢æˆ·ç«¯æ•°é‡</span></span><br><span class="line">maxmemory &lt;byte&gt; <span class="comment">#redis é…ç½®æœ€å¤§çš„å†…å­˜å®¹é‡</span></span><br><span class="line">maxmemory-policy noeviction <span class="comment">#å†…å­˜åˆ°è¾¾ä¸Šé™ä¹‹åçš„å¤„ç†ç­–ç•¥</span></span><br><span class="line"></span><br><span class="line">volatile-lruï¼Œé’ˆå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyï¼Œä½¿ç”¨lruç®—æ³•è¿›è¡Œæ·˜æ±°ã€‚</span><br><span class="line">allkeys-lruï¼Œé’ˆå¯¹æ‰€æœ‰keyä½¿ç”¨lruç®—æ³•è¿›è¡Œæ·˜æ±°ã€‚</span><br><span class="line">volatile-randomï¼Œä»æ‰€æœ‰è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyä¸­ä½¿ç”¨éšæœºæ·˜æ±°çš„æ–¹å¼è¿›è¡Œæ·˜æ±°ã€‚</span><br><span class="line">allkeys-randomï¼Œé’ˆå¯¹æ‰€æœ‰çš„keyä½¿ç”¨éšæœºæ·˜æ±°æœºåˆ¶è¿›è¡Œæ·˜æ±°ã€‚</span><br><span class="line">volatile-ttlï¼Œé’ˆå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyï¼Œè¶Šæ—©è¿‡æœŸçš„è¶Šå…ˆè¢«æ·˜æ±°ã€‚</span><br><span class="line">noevictionï¼Œä¸ä¼šæ·˜æ±°ä»»ä½•æ•°æ®ï¼Œå½“ä½¿ç”¨çš„å†…å­˜ç©ºé—´è¶…è¿‡ maxmemory å€¼æ—¶ï¼Œå†æœ‰å†™è¯·æ±‚æ¥æ—¶è¿”å›é”™è¯¯ã€‚</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>AOF : APPENDONLY æ¨¡å¼ </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">appendonly no <span class="comment">#é»˜è®¤æ˜¯ä¸å¼€å¯æ¨¡å¼çš„aofé»˜è®¤æ˜¯ä½¿ç”¨rdbçš„ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹rdbå¤Ÿç”¨äº†</span></span><br><span class="line">appendfilename <span class="string">&quot;appendonly.aof&quot;</span> <span class="comment">#æŒä¹…åŒ–çš„æ–‡ä»¶çš„åå­— .rdb</span></span><br><span class="line"><span class="comment">#appendfsync always  æ¯æ¬¡ä¿®æ”¹éƒ½ä¼š syncæ¶ˆè€—æ€§èƒ½</span></span><br><span class="line">appendsync everysec <span class="comment">#æ¯ç§’æ‰§è¡Œä¸€ä¸ªsync å¯èƒ½ä¼šä¸¢å¤±è¿™ä¸ªlsçš„æ•°æ®</span></span><br><span class="line"><span class="comment">#appendfsync no ä¸æ‰§è¡Œsyncè¿™ä¸ªæ˜¯æ“ä½œç³»ç»Ÿè‡ªå·±åŒæ­¥æ•°æ®ï¼Œé€Ÿåº¦æœ€å¿«</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="redisæŒä¹…åŒ–"><a href="#redisæŒä¹…åŒ–" class="headerlink" title="redisæŒä¹…åŒ–"></a>redisæŒä¹…åŒ–</h3><p><strong>AOF</strong>:</p><p>å°†æˆ‘ä»¬æ‰€æœ‰çš„å‘½ä»¤è®°å½•ä¸‹æ¥ï¼Œhistoryï¼Œæ¢å¤çš„æ—¶å€™å°±æŠŠè¿™ä¸ªæ–‡ä»¶å…¨éƒ¨æ‰§è¡Œä¸€æ¬¡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost conf]<span class="comment"># vi redis.conf </span></span><br><span class="line">i</span><br><span class="line">appendonly <span class="built_in">yes</span></span><br><span class="line">esc  :wq</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æ˜¯é»˜è®¤ä¸å¼€å¯çš„ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å»å¼€å¯ã€‚</p><p>æˆ‘ä»¬ä¸€èˆ¬éœ€è¦å°†appendonly æ”¹æˆyeså°±è¡Œï¼Œç„¶åæˆ‘ä»¬å°±å¼€å¯äº†</p><p>æ›´æ–°åæˆ‘ä»¬éœ€è¦é‡å¯æœåŠ¡å™¨ï¼Œ</p><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨<code>vim appendonly.aof</code>æŸ¥çœ‹æˆ‘ä»¬é…ç½®åäº§ç”Ÿçš„æ–‡ä»¶ï¼Œä½†æ˜¯å½“æˆ‘ä»¬å°†aofæ–‡ä»¶è¿›è¡Œä¸€å®šçš„æ›´æ”¹å°±ä¼šå¯¼è‡´rediså¯åŠ¨ä¸èµ·æ¥äº†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦ä¿®å¤è¿™ä¸ªaofæ–‡ä»¶</p><p>redisç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå·¥å…· <code>redis-check-aof --fix</code></p><p>ç„¶åæŒ‰ç…§æŒ‡ä»¤æ“ä½œï¼Œæˆ‘ä»¬å°±å¯ä»¥å®Œæˆaofçš„æ–‡ä»¶ä¿®å¤ã€‚</p><blockquote><p>ä¼˜ç‚¹å’Œç¼ºç‚¹</p></blockquote><p>ä¼˜ç‚¹ï¼š</p><ol><li>æ¯ä¸€æ¬¡ä¿®æ”¹éƒ½åŒæ­¥ï¼Œæ–‡ä»¶çš„å®Œæ•´ä¼šæ›´å¥½</li><li>æ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼Œå¯èƒ½ä¼šä¸¢å¤±ä¸€ç§’çš„æ•°æ®</li><li>ä»ä¸åŒæ­¥ï¼Œæ•ˆç‡æ˜¯æœ€é«˜çš„</li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li>ç›¸å¯¹äºæ•°æ®æ–‡ä»¶æ¥è¯´ï¼ŒAOFå¤§äºRDB,ä¿®å¤çš„é€Ÿåº¦ä¹Ÿæ¯”RDBæ…¢ï¼</li><li>AOFè¿è¡Œæ•ˆç‡ä¹Ÿä¼šæ¯”RDBæ…¢ï¼Œæ•…è€Œæˆ‘ä»¬éœ€è¦Redisé»˜è®¤çš„RDBæŒä¹…åŒ–</li></ol><p>å¦‚æœAOFæ–‡ä»¶å¤§äº64MB,ä¹Ÿå°±æ˜¯å¤ªå¤§äº†ï¼Œforkä¸€ä¸ªæ–°è¿›ç¨‹å°†å¯¹æˆ‘ä»¬çš„æ–‡ä»¶è¿›è¡Œé‡å†™ï¼</p><p><strong>RDB</strong>:</p><p>dump.rdb</p><p>redisé»˜è®¤RDB</p><ol><li>saveçš„è§„åˆ™æ»¡è¶³çš„æƒ…å†µä¸‹ï¼Œä¼šè‡ªåŠ¨è§¦å‘rdbè§„åˆ™</li><li>æ‰§è¡ŒflushAllå‘½ä»¤ï¼Œä¹Ÿä¼šè§¦å‘æˆ‘ä»¬rdbè§„åˆ™</li><li>é€€å‡ºredisä¹Ÿä¼šäº§ç”Ÿrdbæ–‡ä»¶</li></ol><p>å¤‡ä»½å°±äº§ç”Ÿä¸€ä¸ªdump.rdbæ–‡ä»¶</p><blockquote><p>å¦‚ä½•æ¢å¤rdbæ–‡ä»¶</p></blockquote><ol><li>åªè¦å°†rdbæ–‡ä»¶æ”¾åœ¨æˆ‘ä»¬rediså¯åŠ¨ç›®å½•å°±å¯ä»¥ï¼Œrediså¯åŠ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨æ£€æŸ¥dump,rdbæ–‡ä»¶ï¼Œç„¶åæ¢å¤æ–‡ä»¶</li><li>æŸ¥çœ‹æˆ‘ä»¬éœ€è¦å­˜åœ¨çš„ä½ç½®</li></ol><p>ä¸€èˆ¬ä¸Šæˆ‘ä»¬é»˜è®¤ä½¿ç”¨RDB</p><p><strong>ä¼˜ç‚¹ï¼š</strong> </p><ol><li>é€‚åˆå¤§è§„æ¨¡çš„æ•°æ®æ¢å¤</li><li>å¯¹æ•°æ®çš„å®Œæ•´æ€§è¦æ±‚ä¸é«˜</li></ol><p><strong>ç¼ºç‚¹</strong></p><ol><li>éœ€è¦ä¸€å®šçš„æ—¶é—´é—´éš”è¿›ç¨‹æ“ä½œï¼Œå¦‚æœredisæ„å¤–å®•æœºäº†ï¼Œè¿™ä¸ªæœ€åä¸€æ¬¡ä¿®æ”¹çš„æ•°æ®å°±æ²¡æœ‰äº†</li><li>forkè¿›ç¨‹çš„æ—¶å€™éœ€è¦å ç”¨ä¸€å®šçš„å†…å­˜ç©ºé—´</li></ol><h3 id="Rediså‘å¸ƒè®¢é˜…"><a href="#Rediså‘å¸ƒè®¢é˜…" class="headerlink" title="Rediså‘å¸ƒè®¢é˜…"></a>Rediså‘å¸ƒè®¢é˜…</h3><p>Redis å‘å¸ƒè®¢é˜… (pub/sub) æ˜¯ä¸€ç§æ¶ˆæ¯é€šä¿¡æ¨¡å¼ï¼šå‘é€è€… (pub) å‘é€æ¶ˆæ¯ï¼Œè®¢é˜…è€… (sub) æ¥æ”¶æ¶ˆæ¯ã€‚</p><p>æ³¨æ„æˆ‘ä»¬éœ€è¦å¼€å¯ä¸¤ä¸ªå®¢æˆ·ç«¯ï¼Œä¸€ä¸ªåšè®¢é˜…çš„ä¸€ä¸ªåšæ¨é€çš„ã€‚</p><p>Redis å®¢æˆ·ç«¯å¯ä»¥è®¢é˜…ä»»æ„æ•°é‡çš„é¢‘é“ã€‚</p><p>ä»¥ä¸‹å®ä¾‹æ¼”ç¤ºäº†å‘å¸ƒè®¢é˜…æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œéœ€è¦å¼€å¯ä¸¤ä¸ª redis-cli å®¢æˆ·ç«¯ã€‚</p><p>åœ¨æˆ‘ä»¬å®ä¾‹ä¸­æˆ‘ä»¬åˆ›å»ºäº†è®¢é˜…é¢‘é“åä¸º <strong>runoobChat</strong>:</p><p><code>SUBSCRIBE åå­—</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; SUBSCRIBE runoobChat <span class="comment">#è®¢é˜…ä¸€ä¸ªé¢‘é“ï¼Œåå­—runoobChat</span></span><br><span class="line"></span><br><span class="line">Reading messages... (press Ctrl-C to quit)</span><br><span class="line">1) <span class="string">&quot;subscribe&quot;</span></span><br><span class="line">2) <span class="string">&quot;runoobChat&quot;</span></span><br><span class="line">3) (<span class="built_in">integer</span>) 1</span><br><span class="line"><span class="comment">#ç­‰å¾…è¯»å–æ¨é€çš„æ¶ˆæ¯</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬å…ˆé‡æ–°å¼€å¯ä¸ª redis å®¢æˆ·ç«¯ï¼Œç„¶ååœ¨åŒä¸€ä¸ªé¢‘é“ runoobChat å‘å¸ƒä¸¤æ¬¡æ¶ˆæ¯ï¼Œè®¢é˜…è€…å°±èƒ½æ¥æ”¶åˆ°æ¶ˆæ¯ã€‚ </p><p><code>PUBLISH åå­— ä¿¡æ¯</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; PUBLISH runoobChat <span class="string">&quot;Redis PUBLISH test&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; PUBLISH runoobChat <span class="string">&quot;Learn redis by runoob.com&quot;</span></span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line"><span class="comment"># è®¢é˜…è€…çš„å®¢æˆ·ç«¯ä¼šæ˜¾ç¤ºå¦‚ä¸‹æ¶ˆæ¯</span></span><br><span class="line"> 1) <span class="string">&quot;message&quot;</span> <span class="comment">#æ¶ˆæ¯</span></span><br><span class="line">2) <span class="string">&quot;runoobChat&quot;</span>   <span class="comment">#é‚£ä¸ªé¢‘é“çš„æ¶ˆæ¯</span></span><br><span class="line">3) <span class="string">&quot;Redis PUBLISH test&quot;</span> <span class="comment"># æ¶ˆæ¯çš„å…·ä½“å†…å®¹</span></span><br><span class="line"> 1) <span class="string">&quot;message&quot;</span></span><br><span class="line">2) <span class="string">&quot;runoobChat&quot;</span></span><br><span class="line">3) <span class="string">&quot;Learn redis by runoob.com&quot;</span></span><br></pre></td></tr></table></figure><p>gif æ¼”ç¤ºå¦‚ä¸‹ï¼š</p><ul><li>å¼€å¯æœ¬åœ° Redis æœåŠ¡ï¼Œå¼€å¯ä¸¤ä¸ª redis-cli å®¢æˆ·ç«¯ã€‚</li><li>åœ¨<strong>ç¬¬ä¸€ä¸ª redis-cli å®¢æˆ·ç«¯</strong>è¾“å…¥ SUBSCRIBE runoobChatï¼Œæ„æ€æ˜¯è®¢é˜… <code>runoobChat</code> é¢‘é“ã€‚</li><li>åœ¨<strong>ç¬¬äºŒä¸ª redis-cli å®¢æˆ·ç«¯</strong>è¾“å…¥ PUBLISH runoobChat â€œRedis PUBLISH testâ€ å¾€ runoobChat é¢‘é“å‘é€æ¶ˆæ¯ï¼Œè¿™ä¸ªæ—¶å€™åœ¨ç¬¬ä¸€ä¸ª redis-cli å®¢æˆ·ç«¯å°±ä¼šçœ‹åˆ°ç”±ç¬¬äºŒä¸ª redis-cli å®¢æˆ·ç«¯å‘é€çš„æµ‹è¯•æ¶ˆæ¯ã€‚</li></ul><div class="table-container"><table><thead><tr><th>1</th><th>PSUBSCRIBE pattern è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªç¬¦åˆç»™å®šæ¨¡å¼çš„é¢‘é“ã€‚</th></tr></thead><tbody><tr><td>2</td><td>PUBSUB subcommand [argument æŸ¥çœ‹è®¢é˜…ä¸å‘å¸ƒç³»ç»ŸçŠ¶æ€ã€‚</td></tr><tr><td>3</td><td>PUBLISH channel message å°†ä¿¡æ¯å‘é€åˆ°æŒ‡å®šçš„é¢‘é“ã€‚</td></tr><tr><td>4</td><td>PUNSUBSCRIBE  é€€è®¢æ‰€æœ‰ç»™å®šæ¨¡å¼çš„é¢‘é“ã€‚</td></tr><tr><td>5</td><td>SUBSCRIBE channeè®¢é˜…ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“çš„ä¿¡æ¯ã€‚</td></tr><tr><td>6</td><td>UNSUBSCRIBE   æŒ‡é€€è®¢ç»™å®šçš„é¢‘é“ã€‚</td></tr></tbody></table></div><h3 id="redisä¸»ä»å¤åˆ¶"><a href="#redisä¸»ä»å¤åˆ¶" class="headerlink" title="redisä¸»ä»å¤åˆ¶"></a>redisä¸»ä»å¤åˆ¶</h3><p>Redis Replicationæ˜¯ä¸€ç§ master-slave æ¨¡å¼çš„å¤åˆ¶æœºåˆ¶ï¼Œè¿™ç§æœºåˆ¶ä½¿å¾— slave èŠ‚ç‚¹å¯ä»¥æˆä¸ºä¸ master èŠ‚ç‚¹å®Œå…¨ç›¸åŒçš„å‰¯æœ¬ï¼Œå¯ä»¥é‡‡ç”¨ä¸€ä¸»å¤šä»æˆ–è€…çº§è”ç»“æ„ ã€‚</p><blockquote><p>ä¸»ä»å¤åˆ¶çš„é…ç½®è¦ç‚¹ï¼š</p><p>ï¼ˆ1ï¼‰é…ä»åº“ä¸é…ä¸»ï¼Œä»åº“é…ç½®ï¼šslaveof ä¸»åº“IP ä¸»åº“ç«¯å£</p><p>ï¼ˆ2ï¼‰æŸ¥çœ‹redisçš„é…ç½®ä¿¡æ¯ï¼šinfo replication</p><p><strong>Redisä¸ºä»€ä¹ˆéœ€è¦ä¸»ä»å¤åˆ¶ï¼Ÿ</strong><br>ä½¿ç”¨Redisä¸»ä»å¤åˆ¶çš„åŸå› ä¸»è¦æ˜¯å•å°RedisèŠ‚ç‚¹å­˜åœ¨ä»¥ä¸‹çš„å±€é™æ€§ï¼š</p><p>ï¼ˆ1ï¼‰Redisè™½ç„¶è¯»å†™çš„é€Ÿåº¦éƒ½å¾ˆå¿«ï¼Œå•èŠ‚ç‚¹çš„Redisèƒ½å¤Ÿæ”¯æ’‘QPSå¤§æ¦‚åœ¨5wå·¦å³ï¼Œå¦‚æœä¸Šåƒä¸‡çš„ç”¨æˆ·è®¿é—®ï¼ŒRediså°±æ‰¿è½½ä¸äº†ï¼Œæˆä¸ºäº†é«˜å¹¶å‘çš„ç“¶é¢ˆã€‚</p><p>ï¼ˆ2ï¼‰å•èŠ‚ç‚¹çš„Redisä¸èƒ½ä¿è¯é«˜å¯ç”¨ï¼Œå½“Rediså› ä¸ºæŸäº›åŸå› æ„å¤–å®•æœºæ—¶ï¼Œä¼šå¯¼è‡´ç¼“å­˜ä¸å¯ç”¨</p><p>ï¼ˆ3ï¼‰CPUçš„åˆ©ç”¨ç‡ä¸Šï¼Œå•å°Rediså®ä¾‹åªèƒ½åˆ©ç”¨å•ä¸ªæ ¸å¿ƒï¼Œè¿™å•ä¸ªæ ¸å¿ƒåœ¨é¢ä¸´æµ·é‡æ•°æ®çš„å­˜å–å’Œç®¡ç†å·¥ä½œæ—¶å‹åŠ›ä¼šéå¸¸å¤§ã€‚</p><p><strong>ä¸»ä»å¤åˆ¶çš„å¥½å¤„ï¼š</strong><br>ï¼ˆ1ï¼‰æ•°æ®å†—ä½™ï¼šä¸»ä»å¤åˆ¶å®ç°äº†æ•°æ®çš„çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼ã€‚</p><p>ï¼ˆ2ï¼‰æ•…éšœæ¢å¤ï¼šå¦‚æœmasterå®•æ‰äº†ï¼Œä½¿ç”¨å“¨å…µæ¨¡å¼ï¼Œå¯ä»¥æå‡ä¸€ä¸ª slave ä½œä¸ºæ–°çš„ masterï¼Œè¿›è€Œå®ç°æ•…éšœè½¬ç§»ï¼Œå®ç°é«˜å¯ç”¨</p><p>ï¼ˆ3ï¼‰è´Ÿè½½å‡è¡¡ï¼šå¯ä»¥è½»æ˜“åœ°å®ç°æ¨ªå‘æ‰©å±•ï¼Œå®ç°è¯»å†™åˆ†ç¦»ï¼Œä¸€ä¸ª master ç”¨äºå†™ï¼Œå¤šä¸ª slave ç”¨äºåˆ†æ‘Šè¯»çš„å‹åŠ›ï¼Œä»è€Œå®ç°é«˜å¹¶å‘ï¼›</p><p><strong>ä¸»ä»å¤åˆ¶çš„ç¼ºç‚¹ï¼š</strong><br>ç”±äºæ‰€æœ‰çš„å†™æ“ä½œéƒ½æ˜¯å…ˆåœ¨Masterä¸Šæ“ä½œï¼Œç„¶ååŒæ­¥æ›´æ–°åˆ°Slaveä¸Šï¼Œæ‰€ä»¥ä»MasteråŒæ­¥åˆ°SlaveæœåŠ¡å™¨æœ‰ä¸€å®šçš„å»¶è¿Ÿï¼Œå½“ç³»ç»Ÿå¾ˆç¹å¿™çš„æ—¶å€™ï¼Œå»¶è¿Ÿé—®é¢˜ä¼šæ›´åŠ ä¸¥é‡ï¼ŒSlaveæœºå™¨æ•°é‡çš„å¢åŠ ä¹Ÿä¼šä½¿è¿™ä¸ªé—®é¢˜æ›´åŠ ä¸¥é‡</p></blockquote><p><strong>ç¯å¢ƒé…ç½®</strong>ï¼š</p><p>åªé…ç½®ä»åº“ï¼Œä¸é…ç½®ä¸»åº“</p><p><code>info replication</code>æŸ¥çœ‹ç›¸å…³é…ç½®åº“</p><p><code>vim redis79.conf</code> è¿›å…¥é…ç½®æ–‡ä»¶è¿›è¡Œæ›´æ”¹</p><p>æ”¹ç«¯å£portï¼Œæ”¹åå°æœåŠ¡åå­—pidï¼Œæ”¹æ—¥å¿—ï¼Œæ”¹åå°è¿è¡Œï¼Œæ”¹dbfilename  dump.rdb</p><p><code>redis-server kconfig/redis.conf</code>  æˆ‘ä»¬å¯åŠ¨ç›¸åº”é…ç½®åçš„redisä»åº“</p><p><code>ps  -ef|grep redis</code> æŸ¥çœ‹åå°å¯åŠ¨ä¿¡æ¯</p><h4 id="ä¸€ä¸»äºŒä»"><a href="#ä¸€ä¸»äºŒä»" class="headerlink" title="ä¸€ä¸»äºŒä»"></a>ä¸€ä¸»äºŒä»</h4><p>åˆšåˆšé…ç½®åå…¶æ¯ä¸ªæ•°æ®åº“éƒ½æ˜¯ä¸»åº“ï¼Œåªæœ‰ç»è¿‡é…ç½®åæ‰èƒ½ä¿è¯redisçš„æŸä¸ªåº“å˜æˆä»åº“ã€‚</p><p>é»˜è®¤æƒ…å†µä¹‹ä¸‹ã€‚æ¯å°RedisæœåŠ¡å™¨éƒ½æ˜¯ä¸»è¡¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -p 6379   <span class="comment">#å¯åŠ¨redisçš„å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="comment">#æ³¨æ„è¿™ä¸ªæ˜¯åœ¨ä½ è¦æŒ‡å®šä½œä¸ºä»æœºçš„å®¢æˆ·ç«¯çª—å£é‡Œè¾¹æ‰§è¡Œçš„ï¼Œä»–é€‰æ‹©è€å¤§ï¼Œè€Œä¸æ˜¯è€å¤§é€‰æ‹©ä»–</span></span><br><span class="line">slaveof 127.0.0.1 6379 <span class="comment">#é…ç½®ä¸»è¡¨ ç®€ç§°ä»»å‘½è€å¤§</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬é€šå‘½ä»¤é…ç½®çš„ï¼Œåªèƒ½æ˜¯æš‚æ—¶çš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šRedis.confå®Œæˆé…ç½®è¾¾åˆ°æ°¸ä¹…é…ç½®çš„æ–¹å¼ï¼Œå…·ä½“å¯ä»¥ç™¾åº¦è§£å†³ã€‚</p><blockquote><p>replicaof <masterip> ipåœ°å€  <masterport>ç«¯å£å·   é…ç½®åœ¨ä»æœºçš„é…ç½®æ–‡ä»¶å†…ï¼Œå½“æœåŠ¡é‡æ–°å¯åŠ¨ï¼Œè¿™ä¸ªè¡¨å°±ä½œä¸ºä»æœºäº†</p></blockquote><p>æ³¨æ„ï¼š</p><p>å½“æˆ‘ä»¬é…ç½®å¥½ä¸»æœºå’Œä»æœºåï¼Œä¸»æœºå¯ä»¥è¿›è¡Œsetæ·»åŠ æ•°æ®ï¼Œè€Œæ·»åŠ çš„æ•°æ®å¯ä»¥ç›´æ¥åœ¨ä»è¡¨ä¸­æŸ¥åˆ°ï¼Œä½†æ˜¯ä»è¡¨ä¸èƒ½æ·»åŠ æ•°æ®ï¼Œå› ä¸ºä»–æ˜¯ä»è¡¨ã€‚</p><p>æ²¡æœ‰é…ç½®å“¨å…µçš„æ—¶å€™ï¼šå½“ä¸»æœºæ–­å¼€é“¾æ¥çš„æ—¶å€™ï¼Œä»æœºä¾æ—§è¿æ¥åˆ°ä¸»æœºï¼Œä½†æ˜¯æ²¡æœ‰å†™æ“ä½œï¼Œåªæœ‰è¯»æ“ä½œï¼Œå½“è¿™ä¸ªæ—¶å€™ä¸»æœºå›æ¥äº†ï¼Œé‚£ä¹ˆä»æœºè¿˜æ˜¯ä¿æŒé“¾æ¥ï¼Œä¸»æœºæ·»åŠ æ•°æ®ä»æœºç…§æ ·è¯»å–ä¸»æœºçš„æ•°æ®ã€‚</p><p>å¦‚æœæ˜¯ä½¿ç”¨å‘½ä»¤è¡Œï¼Œé‚£ä¹ˆé‡æ–°å¯åŠ¨åå°±åˆä¼šå˜å›ä¸»æœºï¼Œä½†è¿™ä¸ªæ—¶å€™ï¼Œåªè¦å˜å›ä»æœºï¼Œé‚£ä¹ˆå°±å¯ä»¥ç«‹é©¬æ‹¿åˆ°ä¸»æœºçš„æ•°æ®</p><blockquote><p>å¤åˆ¶åŸç†</p></blockquote><p>slaveå¯åŠ¨å¯åŠ¨æˆåŠŸé“¾æ¥åˆ°masteråä¼šå‘é€ä¸€ä¸ªsyncåŒæ­¥å‘½ä»¤</p><p>Masteræ¥å—åˆ°å‘½ä»¤åï¼Œå¯åŠ¨åå°çš„å­˜ç›˜è¿›ç¨‹ï¼ŒåŒæ—¶æ”¶é›†æ‰€æœ‰æ¥æ”¶åˆ°ç”¨äºä¿®æ”¹æ•°æ®é›†å‘½ä»¤ï¼Œåœ¨åå°è¿›ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œmasterå°†ä¼ é€æ•´ä¸ªæ•°æ®æ–‡ä»¶åˆ°slave,å¹¶å®Œæˆä¸€æ¬¡å®Œå…¨åŒæ­¥ã€‚</p><p>å…¨é‡å¤åˆ¶ï¼šè€ŒslaveæœåŠ¡åœ¨æ¥åˆ°æ•°æ®åº“æ–‡ä»¶æ•°æ®åï¼Œå°†å…¶å­˜ç›˜å¹¶åŠ è½½åˆ°å†…å­˜ä¸­</p><p>å¢é‡å¤åˆ¶ï¼šMasterç»§ç»­å°†æ–°çš„æ‰€æœ‰æ”¶é›†åˆ°çš„ä¿®æ”¹å‘½ä»¤ä¾æ¬¡ä¼ ç»™slaveï¼Œå®ŒæˆåŒæ­¥ã€‚</p><p>ä½†æ˜¯åªè¦æ˜¯é‡æ–°é“¾æ¥Master,ä¸€æ¬¡å®Œå…¨åŒæ­¥ï¼ˆå…¨éƒ¨å¤åˆ¶ï¼‰å°†ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚</p><blockquote><p>å±‚å±‚è¿æ¥</p></blockquote><p>A-&gt;B-&gt;C</p><h4 id="å®•æœºæ‰‹åŠ¨é…ç½®ä¸»æœº"><a href="#å®•æœºæ‰‹åŠ¨é…ç½®ä¸»æœº" class="headerlink" title="å®•æœºæ‰‹åŠ¨é…ç½®ä¸»æœº"></a>å®•æœºæ‰‹åŠ¨é…ç½®ä¸»æœº</h4><p>å¦‚æœæˆ‘ä»¬çš„ä¸»æœºæŒ‚æ‰äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å°†ä»æœºé…ç½®æˆä¸ºä¸»æœºï¼Ÿ</p><p>æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯<code>slaveof no one</code>è®©ä»è¡¨è‡ªå·±å˜æˆä¸»æœºï¼Œé‚£ä¹ˆå…¶ä»–èŠ‚ç‚¹å°±å¯ä»¥æ‰‹åŠ¨è¿æ¥åˆ°æœ€æ–°çš„è¿™ä¸ªä¸»æœºï¼Œåœ¨å“¨å…µæ²¡æœ‰åˆ›å»ºçš„æ—¶å€™ï¼Œä¸€èˆ¬éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»é…ç½®ã€‚å¦‚æœè¿™ä¸ªæ—¶å€™è€å¤§ä¿®å¤äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦é‡å†™è¿æ¥ã€‚</p><h4 id="å“¨å…µè‡ªåŠ¨é…ç½®"><a href="#å“¨å…µè‡ªåŠ¨é…ç½®" class="headerlink" title="å“¨å…µè‡ªåŠ¨é…ç½®"></a>å“¨å…µè‡ªåŠ¨é…ç½®</h4><p>Redisçš„ä¸»ä»å¤åˆ¶æ¨¡å¼ä¸‹ï¼Œ ä¸€æ—¦ä¸»èŠ‚ç‚¹ç”±äºæ•…éšœä¸èƒ½æä¾›æœåŠ¡ï¼Œ éœ€è¦äººå·¥å°†ä»èŠ‚ç‚¹æ™‹å‡ä¸ºä¸»èŠ‚ç‚¹ï¼Œ åŒæ—¶è¿˜è¦é€šçŸ¥åº”ç”¨æ–¹æ›´æ–°ä¸»èŠ‚ç‚¹åœ°å€ï¼Œ å¯¹äºå¾ˆå¤šåº”ç”¨åœºæ™¯è¿™ç§æ•…éšœå¤„ç†çš„æ–¹å¼æ˜¯æ— æ³•æ¥å—çš„ã€‚ å¯å–œçš„æ˜¯Redisä»2.8å¼€å§‹æ­£å¼<br>æä¾›äº†Redis Sentinelï¼ˆå“¨å…µï¼‰ æ¶æ„æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>æ€»ç»“ï¼š</p><p>==<strong>Redisä¸»ä»å¤åˆ¶çš„ç¼ºç‚¹ï¼šæ²¡æœ‰åŠæ³•å¯¹masterè¿›è¡ŒåŠ¨æ€é€‰ä¸¾ï¼Œéœ€è¦ä½¿ç”¨Sentinelæœºåˆ¶å®ŒæˆåŠ¨æ€é€‰ä¸¾</strong>==</p><ul><li><p>å“¨å…µæ¨¡å¼ä»‹ç»</p><ul><li><strong>Sentinel(å“¨å…µ)è¿›ç¨‹æ˜¯ç”¨äºç›‘æ§redisé›†ç¾¤ä¸­Masterä¸»æœåŠ¡å™¨å·¥ä½œçš„çŠ¶æ€åœ¨Masterä¸»æœåŠ¡å™¨å‘ç”Ÿæ•…éšœçš„æ—¶å€™ï¼Œå¯ä»¥å®ç°Masterå’ŒSlaveæœåŠ¡å™¨çš„åˆ‡æ¢ï¼Œä¿è¯ç³»ç»Ÿçš„é«˜å¯ç”¨ï¼ˆHAï¼‰å…¶å·²ç»è¢«é›†æˆåœ¨redis2.6+çš„ç‰ˆæœ¬ä¸­ï¼ŒRedisçš„å“¨å…µæ¨¡å¼åˆ°äº†2.8ç‰ˆæœ¬ä¹‹åå°±ç¨³å®šäº†ä¸‹æ¥ã€‚</strong></li></ul></li><li><p>å“¨å…µè¿›ç¨‹çš„ä½œç”¨</p><ul><li>ç›‘æ§(Monitoring): <ul><li>å“¨å…µ(sentinel) ä¼šä¸æ–­åœ°æ£€æŸ¥ä½ çš„Masterå’ŒSlaveæ˜¯å¦è¿ä½œæ­£å¸¸ã€‚</li></ul></li><li>æé†’(Notification):<ul><li>å½“è¢«ç›‘æ§çš„æŸä¸ªRedisèŠ‚ç‚¹å‡ºç°é—®é¢˜æ—¶, å“¨å…µ(sentinel) å¯ä»¥é€šè¿‡ API å‘ç®¡ç†å‘˜æˆ–è€…å…¶ä»–åº”ç”¨ç¨‹åºå‘é€é€šçŸ¥ã€‚</li></ul></li></ul></li><li><p>è‡ªåŠ¨æ•…éšœè¿ç§»(Automatic failover)ï¼š</p><ul><li>å½“ä¸€ä¸ªMasterä¸èƒ½æ­£å¸¸å·¥ä½œæ—¶ï¼Œå“¨å…µ(sentinel) ä¼šå¼€å§‹ä¸€æ¬¡è‡ªåŠ¨æ•…éšœè¿ç§»æ“ä½œã€‚</li><li>å®ƒä¼šå°†å¤±æ•ˆMasterçš„å…¶ä¸­ä¸€ä¸ªSlaveå‡çº§ä¸ºæ–°çš„Master, å¹¶è®©å¤±æ•ˆMasterçš„å…¶ä»–Slaveæ”¹ä¸ºå¤åˆ¶æ–°çš„Masterï¼›</li><li>å½“å®¢æˆ·ç«¯è¯•å›¾è¿æ¥å¤±æ•ˆçš„Masteræ—¶ï¼Œé›†ç¾¤ä¹Ÿä¼šå‘å®¢æˆ·ç«¯è¿”å›æ–°Masterçš„åœ°å€ï¼Œä½¿å¾—é›†ç¾¤å¯ä»¥ä½¿ç”¨ç°åœ¨çš„Masteræ›¿æ¢å¤±æ•ˆMasterã€‚</li><li>Masterå’ŒSlaveæœåŠ¡å™¨åˆ‡æ¢åï¼ŒMasterçš„redis.confã€Slaveçš„redis.confå’Œsentinel.confçš„é…ç½®æ–‡ä»¶çš„å†…å®¹éƒ½ä¼šå‘ç”Ÿç›¸åº”çš„æ”¹å˜ï¼Œå³ï¼ŒMasterä¸»æœåŠ¡å™¨çš„redis.confé…ç½®æ–‡ä»¶ä¸­ä¼šå¤šä¸€è¡Œslaveofçš„é…ç½®ï¼Œsentinel.confçš„ç›‘æ§ç›®æ ‡ä¼šéšä¹‹è°ƒæ¢ã€‚</li></ul></li><li><p>å“¨å…µè¿›ç¨‹çš„å·¥ä½œæ–¹å¼</p><ul><li>æ¯ä¸ªSentinelï¼ˆå“¨å…µï¼‰è¿›ç¨‹ä»¥æ¯ç§’é’Ÿä¸€æ¬¡çš„é¢‘ç‡å‘æ•´ä¸ªé›†ç¾¤ä¸­çš„Masterä¸»æœåŠ¡å™¨ï¼ŒSlaveä»æœåŠ¡å™¨ä»¥åŠå…¶ä»–Sentinelï¼ˆå“¨å…µï¼‰è¿›ç¨‹å‘é€ä¸€ä¸ª PING å‘½ä»¤ã€‚</li><li>å¦‚æœä¸€ä¸ªå®ä¾‹ï¼ˆinstanceï¼‰è·ç¦»æœ€åä¸€æ¬¡æœ‰æ•ˆå›å¤ PING å‘½ä»¤çš„æ—¶é—´è¶…è¿‡ down-after-milliseconds é€‰é¡¹æ‰€æŒ‡å®šçš„å€¼ï¼Œåˆ™è¿™ä¸ªå®ä¾‹ä¼šè¢« Sentinelï¼ˆå“¨å…µï¼‰è¿›ç¨‹æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿ï¼ˆSDOWNï¼‰ã€‚</li><li>å¦‚æœä¸€ä¸ªMasterä¸»æœåŠ¡å™¨è¢«æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿ï¼ˆSDOWNï¼‰ï¼Œåˆ™æ­£åœ¨ç›‘è§†è¿™ä¸ªMasterä¸»æœåŠ¡å™¨çš„æ‰€æœ‰</li><li>Sentinelï¼ˆå“¨å…µï¼‰è¿›ç¨‹è¦ä»¥æ¯ç§’ä¸€æ¬¡çš„é¢‘ç‡ç¡®è®¤Masterä¸»æœåŠ¡å™¨çš„ç¡®è¿›å…¥äº†ä¸»è§‚ä¸‹çº¿çŠ¶æ€ã€‚</li><li>å½“æœ‰è¶³å¤Ÿæ•°é‡çš„ Sentinelï¼ˆå“¨å…µï¼‰è¿›ç¨‹ï¼ˆå¤§äºç­‰äºé…ç½®æ–‡ä»¶æŒ‡å®šçš„å€¼ï¼‰åœ¨æŒ‡å®šçš„æ—¶é—´èŒƒå›´å†…ç¡®è®¤Masterä¸»æœåŠ¡å™¨è¿›å…¥äº†ä¸»è§‚ä¸‹çº¿çŠ¶æ€ï¼ˆSDOWNï¼‰ï¼Œ åˆ™Masterä¸»æœåŠ¡å™¨ä¼šè¢«æ ‡è®°ä¸ºå®¢è§‚ä¸‹çº¿ï¼ˆODOWNï¼‰ã€‚</li><li>åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ æ¯ä¸ªSentinelï¼ˆå“¨å…µï¼‰è¿›ç¨‹ä¼šä»¥æ¯ 10 ç§’ä¸€æ¬¡çš„é¢‘ç‡å‘é›†ç¾¤ä¸­çš„æ‰€æœ‰Masterä¸»æœåŠ¡å™¨ã€Slaveä»æœåŠ¡å™¨å‘é€ INFO å‘½ä»¤ã€‚</li><li>å½“Masterä¸»æœåŠ¡å™¨è¢« Sentinelï¼ˆå“¨å…µï¼‰è¿›ç¨‹æ ‡è®°ä¸ºå®¢è§‚ä¸‹çº¿ï¼ˆODOWNï¼‰æ—¶ï¼ŒSentinelï¼ˆå“¨å…µï¼‰è¿›ç¨‹å‘ä¸‹çº¿çš„ Masterä¸»æœåŠ¡å™¨çš„æ‰€æœ‰ Slaveä»æœåŠ¡å™¨å‘é€ INFO å‘½ä»¤çš„é¢‘ç‡ä¼šä» 10 ç§’ä¸€æ¬¡æ”¹ä¸ºæ¯ç§’ä¸€æ¬¡ã€‚</li><li>è‹¥æ²¡æœ‰è¶³å¤Ÿæ•°é‡çš„ Sentinelï¼ˆå“¨å…µï¼‰è¿›ç¨‹åŒæ„ Masterä¸»æœåŠ¡å™¨ä¸‹çº¿ï¼Œ Masterä¸»æœåŠ¡å™¨çš„å®¢è§‚ä¸‹çº¿çŠ¶æ€å°±ä¼šè¢«ç§»é™¤ã€‚è‹¥ Masterä¸»æœåŠ¡å™¨é‡æ–°å‘ Sentinelï¼ˆå“¨å…µï¼‰è¿›ç¨‹å‘é€ PING å‘½ä»¤è¿”å›æœ‰æ•ˆå›å¤ï¼ŒMasterä¸»æœåŠ¡å™¨çš„ä¸»è§‚ä¸‹çº¿çŠ¶æ€å°±ä¼šè¢«ç§»é™¤ã€‚</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é…ç½®å“¨å…µ</span></span><br><span class="line">vim sentinel.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿›å…¥é…ç½®æ–‡ä»¶ æŒ‰iè¿›å…¥ç¼–è¾‘æ¨¡å¼</span></span><br><span class="line">sentinel monitor  åå­—  ipåœ°å€   ç«¯å£å·  1 <span class="comment"># 1ä»£è¡¨ä¸»æœºæŒ‚äº†ä¹‹åæ˜¯è°æˆä¸ºä¸»æœº</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>1ä»£è¡¨slaveæŠ•ç¥¨ï¼Œè®©è°æˆä¸ºä¸»æœºç¥¨æ•°æœ€å¤šçš„å°±æ˜¯ä¸»æœº</p><p>æˆ‘ä»¬å…³é—­ä¸»æœºåï¼Œé‚£ä¹ˆå“¨å…µè‡ªåŠ¨å°†ä¼šæ›¿æˆ‘ä»¬ä»è¡¨ä¸­é€‰æ‹©ä¸»æœºã€‚åŒæ—¶ä¹Ÿä¼šåœ¨æ—¥å¿—é‡Œè¾¹æ˜¾ç¤ºslave0 ,slave1ç­‰éƒ½æ˜¯ä»æœºï¼Œmasteræ˜¯ä¸»æœºã€‚è¿™ä¸ªæ—¶å€™å¦‚æœä¸»æœºå›æ¥äº†ï¼Œé‚£ä¹ˆ<strong>ä¸»æœºå°±åªèƒ½å½“ä»æœºäº†ï¼Œå†œæ°‘ç¿»èº«åšä¸»äººäº†ï¼Œä½ æƒ³è¦æˆä¸ºä¸»äººï¼Œä¸å¤ªå¯èƒ½äº†ï¼Œé™¤éå…³é—­å…¶ä»–ä»æœºï¼Œç„¶åä¿ç•™ä½ è‡ªå·±ï¼Œåœ¨å…³é—­ä¸»æœºï¼Œè¿™æ ·æ–¹å¯æˆä¸ºä¸»æœºã€‚</strong></p><blockquote><p>ä¼˜ç‚¹ä¸ç¼ºç‚¹</p></blockquote><p>ä¼˜ç‚¹ï¼š</p><ol><li>å“¨å…µé›†ç¾¤ï¼ŒåŸºäºä¸»ä»å¤åˆ¶æ¨¡å¼ï¼Œæ‰€æœ‰çš„ä¸»ä»é…ç½®ä¼˜ç‚¹ä»–å…¨æœ‰</li><li>ä¸»ä»å¯ä»¥åˆ‡æ¢ï¼Œæ•…éšœå¯ä»¥è½¬ç§»ï¼Œç³»ç»Ÿçš„å¯ç”¨æ€§å°±ä¼šæ›´å¥½</li><li>å“¨å…µæ¨¡å¼å°±æ˜¯ä¸»ä»æ¨¡å¼çš„å‡çº§ï¼Œæ‰‹åŠ¨åˆ°è‡ªåŠ¨ï¼Œæ›´åŠ å¥å£®</li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li>Redisä¸å¥½åœ¨çº¿æ‰©å®¹ï¼Œé›†æƒå®¹é‡ä¸€æ—¦è¾¾åˆ°ä¸Šé™ï¼Œåœ¨çº¿æ‰©å®¹å°±ä¼šå¾ˆéº»çƒ¦</li><li>å®ç°å“¨å…µæ¨¡å¼çš„é…ç½®å…¶å®æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œé‡Œè¾¹æœ‰å¾ˆå¤šçš„é€‰æ‹©ã€‚</li></ol><blockquote><p>å“¨å…µæ¨¡å¼çš„é…ç½®</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Example sentinel.conf</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å“¨å…µsentinelå®ä¾‹è¿è¡Œçš„ç«¯å£ é»˜è®¤26379</span></span><br><span class="line">port 26379</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å“¨å…µsentinelçš„å·¥ä½œç›®å½•</span></span><br><span class="line"><span class="built_in">dir</span> /tmp</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å“¨å…µsentinelç›‘æ§çš„redisä¸»èŠ‚ç‚¹çš„ ip port </span></span><br><span class="line"><span class="comment"># master-name  å¯ä»¥è‡ªå·±å‘½åçš„ä¸»èŠ‚ç‚¹åå­— åªèƒ½ç”±å­—æ¯A-zã€æ•°å­—0-9 ã€è¿™ä¸‰ä¸ªå­—ç¬¦&quot;.-_&quot;ç»„æˆã€‚</span></span><br><span class="line"><span class="comment"># quorum é…ç½®å¤šå°‘ä¸ªsentinelå“¨å…µç»Ÿä¸€è®¤ä¸ºmasterä¸»èŠ‚ç‚¹å¤±è” é‚£ä¹ˆè¿™æ—¶å®¢è§‚ä¸Šè®¤ä¸ºä¸»èŠ‚ç‚¹å¤±è”äº†</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;redis-port&gt; &lt;quorum&gt;</span></span><br><span class="line">  sentinel monitor mymaster 127.0.0.1 6379 2</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å½“åœ¨Rediså®ä¾‹ä¸­å¼€å¯äº†requirepass foobared æˆæƒå¯†ç  è¿™æ ·æ‰€æœ‰è¿æ¥Rediså®ä¾‹çš„å®¢æˆ·ç«¯éƒ½è¦æä¾›å¯†ç </span></span><br><span class="line"><span class="comment"># è®¾ç½®å“¨å…µsentinel è¿æ¥ä¸»ä»çš„å¯†ç  æ³¨æ„å¿…é¡»ä¸ºä¸»ä»è®¾ç½®ä¸€æ ·çš„éªŒè¯å¯†ç </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sentinel auth-pass &lt;master-name&gt; &lt;password&gt;</span></span><br><span class="line">sentinel auth-pass mymaster MySUPER--secret-0123passw0rd</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># æŒ‡å®šå¤šå°‘æ¯«ç§’ä¹‹å ä¸»èŠ‚ç‚¹æ²¡æœ‰åº”ç­”å“¨å…µsentinel æ­¤æ—¶ å“¨å…µä¸»è§‚ä¸Šè®¤ä¸ºä¸»èŠ‚ç‚¹ä¸‹çº¿ é»˜è®¤30ç§’</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sentinel down-after-milliseconds &lt;master-name&gt; &lt;milliseconds&gt;</span></span><br><span class="line">sentinel down-after-milliseconds mymaster 30000</span><br><span class="line"> </span><br><span class="line"><span class="comment"># è¿™ä¸ªé…ç½®é¡¹æŒ‡å®šäº†åœ¨å‘ç”Ÿfailoverä¸»å¤‡åˆ‡æ¢æ—¶æœ€å¤šå¯ä»¥æœ‰å¤šå°‘ä¸ªslaveåŒæ—¶å¯¹æ–°çš„masterè¿›è¡Œ åŒæ­¥ï¼Œè¿™ä¸ªæ•°å­—è¶Šå°ï¼Œå®Œæˆfailoveræ‰€éœ€çš„æ—¶é—´å°±è¶Šé•¿ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªæ•°å­—è¶Šå¤§ï¼Œå°±æ„å‘³ç€è¶Š å¤šçš„slaveå› ä¸ºreplicationè€Œä¸å¯ç”¨ã€‚å¯ä»¥é€šè¿‡å°†è¿™ä¸ªå€¼è®¾ä¸º 1 æ¥ä¿è¯æ¯æ¬¡åªæœ‰ä¸€ä¸ªslave å¤„äºä¸èƒ½å¤„ç†å‘½ä»¤è¯·æ±‚çš„çŠ¶æ€ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sentinel parallel-syncs &lt;master-name&gt; &lt;numslaves&gt;</span></span><br><span class="line">sentinel parallel-syncs mymaster 1</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># æ•…éšœè½¬ç§»çš„è¶…æ—¶æ—¶é—´ failover-timeout å¯ä»¥ç”¨åœ¨ä»¥ä¸‹è¿™äº›æ–¹é¢ï¼š </span></span><br><span class="line"><span class="comment">#1. åŒä¸€ä¸ªsentinelå¯¹åŒä¸€ä¸ªmasterä¸¤æ¬¡failoverä¹‹é—´çš„é—´éš”æ—¶é—´ã€‚</span></span><br><span class="line"><span class="comment">#2. å½“ä¸€ä¸ªslaveä»ä¸€ä¸ªé”™è¯¯çš„masteré‚£é‡ŒåŒæ­¥æ•°æ®å¼€å§‹è®¡ç®—æ—¶é—´ã€‚ç›´åˆ°slaveè¢«çº æ­£ä¸ºå‘æ­£ç¡®çš„masteré‚£é‡ŒåŒæ­¥æ•°æ®æ—¶ã€‚</span></span><br><span class="line"><span class="comment">#3.å½“æƒ³è¦å–æ¶ˆä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„failoveræ‰€éœ€è¦çš„æ—¶é—´ã€‚  </span></span><br><span class="line"><span class="comment">#4.å½“è¿›è¡Œfailoveræ—¶ï¼Œé…ç½®æ‰€æœ‰slavesæŒ‡å‘æ–°çš„masteræ‰€éœ€çš„æœ€å¤§æ—¶é—´ã€‚ä¸è¿‡ï¼Œå³ä½¿è¿‡äº†è¿™ä¸ªè¶…æ—¶ï¼Œslavesä¾ç„¶ä¼šè¢«æ­£ç¡®é…ç½®ä¸ºæŒ‡å‘masterï¼Œä½†æ˜¯å°±ä¸æŒ‰parallel-syncsæ‰€é…ç½®çš„è§„åˆ™æ¥äº†</span></span><br><span class="line"><span class="comment"># é»˜è®¤ä¸‰åˆ†é’Ÿ</span></span><br><span class="line"><span class="comment"># sentinel failover-timeout &lt;master-name&gt; &lt;milliseconds&gt;</span></span><br><span class="line">sentinel failover-timeout mymaster 180000</span><br><span class="line"> </span><br><span class="line"><span class="comment"># SCRIPTS EXECUTION</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#é…ç½®å½“æŸä¸€äº‹ä»¶å‘ç”Ÿæ—¶æ‰€éœ€è¦æ‰§è¡Œçš„è„šæœ¬ï¼Œå¯ä»¥é€šè¿‡è„šæœ¬æ¥é€šçŸ¥ç®¡ç†å‘˜ï¼Œä¾‹å¦‚å½“ç³»ç»Ÿè¿è¡Œä¸æ­£å¸¸æ—¶å‘é‚®ä»¶é€šçŸ¥ç›¸å…³äººå‘˜ã€‚</span></span><br><span class="line"><span class="comment">#å¯¹äºè„šæœ¬çš„è¿è¡Œç»“æœæœ‰ä»¥ä¸‹è§„åˆ™ï¼š</span></span><br><span class="line"><span class="comment">#è‹¥è„šæœ¬æ‰§è¡Œåè¿”å›1ï¼Œé‚£ä¹ˆè¯¥è„šæœ¬ç¨åå°†ä¼šè¢«å†æ¬¡æ‰§è¡Œï¼Œé‡å¤æ¬¡æ•°ç›®å‰é»˜è®¤ä¸º10</span></span><br><span class="line"><span class="comment">#è‹¥è„šæœ¬æ‰§è¡Œåè¿”å›2ï¼Œæˆ–è€…æ¯”2æ›´é«˜çš„ä¸€ä¸ªè¿”å›å€¼ï¼Œè„šæœ¬å°†ä¸ä¼šé‡å¤æ‰§è¡Œã€‚</span></span><br><span class="line"><span class="comment">#å¦‚æœè„šæœ¬åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ç”±äºæ”¶åˆ°ç³»ç»Ÿä¸­æ–­ä¿¡å·è¢«ç»ˆæ­¢äº†ï¼Œåˆ™åŒè¿”å›å€¼ä¸º1æ—¶çš„è¡Œä¸ºç›¸åŒã€‚</span></span><br><span class="line"><span class="comment">#ä¸€ä¸ªè„šæœ¬çš„æœ€å¤§æ‰§è¡Œæ—¶é—´ä¸º60sï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œè„šæœ¬å°†ä¼šè¢«ä¸€ä¸ªSIGKILLä¿¡å·ç»ˆæ­¢ï¼Œä¹‹åé‡æ–°æ‰§è¡Œã€‚</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#é€šçŸ¥å‹è„šæœ¬:å½“sentinelæœ‰ä»»ä½•è­¦å‘Šçº§åˆ«çš„äº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆæ¯”å¦‚è¯´rediså®ä¾‹çš„ä¸»è§‚å¤±æ•ˆå’Œå®¢è§‚å¤±æ•ˆç­‰ç­‰ï¼‰ï¼Œå°†ä¼šå»è°ƒç”¨è¿™ä¸ªè„šæœ¬ï¼Œè¿™æ—¶è¿™ä¸ªè„šæœ¬åº”è¯¥é€šè¿‡é‚®ä»¶ï¼ŒSMSç­‰æ–¹å¼å»é€šçŸ¥ç³»ç»Ÿç®¡ç†å‘˜å…³äºç³»ç»Ÿä¸æ­£å¸¸è¿è¡Œçš„ä¿¡æ¯ã€‚è°ƒç”¨è¯¥è„šæœ¬æ—¶ï¼Œå°†ä¼ ç»™è„šæœ¬ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯äº‹ä»¶çš„ç±»å‹ï¼Œä¸€ä¸ªæ˜¯äº‹ä»¶çš„æè¿°ã€‚å¦‚æœsentinel.confé…ç½®æ–‡ä»¶ä¸­é…ç½®äº†è¿™ä¸ªè„šæœ¬è·¯å¾„ï¼Œé‚£ä¹ˆå¿…é¡»ä¿è¯è¿™ä¸ªè„šæœ¬å­˜åœ¨äºè¿™ä¸ªè·¯å¾„ï¼Œå¹¶ä¸”æ˜¯å¯æ‰§è¡Œçš„ï¼Œå¦åˆ™sentinelæ— æ³•æ­£å¸¸å¯åŠ¨æˆåŠŸã€‚</span></span><br><span class="line"><span class="comment">#é€šçŸ¥è„šæœ¬</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sentinel notification-script &lt;master-name&gt; &lt;script-path&gt;</span></span><br><span class="line">  sentinel notification-script mymaster /var/redis/notify.sh</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å®¢æˆ·ç«¯é‡æ–°é…ç½®ä¸»èŠ‚ç‚¹å‚æ•°è„šæœ¬</span></span><br><span class="line"><span class="comment"># å½“ä¸€ä¸ªmasterç”±äºfailoverè€Œå‘ç”Ÿæ”¹å˜æ—¶ï¼Œè¿™ä¸ªè„šæœ¬å°†ä¼šè¢«è°ƒç”¨ï¼Œé€šçŸ¥ç›¸å…³çš„å®¢æˆ·ç«¯å…³äºmasteråœ°å€å·²ç»å‘ç”Ÿæ”¹å˜çš„ä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="comment"># ä»¥ä¸‹å‚æ•°å°†ä¼šåœ¨è°ƒç”¨è„šæœ¬æ—¶ä¼ ç»™è„šæœ¬:</span></span><br><span class="line"><span class="comment"># &lt;master-name&gt; &lt;role&gt; &lt;state&gt; &lt;from-ip&gt; &lt;from-port&gt; &lt;to-ip&gt; &lt;to-port&gt;</span></span><br><span class="line"><span class="comment"># ç›®å‰&lt;state&gt;æ€»æ˜¯â€œfailoverâ€,</span></span><br><span class="line"><span class="comment"># &lt;role&gt;æ˜¯â€œleaderâ€æˆ–è€…â€œobserverâ€ä¸­çš„ä¸€ä¸ªã€‚ </span></span><br><span class="line"><span class="comment"># å‚æ•° from-ip, from-port, to-ip, to-portæ˜¯ç”¨æ¥å’Œæ—§çš„masterå’Œæ–°çš„master(å³æ—§çš„slave)é€šä¿¡çš„</span></span><br><span class="line"><span class="comment"># è¿™ä¸ªè„šæœ¬åº”è¯¥æ˜¯é€šç”¨çš„ï¼Œèƒ½è¢«å¤šæ¬¡è°ƒç”¨ï¼Œä¸æ˜¯é’ˆå¯¹æ€§çš„ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸€èˆ¬éƒ½æ˜¯è¿ç»´æ¥é…ç½®ï¼š</span></span><br><span class="line"><span class="comment"># sentinel client-reconfig-script &lt;master-name&gt; &lt;script-path&gt;</span></span><br><span class="line"> sentinel client-reconfig-script mymaster /var/redis/reconfig.sh</span><br></pre></td></tr></table></figure><h3 id="Redisç¼“å­˜ç©¿é€å’Œé›ªå´©"><a href="#Redisç¼“å­˜ç©¿é€å’Œé›ªå´©" class="headerlink" title="Redisç¼“å­˜ç©¿é€å’Œé›ªå´©"></a>Redisç¼“å­˜ç©¿é€å’Œé›ªå´©</h3><p>â€‹     ç¼“å­˜ç©¿é€ï¼šç”¨æˆ·æƒ³æŸ¥è¯¢ä¸€ä¸ªæ•°æ®ï¼Œå‘ç°rediså†…å­˜æ•°æ®åº“æ²¡æœ‰ï¼Œä¹Ÿå°±æ˜¯ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œäºæ˜¯å‘ç€æŒä¹…å±‚æ•°æ®åº“æŸ¥è¯¢ï¼Œå‘ç°ä¹Ÿæ²¡æœ‰ï¼Œæ•…è€Œæœ¬æ¬¡æŸ¥è¯¢å¤±è´¥ï¼Œå½“ç”¨æˆ·å¾ˆå¤šçš„æ—¶å€™ï¼Œç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­ï¼Œäºæ˜¯éƒ½å»è¯·æ±‚äº†æŒä¹…å±‚æ•°æ®åº“ï¼Œè¿™æ ·å°±ä¼šä½¿æŒä¹…å±‚é€ æˆå¾ˆå¤§å‹åŠ›ï¼Œè¿™ä¸ªæ—¶å€™å°±å‡ºç°äº†ç¼“å­˜ç©¿é€ã€‚</p><p>ç¼“å­˜ç©¿é€<strong>ï¼Œæ˜¯æŒ‡æŸ¥è¯¢ä¸€ä¸ªæ•°æ®åº“ä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ã€‚æ­£å¸¸çš„ä½¿ç”¨ç¼“å­˜æµç¨‹å¤§è‡´æ˜¯ï¼Œæ•°æ®æŸ¥è¯¢å…ˆè¿›è¡Œç¼“å­˜æŸ¥è¯¢ï¼Œå¦‚æœkeyä¸å­˜åœ¨æˆ–è€…keyå·²ç»è¿‡æœŸï¼Œå†å¯¹æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢ï¼Œå¹¶æŠŠæŸ¥è¯¢åˆ°çš„å¯¹è±¡ï¼Œæ”¾è¿›ç¼“å­˜ã€‚å¦‚æœæ•°æ®åº“æŸ¥è¯¢å¯¹è±¡ä¸ºç©ºï¼Œåˆ™ä¸æ”¾è¿›ç¼“å­˜</strong></p><p>ç¼“å­˜ç©¿é€è§£å†³æ€è·¯ï¼š</p><ol><li>å¦‚æœæŸ¥è¯¢æ•°æ®åº“ä¹Ÿä¸ºç©ºï¼Œç›´æ¥è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼å­˜æ”¾åˆ°ç¼“å­˜ï¼Œè¿™æ ·ç¬¬äºŒæ¬¡åˆ°ç¼“å†²ä¸­è·å–å°±æœ‰å€¼äº†ï¼Œè€Œä¸ä¼šç»§ç»­è®¿é—®æ•°æ®åº“ï¼Œè¿™ç§åŠæ³•æœ€ç®€å•ç²—æš´ã€‚</li><li>æ ¹æ®ç¼“å­˜æ•°æ®Keyçš„è§„åˆ™ã€‚ä¾‹å¦‚æˆ‘ä»¬å…¬å¸æ˜¯åšæœºé¡¶ç›’çš„ï¼Œç¼“å­˜æ•°æ®ä»¥Macä¸ºKeyï¼ŒMacæ˜¯æœ‰è§„åˆ™ï¼Œå¦‚æœä¸ç¬¦åˆè§„åˆ™å°±è¿‡æ»¤æ‰ï¼Œè¿™æ ·å¯ä»¥è¿‡æ»¤ä¸€éƒ¨åˆ†æŸ¥è¯¢ã€‚åœ¨åšç¼“å­˜è§„åˆ’çš„æ—¶å€™ï¼ŒKeyæœ‰ä¸€å®šè§„åˆ™çš„è¯ï¼Œå¯ä»¥é‡‡å–è¿™ç§åŠæ³•ã€‚è¿™ç§åŠæ³•åªèƒ½ç¼“è§£ä¸€éƒ¨åˆ†çš„å‹åŠ›ï¼Œè¿‡æ»¤å’Œç³»ç»Ÿæ— å…³çš„æŸ¥è¯¢ï¼Œä½†æ˜¯æ— æ³•æ ¹æ²»ã€‚</li><li>é‡‡ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå°†æ‰€æœ‰å¯èƒ½å­˜åœ¨çš„æ•°æ®å“ˆå¸Œåˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„BitSetä¸­ï¼Œä¸å­˜åœ¨çš„æ•°æ®å°†ä¼šè¢«æ‹¦æˆªæ‰ï¼Œä»è€Œé¿å…äº†å¯¹åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„æŸ¥è¯¢å‹åŠ›ã€‚å…³äºå¸ƒéš†è¿‡æ»¤å™¨ï¼Œè¯¦æƒ…æŸ¥çœ‹ï¼šåŸºäºBitSetçš„å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆBloom Filterï¼‰</li></ol><p>ç¼“å­˜å‡»ç©¿ï¼Œ<strong>æ˜¯æŒ‡ä¸€ä¸ªkeyéå¸¸çƒ­ç‚¹ï¼Œåœ¨ä¸åœçš„æ‰›ç€å¤§å¹¶å‘ï¼Œå¤§å¹¶å‘é›†ä¸­å¯¹è¿™ä¸€ä¸ªç‚¹è¿›è¡Œè®¿é—®ï¼Œå½“è¿™ä¸ªkeyåœ¨å¤±æ•ˆçš„ç¬é—´ï¼ŒæŒç»­çš„å¤§å¹¶å‘å°±ç©¿ç ´ç¼“å­˜ï¼Œç›´æ¥è¯·æ±‚æ•°æ®åº“ï¼Œå°±åƒåœ¨ä¸€ä¸ªå±éšœä¸Šå‡¿å¼€äº†ä¸€ä¸ªæ´ã€‚</strong></p><p>ç¼“å­˜é›ªå´©</p><p><strong>å°±æ˜¯æŒ‡ç¼“å­˜ç”±äºæŸäº›åŸå› ï¼ˆæ¯”å¦‚å®•æœºã€cacheæœåŠ¡æŒ‚äº†æˆ–è€…ä¸å“åº”ï¼‰æ•´ä½“crashæ‰äº†ï¼Œå¯¼è‡´å¤§é‡è¯·æ±‚åˆ°è¾¾åç«¯æ•°æ®åº“ï¼Œä»è€Œå¯¼è‡´æ•°æ®åº“å´©æºƒï¼Œæ•´ä¸ªç³»ç»Ÿå´©æºƒï¼Œå‘ç”Ÿç¾éš¾ã€‚</strong><br>ä¸‹é¢çš„å°±æ˜¯ä¸€ä¸ªé›ªå´©çš„ç®€å•è¿‡ç¨‹ï¼š<br>1ã€redisé›†ç¾¤å½»åº•å´©æºƒ<br>2ã€ç¼“å­˜æœåŠ¡å¤§é‡å¯¹redisçš„è¯·æ±‚hangä½ï¼Œå ç”¨èµ„æº<br>3ã€ç¼“å­˜æœåŠ¡å¤§é‡çš„è¯·æ±‚æ‰“åˆ°æºå¤´æœåŠ¡å»æŸ¥è¯¢mysqlï¼Œç›´æ¥æ‰“æ­»mysql<br>4ã€æºå¤´æœåŠ¡å› ä¸ºmysqlè¢«æ‰“æ­»ä¹Ÿå´©æºƒï¼Œå¯¹æºæœåŠ¡çš„è¯·æ±‚ä¹Ÿhangä½ï¼Œå ç”¨èµ„æº</p><p>5ã€ç¼“å­˜æœåŠ¡å¤§é‡çš„èµ„æºå…¨éƒ¨è€—è´¹åœ¨è®¿é—®rediså’ŒæºæœåŠ¡æ— æœï¼Œæœ€åè‡ªå·±è¢«æ‹–æ­»ï¼Œæ— æ³•æä¾›æœåŠ¡</p><p>6ã€nginxæ— æ³•è®¿é—®ç¼“å­˜æœåŠ¡ï¼Œrediså’ŒæºæœåŠ¡ï¼Œåªèƒ½åŸºäºæœ¬åœ°ç¼“å­˜æä¾›æœåŠ¡ï¼Œä½†æ˜¯ç¼“å­˜è¿‡æœŸåï¼Œæ²¡æœ‰æ•°æ®æä¾›</p><p>7ã€ç½‘ç«™å´©æ¸</p><p><strong>ç¼“å­˜é›ªå´©çš„è§£å†³æ–¹æ¡ˆ</strong><br>1ï¼Œé‡‡ç”¨åŠ é”è®¡æ•°ï¼Œæˆ–è€…ä½¿ç”¨åˆç†çš„é˜Ÿåˆ—æ•°é‡æ¥é¿å…ç¼“å­˜å¤±æ•ˆæ—¶å¯¹æ•°æ®åº“é€ æˆå¤ªå¤§çš„å‹åŠ›ã€‚è¿™ç§åŠæ³•è™½ç„¶èƒ½ç¼“è§£æ•°æ®åº“çš„å‹åŠ›ï¼Œä½†æ˜¯åŒæ—¶åˆé™ä½äº†ç³»ç»Ÿçš„ååé‡ã€‚<br>2ï¼Œåˆ†æç”¨æˆ·è¡Œä¸ºï¼Œå°½é‡è®©å¤±æ•ˆæ—¶é—´ç‚¹å‡åŒ€åˆ†å¸ƒã€‚é¿å…ç¼“å­˜é›ªå´©çš„å‡ºç°ã€‚<br>3ï¼Œå¦‚æœæ˜¯å› ä¸ºæŸå°ç¼“å­˜æœåŠ¡å™¨å®•æœºï¼Œå¯ä»¥è€ƒè™‘åšä¸»å¤‡ï¼Œæ¯”å¦‚ï¼šredisä¸»å¤‡ï¼Œä½†æ˜¯åŒç¼“å­˜æ¶‰åŠåˆ°æ›´æ–°äº‹åŠ¡çš„é—®é¢˜ï¼Œupdateå¯èƒ½è¯»åˆ°è„æ•°æ®ï¼Œéœ€è¦å¥½å¥½è§£å†³ã€‚</p><h3 id="Redisé›†ç¾¤åˆ†å¸ƒéƒ¨ç½²"><a href="#Redisé›†ç¾¤åˆ†å¸ƒéƒ¨ç½²" class="headerlink" title="Redisé›†ç¾¤åˆ†å¸ƒéƒ¨ç½²"></a>Redisé›†ç¾¤åˆ†å¸ƒéƒ¨ç½²</h3>]]></content>
    
    
    <summary type="html">ä½œä¸ºç›®å‰æœ€å—æ¬¢è¿çš„NoSQLï¼ŒRedisæœ‰ä»–çš„ç‹¬ç‰¹ä¹‹å¤„ï¼Œå¹¶ä¸”Redisä½œä¸ºåœ¨å†…å­˜å±‚æ¬¡çš„æ•°æ®åº“ï¼Œä»–çš„å¿«é€Ÿå’Œå¤„ç†ç›¸å¯¹MySQLæ¥è¯´å…·æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œä½†æ˜¯å…¶ä¸MySQLå„æœ‰ä¼˜åŠ¿ã€‚</summary>
    
    
    
    <category term="æ•°æ®åº“" scheme="https://www.blog.909111.xyz/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="Redis" scheme="https://www.blog.909111.xyz/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>RabbitMQå­¦ä¹ ç¬”è®°</title>
    <link href="https://www.blog.909111.xyz/posts/d439760d.html"/>
    <id>https://www.blog.909111.xyz/posts/d439760d.html</id>
    <published>2023-11-09T02:50:23.338Z</published>
    <updated>2024-04-22T08:22:43.582Z</updated>
    
    <content type="html"><![CDATA[<h1 id="RabbitMQå­¦ä¹ ç¬”è®°"><a href="#RabbitMQå­¦ä¹ ç¬”è®°" class="headerlink" title="RabbitMQå­¦ä¹ ç¬”è®°"></a>RabbitMQå­¦ä¹ ç¬”è®°</h1><p>åˆ†å¸ƒå¼æ¶æ„ï¼šä¸€ä¸ªè¯·æ±‚ç”±å¤šä¸ªæœåŠ¡ï¼ˆæœåŠ¡æˆ–è€…ç³»ç»Ÿï¼‰ååŒå¤„ç†å®Œæˆã€‚</p><p>RabbitMQï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ä¸ªæ¶ˆæ¯ä¸­é—´é”®ã€‚</p><p>MQåŠŸèƒ½ï¼š</p><ol><li><strong>å‰Šå³°</strong>ï¼šä¸è®©ç³»ç»Ÿç›´æ¥è®¿é—®ç³»ç»Ÿï¼Œè€Œæ˜¯é€šè¿‡MQ,ç„¶åäº¤ç»™MQå»è®¿é—®ç³»ç»Ÿï¼Œä½¿å¾—è®¿é—®çš„äººå‘˜è¿›è¡Œæ’é˜Ÿã€‚ï¼ˆæœ‰æ’é˜Ÿå°±ä¼šå¯¼è‡´æ¯”è¾ƒæ…¢ï¼Œä½†æ˜¯å®‰å…¨æœ‰æ¬¡åºã€‚ï¼‰</li><li><strong>åº”ç”¨è§£è€¦</strong>ï¼šé€šè¿‡é˜Ÿåˆ—å»è®¿é—®ç³»ç»Ÿï¼Œå„ä¸ªç³»ç»Ÿä¹‹é—´é€šè¿‡MQå»å®Œæˆï¼Œä¹Ÿå°±ä¼šä¸ä¼šäº§ç”Ÿè¿‡å¤šæ•…éšœã€‚</li><li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šA-Bï¼Œå¹¶ä¸è¦Aæ”¶åˆ°Bçš„ç¡®å®šæ¶ˆæ¯æ‰ä¼šæ‰§è¡Œæ“ä½œã€‚</li></ol><p>MQçš„åˆ†ç±»ï¼š</p><ol><li><p>RabbitMQ: å’Œspringæ˜¯ä¸€å®¶å…¬å¸çš„ï¼Œä½¿ç”¨AMQP(é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼‰åŸºç¡€ä¸Šå®Œæˆçš„ï¼Œæ”¯æŒå¤šç§è¯­è¨€ï¼Œç¼ºç‚¹æ˜¯å•†ä¸šç‰ˆè¦ä»˜è´¹ã€‚</p></li><li><p>kafka:ä¸ºå¤§æ•°æ®è€Œç”Ÿï¼Œæœ‰ç™¾ä¸‡çº§TPSçš„ï¼Œå®æ—¶è®¡ç®—ï¼Œååé‡é«˜ï¼Œä½¿ç”¨åœ¨æ—¥å¿—é‡‡é›†ç­‰æ–¹é¢ã€‚ç¼ºç‚¹æ˜¯ï¼Œå•æœºè¶…è¿‡64ä¸ªé˜Ÿåˆ—/åˆ†åŒºï¼Œloadä¼šå‘ç”Ÿæ˜æ˜¾çš„é£™é«˜ç°è±¡ï¼Œé˜Ÿåˆ—è¶Šå¤šï¼Œloadè¶Šé«˜ï¼Œå‘é€å“åº”æ—¶é—´è¶Šé•¿ã€‚æ¶ˆè´¹å¤±è´¥ä¸æ”¯æŒé‡è¯•ï¼Œæ”¯æŒæ¶ˆæ¯é¡ºåºï¼Œä½†ä¸€ä»£ä»£ç†å®•æœºåï¼Œä¼šäº§ç”Ÿæ¶ˆæ¯ä¹±åºï¼Œç¤¾åŒºæ›´æ–°æ…¢ã€‚</p></li><li><p>RocketMQï¼šç”±é˜¿é‡Œå¼€å‘ï¼Œé‡‘èè¡Œä¸šéœ€è¦ï¼Œä½¿ç”¨javaè¯­è¨€å®ç°ï¼Œå‚è€ƒäº†kafka,ä¸€èˆ¬å¸¸ç”¨äºè®¢å•ï¼Œäº¤æ˜“ï¼Œå……å€¼ï¼Œæµè®¡ç®—ï¼Œæ¶ˆæ¯æ¨é€ï¼Œæ—¥å¿—å¤„ç†ï¼Œbingblogåˆ†å‘ç­‰åœºæ™¯ã€‚</p><ol><li>ä¼˜ç‚¹ï¼šå•æœºåå10wçº§åˆ«ï¼Œä¿¡æ¯å¯ä»¥åšåˆ°0ä¸¢å¤±ï¼ŒMQåŠŸèƒ½æ¯”è¾ƒå®Œå–„ï¼Œè¿˜æ˜¯åˆ†å¸ƒå¼ï¼Œæ‹“å±•æ€§å·ï¼Œæ”¯æŒ10äº¿çº§åˆ«çš„æ¶ˆæ¯å †ç§¯ï¼Œä¸ä¼šå› ä¸ºå †ç§¯è€Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</li><li>ç¼ºç‚¹ï¼šè¿™æ¬¡å®¢æˆ·ç«¯è¯­è¨€ä¸å¤šï¼Œç›®å‰æ˜¯javaå’ŒC++,å…¶ä¸­C++è¿˜ä¸æˆç†Ÿï¼Œç¤¾åŒºæ´»è·ƒä¸€èˆ¬ã€‚</li></ol></li></ol><h1 id="åˆçº§éƒ¨åˆ†ï¼š"><a href="#åˆçº§éƒ¨åˆ†ï¼š" class="headerlink" title="åˆçº§éƒ¨åˆ†ï¼š"></a>åˆçº§éƒ¨åˆ†ï¼š</h1><p>RabbitMQï¼šæ˜¯ä¸€ä¸ªæ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå¯ä»¥å½“åšä¸€ä¸ªå¿«é€’ç«™ï¼Œå¿«é€’å‘˜å‘åŒ…è£¹åˆ°å¿«é€’ç«™ï¼Œç„¶åæœ¬åœ°å¿«é€’å‘˜å°†å¿«é€’å‘ç»™ç”¨æˆ·ã€‚</p><p>ç”Ÿäº§è€…ï¼šç”Ÿäº§è€… - &gt; mq ï¼ˆä¸€ä¸ªäº¤æ¢æœºå¯ä»¥ç»‘å®šå¤šä¸ªé˜Ÿåˆ—ï¼‰ -&gt; æ¶ˆè´¹è€…ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä¸€ä¸ªé˜Ÿåˆ—å¯¹åº”ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œå¦‚æœä¸¤ä¸ªä¸€ä¸ªé˜Ÿåˆ—å¯¹åº”ä¸¤ä¸ªæ¶ˆè´¹è€…ï¼Œé‚£ä¹ˆå°±åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…æ”¶åˆ°æ¶ˆæ¯ï¼Œè¿™å°±æƒ³å½“ä¸åªæœ‰ä¸€ä¸ªåŒ…è£¹æ˜¯ä¸å¯èƒ½å‘ç»™ä¸¤ä¸ªäººçš„ã€‚</p><p>æ ¸å¿ƒéƒ¨åˆ†ï¼š</p><ol><li>ç®€å•æ¨¡å¼</li><li>å·¥ä½œæ¨¡å¼</li><li>å‘å¸ƒè®¢é˜…æ¨¡å¼</li><li>è·¯ç”±æ¨¡å¼</li><li>ä¸»é¢˜æ¨¡å¼</li><li>å‘å¸ƒç¡®è®¤æ¨¡å¼</li></ol><p><strong>connection:</strong>publisher/consumer å’Œ brokerä¹‹é—´çš„TCPè¿æ¥ã€‚</p><p><strong>Channel:</strong>å¦‚æœæ¯ä¸€æ¬¡è®¿é—®RabbitMQéƒ½å»ºç«‹ä¸€ä¸ªConnectionï¼Œåœ¨æ¶ˆæ¯é‡å¤§çš„æ—¶å€™å»ºç«‹TCP Connectionçš„å¼€é”€æ˜¯å·¨å¤§çš„ï¼Œæ•ˆç‡ä¹Ÿæ¯”è¾ƒä½ã€‚<strong>channelä½œä¸ºè½»é‡çº§çš„Connectionæå¤§å‡å°‘äº†æ“ä½œç³»ç»Ÿå»ºç«‹TCP connectionçš„å¼€é”€ã€‚</strong></p><h2 id="å®‰è£…rabbitMQï¼š"><a href="#å®‰è£…rabbitMQï¼š" class="headerlink" title="å®‰è£…rabbitMQï¼š"></a>å®‰è£…rabbitMQï¼š</h2><p>å®˜ç½‘ï¼š<a href="https://www.rabbitmq.com">https://www.rabbitmq.com</a></p><p>ä¸‹è½½é¡µé¢ï¼š<a href="https://www.rabbitmq.com/download.html">https://www.rabbitmq.com/download.html</a></p><p>æˆ‘ä¸€èˆ¬ä½¿ç”¨dockerå®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># latest RabbitMQ 3.10</span></span><br><span class="line">docker run -it --<span class="built_in">rm</span> --name rabbitmq -p 5672:5672 -p 15672:15672 rabbitmq:3.10-management</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å…¶ä»–å®‰è£…æ–¹å¼ï¼š</p><ol><li>é¦–å…ˆç°åœ¨linuxä¸‹çš„å‹ç¼©åŒ…ï¼Œæˆ–è€…ä½¿ç”¨å·¥å…·å°†å®‰è£…åŒ…ä¸Šä¼ åˆ°linuxç³»ç»Ÿã€‚</li></ol><ol><li><p>å®‰è£…rabbitMQçš„æ”¯æŒä¾èµ–</p><ol><li><code>rpm  -ivh erlang-21.3-1.el7.x86_64.rpm</code></li><li><code>yml install socat -y</code></li><li><code>rpm -ivh rabbitmq-server-3.8.8-1.el7.noarch.rpm</code></li></ol></li><li><p>æ·»åŠ å¸¸ç”¨å‘½ä»¤ï¼š</p><ol><li><p>æ·»åŠ å¼€æœºå¯åŠ¨<code>chkconfig rabbitmq-server on</code></p></li><li><p>å¯åŠ¨æœåŠ¡ </p><ol><li><p>æ‰¾åˆ°å®‰è£…è·¯å¾„</p></li><li><p>sbinä¸‹çš„service é‡Œè¾¹çš„rabbitmq-server start   <code>/sbin/service rabbitmq-server start</code></p></li><li><p>æŸ¥çœ‹æœåŠ¡çŠ¶æ€<code>/sbin/service rabbitmq-server status</code></p></li><li><p>åœæ­¢æœåŠ¡<code>/sbin/service rabbitmq-server stop</code></p></li><li><p>å¼€å¯åå°webç®¡ç†æ’ä»¶<code>rabbitmq-plugins enable rabbitmq_management</code>ï¼ˆdockerå®‰è£…çš„ä¸è¦è¿™ä¹ˆæ“ä½œï¼‰</p></li><li><p>ä½¿ç”¨è´¦å·è®¿é—®ï¼Œä¸€èˆ¬æ˜¯è´¦å·å¯†ç éƒ½æ˜¯guestï¼Œå½“ç„¶ä½ å¿…é¡»ä¿è¯ä½ çš„ç«¯å£å·å¼€æ”¾ï¼Œå¦‚æœäº‘æœåŠ¡å™¨çš„è¯ï¼Œ15972ï¼Œæ³¨æ„ipåœ°å€ï¼Œå¦‚æœæœ‰åŸŸåçš„è¯ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨åŸŸååæ·»åŠ <code>ï¼š15672</code>ç›´æ¥è®¿é—®.</p></li><li><p>å¦‚æœä¸èƒ½ç›´æ¥è®¿é—®çš„è¯ï¼Œæ£€æŸ¥ä¸€ä¸‹é˜²ç«å¢™ï¼Œ<code>systemctl stop firewalld</code>,è¿™ä¸ªå‘½ä»¤å…³é—­æœ¬æ¬¡é˜²ç«å¢™ï¼Œ<code>systemctl enable firewalld</code>å¯ä»¥ä¸‹æ¬¡å¼€æœºä¹Ÿå…³é—­é˜²ç«å¢™ï¼Œ<code>systemctl status firewalld</code>å¯ä»¥æŸ¥çœ‹å½“å‰ç³»ç»Ÿé˜²æŠ¤å¢™çŠ¶æ€</p></li><li><p>æ·»åŠ ä¸€ä¸ªæ–°ç”¨æˆ·ï¼Œå¦‚æœæ˜¯ä½¿ç”¨è™šæ‹Ÿæœºçš„è¯ï¼Œä¸€èˆ¬æ˜¯ä¸èƒ½ç›´æ¥ä½¿ç”¨guestç™»å½•çš„ï¼Œå½“ç„¶è¿™ä¸ªæˆ‘æ²¡ç¢°åˆ°è¿‡</p><ol><li><p>åˆ›å»ºä¸€ä¸ªè´¦å·<code>rabbitmqctl add_user ç”¨æˆ·å å¯†ç </code></p></li><li><p>è®¾ç½®ç”¨æˆ·è§’è‰² <code>rabbitmqctl set_user_tags admin administractor</code></p></li><li><p>è®¾ç½®ç”¨æˆ·æƒé™</p><p><code>set_permission[-p &lt;vhostpath&gt;] &lt;user&gt; &lt;conf&gt; &lt;write&gt; &lt;read&gt;</code></p><p>ä¸¾ä¾‹ï¼š</p><p><code>rabbitmqctl set_permission -p &quot;/&quot; admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</code>ç”¨æˆ·user_adminå…·æœ‰/vhost1è¿™ä¸ªvritual hostä¸­çš„æ‰€æœ‰èµ„æºçš„é…ç½®ï¼Œå†™ï¼Œè¯»æƒé™ã€‚</p></li><li><p>å½“å‰ç”¨æˆ·å’Œè§’è‰²</p><p><code>rabbitmqctl list_user</code></p></li></ol></li></ol></li></ol></li></ol><h2 id="å¦‚ä½•ä½¿ç”¨MQ-javaä»£ç å®ç°"><a href="#å¦‚ä½•ä½¿ç”¨MQ-javaä»£ç å®ç°" class="headerlink" title="å¦‚ä½•ä½¿ç”¨MQ(javaä»£ç å®ç°)"></a>å¦‚ä½•ä½¿ç”¨MQ(javaä»£ç å®ç°)</h2><p>IDEAæ–°å»ºmavenå·¥ç¨‹å¯¼å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æŒ‡å®šjdkç‰ˆæœ¬--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--rabbitmqä¾èµ–å®¢æˆ·ç«¯--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.rabbitmq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>amqp-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.16.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--æ“ä½œæ–‡ä»¶æµçš„ä¸€ä¸ªä¾èµ–--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼š"><a href="#ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼š" class="headerlink" title="ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼š"></a>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼š</h2><p>ç”Ÿäº§è€… - æ¶ˆæ¯é˜Ÿåˆ— - æ¶ˆè´¹è€…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.rabbitmq.client.Channel;</span><br><span class="line"><span class="keyword">import</span> com.rabbitmq.client.Connection;</span><br><span class="line"><span class="keyword">import</span> com.rabbitmq.client.ConnectionFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeoutException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ç”Ÿäº§è€…ï¼Œç›®æ ‡æ˜¯å‘æ¶ˆæ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="comment">//é˜Ÿåˆ—åç§°</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">final</span>  String QUEUE_NAME=<span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="comment">//å»ºç«‹ä¸€ä¸ªè¿æ¥æ–¹å¼</span></span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        <span class="comment">//å·¥å‚IP è¿æ¥RabbitMQçš„é˜Ÿåˆ—</span></span><br><span class="line">        factory.setHost(<span class="string">&quot;www.littlehei.fun&quot;</span>);</span><br><span class="line">        <span class="comment">//ç”¨æˆ·å</span></span><br><span class="line">        factory.setUsername(<span class="string">&quot;guest&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯†ç </span></span><br><span class="line">        factory.setPassword(<span class="string">&quot;guest&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºé“¾æ¥</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–ä¿¡é“</span></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç”Ÿæˆä¸€ä¸ªé˜Ÿåˆ—</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ç”Ÿæˆé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">        å‚æ•°1ï¼Œé˜Ÿåˆ—åç§°</span></span><br><span class="line"><span class="comment">        å‚æ•°2ï¼Œé˜Ÿåˆ—é‡Œè¾¹çš„æ¶ˆæ¯æ˜¯å¦æŒä¹…åŒ–ï¼ˆç£ç›˜ï¼‰é»˜è®¤æƒ…å†µæ¶ˆæ¯å­˜å‚¨åœ¨å†…å­˜ä¸­</span></span><br><span class="line"><span class="comment">        å‚æ•°3ï¼Œè¯¥é˜Ÿåˆ—æ˜¯å¦åªä¾›ä¸€ä¸ªæ¶ˆè´¹è€…è¿›è¡Œæ¶ˆè´¹ï¼Œæ˜¯å¦è¿›è¡Œæ¶ˆæ¯å…±äº«ï¼Œtrueå¯ä»¥å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹,falseï¼šåªèƒ½ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹</span></span><br><span class="line"><span class="comment">        å‚æ•°4ï¼Œæ˜¯å¦è‡ªåŠ¨åˆ é™¤ï¼Œæœ€åä¸€ä¸ªæ¶ˆè´¹è€…æ–­å¼€é“¾æ¥ä»¥åï¼Œè¯¥é˜Ÿæ˜¯å¦è‡ªåŠ¨åˆ é™¤ï¼Œtrueï¼Œè‡ªåŠ¨åˆ é™¤ï¼Œfalseä¸åˆ é™¤</span></span><br><span class="line"><span class="comment">        å‚æ•°5ï¼Œå…¶ä»–å‚æ•°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        channel.queueDeclare(QUEUE_NAME,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);</span><br><span class="line">        <span class="comment">//å‘æ¶ˆæ¯</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;hello world&quot;</span>;<span class="comment">//åˆæ¬¡ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å‘é€ä¸€ä¸ªæ¶ˆè´¹</span></span><br><span class="line"><span class="comment">        å‚æ•°1ï¼Œå‘é€åˆ°å“ªä¸ªäº¤æ¢æœº</span></span><br><span class="line"><span class="comment">        å‚æ•°2.è·¯ç”±çš„keyå€¼æ˜¯å“ªä¸ªï¼Ÿ  æœ¬æ¬¡æ˜¯é˜Ÿåˆ—çš„åç§°</span></span><br><span class="line"><span class="comment">        å‚æ•°3ï¼Œå…¶ä»–å‚æ•°é…ç½®</span></span><br><span class="line"><span class="comment">        å‚æ•°4ï¼Œå‘é€æ¶ˆæ¯çš„æ¶ˆæ¯ä½“</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        channel.basicPublish(<span class="string">&quot;&quot;</span>,QUEUE_NAME,<span class="literal">null</span>,message.getBytes());</span><br><span class="line">        System.out.println(<span class="string">&quot;æ¶ˆæ¯å‘é€æˆåŠŸ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¶ˆè´¹è€…ï¼šç”¨æ¥æ¥å—ç”Ÿæˆè€…äº§ç”Ÿçš„æ¶ˆæ¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.rabbitmq.client.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeoutException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ¶ˆè´¹è€…ï¼Œç”¨æ¥æ¶ˆè´¹ç”Ÿæˆè€…äº§ç”Ÿçš„ä»£ç </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Consumer</span> &#123;</span><br><span class="line">    <span class="comment">//é˜Ÿåˆ—çš„åç§°ï¼š</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  <span class="keyword">final</span> String QUEUE_NAME=<span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¥æ”¶æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºé“¾æ¥å·¥å‚</span></span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        factory.setHost(<span class="string">&quot;www.littlehei.fun&quot;</span>);</span><br><span class="line">        factory.setUsername(<span class="string">&quot;guest&quot;</span>);</span><br><span class="line">        factory.setPassword(<span class="string">&quot;guest&quot;</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span>  factory.newConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span>  connection.createChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å£°æ˜</span></span><br><span class="line">        <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumerTag,message)-&gt;&#123;</span><br><span class="line">         <span class="comment">//  String message = new String(&quot;è‡ªå·±æ‰‹åŠ¨å»åˆ›å»ºä¸€ä¸ªæ¶ˆæ¯ï¼Œä½†æ˜¯ä¸æ¨è&quot;);</span></span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(message.getBody()));</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å–æ¶ˆæ¶ˆæ¯æ—¶çš„å›è°ƒ</span></span><br><span class="line">        <span class="type">CancelCallback</span> <span class="variable">cancelCallback</span> <span class="operator">=</span> consumerTag -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ¶ˆæ¯æ¶ˆè´¹è¢«ä¸­æ–­&quot;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ¶ˆè´¹è€…æ¥æ”¶æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">        å‚æ•°1ï¼Œæ¶ˆè´¹å“ªä¸ªé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">        å‚æ•°2ï¼Œæ¶ˆè´¹æˆåŠŸä¹‹åæ˜¯å¦è¦è‡ªåŠ¨åº”ç­”ï¼Œtrueè¡¨ç¤ºè‡ªåŠ¨åº”ç­”ï¼Œfalseè¡¨ç¤ºä¸æ˜¯</span></span><br><span class="line"><span class="comment">        å‚æ•°3ï¼Œæ¶ˆè´¹è€…æœªæˆåŠŸæ¶ˆè´¹çš„å›è°ƒ</span></span><br><span class="line"><span class="comment">        å‚æ•°4ï¼Œæ¶ˆè´¹è€…å–å½•æ¶ˆè´¹çš„å›åˆ°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">      channel.basicConsume(QUEUE_NAME,<span class="literal">true</span>,deliverCallback,cancelCallback);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å·¥ä½œé˜Ÿåˆ—"><a href="#å·¥ä½œé˜Ÿåˆ—" class="headerlink" title="å·¥ä½œé˜Ÿåˆ—"></a>å·¥ä½œé˜Ÿåˆ—</h2><p>ç”Ÿæˆè€… â€”-å¤§é‡å‘æ¶ˆæ¯â€” é˜Ÿåˆ— â€” æ¥åˆ°æ¶ˆæ¯â€”å·¥ä½œçº¿ç¨‹1æˆ–è€…å·¥ä½œçº¿ç¨‹2.ã€‚ã€‚ã€‚</p><p>==æ³¨æ„ï¼šä¸€ä¸ªæ¶ˆæ¯åªèƒ½è¢«å¤„ç†ä¸€æ¬¡ä¸èƒ½å¤„ç†å¤šæ¬¡==</p><p>è½®è®­å¤„ç†æ¶ˆæ¯ï¼Œä½ ä¸€ä¸ªï¼Œæˆ‘ä¸‹ä¸€ä¸ªï¼Œä»–ä¸‹ä¸‹ä¸ªã€‚</p><p>ä¸åŒ<strong>å·¥ä½œçº¿ç¨‹</strong>ä¹‹é—´çš„å…³ç³»æ˜¯==ç«äº‰==å…³ç³»</p><p>åˆ›å»ºé“¾æ¥å·¥å…·ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetConnection</span> &#123;</span><br><span class="line">    <span class="comment">//å»ºç«‹ä¸€ä¸ªå·¥å…·ç±»ï¼Œæ¯æ¬¡éƒ½ç›´æ¥ä½¿ç”¨ï¼Œå‡å°‘ä»£ç é‡å¤é‡</span></span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">static</span> Channel <span class="title function_">getChannel</span><span class="params">()</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªé“¾æ¥å·¥å‚</span></span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        connectionFactory.setHost(<span class="string">&quot;www.littlehei.fun&quot;</span>);</span><br><span class="line">        connectionFactory.setUsername(<span class="string">&quot;guest&quot;</span>);</span><br><span class="line">        connectionFactory.setPassword(<span class="string">&quot;guest&quot;</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        <span class="keyword">return</span> channel;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è½®è®­åˆ†å‘ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ä¸€ä¸ªå·¥ä½œçº¿ç¨‹,å¯ä»¥å¤šä¸ªåˆ›å»ºï¼Œå¯ä»¥å¤šçº¿ç¨‹åˆ›å»ºï¼Œå…·ä½“çœ‹ä½ è‡ªå·±å¦‚ä½•å®šäº</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WorkThread1</span> &#123;</span><br><span class="line">    <span class="comment">//é¦–å…ˆè¿˜æ˜¯åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—åç§°</span></span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">static</span> <span class="keyword">final</span>   <span class="type">String</span>  <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¥æ”¶æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line"></span><br><span class="line">          <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ¶ˆè´¹è€…æ¥æ”¶æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">        å‚æ•°1ï¼Œæ¶ˆè´¹å“ªä¸ªé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">        å‚æ•°2ï¼Œæ¶ˆè´¹æˆåŠŸä¹‹åæ˜¯å¦è¦è‡ªåŠ¨åº”ç­”ï¼Œtrueè¡¨ç¤ºè‡ªåŠ¨åº”ç­”ï¼Œfalseè¡¨ç¤ºä¸æ˜¯</span></span><br><span class="line"><span class="comment">        å‚æ•°3ï¼Œæ¶ˆè´¹è€…æœªæˆåŠŸæ¶ˆè´¹çš„å›è°ƒ</span></span><br><span class="line"><span class="comment">        å‚æ•°4ï¼Œæ¶ˆè´¹è€…å–å½•æ¶ˆè´¹çš„å›åˆ°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumerTag,message)-&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸º&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody()));</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">CancelCallback</span> <span class="variable">cancelCallback</span> <span class="operator">=</span> (consumerTag)-&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ¶ˆæ¯è¢«å–æ¶ˆæ¶ˆè´¹æ¥å£å›è°ƒ&quot;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(<span class="string">&quot;C1ç­‰å¾…æ¥æ”¶æ¶ˆæ¯...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ¶ˆæ¯æ¥æ”¶</span></span><br><span class="line">        channel.basicConsume(QUEUE_NAME,<span class="literal">true</span>,deliverCallback,cancelCallback);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç”Ÿäº§è€…ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ç”Ÿäº§è€…ï¼Œå¯ä»¥å‘é€å¤§é‡æ¶ˆæ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product1</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é˜Ÿåˆ—åç§°</span></span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">static</span> <span class="keyword">final</span>  String QUEUE_NAEM=<span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘é€å¤§é‡æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line">        <span class="comment">//é˜Ÿåˆ—å£°æ˜</span></span><br><span class="line">        channel.queueDeclare(QUEUE_NAEM,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‘é€æ¶ˆæ¯</span></span><br><span class="line">        <span class="comment">//ä»æ§åˆ¶å°ä¸­è¾“å…¥</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªæ¶ˆæ¯è¾“å…¥</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (sc.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> sc.next();</span><br><span class="line">            channel.basicPublish(<span class="string">&quot;&quot;</span>,QUEUE_NAEM,<span class="literal">null</span>,name.getBytes());</span><br><span class="line">            System.out.println(<span class="string">&quot;å‘é€å®Œæˆï¼š &quot;</span>+name);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">----------ç»“æœ----------</span><br><span class="line">nihap</span><br><span class="line">å‘é€å®Œæˆnihap</span><br><span class="line">wp1</span><br><span class="line">å‘é€å®Œæˆwp1</span><br><span class="line">ci1</span><br><span class="line">å‘é€å®Œæˆci1</span><br><span class="line">wooda</span><br><span class="line">å‘é€å®Œæˆwooda</span><br><span class="line">æˆ‘å–œæ¬¢ä½ </span><br><span class="line">å‘é€å®Œæˆæˆ‘å–œæ¬¢ä½ </span><br><span class="line">------------------</span><br><span class="line">C1ç­‰å¾…æ¥æ”¶æ¶ˆæ¯...</span><br><span class="line">æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºnihap</span><br><span class="line">æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºci1</span><br><span class="line">æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºæˆ‘å–œæ¬¢ä½ </span><br><span class="line">--------------------</span><br><span class="line">C2ç­‰å¾…æ¥æ”¶æ¶ˆæ¯...</span><br><span class="line">æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºwp1</span><br><span class="line">æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºwooda</span><br></pre></td></tr></table></figure><h2 id="æ¶ˆæ¯åº”ç­”"><a href="#æ¶ˆæ¯åº”ç­”" class="headerlink" title="æ¶ˆæ¯åº”ç­”"></a>æ¶ˆæ¯åº”ç­”</h2><p>ä¸ºäº†é˜²æ­¢æ¶ˆæ¯åœ¨å‘é€è¿‡ç¨‹ä¸­ä¸ä¸¢å¤±ï¼Œä»–æ˜¯==æŒ‡æ¶ˆè´¹è€…æ”¶åˆ°æ¶ˆæ¯å¹¶ä¸”å¤„ç†è¯¥æ¶ˆæ¯ä¹‹åï¼Œå‘Šè¯‰rabbitmqä»–å·²ç»å¤„ç†å®Œæˆäº†ï¼Œrabbitmqå¯ä»¥æŠŠæ¶ˆæ¯åˆ é™¤ã€‚==</p><h3 id="è‡ªåŠ¨åº”ç­”ï¼š"><a href="#è‡ªåŠ¨åº”ç­”ï¼š" class="headerlink" title="è‡ªåŠ¨åº”ç­”ï¼š"></a>è‡ªåŠ¨åº”ç­”ï¼š</h3><p>éœ€è¦åœ¨<strong>é«˜ååé‡å’Œæ•°æ®ä¼ è¾“å®‰å…¨æ€§æ–¹é¢åšæƒè¡¡</strong>ï¼Œè¿™ç§æ¨¡å¼å¦‚æœæ¶ˆæ¯åœ¨æ¥å—åˆ°ä¹‹å‰ï¼Œæ¶ˆè´¹è€…é‚£è¾¹å‡ºç°é“¾æ¥æˆ–è€…channelå…³é—­ï¼Œé‚£ä¹ˆæ¶ˆæ¯å°±ä¸¢å¤±äº†ï¼Œå½“ç„¶å¦‚æœå¦ä¸€æ–¹é¢è¿™ç§æ¨¡å¼æ¶ˆè´¹è€…é‚£è¾¹å¯ä»¥ä¼ é€’è¿‡è½½æ¶ˆæ¯ï¼Œæ²¡æœ‰å¯¹ä¼ é€’çš„æ¶ˆæ¯æ•°é‡è¿›è¡Œé™åˆ¶ï¼Œè¿™æ ·æœ‰å¯èƒ½å¯¼è‡´æ¶ˆè´¹è€…ç”±äºæ¥æ”¶å¤ªå¤šè¿˜æ¥ä¸åŠå¤„ç†çš„æ¶ˆæ¯ï¼Œå¯¼è‡´è¿™äº›æ¶ˆæ¯ç§¯å‹ï¼Œæœ€ç»ˆå¯¼è‡´å†…å­˜è€—å°½ï¼Œæœ€ç»ˆè¿™äº›æ¶ˆè´¹è€…çº¿ç¨‹è¢«æ“ä½œç³»ç»Ÿæ€æ­»ï¼Œæ•…è€Œ<strong>è¿™ç§æ¨¡å¼é€‚ç”¨åœ¨æ¶ˆè´¹è€…å¯ä»¥é«˜æ•ˆå¹¶ä»¥æŸç§é€Ÿç‡èƒ½å¤Ÿå¤„ç†è¿™äº›æ¶ˆæ¯çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚</strong>ï¼ˆä¸é è°±ï¼‰                                         </p><h3 id="æ‰‹åŠ¨åº”ç­”"><a href="#æ‰‹åŠ¨åº”ç­”" class="headerlink" title="æ‰‹åŠ¨åº”ç­”"></a>æ‰‹åŠ¨åº”ç­”</h3><p>èƒ½ç”¨æ‰‹åŠ¨åˆ™ç”¨æ‰‹åŠ¨ã€‚æ‰‹åŠ¨æ–¹æ³•</p><ol><li>Channel.basicAck(ç”¨äºè‚¯å®šç¡®è®¤)</li><li>Channel.basicNack(ç”¨äºå¦å®šç¡®è®¤)</li><li>Channel.basicReject(ç”¨äºå¦å®šç¡®è®¤)ï¼Œå¯¹æ¯”nackå°‘äº†ä¸€ä¸ªå‚æ•°ï¼Œä¸å¤„ç†è¯¥æ¶ˆæ¯äº†ç›´æ¥å°±å¯ä»¥æ‹’ç»ï¼Œä¹Ÿå¯ä»¥å°†ä»–ä¸¢å¼ƒã€‚</li></ol><p>æ‰¹é‡åº”ç­”ï¼ˆmultipleï¼‰ï¼š==æ¨èä½¿ç”¨false==,å½“æ¥å—åˆ°ä¸€ä¸ªæ¶ˆæ¯çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯é˜Ÿåˆ—å¾€ä¿¡é“é‡Œè¾¹æ”¾äº†næ¡æ•°æ®ï¼Œé‚£ä¹ˆä»–ä¼šå°†æ­¤ä¿¡é“é‡Œè¾¹çš„æ‰€æœ‰æ¶ˆæ¯éƒ½åº”ç­”ä¸€æ¬¡ã€‚</p><h3 id="æ¶ˆæ¯è‡ªåŠ¨é‡æ–°å…¥é˜Ÿ"><a href="#æ¶ˆæ¯è‡ªåŠ¨é‡æ–°å…¥é˜Ÿ" class="headerlink" title="æ¶ˆæ¯è‡ªåŠ¨é‡æ–°å…¥é˜Ÿ"></a>æ¶ˆæ¯è‡ªåŠ¨é‡æ–°å…¥é˜Ÿ</h3><p>å¦‚æœæ¶ˆè´¹è€…ç”±äºæŸäº›åŸå› å¤±å»è¿æ¥ï¼Œæˆ–è€…è¯´ä»–çš„é€šé“å·²ç»å…³é—­ï¼Œè¿æ¥å·²ç»å…³é—­æˆ–è€…TCPè¿æ¥ä¸¢å¤±ï¼Œå¯¼è‡´æ¶ˆæ¯æœªå‘é€ACKç¡®è®¤ï¼Œ<strong>æ­¤æ—¶RabbitMQå°†äº†è§£åˆ°æ¶ˆæ¯æœªå®Œå…¨å¤„ç†ï¼Œå¹¶å°†å…¶é‡æ–°æ’é˜Ÿï¼Œå¦‚æœæ­¤æ—¶å…¶ä»–æ¶ˆè´¹è€…å¯ä»¥å¤„ç†ï¼Œä»–å°†å¾ˆå¿«å°†å…¶é‡æ–°åˆ†å‘ç»™å¦ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œ</strong>è¿™æ ·å³ä½¿æŸä¸ªæ¶ˆè´¹è€…å¶å°”æ­»äº¡ï¼Œä¹Ÿå¯ä»¥ç¡®ä¿ä¸ä¼šä¸¢å¤±ä»»ä½•ä¿¡æ¯ã€‚</p><p>ä¸ªäººç†è§£ï¼š</p><p>ä¹Ÿå°±æ˜¯æœ¬æ¥åšè¿™ä¸ªä»»åŠ¡çš„å‘˜å·¥æœ‰äº‹è¾èŒäº†ï¼Œå…¬å¸ä¸ºäº†å®Œæˆä»»åŠ¡äº¤ç»™å¦ä¸€ä¸ªè¿˜åœ¨èŒçš„å‘˜å·¥å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œç›´åˆ°è¿™ä¸ªä»»åŠ¡å®Œæˆï¼Œè¿™æ ·ä¿è¯ä»»åŠ¡ä¸è¢«ä¸¢å¤±ã€‚</p><p>ä»£ç å®ç°ï¼š</p><p>æ¶ˆæ¯åœ¨æ‰‹åŠ¨åº”ç­”çš„æ—¶å€™æ˜¯ä¸åº”è¯¥è¢«ä¸¢å¤±çš„ï¼Œä¸”ä¼šé‡æ–°å…¥é˜Ÿã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æˆ‘ä»¬ä¸»è¦å›´ç»•çš„æ˜¯æ‰‹åŠ¨åº”ç­”è¿›è¡Œå¤„ç†ï¼Œè¦æ˜¯æ¶ˆæ¯åº”ç­”ä¸ä¸¢å¤±ï¼Œæ”¾å›é˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">é‡æ–°æ¶ˆè´¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Task</span> &#123;</span><br><span class="line">    <span class="comment">//è€æ ·å­ï¼Œé˜Ÿåˆ—åç§°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;ack_queue&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å£°åé˜Ÿåˆ—</span></span><br><span class="line">        channel.queueDeclare(QUEUE_NAME,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä»æ§åˆ¶å°ä¸­è·å–</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">while</span> (sc.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> sc.next();</span><br><span class="line">            channel.basicPublish(<span class="string">&quot;&quot;</span>,QUEUE_NAME,<span class="literal">null</span>,message.getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼š &quot;</span>+ message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ¥æ”¶æ¶ˆæ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Work_Consume1</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;ack_queue&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="comment">//æ¥å—æ¶ˆæ¯</span></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;C1ç­‰å¾…æ¥å—æ¶ˆæ¯å¤„ç†æ—¶é—´è¾ƒçŸ­&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumerTag, message)-&gt;&#123;</span><br><span class="line">            <span class="comment">//çœ‹æƒ…å†µä½ ç»™ä¸ç»™ä¼‘çœ </span></span><br><span class="line">            SleepUtils.sleep(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;æ¥æ”¶åˆ°æ¶ˆæ¯&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody(),<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">            <span class="comment">//è¿›è¡Œæ‰‹åŠ¨åº”ç­”</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            å‚æ•°1 ï¼Œ æ¶ˆæ¯çš„æ ‡è®°tag</span></span><br><span class="line"><span class="comment">            å‚æ•°2ï¼Œ æ˜¯å¦æ‰¹é‡åº”ç­”  false ä¸ ï¼Œtrueï¼Œæ‰¹é‡åº”ç­”</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            channel.basicAck(message.getEnvelope().getDeliveryTag(),<span class="literal">false</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//æ‰‹åŠ¨æ¥æ”¶æ¶ˆæ¯</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//é‡‡ç”¨æ‰‹åŠ¨åº”ç­”</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">autoAck</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        channel.basicConsume(QUEUE_NAME,autoAck,deliverCallback,(consumerTag-&gt;&#123;</span><br><span class="line">            System.out.println(consumerTag + <span class="string">&quot;æ¶ˆè´¹è€…å–æ¶ˆæ¶ˆè´¹æ¥å£å›è°ƒé€»è¾‘&quot;</span>);</span><br><span class="line">        &#125;));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Title ä¼‘çœ å·¥å…·ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SleepUtils</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">void</span> <span class="title function_">sleep</span><span class="params">(<span class="type">int</span> second)</span> &#123;</span><br><span class="line">        <span class="comment">//JUCé‡Œè¾¹çš„å·¥å…·ç±»</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>*second);</span><br><span class="line">            <span class="comment">//TimeUnit.SECONDS.sleep(2);</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="comment">//ä¸­æ–­</span></span><br><span class="line">            Thread.currentThread().interrupt();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šè¿°æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“æ¶ˆæ¯é˜Ÿåˆ—åœ¨æˆ‘ä»¬åˆ›å»ºå¤šä¸ªæ¶ˆè´¹è€…çš„æ—¶å€™ï¼Œæ˜¯è½®è½¬æ¥çš„ï¼Œå½“ç„¶ï¼Œå‡è®¾æœ‰ä¸¤ä¸ªæ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå®•æœºï¼Œé‚£ä¹ˆæ¶ˆæ¯é˜Ÿåˆ—å°±å°†æœ¬è½®è½¬ç»™æ²¡å®•æœºçš„é‚£ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œ==åªè¦ç”Ÿäº§è€…æœ‰äº§ç”Ÿï¼Œæ— è®ºå¦‚ä½•è¦å°†æ¶ˆæ¯å…¨éƒ¨æ¶ˆè´¹==ï¼Œä¸å¯ä¸¢å¼ƒã€‚</p><h2 id="Rabbitæ¶ˆæ¯æŒä¹…åŒ–"><a href="#Rabbitæ¶ˆæ¯æŒä¹…åŒ–" class="headerlink" title="Rabbitæ¶ˆæ¯æŒä¹…åŒ–"></a>Rabbitæ¶ˆæ¯æŒä¹…åŒ–</h2><p>æ¶ˆæ¯æ˜¯å¯ä»¥æŒä¹…åŒ–ä¿å­˜çš„ï¼ŒæŒä¹…çš„ç›®çš„æ˜¯ä¸ºäº†å¤„ç†ä»»åŠ¡ä¸¢å¤±æƒ…å†µçš„ï¼Œé‡‡ç”¨æŒä¹…åŒ–å¯ä»¥ä¿è¯æ¶ˆæ¯å­˜å‚¨ï¼Œä¸”æ¶ˆæ¯ä¸è¢«ä¸¢å¤±ã€‚</p><h4 id="é˜Ÿåˆ—å¦‚ä½•æŒä¹…åŒ–"><a href="#é˜Ÿåˆ—å¦‚ä½•æŒä¹…åŒ–" class="headerlink" title="é˜Ÿåˆ—å¦‚ä½•æŒä¹…åŒ–"></a>é˜Ÿåˆ—å¦‚ä½•æŒä¹…åŒ–</h4><blockquote><p>ä¸¤ä¸ªæŒä¹…åŒ–æ“ä½œéƒ½æ˜¯åœ¨ç”Ÿäº§è€…ä¸­è¿›è¡Œçš„ã€‚</p></blockquote><p>æˆ‘ä»¬éœ€è¦å°†durableå‚æ•°è®¾ç½®ä¸ºæŒä¹…åŒ–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®©é˜Ÿåˆ—æŒä¹…åŒ–</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">durable</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">channel.queueDeclare(é˜Ÿåˆ—å,durable,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>)</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ==å°±æ˜¯å¦‚æœä¹‹å‰å£°æ˜çš„é˜Ÿåˆ—ä¸æ˜¯æŒä¹…åŒ–çš„ï¼Œéœ€è¦æŠŠåŸå…ˆé˜Ÿåˆ—å…ˆåˆ é™¤ï¼Œç„¶åé‡æ–°åˆ›å»ºä¸€ä¸ªæŒä¹…åŒ–é˜Ÿåˆ—ï¼Œä¸ç„¶å°±ä¼šå‡ºç°é”™è¯¯==ã€‚</p><p>é”™è¯¯ï¼š</p><blockquote><p>com.rabbitmq.client.ShutdownSignalException: channel error; protocol method: #method<channel.close>(reply-code=406, reply-text=PRECONDITION_FAILED - inequivalent arg â€˜durableâ€™ for queue â€˜ack_queueâ€™ in vhost â€˜/â€˜: received â€˜trueâ€™ but current is â€˜falseâ€™, class-id=50, method-id=10)</p></blockquote><p><strong>æ³¨æ„ï¼š</strong></p><p>==æŒä¹…åŒ–åçš„rabbitMQé‡å¯ä¹‹åé˜Ÿåˆ—æ¶ˆæ¯è¿˜æ˜¯ä¼šå­˜åœ¨çš„ï¼ŒæœªæŒä¹…åŒ–çš„ï¼Œé‚£ä¹ˆå¯¹ä¸èµ·ï¼Œä»–æ²¡äº†ã€‚==</p><h4 id="æ¶ˆæ¯æŒä¹…åŒ–"><a href="#æ¶ˆæ¯æŒä¹…åŒ–" class="headerlink" title="æ¶ˆæ¯æŒä¹…åŒ–"></a>æ¶ˆæ¯æŒä¹…åŒ–</h4><p>å°†æ¶ˆæ¯æ ‡è®°ä¸ºæŒä¹…åŒ–å¹¶ä¸èƒ½ä¿è¯ä¸ä¼šä¸¢å¤±æ¶ˆæ¯ï¼Œå°½ç®¡ä»–ä¼šå‘Šè¯‰rabbitMQå°†æ¶ˆæ¯ä¿å­˜åˆ°ç£ç›˜ä¸­ï¼Œä½†æ˜¯è¿™é‡Œä»ç„¶å­˜åœ¨å½“æ¶ˆæ¯åˆšåˆšå­˜å‚¨æ± åœ¨ç£ç›˜çš„æ—¶å€™ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å­˜å‚¨å®Œï¼Œæ¶ˆæ¯è¿˜åœ¨ç¼“å­˜çš„ä¸€ä¸ªé—´éš”ç‚¹ï¼Œæ­¤æ—¶å¹¶æ²¡æœ‰çœŸæ­£å†™å…¥ç£ç›˜ï¼ŒæŒä¹…æ€§ä¿è¯å¹¶ä¸å¼ºï¼Œä½†æ˜¯å¯¹äºæˆ‘ä»¬ç®€å•ä»»åŠ¡é˜Ÿåˆ—è€Œè¨€ï¼Œè¿™å·²ç»å°±ç»°ç»°æœ‰ä½™äº†ã€‚</p><p><code>MessageProperties.PERSISTENT_TEXT_PLAIN</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Task</span> &#123;</span><br><span class="line">    <span class="comment">//è€æ ·å­ï¼Œé˜Ÿåˆ—åç§°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;ack_queue&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å£°åé˜Ÿåˆ—</span></span><br><span class="line">        <span class="comment">//è®©é˜Ÿåˆ—æŒä¹…åŒ–</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">durable</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        channel.queueDeclare(QUEUE_NAME,durable,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä»æ§åˆ¶å°ä¸­è·å–</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">while</span> (sc.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> sc.next();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//æ·»åŠ æŒä¹…åŒ–</span></span><br><span class="line">            <span class="comment">//è®¾ç½®ç”Ÿæˆè€…å‘é€æ¶ˆæ¯ä¸ºæŒä¹…åŒ–ä¿¡æ¯ï¼ˆè¦æ±‚ä¿å­˜åˆ°ç¡¬ç›˜ä¸Šï¼‰ä¿å­˜åœ¨å†…å­˜ä¸­</span></span><br><span class="line">            <span class="comment">//MessageProperties.PERSISTENT_TEXT_PLAIN,æŒ‡ä»¤å®ŒæˆæŒä¹…åŒ–</span></span><br><span class="line">            channel.basicPublish(<span class="string">&quot;&quot;</span>,QUEUE_NAME, MessageProperties.PERSISTENT_TEXT_PLAIN,message.getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">           <span class="comment">//æœªæŒä¹…åŒ–æ—¶å€™çš„æ˜¯</span></span><br><span class="line">            <span class="comment">// channel.basicPublish(&quot;&quot;,QUEUE_NAME,null,message.getBytes(&quot;UTF-8&quot;));</span></span><br><span class="line">            System.out.println(<span class="string">&quot;ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼š &quot;</span>+ message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸å…¬å¹³åˆ†å‘ï¼š"><a href="#ä¸å…¬å¹³åˆ†å‘ï¼š" class="headerlink" title="ä¸å…¬å¹³åˆ†å‘ï¼š"></a>ä¸å…¬å¹³åˆ†å‘ï¼š</h3><p>åœ¨æŸäº›æƒ…å†µä¸‹è½®è®­åˆ†å‘å¹¶ä¸å¥½ç”¨ï¼Œå…·ä½“ä¾‹å­ï¼šæœ‰ä¸¤ä¸ªæ¶ˆè´¹è€…åœ¨å¤„ç†ä»»åŠ¡ï¼Œå…¶ä¸­æœ‰ä¸ªæ¶ˆè´¹è€…1å¤„ç†ä»»åŠ¡çš„é€Ÿåº¦éå¸¸å¿«ï¼Œè€Œå¦ä¸€ä¸ªæ¶ˆè´¹è€…2å¤„ç†çš„é€Ÿåº¦å´å¾ˆæ…¢ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¿˜é‡‡ç”¨è½®è®­åˆ†å‘å°±ä¼šå¯¼è‡´è¿™ä¸ªå¤„ç†é€Ÿåº¦å¿«çš„å¾ˆå¤§ä¸€éƒ¨åˆ†æ—¶é—´å¤„äºç©ºé—²çŠ¶æ€ï¼Œè€Œå¤„ç†æ…¢çš„é‚£ä¸ªæ¶ˆè´¹è€…å°±ä¸€ç›´åœ¨å¹²æ´»ï¼Œè¿™ç§åˆ†é…æ–¹å¼å°±ä¸æ˜¯å¾ˆå¥½ã€‚ </p><p>==èƒ½è€…å¤šåŠ³==ï¼Œå¤šåŠ³å¤šå¾—ã€‚</p><p>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬æœ‰é‡‡ç”¨ä¸å…¬å¹³åˆ†å‘æ“ä½œ</p><p>è®¾ç½®å‚æ•°<strong>channel.basicQos(1);</strong></p><blockquote><p>èƒ½è€…å¤šåŠ³æ˜¯åœ¨æ¶ˆè´¹è€…ä¸­è®¾ç½®çš„</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//èƒ½è€…å¤šåŠ³</span></span><br><span class="line"><span class="type">int</span> <span class="variable">prefetchCount</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">channel.basicQos(prefetchCount);</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æˆ‘ä»¬ç”Ÿæ´»ä¸­é‡‡ç”¨çš„å°±æ˜¯ä¸å…¬å¹³åˆ†å‘ã€‚</p><p><strong>é¢„å–å€¼ï¼š</strong></p><p>é¢„å…ˆåˆ†é…ä»»åŠ¡ï¼Œæ¯”å¦‚ç”Ÿäº§è€…ç”Ÿæˆ7æ¡æ•°æ®ï¼Œé€šè¿‡é˜Ÿåˆ—åˆ†å‘ï¼Œé€šè¿‡==é¢„å–å€¼ï¼Œé¢„å–å€¼æ˜¯å¤šå°‘ï¼Œå°±ç»™å±äºé‚£æ¡ä¿¡é“çš„æ¶ˆè´¹è€…åˆ†é…å¤šå°‘æ¶ˆæ¯ã€‚å’Œæ¶ˆè´¹è€…å¤„ç†æ¶ˆæ¯çš„å¿«æ…¢æ— å…³ã€‚==</p><p><strong>æ³¨æ„</strong>ï¼š</p><p>é¢„å–å€¼æ¶ˆè€—å®Œæ¯•åï¼Œä¹‹åçš„å€¼å°±æŒ‰ç…§é‚£ä¸ªæ¶ˆè´¹è€…å¿«ç»™ä»–åˆ†é…çš„ä¿¡æ¯å°±å¤šï¼Œè°æ…¢ï¼Œè°åˆ†é…çš„ä¿¡æ¯å°±å°‘ã€‚</p><p>é¢„å–å€¼æ˜¯æ´—å‘äººå‘˜èƒ½é™åˆ¶ç¼“å†²åŒºå¤§å°ï¼Œé¿å…ç¼“å†²åŒºé‡Œè¾¹æ— é™åˆ¶çš„æœªç¡®å®šæ¶ˆæ¯é—®é¢˜ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé¢„å–å€¼å¹¶ä¸æ˜¯ä½ ç›´æ¥è¾“å…¥å¤šå°‘æ¡æ•°æ®ä»–å°±å¯ä»¥ç›´æ¥å †æ»¡çš„æˆ‘ä»¬è®¾ç½®çš„é¢„å–å€¼çš„ï¼Œä»–å¯èƒ½ç”±äºæ¶ˆè´¹è´¹è€…å¤„ç†é€Ÿåº¦å½±å“ï¼Œæ¯”å¦‚ï¼Œä½ è¾“å…¥10æ¡æ•°æ®ï¼Œä½†æ˜¯è®¾ç½®é¢„å–å€¼ä¸º5çš„æœ€åå€¼åªä¼šäº§ç”Ÿ4æ¡æ•°æ®ä¹Ÿè¯´ä¸å‡†ï¼Œå› ä¸ºå¦ä¸€ä¸ªå¤ªå¿«äº†ï¼Œå…¶ä»–çš„æ•°æ®éƒ½è¢«ä»–æ¶ˆè€—å®Œæ¯•äº†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®éå…¬å¹³åˆ†å‘</span></span><br><span class="line">      <span class="comment">//int i = 1;</span></span><br><span class="line">      <span class="comment">//é¢„å–å€¼</span></span><br><span class="line">      <span class="type">int</span> i= <span class="number">5</span>; <span class="comment">//è®¾ç½®åˆ†å‘5ä¸ªæ¶ˆæ¯ï¼Œä¹Ÿå°±æ˜¯é¢„å–å€¼ä¸º5</span></span><br><span class="line">      channel.basicQos(i);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®</span></span><br><span class="line">        <span class="comment">//int i = 1; //ä¸å…¬å¹³åˆ†å‘</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>;<span class="comment">//æ­¤æ—¶è®¾ç½®å°±æ˜¯é¢„å–å€¼äº†</span></span><br><span class="line">        channel.basicQos(i);</span><br></pre></td></tr></table></figure><h2 id="å‘å¸ƒå’Œç¡®è®¤"><a href="#å‘å¸ƒå’Œç¡®è®¤" class="headerlink" title="å‘å¸ƒå’Œç¡®è®¤"></a>å‘å¸ƒå’Œç¡®è®¤</h2><p>ç”Ÿäº§è€… - - å‘é€æ¶ˆæ¯ â€” é˜Ÿåˆ—hello         :apple:å¿…é¡»ä¿å­˜åœ¨ç£ç›˜ä¸Šæ‰èƒ½è¾¾åˆ°æŒä¹…åŒ–æ“ä½œã€‚</p><ol><li>è®¾ç½®è¦å»é˜Ÿåˆ—å¿…é¡»æŒä¹…åŒ–</li><li>è®¾ç½®è¦æ±‚é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯å¿…é¡»æŒä¹…åŒ–</li><li>å‘å¸ƒç¡®è®¤</li></ol><h3 id="å¼€å¯å‘å¸ƒç¡®è®¤"><a href="#å¼€å¯å‘å¸ƒç¡®è®¤" class="headerlink" title="å¼€å¯å‘å¸ƒç¡®è®¤"></a>å¼€å¯å‘å¸ƒç¡®è®¤</h3><h4 id="å•ä¸ªç¡®è®¤å‘å¸ƒï¼š"><a href="#å•ä¸ªç¡®è®¤å‘å¸ƒï¼š" class="headerlink" title="å•ä¸ªç¡®è®¤å‘å¸ƒï¼š"></a>å•ä¸ªç¡®è®¤å‘å¸ƒï¼š</h4><p>æ¯æ¬¡ç”Ÿäº§è€…ç”Ÿäº§ä¸€ä¸ªæ¶ˆæ¯ä»–éƒ½ä¼šç¡®è®¤ä¸€æ¬¡ï¼Œè¿™æ ·çš„å¥½å¤„å°±æ˜¯ï¼Œå¦‚æœå‘é€ä¿¡æ¯ä¸¢å¤±å¯ä»¥å¾ˆå®¹æ˜“ç¡®å®šä½ç½®ï¼Œç¼ºç‚¹æ˜¯æ…¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å•ä¸ªç¡®è®¤</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">publicMessageIndividually</span><span class="params">()</span> <span class="keyword">throws</span> IOException, TimeoutException, InterruptedException &#123;</span><br><span class="line">       <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line"></span><br><span class="line">       <span class="comment">//é˜Ÿåˆ—çš„å£°æ˜</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> UUID.randomUUID().toString();</span><br><span class="line"></span><br><span class="line">       <span class="comment">//ä½¿ç”¨ä¿¡é“å¯¹é˜Ÿåˆ—è¿›è¡Œå£°æ˜</span></span><br><span class="line">       channel.queueDeclare(queueName,<span class="literal">true</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);</span><br><span class="line">       <span class="comment">//å¼€å¯å‘å¸ƒç¡®è®¤</span></span><br><span class="line">       channel.confirmSelect();</span><br><span class="line">       <span class="comment">//å¼€å§‹æ—¶é—´</span></span><br><span class="line">       <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">       <span class="comment">//æ‰¹é‡å‘æ¶ˆæ¯</span></span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; MESSAGE_COUNT; i++) &#123;</span><br><span class="line">           <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> i + <span class="string">&quot;&quot;</span>;</span><br><span class="line">           channel.basicPublish(<span class="string">&quot;&quot;</span>,queueName,<span class="literal">null</span>,message.getBytes());</span><br><span class="line">           <span class="comment">//å•ä¸ªæ¶ˆæ¯å°±é©¬ä¸Šè¿›è¡Œå‘å¸ƒç¡®è®¤</span></span><br><span class="line">           <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> channel.waitForConfirms();</span><br><span class="line">           <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">               System.out.println(<span class="string">&quot;æ¶ˆæ¯å‘é€æˆåŠŸ&quot;</span>);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//ç»“æŸæ—¶é—´</span></span><br><span class="line">       <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">       System.out.println(<span class="string">&quot;å‘å¸ƒ&quot;</span> + MESSAGE_COUNT + <span class="string">&quot;å•ä¸ªæ¶ˆæ¯&quot;</span> + (end-begin)+<span class="string">&quot;æ¯«ç§’&quot;</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h4 id="æ‰¹é‡ç¡®è®¤å‘å¸ƒï¼š"><a href="#æ‰¹é‡ç¡®è®¤å‘å¸ƒï¼š" class="headerlink" title="æ‰¹é‡ç¡®è®¤å‘å¸ƒï¼š"></a>æ‰¹é‡ç¡®è®¤å‘å¸ƒï¼š</h4><p>æ‰¹é‡å‘å¸ƒå¯¹æ¯”å•ä¸ªå‘å¸ƒé€Ÿåº¦å¿«äº†å¾ˆå¤šï¼Œä½†æ˜¯è¿™ä¸ªç¢°åˆ°é—®é¢˜å»æŸ¥æ‰¾é—®é¢˜çš„æ—¶å€™å°±æ¯”è¾ƒæ…¢äº†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰¹é‡å‘å¸ƒ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">publicMessageBatch</span><span class="params">()</span> <span class="keyword">throws</span> IOException, TimeoutException, InterruptedException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é˜Ÿåˆ—çš„å£°æ˜</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> UUID.randomUUID().toString();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä½¿ç”¨ä¿¡é“å¯¹é˜Ÿåˆ—è¿›è¡Œå£°æ˜</span></span><br><span class="line">        channel.queueDeclare(queueName,<span class="literal">true</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);</span><br><span class="line">        <span class="comment">//å¼€å¯å‘å¸ƒç¡®è®¤</span></span><br><span class="line">        channel.confirmSelect();</span><br><span class="line">        <span class="comment">//å¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ‰¹é‡ç¡®è®¤æ¶ˆæ¯çš„å¤§å°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">batchSize</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        <span class="comment">//æœªç¡®è®¤æ¶ˆæ¯ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ‰¹é‡å‘æ¶ˆæ¯ï¼Œæ‰¹é‡å‘å¸ƒç¡®è®¤</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; MESSAGE_COUNT; i++) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> i + <span class="string">&quot;&quot;</span>;</span><br><span class="line">            channel.basicPublish(<span class="string">&quot;&quot;</span>,queueName,<span class="literal">null</span>,message.getBytes());</span><br><span class="line">            <span class="comment">//å•ä¸ªæ¶ˆæ¯å°±é©¬ä¸Šè¿›è¡Œå‘å¸ƒç¡®è®¤</span></span><br><span class="line">            <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> channel.waitForConfirms();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//æ¶ˆæ¯è¾¾åˆ°10ç¡®è®¤ä¸€æ¬¡</span></span><br><span class="line">            <span class="keyword">if</span>(i%batchSize == <span class="number">0</span>)&#123;</span><br><span class="line">                channel.waitForConfirms();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ç»“æŸæ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;å‘å¸ƒ&quot;</span> + MESSAGE_COUNT + <span class="string">&quot;å‘å¸ƒ100ä¸ªæ¶ˆæ¯&quot;</span> + (end-begin) +<span class="string">&quot;æ¯«ç§’&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="å¼‚æ­¥ç¡®è®¤å‘å¸ƒ"><a href="#å¼‚æ­¥ç¡®è®¤å‘å¸ƒ" class="headerlink" title="å¼‚æ­¥ç¡®è®¤å‘å¸ƒ"></a>å¼‚æ­¥ç¡®è®¤å‘å¸ƒ</h4><p>å¯¹æ¯”å•æ­¥å’Œæ‰¹é‡è¿™ä¸ªå°±å‰å®³å¤šäº†ï¼Œä»–å¯ä»¥å¼‚å¸¸è¿›è¡Œï¼Œä»–æ˜¯åˆ©ç”¨å›è°ƒå‡½æ•°æ¥è¾¾åˆ°æ¶ˆæ¯å¯é æ€§ä¼ é€’çš„ï¼Œè¿™ä¸ªä¸­é—´ä»¶ä¹Ÿæ˜¯é€šè¿‡å‡½æ•°å›è°ƒæ¥ä¿è¯æ˜¯å¦æŠ•é€’æˆåŠŸã€‚</p><p>å¯„å¿«ä»¶çš„äººç–¯ç‹‚å‘ï¼Œç„¶ååˆ°brokerä¸­é€‰æ‹©å“ªäº›éœ€è¦ç¡®è®¤çš„è¿›è¡Œç¡®è®¤ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼‚æ­¥</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">publishMessageAsync</span><span class="params">()</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">      <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line"></span><br><span class="line">      <span class="comment">//é˜Ÿåˆ—çš„å£°æ˜</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> UUID.randomUUID().toString();</span><br><span class="line"></span><br><span class="line">      <span class="comment">//ä½¿ç”¨ä¿¡é“å¯¹é˜Ÿåˆ—è¿›è¡Œå£°æ˜</span></span><br><span class="line">      channel.queueDeclare(queueName,<span class="literal">true</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);</span><br><span class="line">      <span class="comment">//å¼€å¯å‘å¸ƒç¡®è®¤</span></span><br><span class="line">      channel.confirmSelect();</span><br><span class="line">      <span class="comment">//å¼€å§‹æ—¶é—´</span></span><br><span class="line">      <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">      <span class="comment">//æ¶ˆæ¯ç¡®è®¤æˆåŠŸï¼Œå›è°ƒå‡½æ•°</span></span><br><span class="line">      <span class="type">ConfirmCallback</span> <span class="variable">ackCallback</span> <span class="operator">=</span> (delivery,multiple)-&gt;&#123;</span><br><span class="line">          System.out.println(<span class="string">&quot;ç¡®è®¤çš„æ¶ˆæ¯ï¼š&quot;</span> + delivery);</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="comment">//æ¶ˆæ¯ç¡®è®¤å¤±è´¥ï¼Œå›è°ƒå‡½æ•°</span></span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1.æ¶ˆæ¯çš„æ ‡è®°</span></span><br><span class="line"><span class="comment">        2.æ¶ˆæ¯æ˜¯å¦ä¸ºæ‰¹é‡</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="type">ConfirmCallback</span> <span class="variable">nackCallback</span> <span class="operator">=</span> (delivery,multiple)-&gt;&#123;</span><br><span class="line">          System.out.println(<span class="string">&quot;æœªç¡®è®¤çš„æ¶ˆæ¯ï¼š&quot;</span> + delivery);</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//åœ¨å‘æ¶ˆæ¯çš„æ—¶å€™ï¼Œä½ éœ€è¦å‡†å¤‡ä¸€ä¸ªç›‘å¬å™¨ï¼Œç›‘å¬å“ªäº›æ¶ˆæ¯æˆåŠŸäº†ï¼Œå“ªäº›æ¶ˆæ¯å¤±æ•ˆäº†</span></span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">      1.ç›‘å¬å“ªäº›æ¶ˆæ¯æˆåŠŸäº†</span></span><br><span class="line"><span class="comment">      2.ç›‘å¬å“ªäº›æ¶ˆæ¯å¤±è´¥äº†</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      channel.addConfirmListener(ackCallback,nackCallback);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//æ‰¹é‡å‘é€æ¶ˆæ¯</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; MESSAGE_COUNT; i++) &#123;</span><br><span class="line">          <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;æ¶ˆæ¯&quot;</span> + i;</span><br><span class="line">          channel.basicPublish(<span class="string">&quot;&quot;</span>,queueName,<span class="literal">null</span>,message.getBytes());</span><br><span class="line">          <span class="comment">//å‘å¸ƒç¡®è®¤ï¼Œè¿™ä¸ªæ—¶å€™è¦æ˜¯è¿›è¡Œå‘å¸ƒç¡®è®¤å°±æ˜¯åŒæ­¥äº†</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="comment">//ç»“æŸæ—¶é—´</span></span><br><span class="line">      <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span>  System.currentTimeMillis();</span><br><span class="line">      System.out.println(<span class="string">&quot;å‘å¸ƒ&quot;</span> + MESSAGE_COUNT + <span class="string">&quot;å¼‚æ­¥å‘å¸ƒç¡®è®¤æ¶ˆæ¯ï¼Œè€—æ—¶&quot;</span> + (end-begin) +<span class="string">&quot;æ¯«ç§’&quot;</span>);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="è¿™å°±å‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•å¤„ç†å¼‚æ­¥æœªç¡®è®¤æ¶ˆæ¯"><a href="#è¿™å°±å‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•å¤„ç†å¼‚æ­¥æœªç¡®è®¤æ¶ˆæ¯" class="headerlink" title="è¿™å°±å‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•å¤„ç†å¼‚æ­¥æœªç¡®è®¤æ¶ˆæ¯"></a>è¿™å°±å‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•å¤„ç†å¼‚æ­¥æœªç¡®è®¤æ¶ˆæ¯</h4><p>æœ€å¥½çš„è§£å†³çš„è§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯æŠŠæœªç¡®è®¤çš„æ¶ˆæ¯æ”¾åˆ°ä¸€ä¸ªåŸºäºå†…å­˜çš„èƒ½å‘å¸ƒçº¿ç¨‹è®¿é—®çš„é˜Ÿåˆ—ï¼Œæ¯”å¦‚è¯´ConcurrentLinkedQueueè¿™ä¸ªé˜Ÿåˆ—åœ¨confirm callbacksä¸å‘å¸ƒçº¿ç¨‹ä¹‹é—´è¿›è¡Œæ¶ˆæ¯çš„ä¼ é€’ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼‚æ­¥</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">publishMessageAsync</span><span class="params">()</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">       <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line"></span><br><span class="line">       <span class="comment">//é˜Ÿåˆ—çš„å£°æ˜</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> UUID.randomUUID().toString();</span><br><span class="line"></span><br><span class="line">       <span class="comment">//ä½¿ç”¨ä¿¡é“å¯¹é˜Ÿåˆ—è¿›è¡Œå£°æ˜</span></span><br><span class="line">       channel.queueDeclare(queueName,<span class="literal">true</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);</span><br><span class="line">       <span class="comment">//å¼€å¯å‘å¸ƒç¡®è®¤</span></span><br><span class="line">       channel.confirmSelect();</span><br><span class="line"></span><br><span class="line">       <span class="comment">/*</span></span><br><span class="line"><span class="comment">       çº¿ç¨‹å®‰å…¨æœ‰åºçš„ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œé€‚ç”¨äºé«˜å¹¶å‘çš„æƒ…å†µä¸‹çš„</span></span><br><span class="line"><span class="comment">       1.è½»æ¾å°†åºå·å’Œæ¶ˆæ¯è¿›è¡Œå…³è”</span></span><br><span class="line"><span class="comment">       2.è½»æ¾æ‰¹é‡åˆ é™¤æ¡ç›®ï¼Œåªè¦ç»™åˆ°åºå·</span></span><br><span class="line"><span class="comment">       3.æ”¯æŒé«˜å¹¶å‘ï¼ˆå¤šçº¿ç¨‹ï¼‰</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       ConcurrentSkipListMap&lt;Long,String&gt;  outstandingConfirms=</span><br><span class="line">               <span class="keyword">new</span> <span class="title class_">ConcurrentSkipListMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">       <span class="comment">//æ¶ˆæ¯ç¡®è®¤æˆåŠŸï¼Œå›è°ƒå‡½æ•°</span></span><br><span class="line">       <span class="type">ConfirmCallback</span> <span class="variable">ackCallback</span> <span class="operator">=</span> (delivery,multiple)-&gt;&#123;</span><br><span class="line">        <span class="keyword">if</span>(multiple)&#123;</span><br><span class="line">            <span class="comment">//åˆ é™¤å·²ç»ç¡®è®¤çš„æ¶ˆæ¯ï¼Œå‰©ä¸‹çš„å°±æ˜¯ä¸ºç¡®è®¤çš„æ¶ˆæ¯</span></span><br><span class="line">            ConcurrentNavigableMap&lt;Long, String&gt; confirmed =</span><br><span class="line">                     outstandingConfirms.headMap(delivery);</span><br><span class="line">            confirmed.clear();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            outstandingConfirms.remove(delivery);</span><br><span class="line">        &#125;</span><br><span class="line">           System.out.println(<span class="string">&quot;ç¡®è®¤çš„æ¶ˆæ¯ï¼š&quot;</span> + delivery);</span><br><span class="line">       &#125;;</span><br><span class="line">       <span class="comment">//æ¶ˆæ¯ç¡®è®¤å¤±è´¥ï¼Œå›è°ƒå‡½æ•°</span></span><br><span class="line">       <span class="comment">/*</span></span><br><span class="line"><span class="comment">         1.æ¶ˆæ¯çš„æ ‡è®°</span></span><br><span class="line"><span class="comment">         2.æ¶ˆæ¯æ˜¯å¦ä¸ºæ‰¹é‡</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="type">ConfirmCallback</span> <span class="variable">nackCallback</span> <span class="operator">=</span> (delivery,multiple)-&gt;&#123;</span><br><span class="line">          <span class="comment">//3.æ‰“å°ä¸€ä¸‹æœªç¡®è®¤çš„æ¶ˆæ¯éƒ½æœ‰å“ªäº›</span></span><br><span class="line">         <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span>  outstandingConfirms.get(delivery);</span><br><span class="line">           System.out.println(<span class="string">&quot;æœªç¡®è®¤çš„æ¶ˆæ¯æ˜¯:&quot;</span> + message+<span class="string">&quot;æœªç¡®è®¤çš„æ ‡è®°ï¼š&quot;</span> + delivery);</span><br><span class="line">       &#125;;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//åœ¨å‘æ¶ˆæ¯çš„æ—¶å€™ï¼Œä½ éœ€è¦å‡†å¤‡ä¸€ä¸ªç›‘å¬å™¨ï¼Œç›‘å¬å“ªäº›æ¶ˆæ¯æˆåŠŸäº†ï¼Œå“ªäº›æ¶ˆæ¯å¤±æ•ˆäº†</span></span><br><span class="line">       <span class="comment">/*</span></span><br><span class="line"><span class="comment">       1.ç›‘å¬å“ªäº›æ¶ˆæ¯æˆåŠŸäº†</span></span><br><span class="line"><span class="comment">       2.ç›‘å¬å“ªäº›æ¶ˆæ¯å¤±è´¥äº†</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       channel.addConfirmListener(ackCallback,nackCallback); <span class="comment">// å¼‚æ­¥é€šçŸ¥</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//å¼€å§‹æ—¶é—´</span></span><br><span class="line">       <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       <span class="comment">//æ‰¹é‡å‘é€æ¶ˆæ¯</span></span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; MESSAGE_COUNT; i++) &#123;</span><br><span class="line">           <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;æ¶ˆæ¯&quot;</span> + i;</span><br><span class="line">           channel.basicPublish(<span class="string">&quot;&quot;</span>,queueName,<span class="literal">null</span>,message.getBytes());</span><br><span class="line">           <span class="comment">//å‘å¸ƒç¡®è®¤ï¼Œè¿™ä¸ªæ—¶å€™è¦æ˜¯è¿›è¡Œå‘å¸ƒç¡®è®¤å°±æ˜¯åŒæ­¥äº†</span></span><br><span class="line">           <span class="comment">/*</span></span><br><span class="line"><span class="comment">           1ã€‚æ­¤å¤„è®°å½•ä¸‹æ‰€æœ‰è¦å‘é€çš„æ¶ˆæ¯ï¼Œæ¶ˆæ¯çš„æ€»å’Œ</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">      outstandingConfirms.put(channel.getNextPublishSeqNo(),message);</span><br><span class="line">           System.out.println();</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//ç»“æŸæ—¶é—´</span></span><br><span class="line">       <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span>  System.currentTimeMillis();</span><br><span class="line">       System.out.println(<span class="string">&quot;å‘å¸ƒ&quot;</span> + MESSAGE_COUNT + <span class="string">&quot;å¼‚æ­¥å‘å¸ƒç¡®è®¤æ¶ˆæ¯ï¼Œè€—æ—¶&quot;</span> + (end-begin) +<span class="string">&quot;æ¯«ç§’&quot;</span>);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="ä»¥ä¸Šä¸‰ç§å‘å¸ƒçš„ç¡®è®¤é€Ÿåº¦å¯¹æ¯”"><a href="#ä»¥ä¸Šä¸‰ç§å‘å¸ƒçš„ç¡®è®¤é€Ÿåº¦å¯¹æ¯”" class="headerlink" title="ä»¥ä¸Šä¸‰ç§å‘å¸ƒçš„ç¡®è®¤é€Ÿåº¦å¯¹æ¯”"></a>ä»¥ä¸Šä¸‰ç§å‘å¸ƒçš„ç¡®è®¤é€Ÿåº¦å¯¹æ¯”</h3><p>å•æ­¥å‘å¸ƒæ¶ˆæ¯</p><ul><li>åŒæ­¥ç­‰å¾…ç¡®è®¤ï¼Œç®€å•ï¼Œä½†æ˜¯ååé‡éå¸¸æœ‰é™</li></ul><p>æ‰¹é‡å‘å¸ƒç¡®è®¤</p><ul><li>æ‰¹é‡åŒæ­¥ç­‰å¾…ç¡®è®¤ï¼ŒåŠ å•ï¼Œåˆç†çš„ååé‡ï¼Œä¸€æ—¦å‡ºç°é—®é¢˜ï¼Œä½†å¾ˆéš¾æ¨æ–­å‡ºæ˜¯é‚£æ¡æ¶ˆæ¯å‡ºç°äº†é—®é¢˜ã€‚</li></ul><p>å¼‚æ­¥å‘å¸ƒç¡®è®¤</p><p>æœ€ä½³æ€§èƒ½å’Œèµ„æºä½¿ç”¨ï¼Œåœ¨å‡ºç°é”™è¯¯çš„æƒ…å†µä¸‹å¯ä»¥å¾ˆå¥½çš„æ§åˆ¶ï¼Œä½†æ˜¯å®ç°èµ·æ¥ç¨å¾®éš¾ä¸€ç‚¹ã€‚</p><h2 id="äº¤æ¢æœºï¼ˆexchangesï¼‰"><a href="#äº¤æ¢æœºï¼ˆexchangesï¼‰" class="headerlink" title="äº¤æ¢æœºï¼ˆexchangesï¼‰"></a>äº¤æ¢æœºï¼ˆexchangesï¼‰</h2><p>å½“ä½¿ç”¨åˆ°äº¤æ¢æœºçš„æ—¶å€™ï¼Œæˆ‘ä»¬ç”¨çš„å°±ä¸æ˜¯æ™®é€šçš„æ¨¡å¼äº†ï¼Œè€Œæ˜¯å‘å¸ƒè®¢é˜…æ¨¡å¼äº†ã€‚</p><p><strong>ç”Ÿäº§è€…ç”Ÿæˆçš„æ¶ˆæ¯ä¸ä¼šç›´æ¥å‘é€åˆ°é˜Ÿåˆ—</strong></p><p>è€Œæ˜¯ç›´æ¥å°†æ¶ˆæ¯å…ˆå‘é€åˆ°äº¤æ¢æœºï¼Œå¹¶ä¸”åªèƒ½å‘é€åˆ°äº¤æ¢æœºï¼Œä¹‹é’±çš„æˆ‘ä»¬å¯ä»¥ç›´æ¥å‘é€åˆ°é˜Ÿåˆ—ï¼ˆäº‹å®ä¸Šæˆ‘ä»¬èµ°çš„æ˜¯é»˜è®¤äº¤æ¢æœºï¼‰ï¼Œç„¶åé˜Ÿåˆ—äº¤ç»™æ¶ˆè´¹è€…ï¼Œç°åœ¨ä¸è¡Œäº†ï¼Œæ”¹æˆå…ˆå‘é€ç»™äº¤æ¢æœºï¼Œäº¤æ¢æœºåœ¨å‘ç»™é˜Ÿåˆ—ã€‚</p><p>äº¤æ¢æœºçš„å·¥ä½œæ–¹å¼å¾ˆç®€å•ï¼Œ<strong>ä»–æ¥æ”¶æ¥è‡ªç”Ÿäº§è€…çš„æ¶ˆæ¯ï¼Œå¦ä¸€æ–¹é¢å°†ä»–ä»¬æ¨é€åˆ°é˜Ÿåˆ—ã€‚</strong></p><h3 id="äº¤æ¢æœºçš„ç±»å‹"><a href="#äº¤æ¢æœºçš„ç±»å‹" class="headerlink" title="äº¤æ¢æœºçš„ç±»å‹"></a>äº¤æ¢æœºçš„ç±»å‹</h3><p>ç›´æ¥ï¼ˆdirectï¼‰,ä¸»é¢˜ï¼ˆtopicï¼‰,æ ‡é¢˜ï¼ˆheadsï¼‰ï¼Œæ‰‡å‡ºï¼ˆfanoutï¼‰</p><h4 id="æ— åexchanges"><a href="#æ— åexchanges" class="headerlink" title="æ— åexchanges"></a>æ— åexchanges</h4><p>äº‹å®ä¸Šå°±æ˜¯é»˜è®¤ç±»å‹ï¼Œæˆ‘ä»¬é€šè¿‡ç©ºå­—ç¬¦ï¼ˆâ€â€ï¼‰ä¸²è¿›è¡Œæ ‡è¯†ã€‚</p><p><code>channel.basicPublic(&quot;&quot;,&quot;hello&quot;,null,message.getBytes());</code></p><p>å®é™…ä¸Šç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯äº¤æ¢æœºçš„åå­—ï¼Œç©ºå­—ç¬¦ä¸²è¡¨ç¤ºé»˜è®¤æˆ–è€…æ— åç§°äº¤æ¢æœºï¼Œæ¶ˆæ¯èƒ½è·¯ç”±å‘é€åˆ°é˜Ÿåˆ—ä¸­ï¼Œå…¶å®æ˜¯ç”±routing(bindingkey)ç»‘å®škeyæŒ‡å®šçš„ï¼Œå¦‚æœå®ƒå­˜åœ¨çš„è¯ã€‚</p><h4 id="ä¸´æ—¶é˜Ÿåˆ—"><a href="#ä¸´æ—¶é˜Ÿåˆ—" class="headerlink" title="ä¸´æ—¶é˜Ÿåˆ—"></a>ä¸´æ—¶é˜Ÿåˆ—</h4><p>å®é™…ä¸Šæ˜¯è‡ªå®šä¹‰çš„ï¼Œä¸€æ—¦æ–­å¼€é“¾æ¥ï¼Œè¿™ä¸ªé˜Ÿåˆ—å°±ä¼šè¢«åˆ é™¤ã€‚</p><h4 id="ç»‘å®š"><a href="#ç»‘å®š" class="headerlink" title="ç»‘å®š"></a>ç»‘å®š</h4><p>å®é™…ä¸Šå°±æ˜¯äº¤æ¢æœºå’Œé˜Ÿåˆ—çš„æ¡¥æ¢ï¼Œä»–å‘Šè¯‰æˆ‘ä»¬äº¤æ¢æœºå’Œé‚£ä¸ªé˜Ÿåˆ—è¿›è¡Œç»‘å®šå…³ç³»</p><h4 id="Fanout"><a href="#Fanout" class="headerlink" title="Fanout"></a>Fanout</h4><p>fanoutæ˜¯ä¸€ç§äº¤æ¢æœºçš„ç±»å‹ï¼Œè¿™ç§ç±»å‹éå¸¸ç®€å•ï¼Œæ­£å¦‚åç§°ä¸­çŒœæƒ³çš„é‚£æ ·ï¼Œä»–æ˜¯å°†æ¥æ”¶çš„æ‰€æœ‰æ¶ˆæ¯<strong>å¹¿æ’­</strong>åˆ°ä»–çŸ¥é“çš„æ‰€æœ‰é˜Ÿåˆ—ä¸­ï¼Œç³»ç»Ÿä¸­é»˜è®¤æœ‰exchangesäº¤æ¢æœºç±»å‹ã€‚</p><p><img src="1667315273358.png" alt="1667315273358"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å‘æ¶ˆæ¯ äº¤æ¢æœº</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmitLog</span> &#123;</span><br><span class="line">    <span class="comment">//äº¤æ¢æœºçš„åç§°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">final</span>  String EXCHANGE_NAME=<span class="string">&quot;logs&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line"></span><br><span class="line">        channel.exchangeDeclare(EXCHANGE_NAME,<span class="string">&quot;fanout&quot;</span>);</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (sc.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> sc.next();</span><br><span class="line">            channel.basicPublish(EXCHANGE_NAME,<span class="string">&quot;&quot;</span>,<span class="literal">null</span>,message.getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼š&quot;</span> + message);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ¶ˆæ¯æ¥æ”¶,å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReceiveLog</span> &#123;</span><br><span class="line">    <span class="comment">//äº¤æ¢æœºçš„åç§°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span>  String EXCHANG_NAME=<span class="string">&quot;logs&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line">        <span class="comment">//å£°æ˜ä¸€ä¸ªäº¤æ¢æœº</span></span><br><span class="line">      channel.exchangeDeclare(EXCHANG_NAME,<span class="string">&quot;fanout&quot;</span>);</span><br><span class="line">        <span class="comment">//å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ¥ä¸€ä¸ªä¸´æ—¶é˜Ÿåˆ—</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        é˜Ÿåˆ—çš„åç§°æ˜¯éšæœºçš„ã€‚</span></span><br><span class="line"><span class="comment">        å½“æ¶ˆè´¹è€…æ–­å¼€ä¸é˜Ÿåˆ—çš„è¿æ¥çš„æ—¶å€™ï¼Œé˜Ÿåˆ—å°±å¯ä»¥è‡ªåŠ¨åˆ é™¤</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span>  channel.queueDeclare().getQueue();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">      channel.queueBind(queueName,EXCHANG_NAME,<span class="string">&quot;&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç­‰å¾…æ¥å—æ¶ˆæ¯ï¼ŒæŠŠæ¶ˆæ¯æ˜¾ç¤ºåœ¨å±å¹•ä¸Š&quot;</span>);</span><br><span class="line">        <span class="comment">//æ¥å—æ¶ˆæ¯</span></span><br><span class="line">        <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumer,message)-&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Receiveæ§åˆ¶å°æ‰“å°æ¥å—åˆ°çš„æ¶ˆæ¯&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody(),<span class="string">&quot;UTF-8&quot;</span>) );</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//æ¶ˆè´¹è€…å–æ¶ˆæ¶ˆæ¯æ—¶å›è°ƒæ¥å£</span></span><br><span class="line">        channel.basicConsume(queueName,<span class="literal">true</span>,deliverCallback,consumer-&gt;&#123;</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Direct"><a href="#Direct" class="headerlink" title="Direct"></a>Direct</h4><p>ä»å›¾ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒXç»‘å®šäº†ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œç»‘å®šç±»å‹æ˜¯direct,é˜Ÿåˆ—Q1ç»‘å®šå»ºä¸ºorangeï¼Œé˜Ÿåˆ—2ç»‘å®šé”®æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªä¸ºblackï¼Œå¦ä¸€ä¸ªä¸ºgreen.</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‘å¸ƒè¿™å‘å¸ƒæ¶ˆæ¯åˆ°exchangeä¸Šï¼Œç»‘å®šé”®ä¸ºorangeçš„æ¶ˆæ¯ä¼šè¢«å‘å¸ƒåˆ°é˜Ÿåˆ—Q1ç»‘å®šé”®ä¸ºblackgreençš„æ¶ˆæ¯ä¼šè¢«å‘å¸ƒåˆ°é˜Ÿåˆ—Q2,å…¶ä»–æ¶ˆæ¯ç±»å‹å°±è¢«ä¸¢å¼ƒã€‚</p><p><strong>å¤šé‡ç»‘å®š</strong></p><p>å½“ç„¶å¦‚æœexchangeçš„ç»‘å®šç±»å‹æ˜¯directï¼Œä½†æ˜¯ä»–ç»‘å®šçš„å¤šä¸ªé˜Ÿåˆ—çš„keyå¦‚æœå¤šç›¸åŒåœ¨è¿™ç§æƒ…å†µä¸‹è™½ç„¶ç»‘å®šç±»å‹æ˜¯directï¼Œä½†æ˜¯ä»–è¡¨ç°çš„å°±å’Œfanoutæœ‰ç‚¹æƒ³ç±»ä¼¼äº†ï¼Œå°±å’Œå¹¿æ’­å·®ä¸å¤šäº†ã€‚</p><p>è¿™è¾¹å°±å¯ä»¥æŒ‡å®šå‘ç»™è°äº†ï¼Œæˆ‘ä¸å‘ç»™è°ä»–å°±æ”¶ä¸åˆ°æ¶ˆæ¯ï¼Œåªæœ‰æˆ‘å…è®¸ä»–æ¥æ”¶ä»–æ‰èƒ½å¾—åˆ°æ¥æ”¶ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DirectLogs</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//äº¤æ¢æœºçš„åç§°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">final</span>  String EXCHANGE_NAME=<span class="string">&quot;direct_logs&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (sc.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> sc.next();</span><br><span class="line">            channel.basicPublish(EXCHANGE_NAME,<span class="string">&quot;info&quot;</span>,<span class="literal">null</span>,message.getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼š&quot;</span> + message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReceiveLogDirect01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">static</span> <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">EXCHANGE_NAME</span> <span class="operator">=</span><span class="string">&quot;direct_logs&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line"></span><br><span class="line">        channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.DIRECT);</span><br><span class="line">        <span class="comment">//å£°æ˜ä¸€ä¸ªäº¤æ¢æœº</span></span><br><span class="line">        channel.queueDeclare(<span class="string">&quot;console&quot;</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        channel.queueBind(<span class="string">&quot;console&quot;</span>,EXCHANGE_NAME,<span class="string">&quot;info&quot;</span>);</span><br><span class="line">        channel.queueBind(<span class="string">&quot;console&quot;</span>,EXCHANGE_NAME,<span class="string">&quot;warning&quot;</span>);</span><br><span class="line">        <span class="comment">//æ¥å—æ¶ˆæ¯</span></span><br><span class="line">        <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumer, message)-&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ReceiveLogsDirect01æ§åˆ¶å°æ‰“å°æ¥å—åˆ°çš„æ¶ˆæ¯&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody(),<span class="string">&quot;UTF-8&quot;</span>) );</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ¶ˆè´¹è€…å–æ¶ˆæ¶ˆæ¯æ—¶å›è°ƒæ¥å£</span></span><br><span class="line">        channel.basicConsume(<span class="string">&quot;console&quot;</span>,<span class="literal">true</span>,deliverCallback,consumer-&gt;&#123;&#125;);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReceiveLogDirect02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">static</span> <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">EXCHANGE_NAME</span> <span class="operator">=</span><span class="string">&quot;direct_logs&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line"></span><br><span class="line">        channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.DIRECT);</span><br><span class="line">        <span class="comment">//å£°æ˜ä¸€ä¸ªäº¤æ¢æœº</span></span><br><span class="line">        channel.queueDeclare(<span class="string">&quot;disk&quot;</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        channel.queueBind(<span class="string">&quot;disk&quot;</span>,EXCHANGE_NAME,<span class="string">&quot;error&quot;</span>);</span><br><span class="line">        <span class="comment">//æ¥å—æ¶ˆæ¯</span></span><br><span class="line">        <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumer, message)-&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ReceiveLogsDirect01æ§åˆ¶å°æ‰“å°æ¥å—åˆ°çš„æ¶ˆæ¯&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody(),<span class="string">&quot;UTF-8&quot;</span>) );</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ¶ˆè´¹è€…å–æ¶ˆæ¶ˆæ¯æ—¶å›è°ƒæ¥å£</span></span><br><span class="line">        channel.basicConsume(<span class="string">&quot;disk&quot;</span>,<span class="literal">true</span>,deliverCallback,consumer-&gt;&#123;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Topic"><a href="#Topic" class="headerlink" title="Topic"></a>Topic</h4><p>å¯¹æ¯”ä¸Šé¢ä¸¤ç§äº¤æ¢æœºæ›´åŠ å®Œç¾ï¼Œå½“å­˜åœ¨æˆ‘ä»¬è¦æ¥å—æ—¥å¿—ç±»å‹æœ‰info.baseå’Œinfo.advantage,æŸä¸ªé˜Ÿåˆ—åªæƒ³info.baseçš„æ¶ˆæ¯ï¼Œé‚£è¿™ä¸ªÂ·æ—¶å€™ä¸Šè¾¹ä¸¤ç§äº¤æ¢æœºå°±åšä¸åˆ°äº†ã€‚æ­¤æ—¶æˆ‘ä»¬é‡‡ç”¨çš„å°±æ˜¯topicäº¤æ¢æœºç±»å‹äº†ã€‚</p><p><strong>Topic</strong></p><p>å‘é€ç±»å‹æ˜¯topicäº¤æ¢æœºçš„æ¶ˆæ¯çš„routing_keyä¸èƒ½éšæ„å†™ï¼Œ<strong>å¿…é¡»æ»¡è¶³ä¸€å®šçš„è¦æ±‚ï¼Œä»–å¿…é¡»æ˜¯ä¸€ä¸ªå•çº¯åˆ—è¡¨ï¼Œä»¥ç‚¹å·éš”å¼€</strong>ï¼Œè¿™ä¸ªå•æ¬¡å¯ä»¥æ˜¯ä»»æ„å•è¯ã€‚â€nysc.xxxâ€ç­‰ã€‚é™åˆ¶è¦æ±‚å•è¯åˆ—è¡¨ä¸èƒ½è¶…è¿‡255ä¸ªå­—èŠ‚ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ </p><p><strong>* ä»£è¡¨çš„æ˜¯ä¸€ä¸ªå•è¯</strong></p><p><strong>â€˜#â€™ ä»£è¡¨çš„æ˜¯å¯ä»¥æ›¿æ¢é›¶ä¸ªæˆ–å¤šä¸ªå•è¯ã€‚</strong></p><p>ä¸‹å›¾ç»‘å®šå…³ç³»å¦‚ä¸‹</p><p>Q1â€”&gt; ç»‘å®šçš„æ˜¯</p><p>â€‹    <strong>ä¸­é—´ä»£orangeå¸¦3ä¸ªå•è¯çš„å­—ç¬¦ä¸²ï¼ˆ<em> .orange. </em>ï¼‰</strong></p><p>Q2â€”&gt; ç»‘å®šçš„æ˜¯</p><p>â€‹    <strong>æœ€åä¸€ä¸ªå•è¯æ˜¯rabbitçš„3ä¸ªå•è¯ï¼ˆ<em> . </em>rabbitï¼‰</strong></p><p>â€‹    <strong>ç¬¬ä¸€ä¸ªå•è¯æ˜¯lazyçš„å¤šä¸ªå•è¯ï¼ˆlazy.#ï¼‰</strong></p><p>ä¸‹è¾¹æˆ‘ä»¬å°†ä¸Šå›¾ä¹‹é—´çš„æ•°æ®æ¥å—æƒ…å†µåˆ—ä¸¾å‡ºæ¥</p><p>quick.<strong>orange</strong>.<strong>rabbit</strong>         è¢«é˜Ÿåˆ—Q1Q2æ¥å—åˆ°</p><p><strong>lazy</strong>.<strong>orange</strong>.elephant         è¢«é˜Ÿåˆ—Q1Q2æ¥å—åˆ°</p><p>quick.<strong>orange</strong>.fox            è¢«é˜Ÿåˆ—Q1æ¥å—åˆ°</p><p><strong>lazy</strong>.brown.fox            è¢«é˜Ÿåˆ—Q2æ¥å—åˆ°</p><p><strong>lazy</strong>.pink.<strong>rabbit</strong>            è™½ç„¶æ»¡è¶³ä¸¤ä¸ªç»‘å®šä½†åªè¢«é˜Ÿåˆ—Q2æ¥å—ä¸€æ¬¡</p><p>quick.brown.fox            ä¸åŒ¹é…ä»»ä½•ç»‘å®šä¸ä¼šè¢«ä»»ä½•é˜Ÿåˆ—æ¥æ”¶åˆ°ä¼šè¢«ä¸¢å¼ƒ</p><p>quick.<strong>orange</strong>.male.rabbit        æ˜¯å››ä¸ªå•è¯ä¸åŒ¹é…ä»»ä½•ç»‘å®šä¼šè¢«ä¸¢å¼ƒ</p><p><strong>lazy</strong>.orange.male.rabbit         æ˜¯å››ä¸ªå•è¯ä½†åŒ¹é…Q2</p><p>==ä¸Šè¿°åŠ ç²—çš„æ˜¯ç¬¦åˆTOPICç±»å‹äº¤æ¢æœºçš„å•è¯æŒ‡ä»¤==</p><p>==æ˜¯æœ€å¼ºå¤§çš„ï¼Œä¹Ÿæ˜¯ä½¿ç”¨æœ€å¹¿çš„==</p><ul><li>å½“é˜Ÿåˆ—ç»‘å®šå…³ç³»æ˜¯#,é‚£ä¹ˆè¿™ä¸ªé˜Ÿåˆ—å°†æ¥æ”¶æ‰€æœ‰çš„æ•°æ®ï¼Œæœ‰ç‚¹åƒFanoutäº†ã€‚</li><li>å¦‚æœé˜Ÿåˆ—ç»‘å®šçš„é”®ä¸­æ²¡æœ‰#å’Œ*å‡ºç°ï¼Œé‚£ä¹ˆè¯¥é˜Ÿåˆ—ç»‘å®šç±»ç±»å‹å°±æ˜¯directäº†ã€‚</li></ul><p>æ¶ˆè´¹è€…1</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å£°æ˜ä¸»é¢˜äº¤æ¢æœº</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReceiveLogsTopic01</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è€æ ·å­å®šä¹‰ä¸€ä¸ªäº¤æ¢æœºå</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">final</span> String EXCHANGE_NAME= <span class="string">&quot;topic_logs&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¥å—æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line">       <span class="comment">//å£°æ˜ä¸€ä¸ªäº¤æ¢æœº</span></span><br><span class="line">        channel.exchangeDeclare(EXCHANGE_NAME,<span class="string">&quot;topic&quot;</span>);</span><br><span class="line">        <span class="comment">//å£°æ˜é˜Ÿåˆ—</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> <span class="string">&quot;Q1&quot;</span>;</span><br><span class="line">        channel.queueDeclare(queueName,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»‘å®š</span></span><br><span class="line">        channel.queueBind(queueName,EXCHANGE_NAME,<span class="string">&quot;*.orange.*&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç­‰å¾…æ¥å—æ¶ˆæ¯&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumer,message)-&gt;&#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(message.getBody(),<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;æ¥å—é˜Ÿåˆ—ï¼šâ€”â€”&gt; &quot;</span> +queueName +<span class="string">&quot;ç»‘å®šé”®ï¼š&quot;</span>+ message.getEnvelope().getRoutingKey());</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//æ¥æ”¶æ¶ˆæ¯</span></span><br><span class="line"></span><br><span class="line">        channel.basicConsume(queueName,<span class="literal">true</span>,deliverCallback,consumer-&gt;&#123;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç­‰å¾…æ¥å—æ¶ˆæ¯<br>è¢«é˜Ÿåˆ—Q1Q2æ¥å—åˆ°<br>æ¥å—é˜Ÿåˆ—ï¼šâ€”â€”&gt; Q1ç»‘å®šé”®ï¼šlazy.orange.elephant<br>è¢«é˜Ÿåˆ—Q1Q2æ¥å—åˆ°<br>æ¥å—é˜Ÿåˆ—ï¼šâ€”â€”&gt; Q1ç»‘å®šé”®ï¼šquick.orange.rabbit<br>è¢«é˜Ÿåˆ—Q1æ¥å—åˆ°<br>æ¥å—é˜Ÿåˆ—ï¼šâ€”â€”&gt; Q1ç»‘å®šé”®ï¼šquick.orange.fox</p></blockquote><p>æ¶ˆè´¹è€…2</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å£°æ˜ä¸»é¢˜äº¤æ¢æœº</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReceiveLogsTopic02</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è€æ ·å­å®šä¹‰ä¸€ä¸ªäº¤æ¢æœºå</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">final</span> String EXCHANGE_NAME= <span class="string">&quot;topic_logs&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¥å—æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line">       <span class="comment">//å£°æ˜ä¸€ä¸ªäº¤æ¢æœº</span></span><br><span class="line">        channel.exchangeDeclare(EXCHANGE_NAME,<span class="string">&quot;topic&quot;</span>);</span><br><span class="line">        <span class="comment">//å£°æ˜é˜Ÿåˆ—</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> <span class="string">&quot;Q2&quot;</span>;</span><br><span class="line">        channel.queueDeclare(queueName,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»‘å®š</span></span><br><span class="line">        channel.queueBind(queueName,EXCHANGE_NAME,<span class="string">&quot;*.*.rabbit&quot;</span>);</span><br><span class="line">        channel.queueBind(queueName,EXCHANGE_NAME,<span class="string">&quot;lazy.#&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç­‰å¾…æ¥å—æ¶ˆæ¯&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumer,message)-&gt;&#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(message.getBody(),<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;æ¥å—é˜Ÿåˆ—ï¼šâ€”â€”&gt; &quot;</span> +queueName +<span class="string">&quot;ç»‘å®šé”®ï¼š&quot;</span>+ message.getEnvelope().getRoutingKey());</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//æ¥æ”¶æ¶ˆæ¯</span></span><br><span class="line"></span><br><span class="line">        channel.basicConsume(queueName,<span class="literal">true</span>,deliverCallback,consumer-&gt;&#123;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç­‰å¾…æ¥å—æ¶ˆæ¯<br>è¢«é˜Ÿåˆ—Q1Q2æ¥å—åˆ°<br>æ¥å—é˜Ÿåˆ—ï¼šâ€”â€”&gt; Q2ç»‘å®šé”®ï¼šlazy.orange.elephant<br>è¢«é˜Ÿåˆ—Q2æ¥å—åˆ°<br>æ¥å—é˜Ÿåˆ—ï¼šâ€”â€”&gt; Q2ç»‘å®šé”®ï¼šlazy.brown.fox<br>è¢«é˜Ÿåˆ—Q1Q2æ¥å—åˆ°<br>æ¥å—é˜Ÿåˆ—ï¼šâ€”â€”&gt; Q2ç»‘å®šé”®ï¼šquick.orange.rabbit<br>è™½ç„¶æ»¡è¶³ä¸¤ä¸ªç»‘å®šä½†åªè¢«é˜Ÿåˆ—Q2æ¥å—ä¸€æ¬¡<br>æ¥å—é˜Ÿåˆ—ï¼šâ€”â€”&gt; Q2ç»‘å®šé”®ï¼šlazy.pink.rabbit<br>æ˜¯å››ä¸ªå•è¯ä½†åŒ¹é…Q2<br>æ¥å—é˜Ÿåˆ—ï¼šâ€”â€”&gt; Q2ç»‘å®šé”®ï¼šlazy.orange.male.rabbit</p></blockquote><p>ç”Ÿäº§è€…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ç”Ÿäº§è€…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmitLogTopic</span> &#123;</span><br><span class="line">    <span class="comment">//è€æ ·å­ï¼Œè¿˜æ˜¯å®šä¹‰ä¸€ä¸ªäº¤æ¢æœºåå­—ï¼Œæ³¨æ„è¿™ä¸ªäº¤æ¢</span></span><br><span class="line">    <span class="comment">// æœºåå­—éœ€è¦å’Œæ¶ˆè´¹è€…é‡Œè¾¹å®šä¹‰çš„äº¤æ¢æœºä¸€æ ·ï¼Œé¿å…å‡ºé”™</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span>  String EXCHANGE_NAME=<span class="string">&quot;topic_logs&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="comment">//è·å–ä¿¡é“é“¾æ¥</span></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        Q1--&gt; ç»‘å®šçš„æ˜¯</span></span><br><span class="line"><span class="comment">    ä¸­é—´ä»£orangeå¸¦3ä¸ªå•è¯çš„å­—ç¬¦ä¸²ï¼ˆ* .orange. *ï¼‰</span></span><br><span class="line"><span class="comment">        Q2--&gt; ç»‘å®šçš„æ˜¯</span></span><br><span class="line"><span class="comment">        æœ€åä¸€ä¸ªå•è¯æ˜¯rabbitçš„3ä¸ªå•è¯ï¼ˆ* . *rabbitï¼‰</span></span><br><span class="line"><span class="comment">        ç¬¬ä¸€ä¸ªå•è¯æ˜¯lazyçš„å¤šä¸ªå•è¯ï¼ˆlazy.#ï¼‰</span></span><br><span class="line"><span class="comment">        quick.orange.rabbit         è¢«é˜Ÿåˆ—Q1Q2æ¥å—åˆ°</span></span><br><span class="line"><span class="comment">        lazy.orange.elephant è¢«é˜Ÿåˆ—Q1Q2æ¥å—åˆ°</span></span><br><span class="line"><span class="comment">        quick.orange.foxè¢«é˜Ÿåˆ—Q1æ¥å—åˆ°</span></span><br><span class="line"><span class="comment">        lazy.brown.foxè¢«é˜Ÿåˆ—Q2æ¥å—åˆ°</span></span><br><span class="line"><span class="comment">        lazy.pink.rabbitè™½ç„¶æ»¡è¶³ä¸¤ä¸ªç»‘å®šä½†åªè¢«é˜Ÿåˆ—Q2æ¥å—ä¸€æ¬¡</span></span><br><span class="line"><span class="comment">        quick.brown.foxä¸åŒ¹é…ä»»ä½•ç»‘å®šä¸ä¼šè¢«ä»»ä½•é˜Ÿåˆ—æ¥æ”¶åˆ°ä¼šè¢«ä¸¢å¼ƒ</span></span><br><span class="line"><span class="comment">        quick.orange.male.rabbitæ˜¯å››ä¸ªå•è¯ä¸åŒ¹é…ä»»ä½•ç»‘å®šä¼šè¢«ä¸¢å¼ƒ</span></span><br><span class="line"><span class="comment">        lazy.orange.male.rabbit æ˜¯å››ä¸ªå•è¯ä½†åŒ¹é…Q2</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Map&lt;String,String&gt; map  = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;quick.orange.rabbit&quot;</span>,<span class="string">&quot;è¢«é˜Ÿåˆ—Q1Q2æ¥å—åˆ°&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;lazy.orange.elephant&quot;</span>,<span class="string">&quot;è¢«é˜Ÿåˆ—Q1Q2æ¥å—åˆ°&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;quick.orange.fox&quot;</span>,<span class="string">&quot;è¢«é˜Ÿåˆ—Q1æ¥å—åˆ°&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;lazy.brown.fox&quot;</span>,<span class="string">&quot;è¢«é˜Ÿåˆ—Q2æ¥å—åˆ°&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;lazy.pink.rabbit&quot;</span>,<span class="string">&quot;è™½ç„¶æ»¡è¶³ä¸¤ä¸ªç»‘å®šä½†åªè¢«é˜Ÿåˆ—Q2æ¥å—ä¸€æ¬¡&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;quick.brown.fox&quot;</span>,<span class="string">&quot;ä¸åŒ¹é…ä»»ä½•ç»‘å®šä¸ä¼šè¢«ä»»ä½•é˜Ÿåˆ—æ¥æ”¶åˆ°ä¼šè¢«ä¸¢å¼ƒ&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;quick.orange.male.rabbit&quot;</span>,<span class="string">&quot;æ˜¯å››ä¸ªå•è¯ä¸åŒ¹é…ä»»ä½•ç»‘å®šä¼šè¢«ä¸¢å¼ƒ&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;lazy.orange.male.rabbit&quot;</span>,<span class="string">&quot;æ˜¯å››ä¸ªå•è¯ä½†åŒ¹é…Q2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String,  String&gt; mapEntry : map.entrySet()) &#123;</span><br><span class="line">           <span class="type">String</span> <span class="variable">routingKey</span> <span class="operator">=</span> mapEntry.getKey();</span><br><span class="line">           <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> mapEntry.getValue();</span><br><span class="line">            channel.basicPublish(EXCHANGE_NAME,routingKey,<span class="literal">null</span>,message.getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼š &quot;</span> + message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼š æ˜¯å››ä¸ªå•è¯ä¸åŒ¹é…ä»»ä½•ç»‘å®šä¼šè¢«ä¸¢å¼ƒ</p><p>ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼š ä¸åŒ¹é…ä»»ä½•ç»‘å®šä¸ä¼šè¢«ä»»ä½•é˜Ÿåˆ—æ¥æ”¶åˆ°ä¼šè¢«ä¸¢å¼ƒ</p><p>ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼š è¢«é˜Ÿåˆ—Q1Q2æ¥å—åˆ°</p><p>ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼š è¢«é˜Ÿåˆ—Q2æ¥å—åˆ°</p><p>ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼š è¢«é˜Ÿåˆ—Q1Q2æ¥å—åˆ°</p><p>ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼š è¢«é˜Ÿåˆ—Q1æ¥å—åˆ°</p><p>ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼š è™½ç„¶æ»¡è¶³ä¸¤ä¸ªç»‘å®šä½†åªè¢«é˜Ÿåˆ—Q2æ¥å—ä¸€æ¬¡</p><p>ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼š æ˜¯å››ä¸ªå•è¯ä½†åŒ¹é…Q2</p></blockquote><h2 id="æ­»ä¿¡é˜Ÿåˆ—"><a href="#æ­»ä¿¡é˜Ÿåˆ—" class="headerlink" title="æ­»ä¿¡é˜Ÿåˆ—"></a>æ­»ä¿¡é˜Ÿåˆ—</h2><p>æ­»ä¿¡ï¼š<strong>é¡¾åæ€ä¹‰å°±æ˜¯æ— æ³•è¢«æ¶ˆè´¹çš„æ¶ˆæ¯</strong>ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œproductå°†æ¶ˆæ¯æŠ•é€’åˆ°brokeræˆ–è€…ç›´æ¥åˆ°queueé‡Œï¼Œconsumerä»queueå–å‡ºæ¶ˆæ¯ï¼Œè¿›è¡Œæ¶ˆè´¹ï¼Œä½†æŸäº›æ—¶å€™ç”±äºç‰¹å®šçš„<strong>åŸå› å¯¼è‡´queueä¸­çš„æŸäº›æ¶ˆæ¯æ— æ³•è¢«æ¶ˆè´¹</strong>ï¼Œè¿™æ ·çš„æ¶ˆæ¯å¦‚æœæ²¡æœ‰åç»­çš„å¤„ç†ï¼Œå°±å˜æˆæ­»ä¿¡ï¼Œæœ‰æ­»ä¿¡è‡ªç„¶å°±æœ‰æ­»ä¿¡é˜Ÿåˆ—ã€‚</p><p>ä¸€èˆ¬åº”ç”¨åœºæ™¯ï¼šä¸ºäº†ä¿è¯è®¢å•ä¸šåŠ¡ä¸­çš„æ¶ˆæ¯æ•°æ®ä¸ä¸¢å¤±ï¼Œéœ€è¦ä½¿ç”¨rabbitMQçš„æ­»ä¿¡é˜Ÿåˆ—æœºåˆ¶ï¼Œ<strong>å½“æ¶ˆæ¯æ¶ˆè´¹å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™ï¼Œå°†æ¶ˆæ¯æŠ•å…¥æ­»ä¿¡é˜Ÿåˆ—ä¸­</strong>ï¼Œè¿˜æœ‰æ¯”å¦‚è¯´ï¼š<strong>ç”¨æˆ·åœ¨å•†åœºä¸‹å•æˆåŠŸå¹¶ç‚¹å‡»å»æ”¯ä»˜ååœ¨æŒ‡å®šæ—¶é—´æœªæ”¯ä»˜æ—¶è‡ªåŠ¨å¤±æ•ˆã€‚</strong></p><h3 id="æ­»ä¿¡çš„æ¥æº"><a href="#æ­»ä¿¡çš„æ¥æº" class="headerlink" title="æ­»ä¿¡çš„æ¥æº"></a><strong>æ­»ä¿¡çš„æ¥æº</strong></h3><ul><li>æ¶ˆæ¯TTLè¿‡æœŸ</li><li>é˜Ÿåˆ—è¾¾åˆ°æœ€å¤§é•¿åº¦ï¼ˆé˜Ÿåˆ—æ»¡äº†ï¼Œæ— æ³•å†æ·»åŠ æ•°æ®åˆ°mqä¸­ï¼‰</li><li>æ¶ˆæ¯è¢«æ‹’ç»ï¼ˆbasic.rejectæˆ–basic.nackï¼‰å¹¶ä¸”requeue= false;</li></ul><h3 id="æ­»ä¿¡å®æˆ˜"><a href="#æ­»ä¿¡å®æˆ˜" class="headerlink" title="æ­»ä¿¡å®æˆ˜"></a>æ­»ä¿¡å®æˆ˜</h3><h4 id="æ¶ˆæ¯TTLè¿‡æœŸ"><a href="#æ¶ˆæ¯TTLè¿‡æœŸ" class="headerlink" title="æ¶ˆæ¯TTLè¿‡æœŸ"></a>æ¶ˆæ¯TTLè¿‡æœŸ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ­»ä¿¡é˜Ÿåˆ—</span></span><br><span class="line"><span class="comment"> ä¹‹ç”Ÿäº§è€…ä»£ç </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="comment">//æ™®é€šäº¤æ¢æœºçš„åç§°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">NORMAL_EXCHANGE</span> <span class="operator">=</span> <span class="string">&quot;normal_exchange&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line">        <span class="comment">//æ­»ä¿¡æ¶ˆæ¯ï¼Œè®¾ç½®TTLæ—¶é—´</span></span><br><span class="line">        AMQP.<span class="type">BasicProperties</span> <span class="variable">properties</span> <span class="operator">=</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">AMQP</span>.BasicProperties()</span><br><span class="line">                        .builder().expiration(<span class="string">&quot;10000&quot;</span>).build();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">11</span>; i++) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;info &quot;</span>+ i;</span><br><span class="line">            channel.basicPublish(NORMAL_EXCHANGE,<span class="string">&quot;zhangsan&quot;</span>,properties,message.getBytes());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ­»ä¿¡</span></span><br><span class="line"><span class="comment">    æ¶ˆè´¹è€…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Consumer01</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ™®é€šäº¤æ¢æœºçš„åç§°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">NORMAL_EXCHANGE</span> <span class="operator">=</span> <span class="string">&quot;normal_exchange&quot;</span>;</span><br><span class="line">    <span class="comment">//æ­»ä¿¡äº¤æ¢æœºçš„åç§°</span></span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">static</span>  <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEAD_EXCHANGE</span> <span class="operator">=</span> <span class="string">&quot;dead_exchange&quot;</span>;</span><br><span class="line">    <span class="comment">//æ™®é€šé˜Ÿåˆ—åç§°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">NORMAL_QUEUE</span> <span class="operator">=</span> <span class="string">&quot;normal_queue&quot;</span>;</span><br><span class="line">    <span class="comment">//æ­»ä¿¡é˜Ÿåˆ—åç§°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">DEAD_QUEUE</span> <span class="operator">=</span> <span class="string">&quot;dead_queue&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å£°æ˜æ­»ä¿¡å’Œæ™®é€šäº¤æ¢æœºç±»å‹ direct</span></span><br><span class="line">        channel.exchangeDeclare(NORMAL_EXCHANGE, BuiltinExchangeType.DIRECT);</span><br><span class="line">        channel.exchangeDeclare(DEAD_EXCHANGE,BuiltinExchangeType.DIRECT);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ™®é€šé˜Ÿåˆ—</span></span><br><span class="line">        Map&lt;String,Object&gt; argument = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//è¿‡æœŸæ—¶é—´10ç§’è¿‡æœŸ   å¯ä»¥ä¸è®¾ç½®ï¼Œå¯ä»¥äº¤ç»™é˜Ÿåˆ—è‡ªåŠ¨å»</span></span><br><span class="line">       <span class="comment">// argument.put(&quot;x-message-ttl&quot;,100000);</span></span><br><span class="line">        <span class="comment">//æ­£å¸¸é˜Ÿåˆ—è®¾ç½®æ­»ä¿¡äº¤æ¢æœº</span></span><br><span class="line">        argument.put(<span class="string">&quot;x-dead-lettle-exchange&quot;</span>,DEAD_EXCHANGE);</span><br><span class="line">        <span class="comment">//è®¾ç½®æ­»ä¿¡RoutingKey</span></span><br><span class="line">        argument.put(<span class="string">&quot;x-dead-lettle-routing-key&quot;</span>,<span class="string">&quot;lisi&quot;</span>);</span><br><span class="line"></span><br><span class="line">        channel.queueDeclare(NORMAL_QUEUE,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">false</span>,argument);</span><br><span class="line"></span><br><span class="line">        <span class="comment">///////////////////////////////////</span></span><br><span class="line">        <span class="comment">//å£°åæ­»ä¿¡é˜Ÿåˆ—</span></span><br><span class="line">        channel.queueDeclare(DEAD_QUEUE,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»‘å®šæ™®é€šäº¤æ¢æœºå’Œæ™®é€šé˜Ÿåˆ—</span></span><br><span class="line">        channel.queueBind(NORMAL_QUEUE,NORMAL_EXCHANGE,<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        <span class="comment">//ç»‘å®šæ­»ä¿¡çš„äº¤æ¢æœºä¸æ­»ä¿¡é˜Ÿåˆ—</span></span><br><span class="line">        channel.queueBind(DEAD_QUEUE,DEAD_EXCHANGE,<span class="string">&quot;lisi&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç­‰å¾…æ¥å—......&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»‘å®šæ­»ä¿¡çš„äº¤æ¢æœºå’Œæ­»ä¿¡çš„å¯¹åˆ—</span></span><br><span class="line">        <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumer,message)-&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Consumer 01æ¥å—åˆ°æ¶ˆæ¯æ˜¯ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody(),<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        channel.basicConsume(NORMAL_QUEUE,<span class="literal">true</span>,deliverCallback,consumer-&gt;&#123;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Consumer02</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ­»ä¿¡é˜Ÿåˆ—åç§°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">DEAD_QUEUE</span> <span class="operator">=</span> <span class="string">&quot;dead_queue&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç­‰å¾…æ¥å—......&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»‘å®šæ­»ä¿¡çš„äº¤æ¢æœºå’Œæ­»ä¿¡çš„å¯¹åˆ—</span></span><br><span class="line">        <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumer,message)-&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Consumer 02æ¥å—åˆ°æ¶ˆæ¯æ˜¯ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody(),<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        channel.basicConsume(DEAD_QUEUE,<span class="literal">true</span>,deliverCallback,consumer-&gt;&#123;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>==è§£å†³è¿›ä¸å»æ­»ä¿¡é˜Ÿåˆ—çš„åŸå› äº†ï¼Œå°±æ˜¯æˆ‘æ²¡ç»™ä»–æŠŠè¿‡æœŸæ—¶é—´å€¼ä¼ è¿›å»ï¼Œå¯¼è‡´å‡ºç°é—®é¢˜ã€‚==</p><h4 id="é˜Ÿåˆ—è¾¾åˆ°æœ€å¤§é•¿åº¦"><a href="#é˜Ÿåˆ—è¾¾åˆ°æœ€å¤§é•¿åº¦" class="headerlink" title="é˜Ÿåˆ—è¾¾åˆ°æœ€å¤§é•¿åº¦"></a>é˜Ÿåˆ—è¾¾åˆ°æœ€å¤§é•¿åº¦</h4><p>æ¶ˆæ¯ç”Ÿæˆè€…ä»£ç å»æ‰TTLå±æ€§ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Consumer01</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ™®é€šäº¤æ¢æœºçš„åç§°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">NORMAL_EXCHANGE</span> <span class="operator">=</span> <span class="string">&quot;normal_exchange&quot;</span>;</span><br><span class="line">    <span class="comment">//æ­»ä¿¡äº¤æ¢æœºçš„åç§°</span></span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">static</span>  <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEAD_EXCHANGE</span> <span class="operator">=</span> <span class="string">&quot;dead_exchange&quot;</span>;</span><br><span class="line">    <span class="comment">//æ™®é€šé˜Ÿåˆ—åç§°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">NORMAL_QUEUE</span> <span class="operator">=</span> <span class="string">&quot;normal_queue&quot;</span>;</span><br><span class="line">    <span class="comment">//æ­»ä¿¡é˜Ÿåˆ—åç§°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">DEAD_QUEUE</span> <span class="operator">=</span> <span class="string">&quot;dead_queue&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å£°æ˜æ­»ä¿¡å’Œæ™®é€šäº¤æ¢æœºç±»å‹ direct</span></span><br><span class="line">        channel.exchangeDeclare(NORMAL_EXCHANGE, BuiltinExchangeType.DIRECT);</span><br><span class="line">        channel.exchangeDeclare(DEAD_EXCHANGE,BuiltinExchangeType.DIRECT);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ™®é€šé˜Ÿåˆ—</span></span><br><span class="line">        Map&lt;String,Object&gt; argument = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//è¿‡æœŸæ—¶é—´10ç§’è¿‡æœŸ   å¯ä»¥ä¸è®¾ç½®ï¼Œå¯ä»¥äº¤ç»™é˜Ÿåˆ—è‡ªåŠ¨å»</span></span><br><span class="line">       <span class="comment">// argument.put(&quot;x-message-ttl&quot;,10000);</span></span><br><span class="line">        <span class="comment">//æ­£å¸¸é˜Ÿåˆ—è®¾ç½®æ­»ä¿¡äº¤æ¢æœº</span></span><br><span class="line">        argument.put(<span class="string">&quot;x-dead-letter-exchange&quot;</span>,DEAD_EXCHANGE);</span><br><span class="line">        <span class="comment">//è®¾ç½®æ­»ä¿¡RoutingKey</span></span><br><span class="line">        argument.put(<span class="string">&quot;x-dead-letter-routing-key&quot;</span>,<span class="string">&quot;lisi&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®æ­£å¸¸é˜Ÿåˆ—çš„é•¿åº¦çš„é™åˆ¶</span></span><br><span class="line">        argument.put(<span class="string">&quot;x-max-length&quot;</span>,<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        channel.queueDeclare(NORMAL_QUEUE,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">false</span>,argument);</span><br><span class="line"></span><br><span class="line">        <span class="comment">///////////////////////////////////</span></span><br><span class="line">        <span class="comment">//å£°åæ­»ä¿¡é˜Ÿåˆ—</span></span><br><span class="line">        channel.queueDeclare(DEAD_QUEUE,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»‘å®šæ™®é€šäº¤æ¢æœºå’Œæ™®é€šé˜Ÿåˆ—</span></span><br><span class="line">        channel.queueBind(NORMAL_QUEUE,NORMAL_EXCHANGE,<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        <span class="comment">//ç»‘å®šæ­»ä¿¡çš„äº¤æ¢æœºä¸æ­»ä¿¡é˜Ÿåˆ—</span></span><br><span class="line">        channel.queueBind(DEAD_QUEUE,DEAD_EXCHANGE,<span class="string">&quot;lisi&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç­‰å¾…æ¥å—......&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»‘å®šæ­»ä¿¡çš„äº¤æ¢æœºå’Œæ­»ä¿¡çš„å¯¹åˆ—</span></span><br><span class="line">        <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumer,message)-&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Consumer 01æ¥å—åˆ°æ¶ˆæ¯æ˜¯ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody(),<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        channel.basicConsume(NORMAL_QUEUE,<span class="literal">true</span>,deliverCallback,consumer-&gt;&#123;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="comment">//æ™®é€šäº¤æ¢æœºçš„åç§°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">NORMAL_EXCHANGE</span> <span class="operator">=</span> <span class="string">&quot;normal_exchange&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line">        <span class="comment">//æ­»ä¿¡æ¶ˆæ¯ï¼Œè®¾ç½®TTLæ—¶é—´ å•ä½æ˜¯ms</span></span><br><span class="line">     <span class="comment">//   AMQP.BasicProperties properties =</span></span><br><span class="line">      <span class="comment">//          new AMQP.BasicProperties()</span></span><br><span class="line">                        <span class="comment">//.builder().expiration(&quot;10000&quot;).build();</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">11</span>; i++) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;info &quot;</span>+ i;</span><br><span class="line">            channel.basicPublish(NORMAL_EXCHANGE,<span class="string">&quot;zhangsan&quot;</span>,properties,message.getBytes());</span><br><span class="line">            System.out.println(<span class="string">&quot;ç”Ÿäº§è€…å‘é€æ¶ˆæ¯:&quot;</span>+message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ¶ˆæ¯è¢«æ‹’ç»"><a href="#æ¶ˆæ¯è¢«æ‹’ç»" class="headerlink" title="æ¶ˆæ¯è¢«æ‹’ç»"></a>æ¶ˆæ¯è¢«æ‹’ç»</h4><p>ä¸€æ—¦æ¶ˆè´¹è€…æ‹’ç»æ¥å—ï¼Œå°±ä¼šæˆä¸ºæ­»ä¿¡é˜Ÿåˆ—ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="comment">//æ™®é€šäº¤æ¢æœºçš„åç§°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">NORMAL_EXCHANGE</span> <span class="operator">=</span> <span class="string">&quot;normal_exchange&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line">        <span class="comment">//æ­»ä¿¡æ¶ˆæ¯ï¼Œè®¾ç½®TTLæ—¶é—´ å•ä½æ˜¯ms</span></span><br><span class="line">      <span class="comment">//æ¼”ç¤ºé•¿åº¦  AMQP.BasicProperties properties =</span></span><br><span class="line">         <span class="comment">//   new AMQP.BasicProperties()</span></span><br><span class="line">           <span class="comment">//             .builder().expiration(&quot;10000&quot;).build();</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">11</span>; i++) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;info &quot;</span>+ i;                        <span class="comment">//properties</span></span><br><span class="line">            channel.basicPublish(NORMAL_EXCHANGE,<span class="string">&quot;zhangsan&quot;</span>,<span class="literal">null</span>,message.getBytes());</span><br><span class="line">            System.out.println(<span class="string">&quot;ç”Ÿäº§è€…å‘é€æ¶ˆæ¯:&quot;</span>+message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Consumer01</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ™®é€šäº¤æ¢æœºçš„åç§°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">NORMAL_EXCHANGE</span> <span class="operator">=</span> <span class="string">&quot;normal_exchange&quot;</span>;</span><br><span class="line">    <span class="comment">//æ­»ä¿¡äº¤æ¢æœºçš„åç§°</span></span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">static</span>  <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEAD_EXCHANGE</span> <span class="operator">=</span> <span class="string">&quot;dead_exchange&quot;</span>;</span><br><span class="line">    <span class="comment">//æ™®é€šé˜Ÿåˆ—åç§°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">NORMAL_QUEUE</span> <span class="operator">=</span> <span class="string">&quot;normal_queue&quot;</span>;</span><br><span class="line">    <span class="comment">//æ­»ä¿¡é˜Ÿåˆ—åç§°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">DEAD_QUEUE</span> <span class="operator">=</span> <span class="string">&quot;dead_queue&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å£°æ˜æ­»ä¿¡å’Œæ™®é€šäº¤æ¢æœºç±»å‹ direct</span></span><br><span class="line">        channel.exchangeDeclare(NORMAL_EXCHANGE, BuiltinExchangeType.DIRECT);</span><br><span class="line">        channel.exchangeDeclare(DEAD_EXCHANGE,BuiltinExchangeType.DIRECT);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ™®é€šé˜Ÿåˆ—</span></span><br><span class="line">        Map&lt;String,Object&gt; argument = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//è¿‡æœŸæ—¶é—´10ç§’è¿‡æœŸ   å¯ä»¥ä¸è®¾ç½®ï¼Œå¯ä»¥äº¤ç»™é˜Ÿåˆ—è‡ªåŠ¨å»</span></span><br><span class="line">       <span class="comment">// argument.put(&quot;x-message-ttl&quot;,10000);</span></span><br><span class="line">        <span class="comment">//æ­£å¸¸é˜Ÿåˆ—è®¾ç½®æ­»ä¿¡äº¤æ¢æœº</span></span><br><span class="line">        argument.put(<span class="string">&quot;x-dead-letter-exchange&quot;</span>,DEAD_EXCHANGE);</span><br><span class="line">        <span class="comment">//è®¾ç½®æ­»ä¿¡RoutingKey</span></span><br><span class="line">        argument.put(<span class="string">&quot;x-dead-letter-routing-key&quot;</span>,<span class="string">&quot;lisi&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®æ­£å¸¸é˜Ÿåˆ—çš„é•¿åº¦çš„é™åˆ¶</span></span><br><span class="line">      <span class="comment">//æ¼”ç¤ºæ‹’ç»  argument.put(&quot;x-max-length&quot;,6);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        channel.queueDeclare(NORMAL_QUEUE,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">false</span>,argument);</span><br><span class="line"></span><br><span class="line">        <span class="comment">///////////////////////////////////</span></span><br><span class="line">        <span class="comment">//å£°åæ­»ä¿¡é˜Ÿåˆ—</span></span><br><span class="line">        channel.queueDeclare(DEAD_QUEUE,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»‘å®šæ™®é€šäº¤æ¢æœºå’Œæ™®é€šé˜Ÿåˆ—</span></span><br><span class="line">        channel.queueBind(NORMAL_QUEUE,NORMAL_EXCHANGE,<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        <span class="comment">//ç»‘å®šæ­»ä¿¡çš„äº¤æ¢æœºä¸æ­»ä¿¡é˜Ÿåˆ—</span></span><br><span class="line">        channel.queueBind(DEAD_QUEUE,DEAD_EXCHANGE,<span class="string">&quot;lisi&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç­‰å¾…æ¥å—......&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»‘å®šæ­»ä¿¡çš„äº¤æ¢æœºå’Œæ­»ä¿¡çš„å¯¹åˆ—</span></span><br><span class="line">        <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumer,message)-&gt;&#123;</span><br><span class="line">       <span class="comment">//æ‹’ç»æ¶ˆæ¯åœ¨è¿™é‡Œå†™</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">message1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody(),<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">           <span class="comment">//æŒ‡å®šä½ è¦æ‹’ç»çš„æ¶ˆæ¯</span></span><br><span class="line">            <span class="keyword">if</span>(message1.equals(<span class="string">&quot;info 5&quot;</span>))&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æ­¤æ¶ˆæ¯æ˜¯è¢«æ‹’ç»çš„&quot;</span>+ message1);</span><br><span class="line">                <span class="comment">//æ‹’æ¥æ¥æ”¶ï¼Œä¸”ä¸æ”¾å›é˜Ÿåˆ—ï¼Œé¿å…é˜Ÿåˆ—é‡æ–°å‘é€</span></span><br><span class="line">                channel.basicReject(message.getEnvelope().getDeliveryTag(),<span class="literal">false</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">                System.out.println(<span class="string">&quot;Consumer 01æ¥å—åˆ°æ¶ˆæ¯æ˜¯ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody(),<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">               <span class="comment">//   æ¥æ”¶ä¸”ä¸æ”¾å›</span></span><br><span class="line">                channel.basicAck(message.getEnvelope().getDeliveryTag(),<span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//å¼€å¯æ‰‹åŠ¨åº”ç­”,                      //trueæ˜¯è‡ªåŠ¨åº”ç­”ã€‚</span></span><br><span class="line">        channel.basicConsume(NORMAL_QUEUE,<span class="literal">false</span>,deliverCallback,consumer-&gt;&#123;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Consumer02</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">static</span>  <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEAD_EXCHANGE</span> <span class="operator">=</span> <span class="string">&quot;dead_exchange&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ­»ä¿¡é˜Ÿåˆ—åç§°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">DEAD_QUEUE</span> <span class="operator">=</span> <span class="string">&quot;dead_queue&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> GetConnection.getChannel();</span><br><span class="line">        channel.queueBind(DEAD_QUEUE,DEAD_EXCHANGE,<span class="string">&quot;lisi&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç­‰å¾…æ¥å—......&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç»‘å®šæ­»ä¿¡çš„äº¤æ¢æœºå’Œæ­»ä¿¡çš„å¯¹åˆ—</span></span><br><span class="line">        <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumer,message)-&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Consumer 02æ¥å—åˆ°æ¶ˆæ¯æ˜¯ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody(),<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        &#125;;</span><br><span class="line">        channel.basicConsume(DEAD_QUEUE,<span class="literal">true</span>,deliverCallback,consumer-&gt;&#123;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å»¶è¿Ÿé˜Ÿåˆ—"><a href="#å»¶è¿Ÿé˜Ÿåˆ—" class="headerlink" title="å»¶è¿Ÿé˜Ÿåˆ—"></a>å»¶è¿Ÿé˜Ÿåˆ—</h2><p>å»¶è¿Ÿé˜Ÿåˆ—ï¼Œå¯¹åˆ—å†…éƒ¨æ˜¯æœ‰åºçš„ï¼Œæœ€é‡è¦çš„ç‰¹æ€§å°±æ˜¯ä½“ç°åœ¨ä»–çš„å»¶æ—¶å±æ€§ä¸Šï¼Œå»¶æ—¶é˜Ÿåˆ—ä¸­çš„å…ƒç´ æ—¶å¸Œæœ›åœ¨æŒ‡å®šæ—¶é—´åˆ°äº†ä¹‹åæˆ–è€…ä¹‹å‰å–å‡ºå’Œå¤„ç†ï¼Œç®€å•çš„æ¥è¯´ï¼Œå»¶è¿Ÿé˜Ÿåˆ—å°±æ˜¯ç”¨æ¥å­˜æ”¾éœ€è¦åœ¨æŒ‡å®šæ—¶é—´è¢«å¤„ç†çš„å…ƒç´ çš„é˜Ÿåˆ—ã€‚</p><p><strong>å»¶è¿Ÿé˜Ÿåˆ—çš„ä½¿ç”¨åœºæ™¯</strong></p><ol><li>è®¢å•åœ¨ååˆ†é’Ÿå†…æœªæ”¯ä»˜åˆ™è‡ªåŠ¨å–æ¶ˆ</li><li>æ–°åˆ›å»ºçš„åº—é“ºï¼Œå¦‚æœåœ¨åå¤©å†…æ²¡æœ‰ä¸Šä¼ å•†å“ï¼Œåˆ™è‡ªåŠ¨å‘é€æ¶ˆæ¯æé†’</li><li>ç”¨æˆ·æ³¨å†ŒæˆåŠŸåï¼Œå¦‚æœæ²¡æœ‰åœ¨ä¸‰å¤©å†…ç™»å½•åˆ™å‘é€çŸ­ä¿¡æé†’æ¶ˆæ¯</li><li>ç”¨æˆ·å‘èµ·é€€æ¬¾ï¼Œå¦‚æœåœ¨ä¸‰å¤©å†…æ²¡æœ‰å¾—åˆ°å¤„ç†åˆ™é€šçŸ¥ç›¸å…³è¿è¥äººå‘˜ã€‚</li><li>é¢„å®šä¼šå‘˜åï¼Œéœ€è¦åœ¨é¢„å®šçš„æ—¶é—´ç‚¹å‰ååˆ†é’Ÿé€šçŸ¥å„ä¸ªä¸ä¼šå‘˜äººå‘˜å‚åŠ ä¼šè®®ã€‚</li></ol><h3 id="å»¶è¿Ÿé˜Ÿåˆ—æ•´åˆSpringBoot"><a href="#å»¶è¿Ÿé˜Ÿåˆ—æ•´åˆSpringBoot" class="headerlink" title="å»¶è¿Ÿé˜Ÿåˆ—æ•´åˆSpringBoot"></a>å»¶è¿Ÿé˜Ÿåˆ—æ•´åˆSpringBoot</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xh<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringBoot_RabbitMQ<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>SpringBoot_RabbitMQ<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>SpringBoot_RabbitMQ<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring-boot.version</span>&gt;</span>2.3.7.RELEASE<span class="tag">&lt;/<span class="name">spring-boot.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--rabbitMQä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.83<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.24<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--swagger--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--RabbitMQæµ‹è¯•ä¾èµ– --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.amqp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-rabbit-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-boot.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.xh.springBoot.SpringBootRabbitMqApplication<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span>repackage<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>repackage<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwaggerConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Docket <span class="title function_">webApiConfig</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">                .groupName(<span class="string">&quot;webApi&quot;</span>)</span><br><span class="line">                .apiInfo(webApiInfo())</span><br><span class="line">                .select()</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> ApiInfo <span class="title function_">webApiInfo</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  <span class="keyword">new</span> <span class="title class_">ApiInfoBuilder</span>()</span><br><span class="line">                .title(<span class="string">&quot;rabbitMQæ¥å£æ–‡æ¡£&quot;</span>)</span><br><span class="line">                .description(<span class="string">&quot;æè¿°Rabbitå¾®æœåŠ¡æ¥å£å®šä¹‰&quot;</span>)</span><br><span class="line">                .version(<span class="string">&quot;1.0&quot;</span>)</span><br><span class="line">                .contact(<span class="keyword">new</span> <span class="title class_">Contact</span>(<span class="string">&quot;æˆ‘å–œæ¬¢&quot;</span>,<span class="string">&quot;127.0.0.1&quot;</span>,<span class="string">&quot;2844****670@qq.com&quot;</span>))</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="é˜Ÿåˆ—TTL"><a href="#é˜Ÿåˆ—TTL" class="headerlink" title="é˜Ÿåˆ—TTL"></a>é˜Ÿåˆ—TTL</h3><p>åˆ›å»ºä¸¤ä¸ªé˜Ÿåˆ—QAå’ŒQBï¼Œä¸¤è€…é˜Ÿåˆ—TTLåˆ†è¢«æ˜¯10sï¼Œ40s,ç„¶ååœ¨åˆ›å»ºä¸€ä¸ªäº¤æ¢æœºXå’Œæ­»ä¿¡äº¤æ¢æœºYï¼Œä»–ä»¬çš„ç±»å‹éƒ½æ˜¯directï¼Œåˆ›å»ºä¸€ä¸ªæ­»ä¿¡é˜Ÿåˆ—QDï¼Œä»–ä»¬çš„ç»‘å®šå…³ç³»å¦‚ä¸‹</p><p>ä»£ç æ–‡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">TTL é˜Ÿåˆ—  é…ç½®æ–‡ä»¶ç±»ä»£ç </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TtlQueueConfig</span> &#123;</span><br><span class="line">    <span class="comment">//æ™®é€šçš„äº¤æ¢æœºåç§°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">X_EXCHANGE</span> <span class="operator">=</span> <span class="string">&quot;X&quot;</span>;</span><br><span class="line">    <span class="comment">//æ­»ä¿¡äº¤æ¢æœºçš„åç§°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">Y_DEAD_LETTER_EXCHANGE</span> <span class="operator">=</span> <span class="string">&quot;Y&quot;</span>;</span><br><span class="line">    <span class="comment">//æ™®é€šé˜Ÿåˆ—çš„åç§°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">A_QUEUE</span> <span class="operator">=</span> <span class="string">&quot;QA&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">B_QUEUE</span> <span class="operator">=</span> <span class="string">&quot;QB&quot;</span>;</span><br><span class="line">    <span class="comment">//æ­»ä¿¡é˜Ÿåˆ—çš„åç§°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">Y_DEAD_LETTER_QUEUE</span> <span class="operator">=</span> <span class="string">&quot;QD&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å£°æ˜XCHANGE</span></span><br><span class="line">    <span class="meta">@Bean(&quot;xExchange&quot;)</span>  <span class="comment">//èµ·åˆ«å</span></span><br><span class="line">    <span class="keyword">public</span> DirectExchange <span class="title function_">xExchange</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DirectExchange</span>(X_EXCHANGE);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å£°æ˜yExchange åˆ«å</span></span><br><span class="line">    <span class="meta">@Bean(&quot;yExchange&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> DirectExchange <span class="title function_">yExchange</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DirectExchange</span>(Y_DEAD_LETTER_EXCHANGE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å£°æ˜é˜Ÿåˆ—</span></span><br><span class="line">    <span class="meta">@Bean(&quot;queueA&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">queueA</span><span class="params">()</span>&#123;</span><br><span class="line">        Map&lt;String,Object&gt; map  =<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//è®¾ç½®æ­»ä¿¡äº¤æ¢æœº</span></span><br><span class="line">        map.put(<span class="string">&quot;x-dead-letter-exchange&quot;</span>,Y_DEAD_LETTER_EXCHANGE);</span><br><span class="line">        <span class="comment">//è®¾ç½®æ­»ä¿¡RoutingKey</span></span><br><span class="line">        map.put(<span class="string">&quot;x-dead-letter-routing-key&quot;</span>,<span class="string">&quot;YD&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®TTLå•ä½æ˜¯ms  ä»€ä¹ˆæ—¶å€™æ¶ˆæ¯æˆä¸ºæ­»ä¿¡ï¼Œ10ç§’é’Ÿå</span></span><br><span class="line">        map.put(<span class="string">&quot;x-message-ttl&quot;</span>,<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> QueueBuilder.durable(A_QUEUE).withArguments(map).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å£°æ˜é˜Ÿåˆ—</span></span><br><span class="line">    <span class="meta">@Bean(&quot;queueB&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">queueB</span><span class="params">()</span>&#123;</span><br><span class="line">        Map&lt;String,Object&gt; map  =<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//è®¾ç½®æ­»ä¿¡äº¤æ¢æœº</span></span><br><span class="line">        map.put(<span class="string">&quot;x-dead-letter-exchange&quot;</span>,Y_DEAD_LETTER_EXCHANGE);</span><br><span class="line">        <span class="comment">//è®¾ç½®æ­»ä¿¡RoutingKey</span></span><br><span class="line">        map.put(<span class="string">&quot;x-dead-letter-routing-key&quot;</span>,<span class="string">&quot;YD&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®TTLå•ä½æ˜¯ms  ä»€ä¹ˆæ—¶å€™æ¶ˆæ¯æˆä¸ºæ­»ä¿¡ï¼Œ40ç§’é’Ÿå</span></span><br><span class="line">        map.put(<span class="string">&quot;x-message-ttl&quot;</span>,<span class="number">40000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> QueueBuilder.durable(B_QUEUE).withArguments(map).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ­»ä¿¡é˜Ÿåˆ—</span></span><br><span class="line">    <span class="meta">@Bean(&quot;queueD&quot;)</span></span><br><span class="line">    <span class="keyword">public</span>  Queue <span class="title function_">QueueD</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> QueueBuilder.durable(Y_DEAD_LETTER_QUEUE).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»‘å®š</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">queueABindingX</span><span class="params">(<span class="meta">@Qualifier(&quot;queueA&quot;)</span> Queue queueA,</span></span><br><span class="line"><span class="params">                                  <span class="meta">@Qualifier(&quot;xExchange&quot;)</span> DirectExchange xExchange)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(queueA).to(xExchange).with(<span class="string">&quot;XA&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç»‘å®š</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">queueBBindingX</span><span class="params">(<span class="meta">@Qualifier(&quot;queueB&quot;)</span> Queue queueB,</span></span><br><span class="line"><span class="params">                                  <span class="meta">@Qualifier(&quot;xExchange&quot;)</span> DirectExchange xExchange)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(queueB).to(xExchange).with(<span class="string">&quot;XB&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç»‘å®š</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">queueDBindingX</span><span class="params">(<span class="meta">@Qualifier(&quot;queueD&quot;)</span> Queue queueD,</span></span><br><span class="line"><span class="params">                                  <span class="meta">@Qualifier(&quot;yExchange&quot;)</span> DirectExchange yExchange)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(queueD).to(yExchange).with(<span class="string">&quot;YD&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å‘é€å»¶è¿Ÿæ¶ˆæ¯</span></span><br><span class="line"><span class="comment">http://åœ°å€/ttl/sendMessage/å­éå¾å–µ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span> <span class="comment">//æ‰“å°æ—¥å¿—</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/ttl&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SellMessageController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RabbitTemplate rabbitTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¼€å§‹å‘é€æ¶ˆæ¯</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/sendMessage/&#123;message&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//æ³¨æ„@PathVariable å¯ä»¥è‡ªå®šä¹‰ä¼ å€¼åˆ°urlä¸­ï¼Œå‰æç¤ºå˜é‡åå¿…é¡»å’Œurlä¸­çš„ä¸€æ ·</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(<span class="meta">@PathVariable</span> String message)</span>&#123;</span><br><span class="line">        <span class="comment">//åè¾¹çš„è¯­å¥å‚æ•°ä¼šæ›¿æ¢&#123;&#125;ï¼Œè¿™ç”±ç¨‹åºå‘˜æ§åˆ¶</span></span><br><span class="line">        log.info(<span class="string">&quot;å½“å‰æ—¶é—´:&#123;&#125;,å‘é€ä¸€æ¡ä¿¡æ¯ç»™ä¸¤ä¸ªTTLé˜Ÿåˆ—:&#123;&#125;&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>().toString(),message);</span><br><span class="line">        rabbitTemplate.convertAndSend(<span class="string">&quot;X&quot;</span>,<span class="string">&quot;XA&quot;</span>,<span class="string">&quot;æ¶ˆæ¯æ¥è‡ªttlä¸º10ç§’çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼š&quot;</span> + message);</span><br><span class="line">        rabbitTemplate.convertAndSend(<span class="string">&quot;X&quot;</span>,<span class="string">&quot;XB&quot;</span>,<span class="string">&quot;æ¶ˆæ¯æ¥è‡ªttlä¸º40ç§’çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼š&quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="http://127.0.0.1:8080/ttl/sendMessage/hello1">http://127.0.0.1:8080/ttl/sendMessage/hello1</a></p><p><a href="http://127.0.0.1:8080/ttl/sendMessage/hello2">http://127.0.0.1:8080/ttl/sendMessage/hello2</a></p><p>ä¸Šè¿°å­˜åœ¨ä¸€ä¸ªä¸è¶³ä¹‹å¤„ï¼Œå°±æ˜¯æˆ‘ä»¬<strong>æ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™ï¼Œéƒ½éœ€è¦å¢åŠ ä¸€ä¸ªæ–°çš„æ—¶é—´éœ€æ±‚ï¼Œå°±éœ€è¦æ–°å¢ä¸€ä¸ªé˜Ÿåˆ—</strong>ï¼Œè¿™é‡Œåªæ˜¯ç”¨äº†10så’Œ40sä¸¤ä¸ªæ—¶é—´é€‰é¡¹ï¼Œä½†ä¸‡ä¸€æˆ‘è¦ä¸€ä¸ªå°æ—¶å‘¢ï¼Œéš¾ä¸æˆè¿˜åˆè¦æ·»åŠ ï¼Œè¿™æ ·å¤ªéº»çƒ¦äº†ã€‚</p><h3 id="å»¶è¿Ÿé˜Ÿåˆ—ä¼˜åŒ–"><a href="#å»¶è¿Ÿé˜Ÿåˆ—ä¼˜åŒ–" class="headerlink" title="å»¶è¿Ÿé˜Ÿåˆ—ä¼˜åŒ–"></a>å»¶è¿Ÿé˜Ÿåˆ—ä¼˜åŒ–</h3><p>ä½¿ç”¨QCæ¥è®¾ç½®æ—¶é—´ï¼Œç”¨æˆ·è‡ªå®šä¹‰æ—¶é—´ã€‚</p><p>å…·ä½“ä»£ç å¦‚ä¸‹</p><p>TtlQueueConfig.javaä¸­æ·»åŠ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">C_QUEUE</span> <span class="operator">=</span> <span class="string">&quot;QC&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å£°æ˜QC</span></span><br><span class="line">    <span class="meta">@Bean(&quot;queueC&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">queueC</span><span class="params">()</span>&#123;</span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">3</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®æ­»ä¿¡äº¤æ¢æœº</span></span><br><span class="line">        map.put(<span class="string">&quot;x-dead-letter-exchange&quot;</span>,Y_DEAD_LETTER_EXCHANGE);</span><br><span class="line">        <span class="comment">//è®¾ç½®æ­»ä¿¡RoutingKey</span></span><br><span class="line">        map.put(<span class="string">&quot;x-dead-letter-routing-key&quot;</span>,<span class="string">&quot;YD&quot;</span>);</span><br><span class="line">        <span class="comment">//TTLè®¾ç½®æ—¶é•¿  ms (è¿™é‡Œä¸å†™ï¼Œåˆç”¨æˆ·è‡ªå·±å®šä¹‰)</span></span><br><span class="line">        <span class="keyword">return</span> QueueBuilder.durable(C_QUEUE).withArguments(map).build();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç»‘å®š</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">queueCBindingX</span><span class="params">(<span class="meta">@Qualifier(&quot;queueC&quot;)</span> Queue queueC,</span></span><br><span class="line"><span class="params">                                  <span class="meta">@Qualifier(&quot;xExchange&quot;)</span> DirectExchange xExchange)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(queueC).to(xExchange).with(<span class="string">&quot;XC&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>â€‹    SellMessageController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼€å§‹å‘é€æ¶ˆæ¯ æ¶ˆæ¯ TTL</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/sendExpirationMsg/&#123;message&#125;/&#123;ttlTime&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMsg</span><span class="params">(<span class="meta">@PathVariable</span> String message,<span class="meta">@PathVariable</span> String ttlTime)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;å½“å‰æ—¶é—´ï¼š&#123;&#125;ï¼Œå‘é€ä¸€æ¡æ—¶é•¿&#123;&#125;æ¯«ç§’TTLä¿¡æ¯ç»™é˜Ÿåˆ—QC:&#123;&#125;&quot;</span>,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Date</span>().toString(),ttlTime,message);</span><br><span class="line">        rabbitTemplate.convertAndSend(<span class="string">&quot;X&quot;</span>,<span class="string">&quot;XC&quot;</span>,message,msg -&gt; &#123;</span><br><span class="line">            <span class="comment">//å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œå»¶è¿Ÿæ—¶é•¿</span></span><br><span class="line">            msg.getMessageProperties().setExpiration(ttlTime);</span><br><span class="line">            <span class="keyword">return</span> msg;</span><br><span class="line">        &#125; );</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>==æ³¨æ„æˆ‘åœ¨å†™è¿™ä¸ªä»£ç çš„æ—¶å€™ï¼Œåˆšåˆšå¼€å§‹æ˜¯æ•²é”™äº†ä¸€ä¸ªå­—æ¯ï¼Œå¯¼è‡´è¿è¡Œæ—¶ç”Ÿæˆçš„é˜Ÿåˆ—ï¼Œç„¶åè°ƒé”™çš„æ—¶å€™ï¼Œéœ€è¦ç”Ÿæˆçš„é˜Ÿåˆ—åˆ é™¤ï¼Œç„¶åé‡æ–°åˆ›å»ºï¼Œå¯ä»¥è§£å†³é—®é¢˜ã€‚ã€‚==</p><pre><code>&gt;http://127.0.0.1:8080/ttl/sendExpirationMsg/hello1/2000&gt;&gt;http://127.0.0.1:8080/ttl/sendExpirationMsg/hello2/20000</code></pre><p>æ­»ä¿¡åœ¨åšå»¶è¿Ÿçš„ä¸€ä¸ªå·¨å¤§ç¼ºé™·ï¼Œæ¶ˆæ¯ä¸ä¼šæŒ‰æ—¶â€œæ­»äº¡â€ï¼Œç”±äº<strong>RabbitMQåªä¼šæ£€æŸ¥ç¬¬ä¸€ä¸ªæ¶ˆæ¯æ˜¯å¦è¿‡æœŸ</strong>ï¼Œå¦‚æœè¿‡æœŸåˆ™ä¸¢åˆ°æ­»ä¿¡é˜Ÿåˆ—ï¼Œ<strong>å¦‚æœç¬¬ä¸€ä¸ªæ¶ˆæ¯çš„å»¶æ—¶æ—¶é•¿å¾ˆé•¿ï¼Œè€Œç¬¬äºŒä¸ªæ¶ˆæ¯çš„å»¶è¿Ÿæ—¶é•¿å¾ˆçŸ­ï¼Œåˆ™ç¬¬äºŒä¸ªæ¶ˆæ¯å¹¶ä¸ä¼šä¼˜å…ˆå¾—åˆ°æ‰§è¡Œã€‚</strong></p><p>è¿™é‡Œå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå½“å‡ºç°ä¸¤æ¡æ¶ˆæ¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‘ç°ï¼Œä»–å±…ç„¶æ˜¯æŒ‰ç…§è°å…ˆæ¥çš„ï¼Œå“ªæ€•ä½ æ—¶é—´çŸ­ï¼Œä½†æ˜¯ä½ æ¯”å¦ä¸€ä¸ªé˜Ÿåˆ—æ…¢ä¸€æ­¥ï¼Œä½ å°±åªèƒ½è€è€å®å®æ’é˜Ÿäº†ã€‚<img src="1667661985681.png" alt="1667661985681"></p><h3 id="RabbitMQæ’ä»¶å®ç°å»¶è¿Ÿé˜Ÿåˆ—"><a href="#RabbitMQæ’ä»¶å®ç°å»¶è¿Ÿé˜Ÿåˆ—" class="headerlink" title="RabbitMQæ’ä»¶å®ç°å»¶è¿Ÿé˜Ÿåˆ—"></a>RabbitMQæ’ä»¶å®ç°å»¶è¿Ÿé˜Ÿåˆ—</h3><p>è¿™ä¸ªå°±æ˜¯è§£å†³ä¸Šè¾¹çš„é—®é¢˜çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨æ’ä»¶è§£å†³ã€‚</p><p>åœ¨å®˜ç½‘ä¸Šä¸‹è½½: <a href="https://www/rabbitmq.com/community-plugins.htmlï¼Œä¸‹è½½">https://www/rabbitmq.com/community-plugins.htmlï¼Œä¸‹è½½</a></p><p>rabbitmq_delayed_message_exchange-3.8.0</p><p>æ‹·è´åˆ°</p><p>/usr/lib/rabbitmq/lib/rabbitmq_server-ç‰ˆæœ¬å·/plugs</p><p>å®‰è£…æŒ‡ä»¤</p><p><code>rabbitmq-plugins enable rabbitmq_delayed_message_exchange</code></p><p>ç„¶ååœ¨linuxç³»ç»Ÿä¸‹è§£å‹</p><p>ç„¶åå®‰è£…<code>rabbitmq-plugins enable rabbitmq_delayed_message_exchange</code></p><p>ä¹‹åé‡å¯</p><p><code>systemctl restart rabbitmq-server(è¿™ä¸ªæ˜¯ä½ å®‰è£…æ—¶å€™çš„åå­—)</code></p><p>è¿™ä¸ªæ—¶å€™ä¸åœ¨æ˜¯é˜Ÿåˆ—ï¼Œè€Œæ˜¯äº¤æ¢æœºäº†ã€‚</p><p><strong>æ²¡æ’ä»¶çš„æ—¶å€™</strong></p><p><strong>åŸºäºæ’ä»¶çš„</strong></p><p>==æ³¨æ„ï¼Œç”±äºæˆ‘æ˜¯dockerå®‰è£…çš„ï¼Œæˆ‘æ²¡æ‰¾åˆ°å®‰è£…è¿™ä¸ªæ’ä»¶çš„ä½ç½®ï¼Œæ•…è€Œï¼Œè¿™ä¸€ç‚¹ï¼Œæˆ‘åªèƒ½æ•²ä¸€ä¸‹ä»£ç äº†è§£ä¸€ä¸‹==</p><p>è§£å†³åŠæ³•ï¼š</p><p><a href="https://blog.csdn.net/DZP_dream/article/details/118391439">https://blog.csdn.net/DZP_dream/article/details/118391439</a></p><p><code>docker search rabbitmq</code></p><p>å®‰è£…æ‹‰å–å®¹å™¨ï¼š</p><p><code>docker run -dit --name rabbitmq -e RABBITMQ_DEFAULT_USER=guest -e RABBITMQ_DEFAULT_PASS=guest -p 15672:15672 -p 5672:5672 rabbitmq:management</code></p><p><a href="https://www.rabbitmq.com/community-plugins.html">https://www.rabbitmq.com/community-plugins.html</a> </p><p><code>docker cp rabbitmq_delayed_message_exchange-3.8.0.ez  rabbitmq:/plugins</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@<span class="built_in">local</span> rabbitmq]<span class="comment"># docker exec -it rabbitmq /bin/bash                                     </span></span><br><span class="line">root@3bb56f68570b:/<span class="comment"># rabbitmq-plugins list</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨æ’ä»¶</p><p><code>root@3bb56f68570b:/# rabbitmq-plugins enable rabbitmq_delayed_message_exchange</code></p><p>DelayedConfig</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å»¶è¿Ÿé˜Ÿåˆ—æ’ä»¶ï¼Œå¯æƒœï¼Œæˆ‘æ²¡æœ‰ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">//å®ä¾‹åŒ–</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DelayedQueueConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é˜Ÿåˆ— //</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">DELAYED_QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;delayed.queue&quot;</span>;</span><br><span class="line">    <span class="comment">//äº¤æ¢æœº</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">DELAYED_EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">&quot;delayed.exchange&quot;</span>;</span><br><span class="line">    <span class="comment">//routingKey</span></span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">DELAYED_ROUTING_KEY</span> <span class="operator">=</span> <span class="string">&quot;delayed.routing&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">delayedQueue</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  <span class="keyword">new</span> <span class="title class_">Queue</span>(DELAYED_QUEUE_NAME);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å£°æ˜äº¤æ¢æœº  åŸºäºæ’ä»¶çš„äº¤æ¢æœºå°±æ˜¯è¿™ä¹ˆå®šä¹‰çš„</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">//è‡ªå®šä¹‰äº¤æ¢æœº ç”±äºæ˜¯ä¸å­˜åœ¨rabbité‡Œè¾¹çš„äº¤æ¢æœºï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„å»¶è¿Ÿé˜Ÿåˆ—æ’ä»¶</span></span><br><span class="line">    <span class="keyword">public</span> CustomExchange <span class="title function_">delayedExchange</span><span class="params">()</span>&#123;</span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;x-delayed-type&quot;</span>,<span class="string">&quot;direct&quot;</span>);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1.äº¤æ¢æœºåç§°</span></span><br><span class="line"><span class="comment">        2.äº¤æ¢æœºç±»å‹</span></span><br><span class="line"><span class="comment">        3.æ˜¯å¦éœ€è¦æŒä¹…åŒ–</span></span><br><span class="line"><span class="comment">        4.æ˜¯å¦éœ€è¦è‡ªåŠ¨åˆ é™¤</span></span><br><span class="line"><span class="comment">        5.å…¶ä»–å‚æ•°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CustomExchange</span>(DELAYED_EXCHANGE_NAME,<span class="string">&quot;x-delayed-message&quot;</span>,</span><br><span class="line">                <span class="literal">true</span>,<span class="literal">false</span>,map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»‘å®š</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">delayedQueueBingdingDelayedExchange</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@Qualifier(&quot;delayedQueue&quot;)</span> Queue delayedQueue,</span></span><br><span class="line"><span class="params">            <span class="meta">@Qualifier(&quot;delayedExchange&quot;)</span> CustomExchange delayedExchange</span></span><br><span class="line"><span class="params">    )</span>&#123;</span><br><span class="line">        <span class="comment">//ç»‘å®š å°†é˜Ÿåˆ—å’Œäº¤æ¢æœºç›´æ¥è¿›è¡Œç»‘å®š</span></span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(delayedQueue).to(delayedExchange).with(DELAYED_ROUTING_KEY).noargs();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ç”Ÿäº§è€…ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Title  å‘é€æ¶ˆæ¯  åŸºäºæ’ä»¶çš„ æ¶ˆæ¯ä»¥åŠ å»¶è¿Ÿçš„æ—¶é—´</span></span><br><span class="line"><span class="comment"> * @Description å»¶è¿Ÿé˜Ÿåˆ—çš„æ’ä»¶</span></span><br><span class="line"><span class="comment"> * @author  ç½—å°é»‘</span></span><br><span class="line"><span class="comment"> * @date 2022/11/6 11:40</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/sendDelayMsg/&#123;message&#125;/&#123;delayTime&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendDelayedMsg</span><span class="params">(<span class="meta">@PathVariable</span> String message,<span class="meta">@PathVariable</span> Integer delayedTime)</span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;å½“å‰æ—¶é—´ï¼š&#123;&#125;ï¼Œå‘é€ä¸€æ¡æ—¶é•¿&#123;&#125;æ¯«ç§’ä¿¡æ¯ç»™å»¶è¿Ÿé˜Ÿåˆ—delayedTime:&#123;&#125;&quot;</span>,</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Date</span>().toString(),delayedTime,message);</span><br><span class="line">    rabbitTemplate.convertAndSend(DelayedQueueConfig.DELAYED_EXCHANGE_NAME,</span><br><span class="line">            DelayedQueueConfig.DELAYED_ROUTING_KEY,message, msg -&gt; &#123;</span><br><span class="line">        <span class="comment">//å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œå»¶è¿Ÿæ—¶é•¿  å•ä½ms</span></span><br><span class="line">        msg.getMessageProperties().setDelay(delayedTime);</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125; );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¶ˆè´¹è€…ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å»¶è¿Ÿé˜Ÿåˆ—æ¶ˆè´¹è€…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DelayedQueueConsumer</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        åŸºäºæ’ä»¶çš„å»¶è¿Ÿé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç›‘å¬æ¶ˆæ¯</span></span><br><span class="line">    <span class="meta">@RabbitListener(queues= DelayedQueueConfig.DELAYED_QUEUE_NAME)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receiveDelayQueue</span><span class="params">(Message message)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody());</span><br><span class="line">        log.info(<span class="string">&quot;å½“å‰æ—¶é—´ï¼š&#123;&#125;ï¼Œæ”¶åˆ°å»¶è¿Ÿé˜Ÿåˆ—çš„æ¶ˆæ¯ï¼š&#123;&#125;&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>().toString(),msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="http://127.0.0.1:8080/ttl/sendDelayMsg/come">http://127.0.0.1:8080/ttl/sendDelayMsg/come</a> on bady1/20000</p><p><a href="http://127.0.0.1:8080/ttl/sendDelayMsg/come">http://127.0.0.1:8080/ttl/sendDelayMsg/come</a> on bady1/2000</p><p>ç¬¬äºŒä¸ªæ¶ˆæ¯è¢«å…ˆæ¶ˆè´¹æ‰äº†ï¼Œç¬¦åˆé¢„æœŸã€‚</p><h3 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><p>å»¶è¿Ÿé˜Ÿåˆ—åœ¨éœ€è¦å»¶æ—¶çš„å¤„ç†çš„åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ï¼Œä½¿ç”¨rabbitmqæ¥å®ç°å»¶è¿Ÿé˜Ÿåˆ—å¯ä»¥å¾ˆå¥½çš„åˆ©ç”¨rabbitmqçš„ç‰¹æ€§ï¼Œ<strong>å¦‚æ¶ˆæ¯çš„å¯é å‘é€ï¼Œæ¶ˆæ¯å¯é æŠ•é€’ï¼Œæ­»ä¿¡é˜Ÿåˆ—æ¥ä¿è¯æ¶ˆæ¯è‡³å°‘è¢«æ¶ˆè´¹ä¸€æ¬¡å·²ç»æœªè¢«æ­£å¸¸å¤„ç†çš„æ¶ˆæ¯ä¸ä¼šè¢«ä¸¢å¼ƒ</strong>ï¼Œå¦å¤–ï¼Œé€šè¿‡rabbitMQé›†ç¾¤çš„ç‰¹æ€§ï¼Œå¯ä»¥å¾ˆå¥½çš„è§£å†³å•ç‚¹æ•…éšœé—®é¢˜ï¼Œä¸ä¼šå› ä¸ºå•ä¸ªèŠ‚ç‚¹æŒ‚æ‰å¯¼è‡´å»¶è¿Ÿé˜Ÿåˆ—ä¸å¯ç”¨æˆ–è€…ä¿¡æ¯ä¸¢å¤±</p><p>å½“ç„¶ï¼Œå»¶è¿Ÿé˜Ÿåˆ—è¿˜æœ‰å¾ˆå¤šå…¶ä»–é€‰æ‹©ï¼Œæ¯”å¦‚åˆ©ç”¨javaçš„delayQueue,åˆ©ç”¨Redisçš„zsetï¼Œåˆ©ç”¨Quartzæˆ–è€…åˆ©ç”¨kafkaçš„æ—¶é—´è½®ï¼Œè¿™äº›æ–¹å¼å„æœ‰å„çš„ç‰¹ç‚¹ï¼Œçœ‹éœ€è¦çš„é€‚ç”¨çš„åœºæ™¯ã€‚</p><h1 id="é«˜çº§éƒ¨åˆ†ï¼š"><a href="#é«˜çº§éƒ¨åˆ†ï¼š" class="headerlink" title="é«˜çº§éƒ¨åˆ†ï¼š"></a>é«˜çº§éƒ¨åˆ†ï¼š</h1><h2 id="å‘å¸ƒç¡®è®¤é«˜çº§"><a href="#å‘å¸ƒç¡®è®¤é«˜çº§" class="headerlink" title="å‘å¸ƒç¡®è®¤é«˜çº§"></a>å‘å¸ƒç¡®è®¤é«˜çº§</h2><p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä¸­ç”±äºä¸€äº›ä¸æ˜çš„åŸå› ï¼Œå¯¼è‡´rabbitmqé‡å¯ï¼Œåœ¨rabbitmq é‡å¯æœŸé—´ç”Ÿäº§è€…æ¶ˆæ¯æŠ•é€’å¤±è´¥ï¼Œå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†å’Œæ¢å¤ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¦‚ä½•ä¿è¯rabbitmqçš„æ¶ˆæ¯çš„å¯é æŠ•é€’å‘¢?</p><p>é«˜çº§å°±æ˜¯ï¼Œå½“ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ç»™äº¤æ¢æœºï¼Œä½†æ˜¯äº¤æ¢æœºæ”¶ä¸åˆ°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†æ¶ˆæ¯æ”¾åˆ°ç¼“å­˜ä¸­ï¼Œå½“äº¤æ¢æœºå¯ä»¥æ”¶åˆ°æ¶ˆæ¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±æŠŠæ¶ˆæ¯ä»ç¼“å­˜ä¸­ç§»é™¤ã€‚ä¸€èˆ¬ä¼šå‡ºç°çš„é—®é¢˜æ˜¯ï¼Œäº¤æ¢æœºæ”¶ä¸åˆ°æ¶ˆæ¯ï¼ŒäºŒæ˜¯é˜Ÿåˆ—æ”¶ä¸åˆ°æ¶ˆæ¯ã€‚</p><p><strong>ä»£ç æ¶æ„éƒ¨åˆ†</strong></p><p><strong>é…ç½®æ–‡ä»¶</strong></p><p>åœ¨spring.rabbitmq.publisher-confirm-type=correlated</p><p>confirm</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å‘å¸ƒç¡®è®¤é…ç½®ç±»</span></span><br><span class="line"><span class="comment"> ç›®çš„æ˜¯ä¸ºäº† å‘å¸ƒç¡®è®¤ ï¼ˆé«˜çº§ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfirmConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//äº¤æ¢æœº</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">final</span> String CONFIRM_EXCHANGE_NAME= <span class="string">&quot;confirm_exchange&quot;</span>;</span><br><span class="line">    <span class="comment">//é˜Ÿåˆ—</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">CONFIRM_QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;confirm_queue&quot;</span>;</span><br><span class="line">    <span class="comment">//RoutingKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">CONFIRM_ROUTING_KEY</span> <span class="operator">=</span> <span class="string">&quot;key1&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å£°æ˜ä¸€ä¸ªäº¤æ¢æœº</span></span><br><span class="line">    <span class="meta">@Bean(&quot;confirmExchange&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> DirectExchange <span class="title function_">confirmExchange</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  <span class="keyword">new</span> <span class="title class_">DirectExchange</span>(CONFIRM_EXCHANGE_NAME);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—</span></span><br><span class="line">    <span class="meta">@Bean(&quot;confirmQueue&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">confirmQueue</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> QueueBuilder.durable(CONFIRM_QUEUE_NAME).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»‘å®š</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">queueBindingExchange</span><span class="params">(<span class="meta">@Qualifier(&quot;confirmQueue&quot;)</span> Queue confirmQueue,</span></span><br><span class="line"><span class="params">                                        <span class="meta">@Qualifier(&quot;confirmExchange&quot;)</span> DirectExchange confirmExchange)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(confirmQueue).to(confirmExchange).with(CONFIRM_ROUTING_KEY);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¶ˆè´¹è€…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    Productæ¥æ”¶æ¶ˆæ¯</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Consumer</span> &#123;</span><br><span class="line">    <span class="meta">@RabbitListener(queues = ConfirmConfig.CONFIRM_QUEUE_NAME)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receiveConfirmMessage</span><span class="params">(Message message)</span>&#123;</span><br><span class="line">       <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody());</span><br><span class="line">        log.info(<span class="string">&quot;æ¥å—åˆ°é˜Ÿåˆ—confirm.queueçš„æ¶ˆæ¯ï¼š &#123;&#125; &quot;</span> ,msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”Ÿäº§è€…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/confirm&quot;)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProducerController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RabbitTemplate rabbitTemplate ;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘é€æ¶ˆæ¯</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/sendMessage/&#123;message&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(<span class="meta">@PathVariable</span> String message)</span>&#123;</span><br><span class="line">        rabbitTemplate.convertAndSend(ConfirmConfig.CONFIRM_EXCHANGE_NAME,</span><br><span class="line">                ConfirmConfig.CONFIRM_ROUTING_KEY,message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å›è°ƒæ¥å£</p><p>ä¸€æ—¦æ¶ˆæ¯æ²¡æœ‰è¢«æ¥å—æˆ‘ä»¬é‡‡å–å›è°ƒæ¥å£å»ç¡®å®šã€‚</p><p>NONE</p><p>ç¦ç”¨å‘å¸ƒç¡®è®¤æ¨¡å¼ï¼Œæ˜¯é»˜è®¤å€¼</p><p>CORRELATED</p><p>å‘å¸ƒæ¶ˆæ¯æˆåŠŸåˆ°äº¤æ¢å™¨åä¼šè§¦å‘å›è°ƒæ–¹æ³•</p><p>SIMPLE</p><p>ç»è¿‡æµ‹è¯•æœ‰ä¸¤ç§æ•ˆæœï¼Œå…¶ä¸€æ•ˆæœå’ŒCORRELATEDå€¼ä¸€æ ·ä¼šè§¦å‘å›è°ƒæ–¹æ³•ã€‚</p><p>å…¶äºŒåœ¨å‘å¸ƒæ¶ˆæ¯æˆåŠŸåé‡‡ç”¨rabbitTemplateè°ƒç”¨waitForConfirmsæˆ–waitForConfirmsOrDieæ–¹æ³•ï¼Œç­‰å¾…brokerèŠ‚ç‚¹è¿”å›å‘é€ç»“æœï¼Œæ ¹æ®è¿”å›ç»“æœæ¥åˆ¤å®šä¸‹ä¸€æ­¥çš„é€»è¾‘ï¼Œè¦æ³¨æ„çš„ç‚¹æ˜¯waitForConfirmsOrDieæ–¹æ³•ï¼Œå¦‚æœè¿”å›fasleåˆ™ä¼šå…³é—­channelï¼Œåˆ™æ¥ä¸‹æ¥æ— æ³•å‘é€æ¶ˆæ¯åˆ°broker.</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åº”ç”¨åç§°</span></span><br><span class="line"><span class="attr">spring.application.name</span>=<span class="string">SpringBoot_RabbitMQ</span></span><br><span class="line"><span class="attr">spring.rabbitmq.host</span>=<span class="string">114.132.77.86</span></span><br><span class="line"><span class="attr">spring.rabbitmq.publisher-confirm-type</span>=<span class="string">correlated</span></span><br><span class="line"><span class="attr">spring.rabbitmq.port</span>=<span class="string">5672</span></span><br><span class="line"><span class="attr">spring.rabbitmq.username</span>=<span class="string">guest</span></span><br><span class="line"><span class="attr">spring.rabbitmq.password</span>=<span class="string">guest</span></span><br></pre></td></tr></table></figure><p>å®šä¹‰ä¸€ä¸ªå›è°ƒæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å®šä¹‰ä¸€ä¸ªå›è°ƒæ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//1</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCallBack</span> <span class="keyword">implements</span> <span class="title class_">RabbitTemplate</span>.ConfirmCallback&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”±äºæ˜¯å†…éƒ¨æ¥å£ï¼Œæ•…è€Œä¸èƒ½ç›´æ¥æˆ‘ä»¬å®ç°çš„æ¥å£ï¼Œæˆ‘ä»¬éœ€è¦ç›´æ¥æ³¨å…¥</span></span><br><span class="line">    <span class="comment">//æ³¨å…¥</span></span><br><span class="line">    <span class="meta">@Autowired</span>  <span class="comment">//2</span></span><br><span class="line">    <span class="keyword">private</span>  RabbitTemplate rabbitTemplate;</span><br><span class="line">    <span class="meta">@PostConstruct</span>  <span class="comment">//æ³¨å…¥  3 ä¸€æ­¥ä¸€æ­¥æ¥ï¼Œè¿™ä¸ªæ³¨è§£æ˜¯åœ¨å…¶ä»–æ³¨è§£æ‰§è¡Œå®Œæ¯•ä¹‹åæ‰ä¼šæ‰§è¡Œï¼Œåˆ‡è®°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//æ³¨å…¥</span></span><br><span class="line">        rabbitTemplate.setConfirmCallback(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    äº¤æ¢æœºç¡®è®¤å›è°ƒæ–¹æ³•</span></span><br><span class="line"><span class="comment">    1.å‘æ¶ˆæ¯ äº¤æ¢æœºæ¥æ”¶åˆ°äº†æ¶ˆæ¯  å›é¦ˆ</span></span><br><span class="line"><span class="comment">        1.1correlationDataä¿å­˜å›è°ƒæ¶ˆæ¯IDä»¥åŠç›¸å…³ä¿¡æ¯</span></span><br><span class="line"><span class="comment">        1.2äº¤æ¢æœºæ¥æ”¶åˆ°æ¶ˆæ¯  ack  = true</span></span><br><span class="line"><span class="comment">        1.3 cause  null</span></span><br><span class="line"><span class="comment">    2.å‘é€æ¶ˆæ¯ äº¤æ¢æœºæ¥æ”¶å¤±è´¥äº†é—®é¢˜</span></span><br><span class="line"><span class="comment">        2.1 correlationData ä¿å­˜å›è°ƒä¿¡æ¯çš„IDä»¥åŠç›¸å…³ä¿¡æ¯</span></span><br><span class="line"><span class="comment">        2.2 äº¤æ¢æœºæ¥æ”¶åˆ°æ¶ˆæ¯  ack =  false</span></span><br><span class="line"><span class="comment">        2.3 cause å¤±è´¥çš„åŸå› </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">confirm</span><span class="params">(CorrelationData correlationData, <span class="type">boolean</span> ack, String cause)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> correlationData.getId()!=<span class="literal">null</span> ? correlationData.getId() : <span class="string">&quot;&quot;</span> ;</span><br><span class="line">        <span class="keyword">if</span>(ack)&#123;</span><br><span class="line">            log.info(<span class="string">&quot;äº¤æ¢æœºå·²ç»æ”¶åˆ°çš„IDä¸ºï¼š &#123;&#125;çš„æ¶ˆæ¯&quot;</span>,id);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            log.info(<span class="string">&quot;äº¤æ¢æœºè¿˜æœªæ”¶åˆ°IDä¸ºï¼š&#123;&#125;çš„æ¶ˆæ¯,ç”±äºåŸå› ï¼š&#123;&#125;&quot;</span>,id,cause);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">//å¼€å§‹å‘æ¶ˆæ¯ï¼Œæµ‹è¯•ç¡®è®¤</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/confirm&quot;)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProducerController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RabbitTemplate rabbitTemplate ;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘é€æ¶ˆæ¯</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/sendMessage/&#123;message&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(<span class="meta">@PathVariable</span> String message)</span>&#123;</span><br><span class="line">        <span class="type">CorrelationData</span> <span class="variable">correlationData1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorrelationData</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        rabbitTemplate.convertAndSend(ConfirmConfig.CONFIRM_EXCHANGE_NAME,</span><br><span class="line">                ConfirmConfig.CONFIRM_ROUTING_KEY,message,correlationData1);</span><br><span class="line">        log.info(<span class="string">&quot;å‘é€æ¶ˆæ¯å†…å®¹ï¼š&#123;&#125;&quot;</span>,message + <span class="string">&quot;key1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">CorrelationData</span> <span class="variable">correlationData2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorrelationData</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        rabbitTemplate.convertAndSend(ConfirmConfig.CONFIRM_EXCHANGE_NAME,</span><br><span class="line">                ConfirmConfig.CONFIRM_ROUTING_KEY,message,correlationData2);</span><br><span class="line">        log.info(<span class="string">&quot;å‘é€æ¶ˆæ¯å†…å®¹ï¼š&#123;&#125;&quot;</span>,message + <span class="string">&quot;key2&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å›é€€æ¶ˆæ¯"><a href="#å›é€€æ¶ˆæ¯" class="headerlink" title="å›é€€æ¶ˆæ¯"></a>å›é€€æ¶ˆæ¯</h2><p>åœ¨å¼€å¯äº†ç”Ÿæˆè€…ç¡®è®¤æœºåˆ¶æƒ…å†µä¸‹ï¼Œäº¤æ¢æœºæ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œä¼šç›´æ¥å°†æ¶ˆæ¯ç”Ÿäº§è€…å‘é€ç¡®è®¤æ¶ˆæ¯ï¼Œå¦‚æœå‘ç°è¯¥æ¶ˆæ¯ä¸å¯è·¯ç”±ï¼Œé‚£ä¹ˆæ¶ˆæ¯ä¼šè¢«ç›´æ¥ä¸¢å¼ƒï¼Œæ­¤æ—¶ç”Ÿäº§è€…æ˜¯ä¸çŸ¥é“æ¶ˆæ¯è¢«ä¸¢å¼ƒè¿™ä¸ªäº‹ä»¶çš„ï¼Œé‚£ä¹ˆå¦‚ä½•è®©æ— æ³•è¢«è·¯ç”±çš„æ¶ˆæ¯å¸®æˆ‘æƒ³åŠæ³•å¤„ç†ä¸€ä¸‹ï¼Ÿæœ€ç®€å•çš„å°±æ˜¯é€šçŸ¥æˆ‘ä¸€ä¸‹ï¼Œæˆ‘å¥½æ–¹ä¾¿å¤„ç†ï¼Œé€šè¿‡è®¾ç½®mandatoryå‚æ•°å°±å¯ä»¥åœ¨å½“æ¶ˆæ¯ä¼ é€’è¿‡ç¨‹ä¸­ä¸å¯è¾¾ç›®çš„æ—¶å°†æ¶ˆæ¯è¿”å›ç»™ç”Ÿæˆè€…ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span> <span class="comment">//1</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCallBack</span> <span class="keyword">implements</span> <span class="title class_">RabbitTemplate</span>.ConfirmCallback,RabbitTemplate.ReturnCallback&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”±äºæ˜¯å†…éƒ¨æ¥å£ï¼Œæ•…è€Œä¸èƒ½ç›´æ¥æˆ‘ä»¬å®ç°çš„æ¥å£ï¼Œæˆ‘ä»¬éœ€è¦ç›´æ¥æ³¨å…¥</span></span><br><span class="line">    <span class="comment">//æ³¨å…¥</span></span><br><span class="line">    <span class="meta">@Autowired</span>  <span class="comment">//2</span></span><br><span class="line">    <span class="keyword">private</span>  RabbitTemplate rabbitTemplate;</span><br><span class="line">    <span class="meta">@PostConstruct</span>  <span class="comment">//æ³¨å…¥  3 ä¸€æ­¥ä¸€æ­¥æ¥ï¼Œè¿™ä¸ªæ³¨è§£æ˜¯åœ¨å…¶ä»–æ³¨è§£æ‰§è¡Œå®Œæ¯•ä¹‹åæ‰ä¼šæ‰§è¡Œï¼Œåˆ‡è®°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//æ³¨å…¥</span></span><br><span class="line">        rabbitTemplate.setConfirmCallback(<span class="built_in">this</span>);</span><br><span class="line"><span class="comment">//ä¸æ³¨å…¥çš„åŒ–æ²¡æœ‰ç»“æœ</span></span><br><span class="line">        rabbitTemplate.setReturnCallback(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    äº¤æ¢æœºç¡®è®¤å›è°ƒæ–¹æ³•</span></span><br><span class="line"><span class="comment">    1.å‘æ¶ˆæ¯ äº¤æ¢æœºæ¥æ”¶åˆ°äº†æ¶ˆæ¯  å›é¦ˆ</span></span><br><span class="line"><span class="comment">        1.1correlationDataä¿å­˜å›è°ƒæ¶ˆæ¯IDä»¥åŠç›¸å…³ä¿¡æ¯</span></span><br><span class="line"><span class="comment">        1.2äº¤æ¢æœºæ¥æ”¶åˆ°æ¶ˆæ¯  ack  = true</span></span><br><span class="line"><span class="comment">        1.3 cause  null</span></span><br><span class="line"><span class="comment">    2.å‘é€æ¶ˆæ¯ äº¤æ¢æœºæ¥æ”¶å¤±è´¥äº†é—®é¢˜</span></span><br><span class="line"><span class="comment">        2.1 correlationData ä¿å­˜å›è°ƒä¿¡æ¯çš„IDä»¥åŠç›¸å…³ä¿¡æ¯</span></span><br><span class="line"><span class="comment">        2.2 äº¤æ¢æœºæ¥æ”¶åˆ°æ¶ˆæ¯  ack =  false</span></span><br><span class="line"><span class="comment">        2.3 cause å¤±è´¥çš„åŸå› </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">confirm</span><span class="params">(CorrelationData correlationData, <span class="type">boolean</span> ack, String cause)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> correlationData.getId()!=<span class="literal">null</span> ? correlationData.getId() : <span class="string">&quot;&quot;</span> ;</span><br><span class="line">        <span class="keyword">if</span>(ack)&#123;</span><br><span class="line">            log.info(<span class="string">&quot;äº¤æ¢æœºå·²ç»æ”¶åˆ°çš„IDä¸ºï¼š &#123;&#125;çš„æ¶ˆæ¯&quot;</span>,id);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            log.info(<span class="string">&quot;äº¤æ¢æœºè¿˜æœªæ”¶åˆ°IDä¸ºï¼š&#123;&#125;çš„æ¶ˆæ¯,ç”±äºåŸå› ï¼š&#123;&#125;&quot;</span>,id,cause);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å›é€€æ¥å£å®ç°ï¼Œå¯ä»¥åœ¨å½“æ¶ˆæ¯åœ¨ä¼ é€’è¿‡ç¨‹ä¸­ä¸å¯è¾¾</span></span><br><span class="line">    <span class="comment">// ç›®çš„æ—¶å°†æ¶ˆæ¯è¿”å›ç»™ç”Ÿäº§è€…</span></span><br><span class="line">    <span class="comment">//åªæœ‰å½“æ¶ˆæ¯ä¸å¯è¾¾ç›®çš„åœ°æ—¶å€™æ‰è¿›è¡Œå›é€€</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">returnedMessage</span><span class="params">(Message message, <span class="type">int</span> replyCode, String replyText, String exchange, String routingKey)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;æ¶ˆæ¯ï¼š&#123;&#125;,è¢«äº¤æ¢æœº&#123;&#125; é€€å›äº†ï¼Œé€€å›åŸå› æ˜¯ï¼š&#123;&#125;ï¼Œè·¯ç”±Key:&#123;&#125;&quot;</span>,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody()),exchange,replyText,routingKey);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/confirm&quot;)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProducerController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RabbitTemplate rabbitTemplate ;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘é€æ¶ˆæ¯</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/sendMessage/&#123;message&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(<span class="meta">@PathVariable</span> String message)</span>&#123;</span><br><span class="line">        <span class="type">CorrelationData</span> <span class="variable">correlationData1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorrelationData</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        rabbitTemplate.convertAndSend(ConfirmConfig.CONFIRM_EXCHANGE_NAME,</span><br><span class="line">                ConfirmConfig.CONFIRM_ROUTING_KEY,message,correlationData1);</span><br><span class="line">        log.info(<span class="string">&quot;å‘é€æ¶ˆæ¯å†…å®¹ï¼š&#123;&#125;&quot;</span>,message + <span class="string">&quot;key1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">CorrelationData</span> <span class="variable">correlationData2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorrelationData</span>(<span class="string">&quot;2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        rabbitTemplate.convertAndSend(ConfirmConfig.CONFIRM_EXCHANGE_NAME,</span><br><span class="line">                ConfirmConfig.CONFIRM_ROUTING_KEY + <span class="string">&quot;2&quot;</span> ,message + <span class="string">&quot;key2&quot;</span>,correlationData2);</span><br><span class="line">        log.info(<span class="string">&quot;å‘é€æ¶ˆæ¯å†…å®¹ï¼š&#123;&#125;&quot;</span>,message + <span class="string">&quot;key2&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å›é€€å¤„ç†</p><p><a href="http://127.0.0.1:8080/confirm/sendMessage/ä½ å¥½">http://127.0.0.1:8080/confirm/sendMessage/ä½ å¥½</a></p><h3 id="å¤‡ä»½äº¤æ¢æœº"><a href="#å¤‡ä»½äº¤æ¢æœº" class="headerlink" title="å¤‡ä»½äº¤æ¢æœº"></a>å¤‡ä»½äº¤æ¢æœº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å‘å¸ƒç¡®è®¤é…ç½®ç±»</span></span><br><span class="line"><span class="comment"> ç›®çš„æ˜¯ä¸ºäº† å‘å¸ƒç¡®è®¤ ï¼ˆé«˜çº§ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfirmConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//äº¤æ¢æœº</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">final</span> String CONFIRM_EXCHANGE_NAME= <span class="string">&quot;confirm_exchange&quot;</span>;</span><br><span class="line">    <span class="comment">//é˜Ÿåˆ—</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">CONFIRM_QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;confirm_queue&quot;</span>;</span><br><span class="line">    <span class="comment">//RoutingKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">CONFIRM_ROUTING_KEY</span> <span class="operator">=</span> <span class="string">&quot;key1&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¤‡ä»½äº¤æ¢æœº</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BACKUP_EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">&quot;backup_exchange&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¤‡ä»½é˜Ÿåˆ—</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BACKUP_QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;backup_queue&quot;</span>;</span><br><span class="line">    <span class="comment">//æŠ¥è­¦é˜Ÿåˆ—</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="type">String</span> <span class="variable">WARNING_QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;warning_queue&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å£°æ˜ä¸€ä¸ªäº¤æ¢æœº</span></span><br><span class="line">    <span class="meta">@Bean(&quot;confirmExchange&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> DirectExchange <span class="title function_">confirmExchange</span><span class="params">()</span>&#123;                       <span class="comment">//æŒä¹…åŒ–</span></span><br><span class="line">      <span class="keyword">return</span> ExchangeBuilder.directExchange(CONFIRM_EXCHANGE_NAME).durable(<span class="literal">true</span>).withArgument(<span class="string">&quot;alternate-exchange&quot;</span>,BACKUP_EXCHANGE_NAME).build();</span><br><span class="line">    <span class="comment">//    return  new DirectExchange(CONFIRM_EXCHANGE_NAME);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—</span></span><br><span class="line">    <span class="meta">@Bean(&quot;confirmQueue&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">confirmQueue</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>  QueueBuilder.durable(CONFIRM_QUEUE_NAME).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»‘å®š</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">queueBindingExchange</span><span class="params">(<span class="meta">@Qualifier(&quot;confirmQueue&quot;)</span> Queue confirmQueue,</span></span><br><span class="line"><span class="params">                                        <span class="meta">@Qualifier(&quot;confirmExchange&quot;)</span> DirectExchange confirmExchange)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(confirmQueue).to(confirmExchange).with(CONFIRM_ROUTING_KEY);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ›å»ºä¸€ä¸ªå¤‡ä»½äº¤æ¢æœº</span></span><br><span class="line">    <span class="meta">@Bean(&quot;backupExchange&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> FanoutExchange <span class="title function_">backupExchange</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  <span class="keyword">new</span> <span class="title class_">FanoutExchange</span>(BACKUP_EXCHANGE_NAME);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean(&quot;backupQueue&quot;)</span></span><br><span class="line">    <span class="keyword">public</span>  Queue <span class="title function_">backupQueue</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> QueueBuilder.durable(BACKUP_QUEUE_NAME).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(&quot;warningQueue&quot;)</span></span><br><span class="line">    <span class="keyword">public</span>  Queue <span class="title function_">warningQueue</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> QueueBuilder.durable(WARNING_QUEUE_NAME).build();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¤‡ä»½äº¤æ¢æœºé‚¦å®šåˆ°å¤‡ä»½é˜Ÿåˆ—</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">queueBindingBackupExchange</span><span class="params">(<span class="meta">@Qualifier(&quot;backupQueue&quot;)</span> Queue backupQueue,</span></span><br><span class="line"><span class="params">                                        <span class="meta">@Qualifier(&quot;backupExchange&quot;)</span> FanoutExchange backupExchange)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(backupQueue).to(backupExchange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŠ¥è­¦äº¤æ¢æœºé‚¦å®šåˆ°æŠ¥è­¦</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">queueBindingWarningExchange</span><span class="params">(<span class="meta">@Qualifier(&quot;warningQueue&quot;)</span> Queue warningQueue,</span></span><br><span class="line"><span class="params">                                              <span class="meta">@Qualifier(&quot;backupExchange&quot;)</span> FanoutExchange backupExchange)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(warningQueue).to(backupExchange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¶ˆè´¹è€…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æŠ¥è­¦æ¶ˆè´¹è€…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WarningConsumer</span> &#123;</span><br><span class="line">    <span class="comment">//æ¥å—æŠ¥è­¦ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@RabbitListener(queues = ConfirmConfig.WARNING_QUEUE_NAME)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receiveWarningMsg</span><span class="params">(Message message)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody());</span><br><span class="line">        log.info(<span class="string">&quot;æŠ¥è­¦å‘ç°ä¸å¯è·¯ç”±æ¶ˆæ¯ï¼š &#123;&#125;&quot;</span> ,msg);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å¹‚ç­‰æ€§"><a href="#å¹‚ç­‰æ€§" class="headerlink" title="å¹‚ç­‰æ€§"></a>å¹‚ç­‰æ€§</h2><p>ç”¨æˆ·å¯¹äºåŒä¸€æ“ä½œå‘èµ·çš„ä¸€æ¬¡è¯·æ±‚æˆ–è€…å¤šæ¬¡è¯·æ±‚çš„ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œä¸ä¼šå› ä¸ºå¤šæ¬¡ç‚¹å‡»è€Œäº§ç”Ÿäº†å‰¯ä½œç”¨ã€‚ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œé‚£å°±æ˜¯æ”¯ä»˜ï¼Œç”¨æˆ·è´­ä¹°å•†å“åæ”¯ä»˜ï¼Œæ”¯ä»˜æ‰£æ¬¾æˆåŠŸï¼Œä½†æ˜¯è¿”å›ç»“æœçš„æ—¶å€™ç½‘ç»œå¼‚å¸¸ï¼Œæ­¤æ—¶é’±å·²ç»æ‰£äº†ï¼Œç”¨æˆ·å†æ¬¡ç‚¹å‡»æŒ‰é’®ï¼Œæ­¤æ—¶ä¼šè¿›è¡Œç¬¬äºŒæ¬¡æ‰£æ¬¾ï¼Œè¿”å›ç»“æœæˆåŠŸï¼Œç”¨æˆ·æŸ¥è¯¢ä½™é¢å‘ç°å¤šæ‰£é’±äº†ï¼Œæµæ°´è®°å½•ä¹Ÿå˜æˆäº†ä¸¤æ¡ã€‚åœ¨ä»¥å‰çš„å•åº”ç”¨ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæ•°æ®æ“ä½œæ”¾å…¥äº‹åŠ¡ä¸­å³å¯ï¼Œå‘ç”Ÿé”™è¯¯ç«‹å³å›æ»šï¼Œä½†æ˜¯å†å“åº”å®¢æˆ·ç«¯çš„æ—¶å€™ä¹Ÿæœ‰å¯èƒ½å‡ºç°ç½‘ç»œä¸­æ–­æˆ–è€…å¼‚å¸¸ç­‰ç­‰</p><p><strong>æ¶ˆæ¯è¢«é‡å¤æ¶ˆè´¹</strong></p><p>æ¶ˆè´¹è€…åœ¨æ¶ˆè´¹MQä¸­çš„æ¶ˆæ¯æ—¶ï¼ŒMQå·²æŠŠæ¶ˆæ¯å‘é€ç»™æ¶ˆè´¹è€…ï¼Œæ¶ˆè´¹è€…åœ¨ç»™MQè¿”å›ackæ—¶ç½‘ç»œä¸­æ–­ï¼Œæ•…MQæœªæ”¶åˆ°ç¡®è®¤ä¿¡æ¯ï¼Œè¯¥æ¡æ¶ˆæ¯ä¼šé‡æ–°å‘ç»™å…¶ä»–çš„æ¶ˆè´¹è€…ï¼Œæˆ–è€…åœ¨ç½‘ç»œé‡è¿åå†æ¬¡å‘é€ç»™è¯¥æ¶ˆè´¹è€…ï¼Œä½†å®é™…ä¸Šè¯¥æ¶ˆè´¹è€…å·²æˆåŠŸæ¶ˆè´¹äº†è¯¥æ¡æ¶ˆæ¯ï¼Œé€ æˆæ¶ˆè´¹è€…æ¶ˆè´¹äº†é‡å¤çš„æ¶ˆæ¯ã€‚</p><p><strong>è§£å†³æ€è·¯</strong></p><p>MQæ¶ˆè´¹è€…çš„å¹‚ç­‰æ€§çš„è§£å†³ä¸€èˆ¬ä½¿ç”¨å…¨å±€IDæˆ–è€…å†™ä¸ªå”¯ä¸€æ ‡è¯†æ¯”å¦‚æ—¶é—´æˆ³æˆ–è€…UUIDæˆ–è€…è®¢å•æ¶ˆè´¹è€…æ¶ˆè´¹MQä¸­çš„æ¶ˆæ¯ä¹Ÿå¯åˆ©ç”¨MQçš„è¯¥idæ¥åˆ¤æ–­ï¼Œæˆ–è€…å¯æŒ‰è‡ªå·±çš„è§„åˆ™ç”Ÿæˆä¸€ä¸ªå…¨å±€å”¯ä¸€idï¼Œæ¯æ¬¡æ¶ˆè´¹æ¶ˆæ¯æ—¶ç”¨è¯¥idå…ˆåˆ¤æ–­è¯¥æ¶ˆæ¯æ˜¯å¦å·²æ¶ˆè´¹è¿‡ã€‚</p><p><strong>æ¶ˆè´¹ç«¯çš„å¹‚ç­‰æ€§ä¿éšœ</strong><br>åœ¨æµ·é‡è®¢å•ç”Ÿæˆçš„ä¸šåŠ¡é«˜å³°æœŸï¼Œç”Ÿäº§ç«¯æœ‰å¯èƒ½å°±ä¼šé‡å¤å‘ç”Ÿäº†æ¶ˆæ¯ï¼Œè¿™æ—¶å€™æ¶ˆè´¹ç«¯å°±è¦å®ç°å¹‚ç­‰æ€§ï¼Œè¿™å°±æ„å‘³ç€æˆ‘ä»¬çš„æ¶ˆæ¯æ°¸è¿œä¸ä¼šè¢«æ¶ˆè´¹å¤šæ¬¡ï¼Œå³ä½¿æˆ‘ä»¬æ”¶åˆ°äº†ä¸€æ ·çš„æ¶ˆæ¯ã€‚ä¸šç•Œä¸»æµçš„å¹‚ç­‰æ€§æœ‰ä¸¤ç§æ“ä½œï¼ša.å”¯ä¸€ID+æŒ‡çº¹ç æœºåˆ¶ï¼Œåˆ©ç”¨æ•°æ®åº“ä¸»é”®å»é‡ï¼Œb.åˆ©ç”¨redisçš„åŸå­æ€§å»å®ç°</p><p><strong>å”¯ä¸€lD+æŒ‡çº¹ç æœºåˆ¶</strong><br>æŒ‡çº¹ç ï¼šæˆ‘ä»¬çš„ä¸€äº›è§„åˆ™æˆ–è€…æ—¶é—´æˆ³åŠ åˆ«çš„æœåŠ¡ç»™åˆ°çš„å”¯ä¸€ä¿¡æ¯ç ï¼Œå®ƒå¹¶ä¸ä¸€å®šæ˜¯æˆ‘ä»¬ç³»ç»Ÿç”Ÿæˆçš„ï¼ŒåŸºæœ¬éƒ½æ˜¯ç”±æˆ‘ä»¬çš„ä¸šåŠ¡è§„åˆ™æ‹¼æ¥è€Œæ¥ï¼Œä½†æ˜¯ä¸€å®šè¦ä¿è¯å”¯ä¸€æ€§ï¼Œç„¶åå°±åˆ©ç”¨æŸ¥è¯¢è¯­å¥è¿›è¡Œåˆ¤æ–­è¿™ä¸ªidæ˜¯å¦å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œä¼˜åŠ¿å°±æ˜¯å®ç°ç®€å•å°±ä¸€ä¸ªæ‹¼æ¥ï¼Œç„¶åæŸ¥è¯¢åˆ¤æ–­æ˜¯å¦é‡å¤ï¼›åŠ£åŠ¿å°±æ˜¯åœ¨é«˜å¹¶å‘æ—¶ï¼Œå¦‚æœæ˜¯å•ä¸ªæ•°æ®åº“å°±ä¼šæœ‰å†™å…¥æ€§èƒ½ç“¶é¢ˆå½“ç„¶ä¹Ÿå¯ä»¥é‡‡ç”¨åˆ†åº“åˆ†è¡¨æå‡æ€§èƒ½ï¼Œä½†ä¹Ÿä¸æ˜¯æˆ‘ä»¬æœ€æ¨èçš„æ–¹å¼ã€‚</p><p><strong>RedisåŸå­æ€§</strong>ï¼ˆé‡ç‚¹é€‰æ‹©ï¼‰<br>åˆ©ç”¨redisæ‰§è¡Œsetnxå‘½ä»¤ï¼Œå¤©ç„¶å…·æœ‰å¹•ç­‰æ€§ã€‚ä»è€Œå®ç°ä¸é‡å¤æ¶ˆè´¹ã€‚</p><h3 id="ä¼˜å…ˆçº§é˜Ÿåˆ—"><a href="#ä¼˜å…ˆçº§é˜Ÿåˆ—" class="headerlink" title="ä¼˜å…ˆçº§é˜Ÿåˆ—"></a>ä¼˜å…ˆçº§é˜Ÿåˆ—</h3><p>åœ¨æˆ‘ä»¬ç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªè®¢å•å‚¬ä»˜çš„åœºæ™¯ï¼Œæˆ‘ä»¬çš„å®¢æˆ·åœ¨å¤©çŒ«ä¸‹çš„è®¢å•ï¼Œæ·˜å®ä¼šåŠæ—¶å°†è®¢å•æ¨é€ç»™æˆ‘ä»¬ï¼Œå¦‚æœåœ¨ç”¨æˆ·è®¾å®šçš„æ—¶é—´å†…æœªä»˜æ¬¾é‚£ä¹ˆå°±ä¼šç»™ç”¨æˆ·æ¨é€ä¸€æ¡çŸ­ä¿¡æé†’ï¼Œå¾ˆç®€å•çš„ä¸€ä¸ªåŠŸèƒ½å¯¹å§ï¼Œä½†æ˜¯ï¼Œtmallå•†å®¶å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œè‚¯å®šæ˜¯è¦åˆ†å¤§å®¢æˆ·å’Œå°å®¢æˆ·çš„å¯¹å§ï¼Œæ¯”å¦‚åƒè‹¹æœï¼Œå°ç±³è¿™æ ·å¤§å•†å®¶ä¸€å¹´èµ·ç èƒ½ç»™æˆ‘ä»¬åˆ›é€ å¾ˆå¤§çš„åˆ©æ¶¦ï¼Œæ‰€ä»¥ç†åº”å½“ç„¶ï¼Œä»–ä»¬çš„è®¢å•å¿…é¡»å¾—åˆ°ä¼˜å…ˆå¤„ç†ï¼Œè€Œæ›¾ç»æˆ‘ä»¬çš„åç«¯ç³»ç»Ÿæ˜¯ä½¿ç”¨ redisæ¥å­˜æ”¾çš„å®šæ—¶è½®è¯¢ï¼Œå¤§å®¶éƒ½çŸ¥é“ redis åªèƒ½ç”¨Liståšä¸€ä¸ªç®€ç®€å•å•çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¹¶ä¸èƒ½å®ç°ä¸€ä¸ªä¼˜å…ˆçº§çš„åœºæ™¯ï¼Œæ‰€ä»¥è®¢å•é‡å¤§äº†åé‡‡ç”¨RabbitMQè¿›è¡Œæ”¹é€ å’Œä¼˜åŒ–ï¼Œå¦‚æœå‘ç°æ˜¯å¤§å®¢æˆ·çš„è®¢å•ç»™ä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒé«˜çš„ä¼˜å…ˆçº§ï¼Œå¦åˆ™å°±æ˜¯é»˜è®¤ä¼˜å…ˆçº§ã€‚</p><p>å¦‚ä½•æ·»åŠ </p><p>a.æ§åˆ¶å°æ·»åŠ </p><p>b.é˜Ÿåˆ—ä¸­ä»£ç æ·»åŠ ä¼˜å…ˆçº§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String,Object&gt; parame = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">parame.put(<span class="string">&quot;x-max-prority&quot;</span>,<span class="number">10</span>);</span><br><span class="line">channel.queueDeclare(<span class="string">&quot;hello&quot;</span>,<span class="literal">true</span>,<span class="literal">false</span>,<span class="literal">false</span>,params);</span><br></pre></td></tr></table></figure><p>c.æ¶ˆæ¯ä¸­ä»£ç æ·»åŠ ä¼˜å…ˆçº§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="comment">//é˜Ÿåˆ—åç§°</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  <span class="keyword">final</span>  String QUEUE_NAME=<span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="comment">//å»ºç«‹ä¸€ä¸ªè¿æ¥æ–¹å¼</span></span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        <span class="comment">//å·¥å‚IP è¿æ¥RabbitMQçš„é˜Ÿåˆ—</span></span><br><span class="line">        factory.setHost(<span class="string">&quot;www.littlehei.fun&quot;</span>);</span><br><span class="line">        <span class="comment">//ç”¨æˆ·å</span></span><br><span class="line">        factory.setUsername(<span class="string">&quot;guest&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯†ç </span></span><br><span class="line">        factory.setPassword(<span class="string">&quot;guest&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºé“¾æ¥</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–ä¿¡é“</span></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç”Ÿæˆä¸€ä¸ªé˜Ÿåˆ—</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ç”Ÿæˆé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">        å‚æ•°1ï¼Œé˜Ÿåˆ—åç§°</span></span><br><span class="line"><span class="comment">        å‚æ•°2ï¼Œé˜Ÿåˆ—é‡Œè¾¹çš„æ¶ˆæ¯æ˜¯å¦æŒä¹…åŒ–ï¼ˆç£ç›˜ï¼‰é»˜è®¤æƒ…å†µæ¶ˆæ¯å­˜å‚¨åœ¨å†…å­˜ä¸­</span></span><br><span class="line"><span class="comment">        å‚æ•°3ï¼Œè¯¥é˜Ÿåˆ—æ˜¯å¦åªä¾›ä¸€ä¸ªæ¶ˆè´¹è€…è¿›è¡Œæ¶ˆè´¹ï¼Œæ˜¯å¦è¿›è¡Œæ¶ˆæ¯å…±äº«ï¼Œtrueå¯ä»¥å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹,falseï¼šåªèƒ½ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹</span></span><br><span class="line"><span class="comment">        å‚æ•°4ï¼Œæ˜¯å¦è‡ªåŠ¨åˆ é™¤ï¼Œæœ€åä¸€ä¸ªæ¶ˆè´¹è€…æ–­å¼€é“¾æ¥ä»¥åï¼Œè¯¥é˜Ÿæ˜¯å¦è‡ªåŠ¨åˆ é™¤ï¼Œtrueï¼Œè‡ªåŠ¨åˆ é™¤ï¼Œfalseä¸åˆ é™¤</span></span><br><span class="line"><span class="comment">        å‚æ•°5ï¼Œå…¶ä»–å‚æ•°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;x-max-priority&quot;</span>,<span class="number">10</span>);<span class="comment">//å®˜æ–¹å…è®¸æ˜¯0-255ä¹‹é—´ï¼Œæ­¤å¤„è®¾ç½®10ï¼Œå…è®¸ä¼˜åŒ–çº§èŒƒå›´ä¸º0-10 ä¸è¦è®¾ç½®è¿‡å¤§ï¼Œæµªè´¹CPUå’Œå†…å­˜</span></span><br><span class="line"></span><br><span class="line">        channel.queueDeclare(QUEUE_NAME,<span class="literal">true</span>,<span class="literal">false</span>,<span class="literal">false</span>,map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‘æ¶ˆæ¯</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;info&quot;</span> + i;<span class="comment">//åˆæ¬¡ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(i == <span class="number">5</span>)&#123;</span><br><span class="line">                AMQP.<span class="type">BasicProperties</span> <span class="variable">properties</span> <span class="operator">=</span></span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">AMQP</span>.BasicProperties().builder().priority(<span class="number">5</span>).build();</span><br><span class="line">                channel.basicPublish(<span class="string">&quot;&quot;</span>,QUEUE_NAME,properties,message.getBytes());</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                channel.basicPublish(<span class="string">&quot;&quot;</span>,QUEUE_NAME,<span class="literal">null</span>,message.getBytes());</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å‘é€ä¸€ä¸ªæ¶ˆè´¹</span></span><br><span class="line"><span class="comment">        å‚æ•°1ï¼Œå‘é€åˆ°å“ªä¸ªäº¤æ¢æœº</span></span><br><span class="line"><span class="comment">        å‚æ•°2.è·¯ç”±çš„keyå€¼æ˜¯å“ªä¸ªï¼Ÿ  æœ¬æ¬¡æ˜¯é˜Ÿåˆ—çš„åç§°</span></span><br><span class="line"><span class="comment">        å‚æ•°3ï¼Œå…¶ä»–å‚æ•°é…ç½®</span></span><br><span class="line"><span class="comment">        å‚æ•°4ï¼Œå‘é€æ¶ˆæ¯çš„æ¶ˆæ¯ä½“</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ¶ˆæ¯å‘é€æˆåŠŸ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Consumer</span> &#123;</span><br><span class="line">    <span class="comment">//é˜Ÿåˆ—çš„åç§°ï¼š</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  <span class="keyword">final</span> String QUEUE_NAME=<span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¥æ”¶æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºé“¾æ¥å·¥å‚</span></span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        factory.setHost(<span class="string">&quot;www.littlehei.fun&quot;</span>);</span><br><span class="line">        factory.setUsername(<span class="string">&quot;guest&quot;</span>);</span><br><span class="line">        factory.setPassword(<span class="string">&quot;guest&quot;</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span>  factory.newConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span>  connection.createChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å£°æ˜</span></span><br><span class="line">        <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumerTag, message)-&gt;&#123;</span><br><span class="line">            <span class="comment">//  String message = new String(&quot;è‡ªå·±æ‰‹åŠ¨å»åˆ›å»ºä¸€ä¸ªæ¶ˆæ¯ï¼Œä½†æ˜¯ä¸æ¨è&quot;);</span></span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(message.getBody()));</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å–æ¶ˆæ¶ˆæ¯æ—¶çš„å›è°ƒ</span></span><br><span class="line">        <span class="type">CancelCallback</span> <span class="variable">cancelCallback</span> <span class="operator">=</span> consumerTag -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ¶ˆæ¯æ¶ˆè´¹è¢«ä¸­æ–­&quot;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ¶ˆè´¹è€…æ¥æ”¶æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">        å‚æ•°1ï¼Œæ¶ˆè´¹å“ªä¸ªé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">        å‚æ•°2ï¼Œæ¶ˆè´¹æˆåŠŸä¹‹åæ˜¯å¦è¦è‡ªåŠ¨åº”ç­”ï¼Œtrueè¡¨ç¤ºè‡ªåŠ¨åº”ç­”ï¼Œfalseè¡¨ç¤ºä¸æ˜¯</span></span><br><span class="line"><span class="comment">        å‚æ•°3ï¼Œæ¶ˆè´¹è€…æœªæˆåŠŸæ¶ˆè´¹çš„å›è°ƒ</span></span><br><span class="line"><span class="comment">        å‚æ•°4ï¼Œæ¶ˆè´¹è€…å–å½•æ¶ˆè´¹çš„å›åˆ°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        channel.basicConsume(QUEUE_NAME,<span class="literal">true</span>,deliverCallback,cancelCallback);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>d.æ³¨æ„äº‹é¡¹</strong></p><p>è¦è®©é˜Ÿåˆ—å®ç°ä¼˜å…ˆçº§éœ€è¦åšçš„äº‹æƒ…æœ‰å¦‚ä¸‹äº‹æƒ…ï¼š</p><p>é˜Ÿåˆ—éœ€è¦è®¾ç½®ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œæ¶ˆæ¯éœ€è¦è®¾ç½®æ¶ˆæ¯çš„ä¼˜å…ˆçº§ï¼Œæ¶ˆè´¹è€…éœ€è¦ç­‰å¾…æ¶ˆæ¯å·²ç»å‘é€åˆ°é˜Ÿåˆ—ä¸­æ‰å»æ¶ˆè´¹ï¼Œå› ä¸ºè¿™æ ·æ‰æœ‰æœºä¼šå¯¹æ¶ˆæ¯è¿›è¡Œæ’åº</p><h3 id="æƒ°æ€§é˜Ÿåˆ—"><a href="#æƒ°æ€§é˜Ÿåˆ—" class="headerlink" title="æƒ°æ€§é˜Ÿåˆ—"></a>æƒ°æ€§é˜Ÿåˆ—</h3><p>RabbitMQä»3.6.0ç‰ˆæœ¬å¼€å§‹å¼•å…¥äº†æƒ°æ€§é˜Ÿåˆ—çš„æ¦‚å¿µã€‚æƒ°æ€§é˜Ÿåˆ—ä¼šå°½å¯èƒ½çš„å°†æ¶ˆæ¯å­˜å…¥ç£ç›˜ä¸­ï¼Œè€Œåœ¨æ¶ˆè´¹è€…æ¶ˆè´¹åˆ°ç›¸åº”çš„æ¶ˆæ¯æ—¶æ‰ä¼šè¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå®ƒçš„ä¸€ä¸ªé‡è¦çš„è®¾è®¡ç›®æ ‡æ˜¯èƒ½å¤Ÿæ”¯æŒæ›´é•¿çš„é˜Ÿåˆ—ï¼Œå³æ”¯æŒæ›´å¤šçš„æ¶ˆæ¯å­˜å‚¨ã€‚å½“æ¶ˆè´¹è€…ç”±äºå„ç§å„æ ·çš„åŸå› ï¼ˆæ¯”å¦‚æ¶ˆè´¹è€…ä¸‹çº¿ã€è‹¥æœºäº¦æˆ–è€…æ˜¯ç”±äºç»´æŠ¤è€Œå…³é—­ç­‰ï¼‰è€Œè‡´ä½¿é•¿æ—¶é—´å†…ä¸èƒ½æ¶ˆè´¹æ¶ˆæ¯é€ æˆå †ç§¯æ—¶ï¼Œæƒ°æ€§é˜Ÿåˆ—å°±å¾ˆæœ‰å¿…è¦äº†ã€‚<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€åˆ°RabbitMQçš„æ—¶å€™ï¼Œé˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ä¼šå°½å¯èƒ½çš„å­˜å‚¨åœ¨å†…å­˜ä¹‹ä¸­ï¼Œè¿™æ ·å¯ä»¥æ›´åŠ å¿«é€Ÿçš„å°†æ¶ˆæ¯å‘é€ç»™æ¶ˆè´¹è€…ã€‚å³ä½¿æ˜¯æŒä¹…åŒ–çš„æ¶ˆæ¯ï¼Œåœ¨è¢«å†™å…¥ç£ç›˜çš„åŒæ—¶ä¹Ÿä¼šåœ¨å†…å­˜ä¸­é©»ç•™ä¸€ä»½å¤‡ä»½ã€‚å½“RabbitMQéœ€è¦é‡Šæ”¾å†…å­˜çš„æ—¶å€™ï¼Œä¼šå°†å†…å­˜ä¸­çš„æ¶ˆæ¯æ¢é¡µè‡³ç£ç›˜ä¸­ï¼Œè¿™ä¸ªæ“ä½œä¼šè€—è´¹è¾ƒé•¿çš„æ—¶é—´ï¼Œä¹Ÿä¼šé˜»å¡é˜Ÿåˆ—çš„æ“ä½œï¼Œè¿›è€Œæ— æ³•æ¥æ”¶æ–°çš„æ¶ˆæ¯ã€‚è™½ç„¶RabbitMQçš„å¼€å‘è€…ä»¬ä¸€ç›´åœ¨å‡çº§ç›¸å…³çš„ç®—æ³•ï¼Œä½†æ˜¯æ•ˆæœå§‹ç»ˆä¸å¤ªç†æƒ³ï¼Œå°¤å…¶æ˜¯åœ¨æ¶ˆæ¯é‡ç‰¹åˆ«å¤§çš„æ—¶å€™ã€‚+</p><p><img src="1667797292928.png" alt="1667797292928"></p><p>å½“æ¶ˆæ¯å¤§é‡è¿‡æ¥ï¼Œæˆ‘ä»¬çŸ­æ—¶é—´å¤„ç†ä¸è¿‡æ¥ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬é‡‡ç”¨æƒ°æ€§é˜Ÿåˆ—äº†</p><p>é˜Ÿåˆ—å…·å¤‡ä¸¤ç§æ¨¡å¼ï¼šdefault å’Œlazyã€‚é»˜è®¤çš„ä¸ºdefaultæ¨¡å¼ï¼Œåœ¨3.6.0ä¹‹å‰çš„ç‰ˆæœ¬æ— éœ€åšä»»ä½•å˜æ›´ã€‚lazyæ¨¡å¼å³ä¸ºæƒ°æ€§é˜Ÿåˆ—çš„æ¨¡å¼ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨channel.queueDeclareæ–¹æ³•çš„æ—¶å€™åœ¨å‚æ•°ä¸­è®¾ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Policyçš„æ–¹å¼è®¾ç½®ï¼Œå¦‚æœä¸€ä¸ªé˜Ÿåˆ—åŒæ—¶ä½¿ç”¨è¿™ä¸¤ç§æ–¹å¼è®¾ç½®çš„è¯ï¼Œé‚£ä¹ˆPolicyçš„æ–¹å¼å…·å¤‡æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚<br><strong>å¦‚æœè¦é€šè¿‡å£°æ˜çš„æ–¹å¼æ”¹å˜å·²æœ‰é˜Ÿåˆ—çš„æ¨¡å¼çš„è¯ï¼Œé‚£ä¹ˆåªèƒ½å…ˆåˆ é™¤é˜Ÿåˆ—ï¼Œç„¶åå†é‡æ–°å£°æ˜ä¸€ä¸ªæ–°çš„ã€‚</strong><br><strong>åœ¨é˜Ÿåˆ—å£°æ˜çš„æ—¶å€™å¯ä»¥é€šè¿‡â€œx-queue-modeâ€å‚æ•°æ¥è®¾ç½®é˜Ÿåˆ—çš„æ¨¡å¼ï¼Œå–å€¼ä¸ºâ€œdefaultâ€™å’Œlazyâ€ã€‚</strong>ä¸‹é¢ç¤ºä¾‹ä¸­æ¼”ç¤ºäº†ä¸€ä¸ªæƒ°æ€§é˜Ÿåˆ—çš„å£°æ˜ç»†èŠ‚ï¼š</p><blockquote><p>Map<Stringï¼ŒObject> args =new HashMap<Stringï¼ŒObject>ï¼ˆï¼‰ï¼›</p><p>args.putï¼ˆâ€x-queue-modeâ€ï¼Œâ€lazyâ€ï¼‰ï¼›</p><p>channel.queueDeclareï¼ˆâ€myqueueâ€ï¼Œfalseï¼Œfalseï¼Œfalseï¼Œargsï¼‰ï¼›</p></blockquote><p><strong>åœ¨å‘é€1ç™¾ä¸‡æ¡æ¶ˆæ¯ï¼Œæ¯æ¡æ¶ˆæ¯å¤§æ¦‚å 1KBçš„æƒ…å†µä¸‹ï¼Œæ™®é€šé˜Ÿåˆ—å ç”¨å†…å­˜æ˜¯1.2GBï¼Œè€Œæƒ°æ€§é˜Ÿåˆ—ä»…ä»…å ç”¨1.5MB</strong>ã€‚</p><h1 id="é›†ç¾¤éƒ¨åˆ†ï¼š"><a href="#é›†ç¾¤éƒ¨åˆ†ï¼š" class="headerlink" title="é›†ç¾¤éƒ¨åˆ†ï¼š"></a>é›†ç¾¤éƒ¨åˆ†ï¼š</h1><h2 id="clustering"><a href="#clustering" class="headerlink" title="clustering"></a><strong>clustering</strong></h2><h2 id="æ­å»ºé›†ç¾¤"><a href="#æ­å»ºé›†ç¾¤" class="headerlink" title="æ­å»ºé›†ç¾¤"></a>æ­å»ºé›†ç¾¤</h2><p>å¦‚æœæ˜¯æœ¬åœ°è™šæ‹Ÿæœºçš„è¯ï¼Œæˆ‘ä»¬å°±å°†å‡ å°è™šæ‹Ÿæœºè¿›è¡Œå…‹éš†ï¼Œé€ æˆé›†ç¾¤ç¯å¢ƒã€‚</p><p>ç„¶åé€‰æ‹©ä¸€å°æœåŠ¡å™¨ä½œä¸ºé›†ç¾¤ï¼Œå…¶ä»–ä¸¤å°æœåŠ¡å™¨åŠ å…¥è¿›å»ã€‚</p><ol><li><p>ä¿®æ”¹3å°æœºå™¨çš„ä¸»æœºåç§°</p><p><code>vim /etc/hostname</code></p><p><code>vim /etc/host</code>è¿›å…¥åæ›´è¯¥å°±è¡Œ</p><p>â€‹    ipåœ°å€ node1</p><p>â€‹    ipåœ°å€ node2</p><p>â€‹    ipåœ°å€ node3</p></li></ol><ol><li><p>é…ç½®å„ä¸ªèŠ‚ç‚¹çš„hostæ–‡ä»¶ï¼Œè®©å„ä¸ªèŠ‚ç‚¹éƒ½èƒ½ç›¸äº’è¯†åˆ«å¯¹æ–¹ã€‚</p></li><li><p>ç¡®ä¿å„ä¸ªèŠ‚ç‚¹çš„cookieæ–‡ä»¶ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªå€¼ã€‚</p><p><code>scp/var/lib/rabbitmq/.erlang.cookie root@node2:/var/lib/rabbitmg/.erlang.cookie</code></p><p><code>scp/var/lib/rabbitmq/.erlang.cookie root@node3:/var/lib/rabbitmg/.erlang.cookie</code></p></li></ol><ol><li><p>å¯åŠ¨RabbitMQæœåŠ¡ï¼Œé¡ºå¸¦å¯åŠ¨Erlangè™šæ‹Ÿæœºå’ŒrabbitMQåº”ç”¨æœåŠ¡ï¼ˆåœ¨ä¸‰å°èŠ‚ç‚¹ä¸Šåˆ†å¸ƒæ‰§è¡Œå‘½ä»¤ï¼‰</p><p><code>rabbitmq-server-detached</code></p></li><li><p>åœ¨èŠ‚ç‚¹2æ‰§è¡Œ</p><p>rabbitmqctl stop_app</p><p>ï¼ˆrabbitmqctl stopä¼šå°†Erlangè™šæ‹Ÿæœºå…³é—­ï¼Œrabbitmqct stop_app åªå…³é—­RabbitMQæœåŠ¡ï¼‰</p><p>rabbitmqctl reset</p><p>rabbitmqctl join_cluster rabbit@node1</p><p>rabbitmqctl start_appï¼ˆåªå¯åŠ¨åº”ç”¨æœåŠ¡ï¼‰</p></li><li><p>åœ¨èŠ‚ç‚¹3æ‰§è¡Œ</p><p>rabbitmqctl stop_app</p><p>rabbitmqctl reset</p><p>rabbitmqctl join_cluster rabbit@node2</p><p>rabbitmqctl start_appï¼ˆåªå¯åŠ¨åº”ç”¨æœåŠ¡)</p></li><li><p>é›†ç¾¤çŠ¶æ€</p><p>rabbitmqctl cluster_status</p></li><li><p>éœ€è¦é‡æ–°è®¾ç½®ç”¨æˆ·è§’è‰²</p><p>åˆ›å»ºè´¦å·</p><p>â€‹    rabbitmqctl add_user admin 123</p><p>è®¾ç½®ç”¨æˆ·è§’è‰²</p><p>â€‹    rabbitmqctl set_user_tags admin adminstractor</p><p>è®¾ç½®ç”¨æˆ·æƒé™</p><p>â€‹    <code>rabbitmqctl set_permissions -p &quot;/&quot; admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</code></p><p>æ­¤æ—¶å¦‚å›¾ï¼Œè¡¨ç¤ºå­˜åœ¨é›†ç¾¤ï¼›</p></li><li><p>è§£é™¤é›†ç¾¤èŠ‚ç‚¹ï¼ˆnode2ï¼Œå’Œnode3åˆ†åˆ«æ‰§è¡Œï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl stop_app</span><br><span class="line"></span><br><span class="line">rabbitmqctl reset</span><br><span class="line"></span><br><span class="line">rabbitmqctl start_app</span><br><span class="line"></span><br><span class="line">rabbitmqctl cluster_status</span><br><span class="line"></span><br><span class="line">rabbitmqetl forget_cluster_node rabbit@node2ï¼ˆnode1æœºå™¨ä¸Šæ‰§è¡Œï¼‰</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><h2 id="é•œåƒé˜Ÿåˆ—"><a href="#é•œåƒé˜Ÿåˆ—" class="headerlink" title="é•œåƒé˜Ÿåˆ—"></a>é•œåƒé˜Ÿåˆ—</h2><p>å¦‚æœRabbitMQé›†ç¾¤ä¸­åªæœ‰ä¸€ä¸ªBroker èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¯¥èŠ‚ç‚¹çš„å¤±æ•ˆå°†å¯¼è‡´æ•´ä½“æœåŠ¡çš„ä¸´æ—¶æ€§ä¸å¯ç”¨ï¼Œå¹¶ä¸”ä¹Ÿå¯èƒ½ä¼šå¯¼è‡´æ¶ˆæ¯çš„ä¸¢å¤±ã€‚å¯ä»¥å°†æ‰€æœ‰æ¶ˆæ¯éƒ½è®¾ç½®ä¸ºæŒä¹…åŒ–ï¼Œå¹¶ä¸”å¯¹åº”é˜Ÿåˆ—çš„durableå±æ€§ä¹Ÿè®¾ç½®ä¸ºtrueï¼Œä½†æ˜¯è¿™æ ·ä»ç„¶æ— æ³•é¿å…ç”±äºç¼“å­˜å¯¼è‡´çš„é—®é¢˜ï¼šå› ä¸ºæ¶ˆæ¯åœ¨å‘é€ä¹‹åå’Œè¢«å†™å…¥ç£ç›˜äº•æ‰§è¡Œåˆ·ç›˜åŠ¨ä½œä¹‹é—´å­˜åœ¨ä¸€ä¸ªçŸ­æš‚å´ä¼šäº§ç”Ÿé—®é¢˜çš„æ—¶é—´çª—ï¼Œé€šè¿‡publisherconfirmæœºåˆ¶èƒ½å¤Ÿç¡®ä¿å®¢æˆ·ç«¯çŸ¥é“å“ªäº›æ¶ˆæ¯å·±ç»å­˜å…¥ç£ç›˜ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œä¸€èˆ¬ä¸å¸Œæœ›é‡åˆ°å› å•ç‚¹æ•…éšœå¯¼è‡´çš„æœåŠ¡ä¸å¯ç”¨ã€‚<br>å¼•å…¥é•œåƒé˜Ÿåˆ—ï¼ˆMiror Queueï¼‰çš„æœºåˆ¶ï¼Œå¯ä»¥å°†é˜Ÿåˆ—é•œåƒåˆ°é›†ç¾¤ä¸­çš„å…¶ä»–BrokerèŠ‚ç‚¹ä¹‹ä¸Šï¼Œå¦‚æœé›†ç¾¤ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹å¤±æ•ˆäº†ï¼Œé˜Ÿåˆ—èƒ½è‡ªåŠ¨åœ°åˆ‡æ¢åˆ°é•œåƒä¸­çš„å¦ä¸€ä¸ªèŠ‚ç‚¹ä¸Šä»¥ä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ã€‚</p><p><strong>æ­å»ºæ­¥éª¤</strong></p><ol><li><p>å¯åŠ¨ä¸‰å°é›†ç¾¤èŠ‚ç‚¹</p></li><li><p>éšä¾¿æ‰¾ä¸€ä¸ªèŠ‚ç‚¹æ·»åŠ policy</p></li></ol><p>å•ç‚¹æ— æ³•è¿æ¥</p><p>é‡‡ç”¨è´Ÿè½½å‡è¡¡ï¼ŒHaproxy + keepalive å®ç°é«˜å¯ç”¨è´Ÿè½½å‡è¡¡ã€‚</p><h2 id="FederationExchangeï¼ˆè”é‚¦äº¤æ¢æœºï¼‰"><a href="#FederationExchangeï¼ˆè”é‚¦äº¤æ¢æœºï¼‰" class="headerlink" title="FederationExchangeï¼ˆè”é‚¦äº¤æ¢æœºï¼‰"></a>FederationExchangeï¼ˆè”é‚¦äº¤æ¢æœºï¼‰</h2><p>ï¼ˆbrokeråŒ—äº¬ï¼‰ï¼Œï¼ˆbroker æ·±åœ³ï¼‰å½¼æ­¤ä¹‹é—´ç›¸è·ç”šè¿œï¼Œç½‘ç»œå»¶è¿Ÿæ˜¯ä¸€ä¸ªä¸å¾—ä¸é¢å¯¹çš„é—®é¢˜ã€‚æœ‰ä¸€ä¸ªåœ¨åŒ—äº¬çš„ä¸šåŠ¡ï¼ˆClientåŒ—äº¬ï¼‰éœ€è¦è¿æ¥ï¼ˆbrokeråŒ—äº¬ï¼‰ï¼Œå‘å…¶ä¸­çš„äº¤æ¢å™¨exchangeAå‘é€æ¶ˆæ¯ï¼Œæ­¤æ—¶çš„ç½‘ç»œå»¶è¿Ÿå¾ˆå°ï¼Œï¼ˆClientåŒ—äº¬ï¼‰å¯ä»¥è¿…é€Ÿå°†æ¶ˆæ¯å‘é€è‡³exchangeAä¸­ï¼Œå°±ç®—åœ¨å¼€å¯äº†publisherconfirmæœºåˆ¶æˆ–è€…äº‹åŠ¡æœºåˆ¶çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥è¿…é€Ÿæ”¶åˆ°ç¡®è®¤ä¿¡æ¯ã€‚æ­¤æ—¶åˆæœ‰ä¸ªåœ¨æ·±åœ³çš„ä¸šåŠ¡ï¼ˆClient æ·±åœ³ï¼‰éœ€è¦å‘ exchangeAå‘é€æ¶ˆæ¯ï¼Œé‚£ä¹ˆï¼ˆClientæ·±åœ³ï¼‰ï¼ˆbrokeråŒ—äº¬ï¼‰ä¹‹é—´æœ‰å¾ˆå¤§çš„ç½‘ç»œå»¶è¿Ÿï¼Œï¼ˆClient æ·±åœ³ï¼‰å°†å‘é€æ¶ˆæ¯è‡³exchangeAä¼šç»å†ä¸€å®šçš„å»¶è¿Ÿï¼Œå°¤å…¶æ˜¯åœ¨å¼€å¯äº†publisherconfirmæœºåˆ¶æˆ–è€…äº‹åŠ¡æœºåˆ¶çš„æƒ…å†µä¸‹ï¼Œï¼ˆClientæ·±åœ³ï¼‰ä¼šç­‰å¾…å¾ˆé•¿çš„å»¶è¿Ÿæ—¶é—´æ¥æ¥æ”¶ï¼ˆbrokeråŒ—äº¬ï¼‰çš„ç¡®è®¤ä¿¡æ¯ï¼Œè¿›è€Œå¿…ç„¶é€ æˆè¿™æ¡å‘é€çº¿ç¨‹çš„æ€§èƒ½é™ä½ï¼Œç”šè‡³é€ æˆä¸€å®šç¨‹åº¦ä¸Šçš„é˜»å¡ã€‚</p><p>å°†ä¸šåŠ¡ï¼ˆClientæ·±åœ³ï¼‰éƒ¨ç½²åˆ°åŒ—äº¬çš„æœºæˆ¿å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å¦‚æœï¼ˆClientæ·±åœ³ï¼‰è°ƒç”¨çš„å¦äº›æœåŠ¡éƒ½éƒ¨ç½²åœ¨æ·±åœ³ï¼Œé‚£ä¹ˆåˆä¼šå¼•å‘æ–°çš„æ—¶å»¶é—®é¢˜ï¼Œæ€»ä¸è§å¾—å°†æ‰€æœ‰ä¸šåŠ¡å…¨éƒ¨éƒ¨ç½²åœ¨ä¸€ä¸ªæœºæˆ¿ï¼Œé‚£ä¹ˆå®¹ç¾åˆä½•ä»¥å®ç°ï¼Ÿ<br>è¿™é‡Œä½¿ç”¨Federation æ’ä»¶å°±å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜.</p><p>ç”±äºä¸¤ä¸ªåœ°åŒºçš„æœåŠ¡å™¨æ¯”è¾ƒè¿œï¼Œè¿™ä¸ªæ—¶å€™å°±å­˜åœ¨ä¸€ç§æœåŠ¡å»¶è¿Ÿæƒ…å†µï¼Œæˆ‘ä»¬çš„federationäº¤æ¢æœºå°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚</p><p>æ­å»ºæ­¥éª¤ï¼š</p><ol><li><p>éœ€è¦ä¿è¯æ¯å°èŠ‚ç‚¹å•ç‹¬è¿è¡Œ</p></li><li><p>åœ¨æ¯å°æœºå™¨ä¸Šå¼€å¯federationç›¸å…³æ’ä»¶</p><p><code>rabbitmq-plugins enable rabbitmq_federation</code></p><p><code>rabbitmq-plugins enable rabbitmq federation_management</code></p><p>æ¯å°æœåŠ¡å™¨ä¸Šéƒ½è£…ä¸€ä¸‹ã€‚</p><p>ä¸¤ä¸ªæŒ‡ä»¤éƒ½éœ€è¦å®‰è£…ã€‚</p></li><li><p>åŸç†å›¾ï¼šï¼ˆé«˜å±±æµæ°´ï¼Œåªèƒ½ä»ä¸Šæ¸¸æµå‘ä¸‹æ¸¸ï¼‰ã€‚</p><p>æ³¨æ„çš„æ˜¯ï¼Œå¿…é¡»ä»åˆ›å»ºå¥½ä¸‹æ¸¸èŠ‚ç‚¹çš„äº¤æ¢æœºï¼Œæ‰èƒ½å¤Ÿå°†æ¶ˆæ¯ä»ä¸Šæ¸¸ä¼ åˆ°ä¸‹æ¸¸ã€‚ä¸Šæ¸¸çš„æ¶ˆæ¯åœ¨ä¸‹æ¸¸ä¸èƒ½æ¥æ”¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¶ˆæ¯å°±æ— æ³•ä¼ é€’åˆ°ä¸‹æ¸¸ã€‚</p></li></ol><ol><li>åœ¨downstean(node2)é…ç½®upstream(node1);</li></ol><ol><li>æ·»åŠ è§„åˆ™</li></ol><h3 id="è”é‚¦é˜Ÿåˆ—"><a href="#è”é‚¦é˜Ÿåˆ—" class="headerlink" title="è”é‚¦é˜Ÿåˆ—"></a>è”é‚¦é˜Ÿåˆ—</h3><h2 id="Shovel"><a href="#Shovel" class="headerlink" title="Shovel"></a>Shovel</h2><p>ä½¿ç”¨å®ƒçš„åŸå› <br>Federation å…·å¤‡çš„æ•°æ®è½¬å‘åŠŸèƒ½ç±»ä¼¼ï¼ŒShovelå¤Ÿå¯é ã€æŒç»­åœ°ä»ä¸€ä¸ªBrokerä¸­çš„é˜Ÿåˆ—ï¼ˆä½œä¸ºæºç«¯ï¼Œå³sourceï¼‰æ‹‰å–æ•°æ®å¹¶è½¬å‘è‡³å¦ä¸€ä¸ªBrokerä¸­çš„äº¤æ¢å™¨ï¼ˆä½œä¸ºç›®çš„ç«¯ï¼Œå³destinationï¼‰ã€‚ä½œä¸ºæºç«¯çš„é˜Ÿåˆ—å’Œä½œä¸ºç›®çš„ç«¯çš„äº¤æ¢å™¨å¯ä»¥åŒæ—¶ä½äºåŒä¸€ä¸ªBrokerï¼Œä¹Ÿå¯ä»¥ä½äºä¸åŒçš„Brokerä¸Šã€‚Shovelå¯ä»¥ç¿»è¯‘ä¸ºâ€œé“²å­â€<br>æ˜¯ä¸€ç§æ¯”è¾ƒå½¢è±¡çš„æ¯”å–»ï¼Œè¿™ä¸ªâ€é“²å­â€å¯ä»¥å°†æ¶ˆæ¯ä»ä¸€æ–¹â€œé“²å­â€å¦ä¸€æ–¹ã€‚Shovelè¡Œä¸ºå°±åƒä¼˜ç§€çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºèƒ½å¤Ÿè´Ÿè´£è¿æ¥æºå’Œç›®çš„åœ°ã€è´Ÿè´£æ¶ˆæ¯çš„è¯»å†™åŠè´Ÿè´£è¿æ¥å¤±è´¥é—®é¢˜çš„å¤„ç†ã€‚<br>æ­å»ºæ­¥éª¤<br>1.å¼€å¯æ’ä»¶ï¼ˆéœ€è¦çš„æœºå™¨éƒ½å¼€å¯ï¼‰</p><p><code>rabbitmq-plugins enable rabbitmq_shovel</code></p><p><code>rabbitmq-plugins enable rabbitmq_shovel_management</code></p>]]></content>
    
    
    <summary type="html">æœ¬æ–‡ä¸»è¦RabbitMQçš„è®°å½•</summary>
    
    
    
    <category term="æ¶ˆæ¯é˜Ÿåˆ—" scheme="https://www.blog.909111.xyz/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"/>
    
    
    <category term="RabbitMQ" scheme="https://www.blog.909111.xyz/tags/RabbitMQ/"/>
    
  </entry>
  
  <entry>
    <title>MySQLå­¦ä¹ </title>
    <link href="https://www.blog.909111.xyz/posts/c6fb831a.html"/>
    <id>https://www.blog.909111.xyz/posts/c6fb831a.html</id>
    <published>2023-11-09T02:50:23.336Z</published>
    <updated>2024-04-22T08:16:00.160Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MySqlåˆæ­¥å­¦ä¹ "><a href="#MySqlåˆæ­¥å­¦ä¹ " class="headerlink" title="MySqlåˆæ­¥å­¦ä¹ "></a>MySqlåˆæ­¥å­¦ä¹ </h1><p>å®‰è£…mysql ã€‚ã€‚ã€‚è‡ªè¡Œç™¾åº¦</p><h3 id="é“¾æ¥æ•°æ®åº“"><a href="#é“¾æ¥æ•°æ®åº“" class="headerlink" title="é“¾æ¥æ•°æ®åº“"></a>é“¾æ¥æ•°æ®åº“</h3><p>é€šè¿‡å‘½ä»¤è¡Œï¼ï¼ï¼</p><p><code>mysql -uç”¨æˆ·å -på¯†ç </code>   é“¾æ¥æ•°æ®åº“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-- æ›´æ–°æ•°æ®åº“å¯†ç ï¼ˆé€‚åˆå°ç™½å¿˜è®°å¯†ç ï¼‰</span><br><span class="line">update mysql.user set authentication_string=password(&#x27;a&#x27;) where user= &#x27;root&#x27; and Host=&#x27;localhost&#x27;;</span><br><span class="line"></span><br><span class="line">flush privileges ; -- åˆ·æ–°æƒé™</span><br><span class="line"></span><br><span class="line">-- --------------------------------------</span><br><span class="line">-- æŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®åº“</span><br><span class="line">show databases; </span><br><span class="line">-- ä½¿ç”¨æŸä¸ªæ•°æ®åº“</span><br><span class="line">user æ•°æ®åº“å;</span><br><span class="line"></span><br><span class="line">-- å±•ç°æ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨</span><br><span class="line">show tables;-- æŸ¥çœ‹æ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨</span><br><span class="line">-- æŸ¥çœ‹è¡¨ä¸­çš„æ•°æ®</span><br><span class="line">describe è¡¨å;</span><br><span class="line">-- åˆ›å»ºä¸€ä¸ªæ•°æ®åº“</span><br><span class="line">create database æ•°æ®åº“å;</span><br><span class="line">use æ•°æ®åº“å;</span><br><span class="line"></span><br><span class="line">-- é€€å‡ºæ•°æ®åº“</span><br><span class="line">exit ;</span><br></pre></td></tr></table></figure><p>æ•°æ®åº“è¯­è¨€    CURDä¸šåŠ¡ç¨‹åºå‘˜ï¼ˆç®€å•çš„å¢åˆ æ”¹æŸ¥ï¼‰ï¼ŒAPIï¼Œ</p><h3 id="DDL-æ•°æ®åº“å®šä¹‰è¯­è¨€-ï¼š"><a href="#DDL-æ•°æ®åº“å®šä¹‰è¯­è¨€-ï¼š" class="headerlink" title="DDL(æ•°æ®åº“å®šä¹‰è¯­è¨€)ï¼š"></a>DDL(æ•°æ®åº“å®šä¹‰è¯­è¨€)ï¼š</h3><p><strong>æ˜¯å¯¹æ•°æ®åº“å†…éƒ¨çš„å¯¹è±¡è¿›è¡Œåˆ›å»ºï¼Œåˆ é™¤ï¼Œä¿®æ”¹ç­‰çš„æ“ä½œè¯­è¨€ã€‚å®ƒå’ŒDMLè¯­è¨€æœ€å¤§çš„åŒºåˆ«æ˜¯DMLåªæ˜¯å¯¹è¡¨å†…éƒ¨æ•°æ®çš„æ“ä½œï¼Œè€Œä¸æ¶‰åŠåˆ°è¡¨çš„å®šä¹‰ï¼Œç»“æ„çš„ä¿®æ”¹ï¼Œæ›´ä¸ä¼šæ¶‰åŠåˆ°å…¶å®ƒå¯¹è±¡ã€‚</strong> </p><ol><li><p>åˆ›å»ºæ•°æ®åº“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create database if not exists &lt;name&gt; ; -- åˆ›å»ºä¸€ä¸ªæ•°æ®åº“</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><ol><li><p>åˆ é™¤æ•°æ®åº“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database if not exists &lt;name&gt; ; åˆ é™¤ä¸€ä¸ªæ•°æ®åº“</span><br></pre></td></tr></table></figure></li></ol><ol><li>ä½¿ç”¨æ•°æ®åº“</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use &lt;name&gt; ; -- ä½¿ç”¨æ•°æ®åº“</span><br></pre></td></tr></table></figure><ol><li><p>æŸ¥çœ‹æ•°æ®åº“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases; -- æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“</span><br></pre></td></tr></table></figure></li></ol><h4 id="æ•°æ®åº“çš„æ•°æ®ç±»å‹"><a href="#æ•°æ®åº“çš„æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®åº“çš„æ•°æ®ç±»å‹"></a>æ•°æ®åº“çš„æ•°æ®ç±»å‹</h4><blockquote><p>æ•°å€¼</p></blockquote><div class="table-container"><table><thead><tr><th>tinyint</th><th>ååˆ†å°çš„æ•°æ®</th><th>1ä¸ªå­—èŠ‚</th></tr></thead><tbody><tr><td>smallint</td><td>æ¯”è¾ƒå°çš„æ•°æ®</td><td>2ä¸ªå­—èŠ‚</td></tr><tr><td>mediumint</td><td>ä¸­ç­‰å¤§å°çš„æ•°æ®</td><td>3ä¸ªå­—èŠ‚</td></tr><tr><td>int</td><td>æ ‡å‡†çš„æ•´æ•°</td><td>4ä¸ªå­—èŠ‚</td></tr><tr><td>bigint</td><td>è¾ƒå¤§çš„æ•°æ®</td><td>8ä¸ªå­—èŠ‚</td></tr><tr><td>float</td><td>å•ç²¾åº¦ï¼ˆæµ®ç‚¹æ€§ï¼‰</td><td>4ä¸ªå­—èŠ‚</td></tr><tr><td>double</td><td>åŒç²¾åº¦</td><td>8ä¸ªå­—èŠ‚</td></tr><tr><td>decimal</td><td>å­—ç¬¦ä¸²å½¢å¼çš„æµ®ç‚¹æ•°</td><td>é‡‘èè®¡ç®—çš„æ—¶å€™ä¸€èˆ¬ä½¿ç”¨</td></tr></tbody></table></div><blockquote><p>å­—ç¬¦ä¸²</p></blockquote><div class="table-container"><table><thead><tr><th><strong>char</strong></th><th><strong>å­—ç¬¦ä¸²å›ºå®šå¤§å°</strong></th><th><strong>0-255</strong></th></tr></thead><tbody><tr><td>varchar :1st_place_medal:</td><td>å¯å˜å­—ç¬¦ä¸²</td><td>0-65535</td></tr><tr><td>tinytext</td><td>å¾®å‹æ–‡æœ¬</td><td>2^8 -1</td></tr><tr><td>text :2nd_place_medal:</td><td>æ–‡æœ¬ä¸²</td><td>2^16-1</td></tr></tbody></table></div><blockquote><p>æ—¶é—´æ—¥æœŸ</p></blockquote><div class="table-container"><table><thead><tr><th>date</th><th>YYYY-MM-DD</th><th>æ—¥æœŸæ ¼å¼</th></tr></thead><tbody><tr><td>time</td><td>HH:mm:ss</td><td>æ—¶åŒºæ ¼å¼</td></tr><tr><td>datetime</td><td>YYYY-MM-DD HH:mm:ss</td><td>æœ€é•¿ç”¨çš„æ—¶é—´æ ¼å¼</td></tr><tr><td>timestamp</td><td>æ—¶é—´æˆ³ï¼Œ1970.1.1</td><td>ä»1970.1.1åˆ°ç°åœ¨çš„æ¯«ç§’æ•°ï¼ä¹Ÿæ¯”è¾ƒå¸¸ç”¨</td></tr><tr><td>year</td><td>å¹´ä»½è¡¨ç¤º</td></tr></tbody></table></div><blockquote><p>null</p></blockquote><p>æ²¡æœ‰å€¼ï¼Œæ³¨æ„ï¼Œä¸è¦ä½¿ç”¨nullè¿›è¡Œè¿ç®—ï¼Œç»“æœè¿ç®—ä¸ºnull.</p><h4 id="æ•°æ®åº“çš„å­æ®µå±æ€§ï¼š"><a href="#æ•°æ®åº“çš„å­æ®µå±æ€§ï¼š" class="headerlink" title="æ•°æ®åº“çš„å­æ®µå±æ€§ï¼š"></a>æ•°æ®åº“çš„å­æ®µå±æ€§ï¼š</h4><p><strong>Unsignedï¼š</strong></p><ul><li>æ— ç¬¦å·çš„æ•´æ•°</li><li>å£°æ˜äº†è¯¥åˆ—ä¸èƒ½å£°æ˜ä¸ºè´Ÿæ•°</li></ul><p><strong>zerofillï¼š</strong></p><ul><li>0å¡«å……çš„</li><li>ä¸è¶³çš„ä½æ•°ï¼Œç”¨0æ¥è¡¥å……,int(3)ï¼Œ 5  â€”-  005</li></ul><p><strong>è‡ªå¢</strong></p><ul><li>é€šå¸¸ç†è§£ä¸ºè‡ªå¢ï¼Œè‡ªåŠ¨åœ¨ä¸Šä¸€æ¡è®°å½•çš„åŸºç¡€ä¹‹ä¸Š+1(é»˜è®¤)ã€‚</li><li>é€šå¸¸ç”¨æ¥è®¾è®¡å”¯ä¸€çš„ä¸»é”®â€” index,å¿…é¡»æ˜¯æ•´æ•°ç±»å‹ã€‚</li><li>å¯ä»¥è‡ªå®šä¹‰è®¾è®¡ä¸»é”®è‡ªå¢çš„èµ·å§‹å€¼å’Œæ­¥é•¿</li></ul><p><strong>éç©º null  not  null:</strong></p><ul><li><p>å‡è®¾è®¾ç½®ä¸ºnot null å¦‚æœä¸ç»™ä»–èµ‹å€¼å°±ä¼šæŠ¥é”™</p></li><li><p>null å¦‚æœä¸å¡«å†™å€¼ï¼Œè¿™ä¸ªå€¼å°±ä¼šè‡ªåŠ¨å¡«å……ä¸ºç©ºå€¼ã€‚</p></li></ul><p><strong>é»˜è®¤</strong></p><p>è®¾ç½®é»˜è®¤çš„å€¼</p><p>å¦‚æœä¸ç»™ä»–è®¾ç½®å€¼ï¼Œä»–å°±ä¼šé»˜è®¤ä¸ºæˆ‘ä»¬è®¾ç½®çš„å¡«å……å€¼</p><p><strong>ä¸€èˆ¬åˆ›å»ºè¡¨æ ¼çš„æ—¶å€™æˆ‘ä»¬å¿…é¡»åˆ›å»ºçš„å­˜åœ¨çš„5ä¸ªå­—æ®µ</strong></p><blockquote><p>id  ä¸»é”®</p><p>version  ä¹è§‚é”</p><p>is_delete     ä¼ªåˆ é™¤ æ•°æ®æ— ä»·å‡åˆ é™¤ä¿æ•°æ®</p><p>gmt_create  åˆ›å»ºæ—¶é—´</p><p>gmt_update  åˆ é™¤æ—¶é—´</p></blockquote><p><strong>åˆ›å»ºè¡¨</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- åˆ›å»ºè¡¨æ ¼ï¼Œä¸€èˆ¬è¡¨é¢æˆ‘ä»¬ä½¿ç”¨``è¿›è¡Œæ ‡è®°</span><br><span class="line">-- æ³¨æ„è¡¨ä¸­å­—ç¬¦ä¸²çš„ä½¿ç”¨ä¸€èˆ¬æ˜¯å•å¼•å·æˆ–è€…åŒå¼•å·</span><br><span class="line">-- æ‰€æœ‰çš„è¯­å¥åæ·»åŠ ï¼Œæœ€åä¸€ä¸ªä¸è¦åŠ </span><br><span class="line"></span><br><span class="line">create table if not exists test1(</span><br><span class="line">    -- id åˆ—å  int æ•°æ®ç±»å‹  primary key ä¸»é”® not null ä¸ä¸ºç©º auto_increment è‡ªå¢   comment &quot;&quot; åˆ«å</span><br><span class="line">id  int  primary key  not null auto_increment comment &#x27;ä¸»é”®&#x27;,</span><br><span class="line">    -- default &#x27;&#x27; é»˜è®¤çš„</span><br><span class="line">    name varchar(10) not null default &#x27;åŒ¿å&#x27; comment &#x27;å§“å&#x27;ï¼Œ</span><br><span class="line">    </span><br><span class="line">    birthday datetime default null comment &#x27;ç”Ÿæ—¥&#x27;</span><br><span class="line"></span><br><span class="line">)Engine=innodb default charset=utf8;</span><br></pre></td></tr></table></figure><p>æ ¼å¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table if not exists(</span><br><span class="line">`å­—æ®µå` åˆ—ç±»å‹ [å±æ€§] [ç´¢å¼•] [æ³¨é‡Š],</span><br><span class="line">    `å­—æ®µå` åˆ—ç±»å‹ [å±æ€§] [ç´¢å¼•] [æ³¨é‡Š],</span><br><span class="line">    `å­—æ®µå` åˆ—ç±»å‹ [å±æ€§] [ç´¢å¼•] [æ³¨é‡Š],</span><br><span class="line">    .....</span><br><span class="line">    `å­—æ®µå` åˆ—ç±»å‹ [å±æ€§] [ç´¢å¼•] [æ³¨é‡Š]</span><br><span class="line">)[è¡¨ç±»å‹][å­—ç¬¦ç¼–ç é›†][æ³¨é‡Š]</span><br><span class="line"></span><br><span class="line">show create database [æ•°æ®åº“å]  -- æŸ¥çœ‹åˆ›å»ºæ•°æ®åº“çš„è¯­å¥</span><br><span class="line">show create table [æ•°æ®åº“å] -- æŸ¥çœ‹æ•°æ®åº“è¡¨çš„å®šä¹‰è¯­å¥</span><br><span class="line">Desc [è¡¨å] -- æ˜¾ç¤ºè¡¨çš„ç»“æ„</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ•°æ®åº“å¼•æ“</strong></p><p><strong>MYISAM   æ—©å…ˆå¹´ä½¿ç”¨çš„</strong></p><blockquote><p>äº‹åŠ¡æ”¯æŒï¼š ä¸æ”¯æŒ</p><p>æ•°æ®è¡Œé”å®šï¼šä¸æ”¯æŒ</p><p>å¤–é”®ï¼šä¸æ”¯æŒ</p><p>å…¨æ–‡ç´¢å¼•ï¼š æ”¯æŒ</p><p>è¡¨ç©ºé—´å¤§å° ï¼š è¾ƒå°</p></blockquote><p><strong>INNODB ç›®å‰é»˜è®¤ä½¿ç”¨çš„</strong></p><blockquote><p>äº‹åŠ¡æ”¯æŒï¼š æ”¯æŒ</p><p>æ•°æ®è¡Œé”å®šï¼šæ”¯æŒ</p><p>å¤–é”®ï¼šæ”¯æŒ</p><p>å…¨æ–‡ç´¢å¼•ï¼š ä¸æ”¯æŒ</p><p>è¡¨ç©ºé—´å¤§å°ï¼šè¾ƒå¤§ï¼Œçº¦ä¸º2å€</p></blockquote><p><strong>å¸¸è§„ä½¿ç”¨æ“ä½œï¼š</strong></p><blockquote><p>MYISAM èŠ‚çº¦ç©ºé—´ï¼Œé€Ÿåº¦è¾ƒå¿«</p><p>INNODB å®‰å…¨æ€§é«˜ï¼Œäº‹åŠ¡çš„å¤„ç†ï¼Œå¤šè¡¨å¤šç”¨æˆ·æ“ä½œ</p><p>åœ¨ç‰©ç†ç©ºé—´å­˜å‚¨çš„ä½ç½®</p></blockquote><p>æ‰€æœ‰çš„æ•°æ®åº“æ–‡ä»¶éƒ½å­˜åœ¨dataä¸‹ä¸€ä¸ªæ–‡ä»¶å¤¹å°±ä»£è¡¨ä¸€ä¸ªæ•°æ®åº“</p><p>æœ¬è´¨è¿˜æ˜¯æ–‡ä»¶çš„å­˜å‚¨</p><h5 id="MYSQLå¼•æ“åœ¨ç‰©ç†æ–‡ä»¶ä¸Šçš„åŒºåˆ«"><a href="#MYSQLå¼•æ“åœ¨ç‰©ç†æ–‡ä»¶ä¸Šçš„åŒºåˆ«" class="headerlink" title="MYSQLå¼•æ“åœ¨ç‰©ç†æ–‡ä»¶ä¸Šçš„åŒºåˆ«"></a>MYSQLå¼•æ“åœ¨ç‰©ç†æ–‡ä»¶ä¸Šçš„åŒºåˆ«</h5><ul><li><p>â€‹    InnoDBåœ¨æ•°æ®åº“è¡¨ä¸­åªæœ‰ä¸€ä¸ª*.frmæ–‡ä»¶ï¼Œä»¥åŠç›®å½•ä¸Šçº§ç›®å½•ä¸‹çš„ibdata1æ–‡ä»¶</p><p>   â€‹    MYISAMå¯¹åº”æ–‡ä»¶</p><ul><li>*.frm â€”è¡¨ç»“æ„çš„å®šä¹‰æ–‡ä»¶</li><li>*.MYD æ•°æ®æ–‡ä»¶ï¼ˆdataï¼‰</li><li>*.MYI  ç´¢å¼•æ–‡ä»¶ï¼ˆindexï¼‰</li></ul></li></ul><blockquote><p>è®¾ç½®æ•°æ®åº“è¡¨çš„å­—ç¬¦é›†ç¼–ç </p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">charset=utf8;</span><br></pre></td></tr></table></figure><p>ä¸è®¾ç½®çš„è¯ä¼šæ˜¯ä½¿ç”¨mysqlä¸­é»˜è®¤çš„ç¼–ç ï¼Œä»–ä¸æ”¯æŒä¸­æ–‡ã€‚</p><p>my.iniä¸­é…ç½®é»˜è®¤çš„ç¼–ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">character-set-server=utf8;</span><br></pre></td></tr></table></figure><p>===============================================================</p><h5 id="ä¿®æ”¹è¡¨"><a href="#ä¿®æ”¹è¡¨" class="headerlink" title="ä¿®æ”¹è¡¨"></a>ä¿®æ”¹è¡¨</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- ä¿®æ”¹è¡¨çš„åå­— alter table æ—§è¡¨å  rename as æ–°è¡¨å</span><br><span class="line">alter table san rename san1;</span><br></pre></td></tr></table></figure><h5 id="å¢åŠ è¡¨å­—æ®µ"><a href="#å¢åŠ è¡¨å­—æ®µ" class="headerlink" title="å¢åŠ è¡¨å­—æ®µ"></a>å¢åŠ è¡¨å­—æ®µ</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- æ·»åŠ è¡¨å­—æ®µ alter table è¡¨å add åˆ—å æ•°æ®ç±»å‹</span><br><span class="line">alter table test add min int(4);</span><br></pre></td></tr></table></figure><h5 id="ä¿®æ”¹è¡¨çš„å­—æ®µ"><a href="#ä¿®æ”¹è¡¨çš„å­—æ®µ" class="headerlink" title="ä¿®æ”¹è¡¨çš„å­—æ®µ"></a>ä¿®æ”¹è¡¨çš„å­—æ®µ</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- ä¿®æ”¹çº¦æŸ alter table è¡¨å modify åˆ—å æ•°æ®ç±»å‹</span><br><span class="line">alter table test modify min varchar(20);</span><br><span class="line"></span><br><span class="line">-- å­—æ®µ é‡å‘½å ä»¥åŠä¿®æ”¹çº¦æŸ  alter  table  è¡¨å change æ—§åå­— æ–°åå­— åˆ—å±æ€§</span><br><span class="line">alter table test change min min1 int(11); </span><br><span class="line"></span><br><span class="line">-- åˆ é™¤è¡¨å­—æ®µ  alter table è¡¨å drop åˆ—å</span><br><span class="line">alter table è¡¨å drop åˆ—åï¼›</span><br><span class="line"></span><br><span class="line">-- åˆ é™¤è¡¨ </span><br><span class="line">drop table if exists è¡¨å</span><br></pre></td></tr></table></figure><p>== æ‰€æœ‰çš„åˆ›å»ºå’Œåˆ é™¤æ“ä½œåŠ²é‡åŠ ä¸Šåˆ¤æ–­ï¼Œä»¥å…é€ æˆé”™è¯¯ == </p><h4 id="MYSQLæ•°æ®ç®¡ç†"><a href="#MYSQLæ•°æ®ç®¡ç†" class="headerlink" title="MYSQLæ•°æ®ç®¡ç†"></a><strong>MYSQLæ•°æ®ç®¡ç†</strong></h4><h5 id="å¤–é”®"><a href="#å¤–é”®" class="headerlink" title="å¤–é”®"></a>å¤–é”®</h5><p>æ–¹å¼ä¸€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- å®šä¹‰å¤–é”®key</span><br><span class="line">-- ç»™è¿™ä¸ªå¤–é”®æ·»åŠ çº¦æŸæ‰§è¡Œå¼•ç”¨ references å¼•ç”¨</span><br><span class="line">key FK_åˆ—å(åˆ—å) ï¼Œ</span><br><span class="line">constraint FK_åˆ—å foreign key åˆ—å references è¡¨åï¼ˆåˆ—åï¼‰</span><br><span class="line"></span><br><span class="line">-- æ–¹å¼äºŒï¼Œåˆ›å»ºè¡¨æˆåŠŸåï¼Œæ·»åŠ å¤–é”®çº¦æŸ</span><br><span class="line">alter table test</span><br><span class="line">add constraint FK_åˆ—å foregin key (åˆ—å) references  `è¡¨å`(åˆ—å)ï¼›</span><br><span class="line">-- alter table è¡¨ add constraint çº¦æŸå foreign key(ä½œä¸ºä¸»é”®çš„åˆ—) referebces é‚£ä¸ªè¡¨ï¼ˆå“ªä¸ªå­—æ®µï¼‰</span><br></pre></td></tr></table></figure><p>åˆ é™¤æœ‰å¤–é”®å…³è”çš„å€¼çš„æ—¶å€™ï¼Œå¿…é¡»è¦åˆ é™¤å¤–é”®ã€‚</p><p>æœ€å¥½çš„åŠæ³•ï¼Œæ•°æ®åº“å°±æ˜¯å•çº¯çš„è¡¨ï¼Œç”¨æ¥å­˜æ•°æ®ï¼Œåªæœ‰è¡Œå’Œåˆ—</p><p>æˆ‘ä»¬æƒ³ä½¿ç”¨å¤šå¼ è¡¨çš„æ—¶å€™æƒ³ä½¿ç”¨å¤–é”®ã€‚</p><h3 id="DMLï¼ˆæ•°æ®åº“æ“ä½œè¯­è¨€ï¼‰ï¼š"><a href="#DMLï¼ˆæ•°æ®åº“æ“ä½œè¯­è¨€ï¼‰ï¼š" class="headerlink" title="DMLï¼ˆæ•°æ®åº“æ“ä½œè¯­è¨€ï¼‰ï¼š"></a>DMLï¼ˆæ•°æ®åº“æ“ä½œè¯­è¨€ï¼‰ï¼š</h3><p><strong>æ•°æ®æ“ä½œè¯­è¨€DMLï¼ˆData Manipulation Languageï¼‰ï¼Œç”¨æˆ·é€šè¿‡å®ƒå¯ä»¥å®ç°å¯¹æ•°æ®åº“çš„åŸºæœ¬æ“ä½œã€‚ä¾‹å¦‚ï¼Œå¯¹è¡¨ä¸­æ•°æ®çš„æŸ¥è¯¢ã€æ’å…¥ã€åˆ é™¤å’Œä¿®æ”¹ã€‚ åœ¨DMLä¸­ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥å¯¹æ•°æ®åº“ä½œæ’ï¼Œåˆ ï¼Œæ”¹ï¼Œæ’ï¼Œæ£€ç­‰äº”ç§æ“ä½œ</strong> </p><p>æ•°æ®åº“æ„ä¹‰ï¼Œå­˜å‚¨ï¼Œç®¡ç†ã€‚</p><p>åˆ›å»ºä¸€ä¸ªè¡¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table if not exists test(</span><br><span class="line">    -- id åˆ—å  int æ•°æ®ç±»å‹  primary key ä¸»é”® not null ä¸ä¸ºç©º auto_increment è‡ªå¢   comment &quot;&quot; åˆ«å</span><br><span class="line">id  int  primary key  not null auto_increment comment &#x27;ä¸»é”®&#x27;,</span><br><span class="line">    -- default &#x27;&#x27; é»˜è®¤çš„</span><br><span class="line">    name varchar(10) not null default &#x27;åŒ¿å&#x27; comment &#x27;å§“å&#x27;</span><br><span class="line">)Engine=innodb default charset=utf8;</span><br></pre></td></tr></table></figure><h5 id="æ·»åŠ -insert"><a href="#æ·»åŠ -insert" class="headerlink" title="æ·»åŠ (insert):"></a>æ·»åŠ (insert):</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- ä¸€èˆ¬å†™æ’å…¥è¯­å¥ï¼Œæˆ‘ä»¬ä¸€å®šè¦æ•°æ®å’Œå­—æ®µä¸€ä¸€å¯¹åº” ä¸€ä¸ªå­æ®µå¯¹åº”ä¸€ä¸ªå€¼</span><br><span class="line">-- æ’å…¥æ•°æ®</span><br><span class="line">insert into è¡¨å (ã€å­—æ®µ1ï¼Œè‡ªæ®µ2ï¼Œå­—æ®µä¸‰ã€‘) value (&#x27;å€¼1&#x27;)ï¼Œ(&#x27;å€¼2&#x27;),(&#x27;å€¼3&#x27;)ï¼›</span><br><span class="line"></span><br><span class="line">insert into test(name) value(&quot;å¼ ä¸‰&quot;)ï¼›</span><br><span class="line"> -- æˆ–è€…</span><br><span class="line"> -- å·²çŸ¥åˆ—  id name </span><br><span class="line"> insert into test value (&#x27;12&#x27;,&#x27;name&#x27;)ï¼›</span><br><span class="line"> </span><br><span class="line"> -- ç”±äºä¸»é”®è‡ªå¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸æ’å…¥id</span><br><span class="line"> insert into test value( ,&#x27;name&#x27;)ï¼›</span><br><span class="line"> </span><br><span class="line"> -- ä¸€æ¬¡æ’å…¥å¤šä¸ªæ•°æ®</span><br><span class="line"> insert into test(name) value (&#x27;å¼ ä¸‰&#x27;),ï¼ˆ&#x27;æå››&#x27;ï¼‰;</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ol><li>å­—æ®µä½¿ç”¨è‹±æ–‡é€—å·éš”å¼€</li><li>ä¸å†™å…·ä½“çš„åˆ—è¿›è¡Œæ’å…¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ’å…¥çš„æ—¶å€™å°±éœ€è¦æ•´ä¸ªæ•°æ®åº“åˆ—çš„å€¼å…¨éƒ¨æ’å…¥</li><li>å­—æ®µå¯ä»¥çœç•¥ï¼Œä½†æ˜¯åé¢çš„å€¼å¿…é¡»è¦ä¸€ä¸€å¯¹åº”ï¼Œä¸èƒ½å°‘</li><li>å¯ä»¥åŒæ—¶æ’å…¥å¤šæ¡æ•°æ®ï¼Œvalueåè¾¹çš„å€¼ï¼Œéœ€è¦ä½¿ç”¨ è‹±æ–‡é€—å·éš”å¼€ã€‚(),()</li></ol><h5 id="æ›´æ–°-update"><a href="#æ›´æ–°-update" class="headerlink" title="æ›´æ–°(update):"></a>æ›´æ–°(update):</h5><p>ä¸€èˆ¬æ˜¯æ›´æ–°æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œè€Œä¸æ˜¯æ›´æ–°è¡¨çš„å­æ®µã€‚ã€‚ã€‚ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- ä¿®æ”¹å­¦å‘˜çš„åå­—</span><br><span class="line">update test set name = &#x27;å¼ ä¸‰&#x27; where id = 1 ;</span><br><span class="line">-- åœ¨ä¸æŒ‡å®šå…·ä½“çš„æ¡ä»¶çš„æƒ…å†µä¸‹æ›´æ”¹ä¼šæ›´æ”¹è¡¨ä¸­æ‰€æœ‰nameçš„æ•°æ®</span><br><span class="line">update test set name = &#x27;æå››&#x27;;  -- æ›´æ–°æ•´ä¸ªè¡¨ä¸­åˆ—ä¸ºnameçš„æ‰€æœ‰æ•°æ®æ˜¯nameéƒ½ç­‰äº&#x27;æå››&#x27;ï¼›  åˆ‡è®°ä¸è¦å‚»ä¹ä¹çš„ä½¿ç”¨ã€‚ã€‚ã€‚åæœå°±æ˜¯åˆ åº“è·‘è·¯</span><br><span class="line"></span><br><span class="line">-- ä¿®æ”¹å¤šä¸ªå±æ€§ï¼Œé€—å·éš”å¼€</span><br><span class="line">update test set name =  &#x27;å¼ ä¸‰&#x27;  , tel = &#x27;123321&#x27;, email = &#x27;2569758@qq.com&#x27; where id = 1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- è¯­æ³• </span><br><span class="line">update è¡¨å set ã€åˆ—å1 = å€¼1ï¼Œåˆ—2 = å€¼2 ã€‚ã€‚ã€‚ã€‚ã€‘ where ã€æ¡ä»¶ã€‘ï¼› </span><br><span class="line"></span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>æ“ä½œç¬¦</th><th>å«ä¹‰</th><th>èŒƒå›´</th><th>ç»“æœ</th></tr></thead><tbody><tr><td>=</td><td>ç­‰äº</td><td>5=6</td><td>false</td></tr><tr><td>&lt;&gt; æˆ–  !=</td><td>ä¸ç­‰äº</td><td>5&lt;&gt; 6</td><td>true</td></tr><tr><td>&gt;</td><td>å¤§äº</td><td>5&gt;6</td><td>false</td></tr><tr><td>&lt;</td><td>å°äº</td><td>5&lt;6</td><td>true</td></tr><tr><td>&lt;=</td><td>å°äºç­‰äº</td><td>â€”</td><td></td></tr><tr><td>&gt;=</td><td>å¤§äºç­‰äº</td><td>â€”</td><td></td></tr><tr><td>betweenâ€¦ and â€¦</td><td>ä»‹äºâ€¦ä¹‹é—´</td><td>[2,5]</td><td></td></tr><tr><td>and</td><td>å’Œ</td><td>5&gt;1 and 1&gt;2</td><td>false</td></tr><tr><td>or</td><td>æˆ–</td><td>5&gt;1 or 1&gt;2</td><td>true</td></tr></tbody></table></div><p><code>update è¡¨å set ã€åˆ—å1 = å€¼1ï¼Œåˆ—2 = å€¼2 ã€‚ã€‚ã€‚ã€‚ã€‘ where ã€æ¡ä»¶ã€‘ï¼›</code> </p><p>æ³¨æ„ï¼š</p><ol><li><p>æ›´æ–°æŸä¸ªç±»éœ€è¦æŒ‡å®šåˆ—åï¼Œé¡ºå¸¦åŠ ä¸Šæ¡ä»¶ï¼Œæ²¡æœ‰åŠ æ¡ä»¶åˆ™ä¼šæ›´æ–°æ‰€æœ‰çš„åˆ—</p></li><li><p>ä¸åŒåˆ—åä¹‹é—´éœ€è¦åŠ ï¼Œéš”å¼€ã€‚</p></li></ol><h5 id="åˆ é™¤-delete"><a href="#åˆ é™¤-delete" class="headerlink" title="åˆ é™¤(delete)"></a>åˆ é™¤(delete)</h5><p>åˆ é™¤è¡¨ä¸­çš„æ•°æ®ï¼Œå’Œdropä¸ä¸€æ ·ï¼Œdropæ˜¯åˆ é™¤æ•´ä¸ªè¡¨ï¼Œdeleteæ˜¯åˆ é™¤è¡¨ä¸­çš„æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- åˆ é™¤æ•°æ® å°½é‡é¿å…ä¸æ·»åŠ æ¡ä»¶åˆ é™¤</span><br><span class="line">delete from è¡¨å ; -- è¿™æ ·ä¼šåˆ é™¤æ•´ä¸ªæ•°æ®åº“</span><br><span class="line"></span><br><span class="line">-- åˆ é™¤æŒ‡å®šæ•°æ®ï¼Œä¹Ÿå°±æ˜¯æ ¹æ®æ¡ä»¶åˆ é™¤</span><br><span class="line">delete from è¡¨å where  åˆ—å1 = å€¼1 and åˆ—å2 = å€¼2 ...ï¼›</span><br></pre></td></tr></table></figure><h5 id="TRUNCATEå‘½ä»¤ï¼ˆæ¨èï¼‰"><a href="#TRUNCATEå‘½ä»¤ï¼ˆæ¨èï¼‰" class="headerlink" title="TRUNCATEå‘½ä»¤ï¼ˆæ¨èï¼‰"></a>TRUNCATEå‘½ä»¤ï¼ˆæ¨èï¼‰</h5><p>æ¸…ç©ºæŸä¸€å¼ è¡¨ã€‚ã€‚ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- æ¸…ç©ºstudentè¡¨ truncate</span><br><span class="line">TRUNCATE è¡¨åï¼›</span><br></pre></td></tr></table></figure><h5 id="delete-å’Œ-truncateåŒºåˆ«ï¼š"><a href="#delete-å’Œ-truncateåŒºåˆ«ï¼š" class="headerlink" title="delete å’Œ truncateåŒºåˆ«ï¼š"></a>delete å’Œ truncateåŒºåˆ«ï¼š</h5><ol><li>ç›¸åŒç‚¹ï¼šéƒ½èƒ½åˆ é™¤è¡¨æ•°æ®ï¼Œä¸”ä¸ä¼šåˆ é™¤è¡¨ç»“æ„</li><li>ä¸åŒï¼š<ol><li>truncate é‡æ–°è®¾ç½®<strong>è‡ªå¢åˆ—</strong> è®°æ•°å™¨ä¼šå½’é›¶</li><li>truncateä¸ä¼šå½±å“äº‹åŠ¡</li></ol></li></ol><p><strong>deleteåˆ é™¤é—®é¢˜ï¼Œé‡å¯æ•°æ®åº“ï¼Œç°è±¡</strong></p><blockquote><p>InnoDB è‡ªå¢ä¼šé‡1å¼€å§‹(å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œæ–­ç”µå°±å¤±å»)ï¼›</p><p>MyISAM ç»§ç»­ä»ä¸Šä¸€ä¸ªè‡ªå¢é‡å¼€å§‹(å­˜åœ¨æ–‡ä»¶ä¸­ï¼Œä¸ä¼šä¸¢å¤±ï¼‰</p></blockquote><h3 id="DQLï¼ˆæ•°æ®åº“æŸ¥è¯¢è¯­è¨€ï¼‰ï¼š"><a href="#DQLï¼ˆæ•°æ®åº“æŸ¥è¯¢è¯­è¨€ï¼‰ï¼š" class="headerlink" title="DQLï¼ˆæ•°æ®åº“æŸ¥è¯¢è¯­è¨€ï¼‰ï¼š"></a>DQLï¼ˆæ•°æ®åº“æŸ¥è¯¢è¯­è¨€ï¼‰ï¼š</h3><p><strong>DQLï¼ˆdata query languageï¼‰æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œä¸“é—¨ç”¨æ¥æŸ¥è¯¢æ•°æ®ã€‚</strong> </p><ul><li>ä¸€èˆ¬ä½¿ç”¨çš„éƒ½æ˜¯Select æ‰€æœ‰çš„æŸ¥è¯¢æ“ä½œéƒ½æ˜¯è¿™ä¸ª</li><li>ç®€å•çš„æŸ¥è¯¢å’Œå¤æ‚çš„æŸ¥è¯¢éƒ½èƒ½åš</li><li>æ•°æ®åº“ä¸­æœ€æ ¸å¿ƒçš„è¯­è¨€ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„è¯­å¥ã€‚</li><li>ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„è¯­å¥</li></ul><h5 id="æŸ¥è¯¢æ‰€æœ‰"><a href="#æŸ¥è¯¢æ‰€æœ‰" class="headerlink" title="æŸ¥è¯¢æ‰€æœ‰"></a>æŸ¥è¯¢æ‰€æœ‰</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from è¡¨åï¼› -- ä¸€èˆ¬ä¸æ¨èä½¿ç”¨ sqlä¼˜åŒ–ä¸æ¨èä½¿ç”¨</span><br></pre></td></tr></table></figure><h5 id="æŸ¥è¯¢æŒ‡å®šå­—æ®µ"><a href="#æŸ¥è¯¢æŒ‡å®šå­—æ®µ" class="headerlink" title="æŸ¥è¯¢æŒ‡å®šå­—æ®µ"></a>æŸ¥è¯¢æŒ‡å®šå­—æ®µ</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select id , name fromè¡¨åï¼› </span><br></pre></td></tr></table></figure><h5 id="æŸ¥è¯¢èµ·åˆ«åï¼Œç„¶åé€šè¿‡åˆ«åå¾—åˆ°æ•°æ®"><a href="#æŸ¥è¯¢èµ·åˆ«åï¼Œç„¶åé€šè¿‡åˆ«åå¾—åˆ°æ•°æ®" class="headerlink" title="æŸ¥è¯¢èµ·åˆ«åï¼Œç„¶åé€šè¿‡åˆ«åå¾—åˆ°æ•°æ®"></a>æŸ¥è¯¢èµ·åˆ«åï¼Œç„¶åé€šè¿‡åˆ«åå¾—åˆ°æ•°æ®</h5><p>as å¯ä»¥ç»™å­—æ®µèµ·åˆ«åï¼Œä¹Ÿå¯ä»¥ç»™è¡¨èµ·åˆ«å </p><p>å¦‚ ï¼š from è¡¨å as â€˜åˆ«åâ€™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select åˆ—å1 as &#x27;åˆ«å1&#x27; , åˆ—å2 as &#x27;åˆ«å2&#x27; ... from è¡¨åï¼›</span><br></pre></td></tr></table></figure><h5 id="å»é‡æŸ¥è¯¢distinct"><a href="#å»é‡æŸ¥è¯¢distinct" class="headerlink" title="å»é‡æŸ¥è¯¢distinct"></a>å»é‡æŸ¥è¯¢distinct</h5><p>å»é™¤æŸ¥åˆ°çš„é‡å¤çš„å€¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">select distinct åˆ—å from è¡¨åï¼›  -- æŸ¥è¯¢è¡¨ä¸­é‡å¤çš„æ•°æ®ï¼Œä½¿å¾—é‡å¤çš„æ•°æ®åªæ˜¾ç¤ºä¸€æ¡ã€‚</span><br><span class="line"></span><br><span class="line">select version() ; -- æŸ¥è¯¢ç³»ç»Ÿç‰ˆæœ¬</span><br><span class="line">select 100*3 -1 as &#x27;ç»“æœ&#x27; ;  -- ç”¨æ¥è®¡ç®—  </span><br><span class="line">select @@auto_increment_increment ;   -- æŸ¥è¯¢è‡ªå¢çš„æ­¥é•¿ï¼ˆå˜é‡ï¼‰</span><br><span class="line"></span><br><span class="line">-- ä¾‹å­ æŸ¥è¯¢è€ƒè¯•æˆç»© + 1 æŸ¥çœ‹</span><br><span class="line">select id , scode + 1 as &#x27;åŠ åˆ†å&#x27; from è¡¨å;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æ•°æ®åº“ä¸­è¡¨è¾¾å¼ï¼š"><a href="#æ•°æ®åº“ä¸­è¡¨è¾¾å¼ï¼š" class="headerlink" title="æ•°æ®åº“ä¸­è¡¨è¾¾å¼ï¼š"></a>æ•°æ®åº“ä¸­è¡¨è¾¾å¼ï¼š</h5><p>æ–‡æœ¬å€¼ï¼Œåˆ—ï¼ŒNULLï¼Œå‡½æ•°ï¼Œè®¡ç®—è¡¨è¾¾å¼ï¼Œç³»ç»Ÿå˜é‡â€¦.</p><blockquote><p>select è¡¨è¾¾å¼ from è¡¨åï¼›</p></blockquote><h5 id="WHEREæ¡ä»¶"><a href="#WHEREæ¡ä»¶" class="headerlink" title="WHEREæ¡ä»¶"></a>WHEREæ¡ä»¶</h5><p>ä¸€èˆ¬ä½œä¸ºæ£€ç´¢æ•°æ®ä¸­çš„ç¬¦åˆæ¡ä»¶çš„å€¼</p><p>æœç´¢çš„æ¡ä»¶ä¸€èˆ¬ç”±ä¸€ä¸ªæˆ–å¤šä¸ªæ¡ä»¶ç»„æˆã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">select id , score from è¡¨åï¼›</span><br><span class="line">-- æŸ¥è¯¢æˆç»©åœ¨95 - 100 ç›´æ¥çš„ id</span><br><span class="line">select id from è¡¨å where score &gt;=95  and score &lt;= 100;</span><br><span class="line"></span><br><span class="line">-- and  &amp;&amp; </span><br><span class="line">select id from è¡¨å where score &gt;=95  &amp;&amp; score &lt;= 100;</span><br><span class="line"></span><br><span class="line">-- æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆbetweenï¼‰</span><br><span class="line">select id from è¡¨å where score between 95 and 100;</span><br><span class="line"></span><br><span class="line">-- é™¤äº†1000å·åŒå­¦ä»¥ä¸ºçš„æ‰€æœ‰åŒå­¦çš„æˆç»©</span><br><span class="line">select id ,score from è¡¨å where id != 1000;</span><br><span class="line"></span><br><span class="line">-- != not </span><br><span class="line">select id ,score from è¡¨å where not id = 1000;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>äº†è§£é€»è¾‘è¿ç®—ç¬¦ï¼š</p></blockquote><div class="table-container"><table><thead><tr><th>è¿ç®—ç¬¦</th><th>è¯­æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>and           &amp;&amp;</td><td>a and b  a &amp;&amp; b</td><td>é€»è¾‘ä¸ï¼Œä¸¤çœŸä¸ºçœŸ</td></tr><tr><td>or              \</td><td>\</td><td></td><td>a \</td><td>\</td><td>b         a   or  b</td><td>é€»è¾‘æˆ– ï¼Œä¸€çœŸä¸ºçœŸï¼Œå…¨å‡ä¸ºå‡</td></tr><tr><td>not           !</td><td>not  a           !a</td><td>é€»è¾‘éï¼ŒçœŸä¸ºå‡ï¼Œå‡ä¸ºçœŸ<em>**</em></td></tr></tbody></table></div><p><strong>æ¨¡ç³ŠæŸ¥è¯¢</strong></p><div class="table-container"><table><thead><tr><th>è¿ç®—ç¬¦</th><th>è¯­æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>is null</td><td>a is  null</td><td>å¦‚æœæ“ä½œç¬¦ä¸ºnull,ç»“æœä¸ºçœŸ</td></tr><tr><td>is not null</td><td>a is not null</td><td>å¦‚æœæ“ä½œç¬¦ä¸ä¸ºç©ºï¼Œç»“æœä¸ºçœŸ</td></tr><tr><td>between</td><td>a between b and c</td><td>å¦‚æœaåœ¨bå’Œcä¹‹é—´ï¼Œåˆ™ç»“æœä¸ºçœŸ</td></tr><tr><td>like</td><td>a like  b</td><td>sqlåŒ¹é…æˆåŠŸï¼Œå¦‚æœaåŒ¹é…bï¼Œåˆ™ç»“æœä¸ºçœŸ</td></tr><tr><td>in</td><td>a in b</td><td>a åœ¨ b ä¸­</td></tr><tr><td></td><td></td></tr></tbody></table></div><p>ä¸¾ä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢å§“åˆ˜çš„åŒå­¦çš„åå­—</span><br><span class="line">select id , name from è¡¨å where name like &#x27;åˆ˜%&#x27;ï¼›</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢å§“åˆ˜çš„åŒå­¦ï¼Œä¸”åªæœ‰ä¸€ä¸ªå­—çš„</span><br><span class="line">select id , name from è¡¨å where name like &#x27;åˆ˜_&#x27;ï¼›</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢å§“åˆ˜çš„åŒå­¦ï¼Œä¸”åªæœ‰ä¸¤ä¸ªå­—çš„</span><br><span class="line">select id , name from è¡¨å where name like &#x27;åˆ˜__&#x27;ï¼›</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢åå­—ä¸­æœ‰å˜‰çš„åŒå­¦ï¼Œ%å˜‰%</span><br><span class="line">select id , name from è¡¨å where name like &#x27;%å˜‰%&#x27;ï¼›</span><br><span class="line"></span><br><span class="line">-- =================== inï¼ˆå…·ä½“çš„ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ï¼‰ ================</span><br><span class="line"> -- æŸ¥è¯¢101,102,103 å·å­¦å‘˜</span><br><span class="line"> select id, name from è¡¨å where id in ( 101,102,103);</span><br><span class="line"> </span><br><span class="line"> -- ç”¨inæŸ¥è¯¢åå­—ç­‰äºå¼ ä¸‰ï¼Œæå››ã€‚ã€‚ã€‚çš„å­¦ç”Ÿ</span><br><span class="line"> select id , name from è¡¨å where name in (&#x27;å¼ ä¸‰&#x27;, &#x27;æå››&#x27; ,&#x27;ç‹äº”&#x27;...)ï¼›</span><br><span class="line"> </span><br><span class="line"> -- æŸ¥è¯¢å§“åä¸ºç©ºçš„å­¦ä¹ ï¼ˆå½“ç„¶æˆ‘ä»¬è®¾ç½®é»˜è®¤å€¼ï¼Œå¿…å®šä¸å­˜åœ¨è¿™ä¸ªå€¼ï¼‰</span><br><span class="line">  select id , name from è¡¨å where name  = &#x27;&#x27; or name is null;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  -- æŸ¥è¯¢å§“åä¸ä¸ºç©ºçš„åŒå­¦</span><br><span class="line">    select id , name from è¡¨å where name  != &#x27;&#x27; or name is not null;</span><br><span class="line"></span><br><span class="line"> </span><br></pre></td></tr></table></figure><h5 id="è¿è¡¨æŸ¥è¯¢ï¼ˆJOIN-onï¼‰"><a href="#è¿è¡¨æŸ¥è¯¢ï¼ˆJOIN-onï¼‰" class="headerlink" title="è¿è¡¨æŸ¥è¯¢ï¼ˆJOIN onï¼‰"></a>è¿è¡¨æŸ¥è¯¢ï¼ˆJOIN onï¼‰</h5><p><img src="F:\ä¸‰æœŸå­¦ä¹ èµ„æ–™\å­¦ä¹ èµ„æ–™\Mysql\1666274982133.png" alt="1666274982133"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">-- è¿æ¥ä¸¤ä¸ªè¡¨</span><br><span class="line">select s.id , s.name ,cid ,cname </span><br><span class="line">from stu s inner join class as r</span><br><span class="line">where s.id = r.id;</span><br><span class="line"> </span><br><span class="line">-- å³è¿æ¥ right join </span><br><span class="line">select s.id , name , cid , cname from stu s</span><br><span class="line">right join class c</span><br><span class="line">on s.id = c.id</span><br><span class="line"></span><br><span class="line">-- å·¦è¿æ¥ left join  </span><br><span class="line">select s.id , name , cid , cname from stu s</span><br><span class="line">left join class c</span><br><span class="line">on s.id = c.id</span><br><span class="line"></span><br><span class="line">-- join  on  è¿æ¥æŸ¥è¯¢</span><br><span class="line">-- where  ç­‰å€¼æŸ¥è¯¢</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢nameä¸ºç©ºçš„åŒå­¦</span><br><span class="line">select s.id , sname , cid, cname </span><br><span class="line">from stu s left join </span><br><span class="line">class c on s.id = c.id </span><br><span class="line">where name is null;</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢æ—¶é—´ä¸ºç©ºçš„å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">select s.id ,date, name ,cid , cname from stu s</span><br><span class="line">left join class c</span><br><span class="line">on s.id = c.id</span><br><span class="line">where date is null;</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th style="text-align:center">æ“ä½œ</th><th style="text-align:center">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center">inner   join</td><td style="text-align:center">å¦‚æœè¡¨ä¸­è‡³å°‘æœ‰ä¸€ä¸ªåŒ¹é…å€¼ï¼Œé‚£ä¹ˆå°±è¿”å›è¡Œ</td></tr><tr><td style="text-align:center">left join</td><td style="text-align:center">ä¼šä»å·¦è¡¨ä¸­è¿”å›æ‰€æœ‰çš„å€¼ï¼Œå³ä½¿å³è¡¨ä¸­æ²¡æœ‰</td></tr><tr><td style="text-align:center">right join</td><td style="text-align:center">ä¼šä»å³è¡¨ä¸­è¿”å›æ‰€æœ‰çš„å€¼ï¼Œå³ä½¿å·¦è¡¨ä¸­æ²¡æœ‰</td></tr></tbody></table></div><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">-- æµ‹è¯•æ•°æ®åº“</span><br><span class="line">create table `table_a` (</span><br><span class="line">  `aid` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `a_name` varchar(255) NOT NULL,</span><br><span class="line">  `age` smallint NOT NULL,</span><br><span class="line">  PRIMARY KEY(`aid`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT &#x27;æµ‹è¯•è¡¨A&#x27;;</span><br><span class="line"> </span><br><span class="line">create table `table_b` (</span><br><span class="line">  `bid` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `b_name` varchar(255) NOT NULL,</span><br><span class="line">  `age` smallint NOT NULL,</span><br><span class="line">  PRIMARY KEY(`bid`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT &#x27;æµ‹è¯•è¡¨B&#x27;;</span><br><span class="line"> </span><br><span class="line"># æ’å…¥æµ‹è¯•æ•°æ®</span><br><span class="line">INSERT INTO `table_a`(aid, a_name, age) VALUES(1, &#x27;test1&#x27;, 1),(2, &#x27;test2&#x27;, 2),(3, &#x27;test3&#x27;, 3);</span><br><span class="line">INSERT INTO `table_b`(bid, b_name, age) VALUES(1, &#x27;test2&#x27;, 2),(2, &#x27;test3&#x27;, 3),(4, &#x27;test4&#x27;, 4);</span><br></pre></td></tr></table></figure><p>è¿™ä¸‰æ¡SQLéƒ½æ˜¯ç­‰ä»·çš„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM table_a JOIN table_b;</span><br><span class="line">SELECT * FROM table_a INNER JOIN table_b;</span><br><span class="line">SELECT * FROM table_a CROSS JOIN table_b;</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><h6 id="inner-joinè¿æ¥"><a href="#inner-joinè¿æ¥" class="headerlink" title="inner  joinè¿æ¥"></a>inner  joinè¿æ¥</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- ç›¸å½“äºç¬›å¡å°”ç§¯</span><br><span class="line">mysql&gt; SELECT * FROM table_a INNER JOIN table_b;</span><br><span class="line">+-----+--------+-----+-----+--------+-----+</span><br><span class="line">| aid | a_name | age | bid | b_name | age |</span><br><span class="line">+-----+--------+-----+-----+--------+-----+</span><br><span class="line">|   1 | test1  |   1 |   1 | test2  |   2 |</span><br><span class="line">|   2 | test2  |   2 |   1 | test2  |   2 |</span><br><span class="line">|   3 | test3  |   3 |   1 | test2  |   2 |</span><br><span class="line">|   1 | test1  |   1 |   2 | test3  |   3 |</span><br><span class="line">|   2 | test2  |   2 |   2 | test3  |   3 |</span><br><span class="line">|   3 | test3  |   3 |   2 | test3  |   3 |</span><br><span class="line">|   1 | test1  |   1 |   4 | test4  |   4 |</span><br><span class="line">|   2 | test2  |   2 |   4 | test4  |   4 |</span><br><span class="line">|   3 | test3  |   3 |   4 | test4  |   4 |</span><br><span class="line">+-----+--------+-----+-----+--------+-----+</span><br></pre></td></tr></table></figure><p>æœ‰ONå’ŒWHEREç­›é€‰æ¡ä»¶ï¼Œæ­¤æ—¶å¾—åˆ°çš„ç»“æœæ˜¯<strong>ä¸¤å¼ è¡¨çš„äº¤é›†</strong>ï¼ˆä¸­é—´çš„å›¾ï¼‰ï¼Œå¯¹äºå†…è¿æ¥ï¼ŒONå’ŒWHEREæ˜¯ç­‰ä»·çš„ï¼Œä½†æ˜¯å¯¹äºå¤–è¿æ¥åˆ™ä¸æ˜¯ï¼Œåœ¨ä¸‹é¢ä¼šè®²åˆ°ã€‚ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># è¿™ä¸¤æ¡SQLæ˜¯ç­‰ä»·çš„ï¼Œä¸è¿‡å»ºè®®ä½¿ç”¨ONå…³é”®å­—ï¼Œçº¦å®šä¿—æˆ</span><br><span class="line">SELECT * FROM table_a a INNER JOIN table_b b ON a.a_name=b.b_name;</span><br><span class="line">SELECT * FROM table_a a INNER JOIN table_b b WHERE a.a_name=b.b_name;</span><br><span class="line"></span><br><span class="line"># ç»“æœå¦‚ä¸‹ï¼š</span><br><span class="line">mysql&gt; SELECT * FROM table_a a INNER JOIN table_b b ON a.a_name=b.b_name;</span><br><span class="line">+-----+--------+-----+-----+--------+-----+</span><br><span class="line">| aid | a_name | age | bid | b_name | age |</span><br><span class="line">+-----+--------+-----+-----+--------+-----+</span><br><span class="line">|   2 | test2  |   2 |   1 | test2  |   2 |</span><br><span class="line">|   3 | test3  |   3 |   2 | test3  |   3 |</span><br><span class="line">+-----+--------+-----+-----+--------+-----+</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="å³è¿æ¥-right-join"><a href="#å³è¿æ¥-right-join" class="headerlink" title="å³è¿æ¥(right join)"></a>å³è¿æ¥(right join)</h6><p>å³è¿æ¥çš„å…³é”®å­—æ˜¯ <code>RIGHT JOIN</code>ï¼Œä»ä¸Šå›¾å¯ä»¥å¾—åˆ°ï¼ˆå³è¾¹çš„å›¾ï¼‰ï¼Œå³è¿æ¥å…¶å®å°±æ˜¯<strong>ä¸¤ä¸ªè¡¨çš„äº¤é›†+å³è¡¨å‰©ä¸‹çš„æ•°æ®</strong> ï¼Œå½“ç„¶è¿™æ˜¯åœ¨æ²¡å…¶ä»–è¿‡æ»¤æ¡ä»¶çš„æƒ…å†µä¸‹ã€‚ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM `table_a` a RIGHT JOIN `table_b` b ON a.a_name=b.b_name;</span><br><span class="line">+------+--------+------+-----+--------+-----+</span><br><span class="line">| aid  | a_name | age  | bid | b_name | age |</span><br><span class="line">+------+--------+------+-----+--------+-----+</span><br><span class="line">|    2 | test2  |    2 |   1 | test2  |   2 |</span><br><span class="line">|    3 | test3  |    3 |   2 | test3  |   3 |</span><br><span class="line">| NULL | NULL   | NULL |   4 | test4  |   4 |</span><br><span class="line">+------+--------+------+-----+--------+-----+</span><br></pre></td></tr></table></figure><h6 id="å·¦è¿æ¥-left-join"><a href="#å·¦è¿æ¥-left-join" class="headerlink" title="å·¦è¿æ¥(left join)"></a>å·¦è¿æ¥(left join)</h6><p>å·¦è¿æ¥çš„å…³é”®å­—æ˜¯ <code>LEFT JOIN</code>ï¼Œä»ä¸Šå›¾å¯ä»¥å¾—åˆ°ï¼ˆå·¦è¾¹çš„å›¾ï¼‰ï¼Œå·¦è¿æ¥å…¶å®å°±æ˜¯<strong>ä¸¤ä¸ªè¡¨çš„äº¤é›†+å·¦è¡¨å‰©ä¸‹çš„æ•°æ®</strong> ï¼Œå½“ç„¶è¿™æ˜¯åœ¨æ²¡å…¶ä»–è¿‡æ»¤æ¡ä»¶çš„æƒ…å†µä¸‹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># æ²¡æ‰¾åˆ°çš„è¢«ç½®ä¸ºNULL</span><br><span class="line">mysql&gt; SELECT * FROM `table_a` a LEFT JOIN `table_b` b ON a.a_name=b.b_name;</span><br><span class="line">+-----+--------+-----+------+--------+------+</span><br><span class="line">| aid | a_name | age | bid  | b_name | age  |</span><br><span class="line">+-----+--------+-----+------+--------+------+</span><br><span class="line">|   2 | test2  |   2 |    1 | test2  |    2 |</span><br><span class="line">|   3 | test3  |   3 |    2 | test3  |    3 |</span><br><span class="line">|   1 | test1  |   1 | NULL | NULL   | NULL |</span><br><span class="line">+-----+--------+-----+------+--------+------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p><strong>WHEREå­å¥ä¸­çš„è¿‡æ»¤æ¡ä»¶å°±æ˜¯æˆ‘ä»¬å¸¸è§çš„é‚£ç§ï¼Œä¸ç®¡æ˜¯å†…è¿æ¥è¿˜æ˜¯å¤–è¿æ¥ï¼Œåªè¦ä¸ç¬¦åˆWHEREå­å¥çš„è¿‡æ»¤æ¡ä»¶ï¼Œéƒ½ä¼šè¢«è¿‡æ»¤æ‰ã€‚</strong></p><p><strong>è€ŒONå­å¥ä¸­çš„è¿‡æ»¤æ¡ä»¶å¯¹äºå†…è¿æ¥å’Œå¤–è¿æ¥æ˜¯ä¸åŒçš„ï¼Œå¯¹äºå†…è¿æ¥ï¼ŒONå’ŒWHEREçš„ä½œç”¨æ˜¯ä¸€è‡´çš„ï¼Œå› ä¸ºåŒ¹é…ä¸åˆ°çš„éƒ½ä¼šè¿‡æ»¤ï¼Œæ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ°å†…è¿æ¥å¹¶ä¸å¼ºåˆ¶éœ€è¦ ON å…³é”®å­—ï¼›ä½†æ˜¯å¯¹äºå¤–è¿æ¥ï¼ŒONå†³å®šåŒ¹é…ä¸åˆ°çš„æ˜¯å¦è¦è¿‡æ»¤ï¼Œæ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ°å¤–è¿æ¥æ˜¯å¼ºåˆ¶éœ€è¦ ON å…³é”®å­—çš„ã€‚</strong></p></blockquote><p>æˆ‘è¦æŸ¥è¯¢å“ªäº›æ•°æ® select â€¦</p><p>ä»é‚£å‡ ä¸ªè¡¨ä¸­æŸ¥    from    è¡¨      XXX    join     è¿æ¥çš„è¡¨     on    äº¤å‰æ¡ä»¶</p><p>å‡è®¾å­˜åœ¨ä¸€ç§å¤šå¼ è¡¨æŸ¥è¯¢ï¼Œæ…¢æ…¢æ¥ï¼Œå…ˆæŸ¥è¯¢ä¸¤å¼ è¡¨  ç„¶ååœ¨æ…¢æ…¢æ·»åŠ ã€‚</p><h5 id="è‡ªè¿æ¥-äº†è§£"><a href="#è‡ªè¿æ¥-äº†è§£" class="headerlink" title="è‡ªè¿æ¥(äº†è§£)"></a>è‡ªè¿æ¥(äº†è§£)</h5><p>è‡ªå·±çš„è¡¨å’Œè‡ªå·±çš„è¡¨è¿æ¥ï¼š <strong>æ ¸å¿ƒæ˜¯ä¸€å¼ è¡¨æ‹†ä¸ºä¸¤å¼ è¡¨ä½¿ç”¨</strong></p><p>å°†æ•°æ®åŒä¸€å¼ è¡¨ä¸­æ•°æ®è¿›è¡ŒæŸ¥åˆ†ï¼Œç„¶åèµ·åˆ«åã€‚å°†ä¸€å¼ è¡¨å˜æˆä¸¤å¼ è¡¨å¤„ç†ã€‚</p><p>åˆ†ä¸ºçˆ¶å’Œå­ï¼Œä¹Ÿå°±æ˜¯æ‹†åˆ†çš„è¡¨å¯ä»¥æˆä¸ºçˆ¶å’Œå­å…³ç³»æˆ–è€…è¯´<strong>åŒ…å«</strong>å’Œ<strong>è¢«åŒ…å«</strong>å…³ç³»ã€‚</p><h5 id="åˆ†é¡µå’Œæ’åº"><a href="#åˆ†é¡µå’Œæ’åº" class="headerlink" title="åˆ†é¡µå’Œæ’åº"></a>åˆ†é¡µå’Œæ’åº</h5><p><strong>limit  å’Œ order by</strong></p><h6 id="limitï¼ˆåˆ†é¡µï¼‰"><a href="#limitï¼ˆåˆ†é¡µï¼‰" class="headerlink" title="limitï¼ˆåˆ†é¡µï¼‰"></a>limitï¼ˆåˆ†é¡µï¼‰</h6><p>â€‹    limit  å½“å‰é¡µï¼Œé¡µé¢å¤§å°</p><p>â€‹    <code>limit  0 , 5</code>       â€”å‰è¾¹æ•°å­—è¡¨ç¤ºç¬¬å‡ é¡µï¼Œåè¾¹æ•°æ®æ¯é¡µæ˜¾ç¤ºçš„æ•°æ®æ¡æ•°</p><h6 id="order-by-ï¼ˆæ’åºï¼‰"><a href="#order-by-ï¼ˆæ’åºï¼‰" class="headerlink" title="order by ï¼ˆæ’åºï¼‰"></a>order by ï¼ˆæ’åºï¼‰</h6><ul><li><p>å‡åº    asc</p><p><code>order by id  asc</code> æ ¹æ®idå‡åºæ’åº</p></li><li><p>é™åº        desc</p><p><code>order by  id  desc</code>æ ¹æ®idé™åºæ’åº</p></li></ul><h5 id="å­æŸ¥è¯¢å’ŒåµŒå¥—æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢å’ŒåµŒå¥—æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢å’ŒåµŒå¥—æŸ¥è¯¢"></a>å­æŸ¥è¯¢å’ŒåµŒå¥—æŸ¥è¯¢</h5><p><strong>å‡ºç°åœ¨å…¶ä»–è¯­å¥ä¸­çš„selectè¯­å¥è¢«ç§°ä¸ºå­æŸ¥è¯¢</strong></p><p>:top:<strong>æŸ¥è¯¢é¡ºåºæ˜¯ç”±é‡ŒåŠå¤–ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢ æ•°æ®åº“ç»“æ„çš„æ‰€æœ‰è€ƒè¯•ç»“æœ(å­¦å·ï¼Œç§‘ç›®ç¼–å·ï¼Œæˆç»©)ï¼Œé™åºæ’åˆ—</span><br><span class="line">-- æ–¹å¼1  id æ˜¯stu è¡¨ å­¦ç”Ÿç¼–å·ï¼Œsid æ˜¯ score è¡¨ï¼Œæˆç»©ç¼–å·</span><br><span class="line">select id , s.sid, score</span><br><span class="line">from score s,</span><br><span class="line">inner join sub  u</span><br><span class="line">on s.id = u.id</span><br><span class="line">where sname = &#x27;æ•°æ®ç»“æ„&#x27;</span><br><span class="line">order by score desc</span><br><span class="line"></span><br><span class="line">-- æ–¹å¼2 ä½¿ç”¨å­æŸ¥è¯¢</span><br><span class="line">select id , sid ,score</span><br><span class="line">from score </span><br><span class="line">where sid = (</span><br><span class="line">    -- ä½œä¸ºå­æŸ¥è¯¢ å…ˆæŸ¥è¯¢é‡Œè¾¹çš„ç„¶ååœ¨æŸ¥è¯¢å¤–è¾¹çš„</span><br><span class="line">select sid </span><br><span class="line">    from score </span><br><span class="line">    where sname = &#x27;æ•°æ®ç»“æ„&#x27;</span><br><span class="line">)</span><br><span class="line">order by score desc;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“ç»“æ„ çš„å­¦ç”Ÿå­¦å·</span><br><span class="line">select id from score where sname = &#x27;æ•°æ®ç»“æ„&#x27;ï¼› </span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢åˆ†æ•°ä¸å°äº80åˆ†çš„å­¦å·å’Œå§“å</span><br><span class="line">select distinct id , name </span><br><span class="line">from stu t</span><br><span class="line">inner join score s</span><br><span class="line">on s.id = t.id</span><br><span class="line">where score &gt; 80;</span><br><span class="line"></span><br><span class="line">-- åœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ ä¸€ä¸ªç§‘ç›®ï¼Œé«˜ç­‰æ•°å­¦</span><br><span class="line">select distinct id , name </span><br><span class="line">from stu t</span><br><span class="line">inner join score s</span><br><span class="line">on s.id = t.id</span><br><span class="line">where score &gt; 80 and sid = (</span><br><span class="line">select sid  from score </span><br><span class="line">    where sname = &#x27;é«˜ç­‰æ•°å­¦&#x27;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>æŒ‰ä½ç½®åˆ†ç±»ï¼š</p><blockquote><p>selectåé¢<br>fromåé¢<br>whereæˆ–havingåé¢<br>existsåé¢<br>æŒ‰ç»“æœçº§çš„è¡Œæ•°ä¸åŒåˆ†ç±»ï¼š</p></blockquote><ul><li>æ ‡é‡å­æŸ¥è¯¢ (ç»“æœé›†æœ‰ä¸€è¡Œä¸€åˆ—)</li><li>åˆ—å­æŸ¥è¯¢ (ç»“æœé›†åªæœ‰ä¸€åˆ—å¤šè¡Œ)</li><li>è¡Œå­æŸ¥è¯¢ (ç»“æœé›†åªæœ‰ä¸€è¡Œå¤šåˆ—)</li><li>è¡¨å­æŸ¥è¯¢ (ç»“æœé›†ä¸€èˆ¬ä¸ºå¤šè¡Œå¤šåˆ—)</li></ul><p><strong>whereæˆ–havingåé¢é•¿æ”¾çš„</strong></p><ul><li>æ ‡é‡å­æŸ¥è¯¢</li><li>åˆ—å­æŸ¥è¯¢</li><li>è¡Œå­æŸ¥è¯¢</li></ul><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li><p>å­æŸ¥è¯¢éƒ½æ”¾åœ¨å°æ‹¬å·å†…ï¼Œç»“å°¾ä¸ç”¨åŠ  ;</p></li><li><p>å­æŸ¥è¯¢å¯ä»¥æ”¾åœ¨fromåé¢ã€selectåé¢ã€whereåé¢ã€havingåé¢ï¼Œä½†ä¸€èˆ¬æ”¾åœ¨æ¡ä»¶çš„å³ä¾§</p></li><li>å­æŸ¥è¯¢ä¼˜å…ˆäºä¸»æŸ¥è¯¢æ‰§è¡Œï¼Œä¸»æŸ¥è¯¢ä½¿ç”¨äº†å­æŸ¥è¯¢çš„æ‰§è¡Œç»“æœ</li><li>å­æŸ¥è¯¢æ ¹æ®æŸ¥è¯¢ç»“æœçš„è¡Œæ•°ä¸åŒåˆ†ä¸ºä»¥ä¸‹ä¸¤ç±»ï¼šå•è¡Œå­æŸ¥è¯¢å’Œå¤šè¡Œå­æŸ¥è¯¢</li></ul><blockquote><p><strong>å•è¡Œå­æŸ¥è¯¢</strong><br>ç»“æœé›†åªæœ‰ä¸€è¡Œ<br>ä¸€èˆ¬æ­é…å•è¡Œæ“ä½œç¬¦ä½¿ç”¨ï¼š&gt; &lt; = &lt;&gt; &gt;= &lt;=<br>éæ³•ä½¿ç”¨å­æŸ¥è¯¢çš„æƒ…å†µï¼š</p><p>å­æŸ¥è¯¢çš„ç»“æœä¸ºä¸€ç»„å€¼<br>å­æŸ¥è¯¢çš„ç»“æœä¸ºç©º</p><p><strong>å¤šè¡Œå­æŸ¥è¯¢</strong><br>ç»“æœé›†æœ‰å¤šè¡Œ<br>ä¸€èˆ¬æ­é…å¤šè¡Œæ“ä½œç¬¦ä½¿ç”¨ï¼šanyã€allã€inã€not in<br>inï¼šå±äºå­æŸ¥è¯¢ç»“æœä¸­çš„ä»»æ„ä¸€ä¸ªå°±è¡Œ<br>anyå’Œall:å¾€å¾€å¯ä»¥ç”¨å…¶ä»–æŸ¥è¯¢ä»£æ›¿</p></blockquote><h5 id="MySQLå¸¸ç”¨å‡½æ•°"><a href="#MySQLå¸¸ç”¨å‡½æ•°" class="headerlink" title="MySQLå¸¸ç”¨å‡½æ•°"></a>MySQLå¸¸ç”¨å‡½æ•°</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- æ•°å­¦è¿ç®—</span><br><span class="line">SELECT ABS(-10);-- ç»å¯¹å€¼</span><br><span class="line">SELECT CEIL(10.1);-- ceilå’Œceiling å‘ä¸Šå–æ•´</span><br><span class="line">SELECT FLOOR(10.1);-- å‘ä¸‹å–æ•´</span><br><span class="line">SELECT RAND();-- è¿”å›0-1éšæœºæ•°</span><br><span class="line">SELECT SIGN(NULL);-- è¿”å›å‚æ•°çš„ç¬¦å· è´Ÿæ•°è¿”å›-1 æ­£æ•°è¿”å›1 </span><br><span class="line">-- 0å’Œéæ•°å­—è¿”å›0 nullè¿”å›null</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- å­—ç¬¦ä¸²å‡½æ•°</span><br><span class="line">SELECT CHAR_LENGTH(&#x27;fwebw&#x27;);-- è¿”å›å­—ç¬¦ä¸²é•¿åº¦</span><br><span class="line">SELECT CONCAT(&#x27;1&#x27;,&#x27;2&#x27;,&#x27;3&#x27;);-- æ‹¼æ¥å­—ç¬¦ä¸²</span><br><span class="line">SELECT INSERT(&#x27;123456&#x27;,1,3,&#x27;0&#x27;);-- å…ˆæŠŠç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„ç¬¬1ä½èµ·çš„0ä¸ªå­—ç¬¦å»é™¤</span><br><span class="line">-- ç„¶åå†æŠŠç¬¬äºŒä¸ªå­—ç¬¦ä¸²æ’å…¥åˆ°å¯¹åº”ä½ç½®</span><br><span class="line">SELECT LOWER(&#x27;JIOji&#x27;);-- è½¬å°å†™å­—æ¯</span><br><span class="line">SELECT UPPER(&#x27;wfdINOI&#x27;);-- è½¬å¤§å†™å­—æ¯ </span><br><span class="line">SELECT INSTR(&#x27;asdasd&#x27;,&#x27;sd&#x27;);-- è¿”å›ç¬¬ä¸€ä¸ªå­—ä¸²å‡ºç°çš„ä½ç½®</span><br><span class="line">SELECT REPLACE(&#x27;123456789123&#x27;,&#x27;123&#x27;,&#x27;hhh&#x27;);-- æŠŠs1ä¸­s2éƒ¨åˆ†æ›¿æ¢ä¸ºs3ï¼ˆæ‰€æœ‰s2ï¼‰</span><br><span class="line">SELECT SUBSTR(&#x27;123456789&#x27;,2,4);-- æˆªå–å­—ç¬¦ä¸²ï¼Œä»ç¬¬2ä¸ªå­—ç¬¦å¼€å§‹æˆªå–4ä¸ªå­—ç¬¦</span><br><span class="line">SELECT REVERSE(&#x27;123465&#x27;);-- ç¿»è½¬å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢å§“å‘¨çš„åŒå­¦å¹¶æŠŠå§“æ¢ä¸ºé‚¹</span><br><span class="line">SELECT REPLACE(studentName,&#x27;å‘¨&#x27;,&#x27;é‚¹&#x27;) FROM students</span><br><span class="line">WHERE studentName LIKE &#x27;å‘¨%&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- æ—¶é—´å’Œæ—¥æœŸå‡½æ•°</span><br><span class="line">SELECT CURRENT_DATE();-- è·å–å½“å‰æ—¥æœŸ</span><br><span class="line">SELECT CURDATE()-- è·å–å½“å‰æ—¥æœŸ</span><br><span class="line">SELECT CURRENT_TIME();-- è·å–å½“å‰æ—¶é—´ï¼ˆæ—¶åˆ†ç§’ï¼‰</span><br><span class="line">SELECT SYSDATE();-- è·å–ç³»ç»Ÿæ—¶é—´</span><br><span class="line">SELECT NOW();-- è·å–æ—¶é—´</span><br><span class="line">SELECT YEAR(NOW());-- è·å–å½“å‰å¹´</span><br><span class="line">SELECT MONTH(NOW());-- è·å–å½“å‰æœˆ</span><br><span class="line">-- Â·Â·Â·Â·Â·Â·è·å–æ—¥æ—¶åˆ†ç§’åŒç†</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- ç³»ç»Ÿ</span><br><span class="line">SELECT SYSTEM_USER();</span><br><span class="line">SELECT USER();-- è·å–å½“å‰ç”¨æˆ·</span><br><span class="line">SELECT VERSION(); -- è·å–å½“å‰ç‰ˆæœ¬ä¿¡æ¯</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>å‡½æ•°å­—æ®µ</th><th></th><th>æè¿°</th></tr></thead><tbody><tr><td>abs()</td><td></td><td>ç»å¯¹å€¼</td></tr><tr><td>ceiling()</td><td></td><td>å‘ä¸Šå–æ•´</td></tr><tr><td>floor()</td><td></td><td>å‘ä¸‹å–æ•´</td></tr><tr><td>rand()</td><td></td><td>è¿”å›ä¸€ä¸ª0-1ç›´æ¥çš„éšæœºæ•°</td></tr><tr><td>sign()</td><td></td><td>åˆ¤æ–­ä¸€ä¸ªæ•°çš„ç¬¦å·  è´Ÿæ•°èŒƒå›´-1ï¼Œæ­£æ•°è¿”å›1</td></tr><tr><td>char_length()</td><td></td><td>åˆ¤æ–­å­—ç¬¦ä¸²é•¿åº¦</td></tr><tr><td>concat(â€˜â€™,â€™â€™,â€™â€™)</td><td></td><td>æ‹¼æ¥å­—ç¬¦ä¸²</td></tr><tr><td>insert(â€˜æŸ¥è¯¢å¹¶è¢«æ›¿æ¢çš„â€™,1ï¼Œ3,â€™è¦æ›¿æ¢çš„â€™)</td><td></td><td>æŸ¥è¯¢æ›¿æ¢ä»1ï¼Œåˆ°3å·ä½ç½®æ›¿æ¢</td></tr><tr><td>lower()</td><td></td><td>å°†å­—ç¬¦ä¸²ä¸“ä¸ºå°å†™</td></tr><tr><td>upper()</td><td></td><td>å°†å°å†™è½¬ä¸ºå¤§å†™</td></tr><tr><td>instr()</td><td></td><td>è¿”å›ç¬¬ä¸€æ¬¡å‡ºç°çš„å­—ç¬¦ä¸²ç´¢å¼•</td></tr><tr><td>replace()</td><td></td><td>æ›¿æ¢å‡ºç°çš„æŒ‡å®šå­—ç¬¦ä¸²</td></tr><tr><td>substr()</td><td></td><td>æˆªå–å­—ç¬¦ä¸²</td></tr><tr><td>reverse()</td><td></td><td>åè½¬</td></tr><tr><td>â€¦.</td><td></td><td>â€¦.</td></tr></tbody></table></div><h5 id="èšåˆå‡½æ•°å’Œåˆ†ç»„è¿‡æ»¤ï¼ˆhaving-by-ï¼‰"><a href="#èšåˆå‡½æ•°å’Œåˆ†ç»„è¿‡æ»¤ï¼ˆhaving-by-ï¼‰" class="headerlink" title="èšåˆå‡½æ•°å’Œåˆ†ç»„è¿‡æ»¤ï¼ˆhaving by ï¼‰"></a>èšåˆå‡½æ•°å’Œåˆ†ç»„è¿‡æ»¤ï¼ˆhaving by ï¼‰</h5><div class="table-container"><table><thead><tr><th>èšåˆå‡½æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>count()</td><td>ç»Ÿè®¡</td></tr><tr><td>sum()</td><td>æ±‚å’Œ</td></tr><tr><td>avg()</td><td>å¹³å‡å€¼</td></tr><tr><td>max()</td><td>æœ€å¤§å€¼</td></tr><tr><td>min()</td><td>æœ€å°å€¼</td></tr></tbody></table></div><p>havingçš„ç”¨æ³•</p><p><strong>havingå­—å¥å¯ä»¥è®©æˆ‘ä»¬ç­›é€‰æˆç»„åçš„å„ç§æ•°æ®ï¼Œwhereå­—å¥åœ¨èšåˆå‰å…ˆç­›é€‰è®°å½•ï¼Œä¹Ÿå°±æ˜¯è¯´ä½œç”¨åœ¨group byå’Œhavingå­—å¥å‰ã€‚è€Œ havingå­å¥åœ¨èšåˆåå¯¹ç»„è®°å½•è¿›è¡Œç­›é€‰ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢ä¸åŒç§‘ç›®çš„å¹³å‡åˆ†æœ€é«˜åˆ†å’Œæœ€ä½åˆ† å¹³å‡åˆ†å¤§äº80</span><br><span class="line">-- ç”±äºæŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œæ‰€ä»¥whereä¸èƒ½é™å®šåˆ†ç»„åè®¡ç®—å‡ºçš„å¹³å‡å€¼ç­‰ä¿¡æ¯</span><br><span class="line">-- å¯ä»¥ä½¿ç”¨having</span><br><span class="line">SELECT sname,AVG(score),MAX(score),MIN(score)</span><br><span class="line">FROM score s</span><br><span class="line">INNER JOIN `sub` sub</span><br><span class="line">ON s.id=sub.id</span><br><span class="line">GROUP BY s.id</span><br><span class="line">HAVING AVG(score)&gt;=80;</span><br></pre></td></tr></table></figure><h3 id="äº‹åŠ¡ï¼ˆtransactionï¼‰"><a href="#äº‹åŠ¡ï¼ˆtransactionï¼‰" class="headerlink" title="äº‹åŠ¡ï¼ˆtransactionï¼‰"></a>äº‹åŠ¡ï¼ˆtransactionï¼‰</h3><p>äº‹åŠ¡ç‰¹æ€§ï¼šACIDï¼ˆåŸå­æ€§ï¼Œä¸€è‡´æ€§ï¼Œéš”ç¦»æ€§ï¼ŒæŒä¹…æ€§ï¼‰</p><ul><li><p>A:åŸå­æ€§</p><ul><li>è¦ä¹ˆæˆåŠŸè¦ä¹ˆä¸æˆåŠŸ</li></ul></li><li><p>C:ä¸€è‡´æ€§</p><ul><li>æœ€ç»ˆä¸€è‡´æ€§ï¼Œä¿è¯æœ€ç»ˆç»“æœä¸€è‡´</li></ul></li><li><p>I:éš”ç¦»æ€§</p><ul><li>ä¸€ä¸ªäº‹åŠ¡çš„æäº¤ä¸ä¼šå½±å“ä¸‹ä¸€ä¸ªäº‹åŠ¡ã€‚</li><li>éš”ç¦»äº§ç”Ÿçš„é—®é¢˜<ul><li>è„è¯»ï¼š ä¸€ä¸ªäº‹åŠ¡è¯»å–äº†å¦ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ®ã€‚</li><li>ä¸å¯é‡å¤è¯»ï¼šåœ¨ä¸€ä¸ªäº‹åŠ¡å†…è¯»å–è¡¨ä¸­çš„æŸä¸€è¡Œæ•°æ®ï¼Œå¤šæ¬¡è¯»å–ç»“æœä¸åŒã€‚</li><li>å¹»è¯»ï¼šæŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡å†…è¯»å–åˆ°åˆ«çš„äº‹åŠ¡æ’å…¥çš„æ•°æ®ï¼Œå¯¼è‡´å‰åè¯»å–ä¸ä¸€è‡´ã€‚</li></ul></li></ul></li><li><p>D:æŒä¹…æ€§</p><ul><li>è¡¨ç¤ºäº‹åŠ¡ç»“æŸåçš„æ•°ä¸ä¼šéšç€å¤–ç•ŒåŸå› å¯¼è‡´æ•°æ®ä¸¢å¤±</li><li>ä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹åŠ¡æ²¡æœ‰æäº¤ï¼Œé‚£ä¹ˆå°±æ¢å¤åˆ°åŸæ¥çš„æœªæäº¤çŠ¶æ€ï¼Œå¦‚æœæäº¤ï¼Œé‚£ä¹ˆå°±æ›´æ–°ä¸ºæäº¤åçš„çŠ¶æ€ï¼ŒæŒä¹…åŒ–åˆ°æ•°æ®ï¼Œäº‹åŠ¡ä¸€æ—¦æäº¤å°±ä¸å¯é€†ã€‚</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- æ‰‹åŠ¨å¼€å¯äº‹åŠ¡</span><br><span class="line">start transaction -- æ ‡è®°ä¸€ä¸ªäº‹åŠ¡çš„å¼€å§‹ï¼Œä»è¿™ä¸ªä¹‹åçš„sqléƒ½åœ¨åŒä¸€ä¸ªäº‹åŠ¡å†…</span><br><span class="line"></span><br><span class="line">insert xxx</span><br><span class="line">insert xxx</span><br><span class="line"></span><br><span class="line">-- æäº¤ æŒä¹…åŒ–</span><br><span class="line">commit ;</span><br><span class="line">-- å¦‚æœæäº¤å¤±è´¥å°±å›æ»šåˆ°åŸæ¥çš„æ ·å­</span><br><span class="line">rollback;</span><br><span class="line"></span><br><span class="line">-- äº‹åŠ¡ç»“æŸ</span><br><span class="line">set autocommit = 1 ï¼›-- å¼€å¯è‡ªåŠ¨æäº¤</span><br><span class="line"></span><br><span class="line">savepoint ä¿å­˜ç‚¹å -- è®¾ç½®ä¸€ä¸ªäº‹åŠ¡çš„ä¿æŒç‚¹</span><br><span class="line">rollback to savepoint ä¿å­˜ç‚¹å  -- å›æ»šåˆ°ä¿å­˜ç‚¹</span><br><span class="line">release  savepoint ä¿å­˜ç‚¹å -- æ’¤é”€ä¿å­˜ç‚¹</span><br></pre></td></tr></table></figure><p>æ¨¡æ‹Ÿåœºæ™¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">-- è½¬è´¦</span><br><span class="line">create database shop character set utf8 collate utf_8_general_cli;</span><br><span class="line">use shop;</span><br><span class="line">create table account(</span><br><span class="line">id int (3) not null primary key auto_increment,</span><br><span class="line">    name varchar(20) not nullï¼Œ</span><br><span class="line">    money decimal(9,2) not null</span><br><span class="line">) engine = innodb default charset=utf8;</span><br><span class="line"></span><br><span class="line">-- æ’å…¥æ•°æ®</span><br><span class="line">insert into account(name,money) </span><br><span class="line">value(&#x27;A&#x27;,1024.00),(&#x27;B&#x27;,2048.00)</span><br><span class="line"></span><br><span class="line">-- æ¨¡æ‹Ÿè½¬è´¦ï¼šäº‹åŠ¡</span><br><span class="line">set autocommit = 0; -- å…³é—­è‡ªåŠ¨æäº¤</span><br><span class="line">start transaction ; -- å¼€å¯äº‹åŠ¡</span><br><span class="line">update account set money - 500 where name = &#x27;A&#x27;;</span><br><span class="line">update account set money + 500 where name = &#x27;B&#x27;;</span><br><span class="line"></span><br><span class="line">commit ; -- æäº¤äº‹åŠ¡</span><br><span class="line">rollback ; -- å›æ»š</span><br><span class="line">set autocommit = 1; -- æ¢å¤é»˜è®¤å€¼</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h3><p>==<strong>æ˜¯å¸®åŠ©mysqlé«˜æ•ˆè·å–æ•°æ®çš„æ•°æ®ç»“æ„ï¼Œæå–å¥å­ä¸»å¹²ï¼Œå¯ä»¥å¾—åˆ°ç´¢å¼•çš„æœ¬è´¨ï¼Œç´¢å¼•æ˜¯æ•°æ®ç»“æ„ã€‚</strong>==</p><h4 id="ç´¢å¼•åˆ†ç±»ï¼š"><a href="#ç´¢å¼•åˆ†ç±»ï¼š" class="headerlink" title="ç´¢å¼•åˆ†ç±»ï¼š"></a><strong>ç´¢å¼•åˆ†ç±»ï¼š</strong></h4><ol><li><p>ä¸»é”®ç´¢å¼•ï¼šåˆ›å»ºä¸»é”®åä¼šè‡ªåŠ¨å»ºç«‹ç´¢å¼•</p><ol><li><p>å”¯ä¸€æ ‡è¯†ï¼Œä¸»é”®ä¸å¯é‡å¤ï¼Œåªèƒ½æœ‰ä¸€ä¸ªä¸»é”®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#éšè¡¨ä¸€èµ·å»ºç´¢å¼•ï¼š</span><br><span class="line">CREATE TABLE customer (</span><br><span class="line">    id INT(10) UNSIGNED  AUTO_INCREMENT ,</span><br><span class="line">    customer_no VARCHAR(200),</span><br><span class="line">    customer_name VARCHAR(200),</span><br><span class="line">    PRIMARY KEY(id) </span><br><span class="line">);</span><br><span class="line">#ä½¿ç”¨AUTO_INCREMENTå…³é”®å­—çš„åˆ—å¿…é¡»æœ‰ç´¢å¼•(åªè¦æœ‰ç´¢å¼•å°±è¡Œ)ã€‚</span><br><span class="line">CREATE TABLE customer2 (</span><br><span class="line">    id INT(10) UNSIGNED,</span><br><span class="line">    customer_no VARCHAR(200),</span><br><span class="line">    customer_name VARCHAR(200),</span><br><span class="line"> PRIMARY KEY(id) </span><br><span class="line">);</span><br><span class="line">#å•ç‹¬å»ºä¸»é”®ç´¢å¼•ï¼š</span><br><span class="line">ALTER TABLE customer </span><br><span class="line">add PRIMARY KEY </span><br><span class="line">customer(customer_no);  </span><br><span class="line">#åˆ é™¤å»ºä¸»é”®ç´¢å¼•ï¼š</span><br><span class="line">ALTER TABLE customer</span><br><span class="line">drop PRIMARY KEY ;  </span><br><span class="line">#ä¿®æ”¹å»ºä¸»é”®ç´¢å¼•ï¼š</span><br><span class="line">#å¿…é¡»å…ˆåˆ é™¤æ‰(drop)åŸç´¢å¼•ï¼Œå†æ–°å»º(add)ç´¢å¼•</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol></li><li><p>å”¯ä¸€ç´¢å¼•:ç´¢å¼•åˆ—çš„å€¼å¿…é¡»å”¯ä¸€ï¼Œä½†å…è®¸æœ‰ç©ºå€¼</p><ol><li><p>é¿å…é‡å¤çš„åˆ—å‡ºç°ï¼Œå”¯ä¸€ç´¢å¼•å¯ä»¥é‡å¤ï¼Œå¤šä¸ªåˆ—éƒ½å¯ä»¥æ ‡è¯†ä¸ºï¼Œå”¯ä¸€ç´¢å¼•ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#éšè¡¨ä¸€èµ·å»ºç´¢å¼•ï¼š</span><br><span class="line">CREATE TABLE customer (</span><br><span class="line">    id INT(10) UNSIGNED  AUTO_INCREMENT ,</span><br><span class="line">    customer_no VARCHAR(200),</span><br><span class="line">    customer_name VARCHAR(200),</span><br><span class="line">  PRIMARY KEY(id),</span><br><span class="line">  KEY (customer_name),</span><br><span class="line">  UNIQUE (customer_no)</span><br><span class="line">);</span><br><span class="line">#å»ºç«‹ å”¯ä¸€ç´¢å¼•æ—¶å¿…é¡»ä¿è¯æ‰€æœ‰çš„å€¼æ˜¯å”¯ä¸€çš„ï¼ˆé™¤äº†nullï¼‰ï¼Œè‹¥æœ‰é‡å¤æ•°æ®ï¼Œä¼šæŠ¥é”™ã€‚   </span><br><span class="line">#å•ç‹¬å»ºå”¯ä¸€ç´¢å¼•ï¼š</span><br><span class="line">CREATE UNIQUE INDEX </span><br><span class="line">idx_customer_no </span><br><span class="line">ON customer(customer_no); </span><br><span class="line">#åˆ é™¤ç´¢å¼•ï¼š</span><br><span class="line">DROP INDEX idx_customer_no</span><br><span class="line">on customer ;</span><br></pre></td></tr></table></figure></li></ol></li></ol><ol><li><p>å¸¸è§„ç´¢å¼•</p><ol><li><p>é»˜è®¤çš„ï¼Œindexï¼Œkeyå…³é”®å­—æ¥è®¾ç½®</p></li><li><p>å•åˆ—ç´¢å¼•ï¼šä¸€ä¸ªç´¢å¼•åªåŒ…å«å•ä¸ªåˆ—ï¼Œä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªå•åˆ—ç´¢å¼•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#éšè¡¨ä¸€èµ·å»ºç´¢å¼•ï¼š</span><br><span class="line">CREATE TABLE customer (</span><br><span class="line">    id INT(10) UNSIGNED  AUTO_INCREMENT ,</span><br><span class="line">    customer_no VARCHAR(200),</span><br><span class="line">    customer_name VARCHAR(200),</span><br><span class="line">  PRIMARY KEY(id),</span><br><span class="line">  KEY (customer_name)  </span><br><span class="line">);</span><br><span class="line">#éšè¡¨ä¸€èµ·å»ºç«‹çš„ç´¢å¼• ç´¢å¼•ååŒ åˆ—å(customer_name)</span><br><span class="line">#å•ç‹¬å»ºå•å€¼ç´¢å¼•ï¼š</span><br><span class="line">CREATE INDEX idx_customer_name </span><br><span class="line">ON customer(customer_name); </span><br><span class="line">#åˆ é™¤ç´¢å¼•ï¼š</span><br><span class="line">DROP INDEX idx_customer_name ;</span><br></pre></td></tr></table></figure></li></ol></li></ol><pre><code> 3.  å¤åˆç´¢å¼•ï¼šä¸€ä¸ªç´¢å¼•åŒ…å«å¤šä¸ªåˆ—ï¼Œåœ¨æ•°æ®åº“æ“ä½œæœŸé—´ï¼Œå¤åˆç´¢å¼•æ¯”å•å€¼ç´¢å¼•æ‰€éœ€è¦çš„å¼€é”€æ›´å°ï¼ˆå¯¹äºç›¸åŒçš„å¤šä¸ªåˆ—å»ºç´¢å¼•ï¼‰     <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#éšè¡¨ä¸€èµ·å»ºç´¢å¼•ï¼š</span><br><span class="line">CREATE TABLE customer (</span><br><span class="line">    id INT(10) UNSIGNED  AUTO_INCREMENT ,</span><br><span class="line">    customer_no VARCHAR(200),</span><br><span class="line">    customer_name VARCHAR(200),</span><br><span class="line">  PRIMARY KEY(id),</span><br><span class="line">  KEY (customer_name),</span><br><span class="line">  UNIQUE (customer_name),</span><br><span class="line">  KEY (customer_no,customer_name)</span><br><span class="line">);</span><br><span class="line">#å•ç‹¬å»ºç´¢å¼•ï¼š</span><br><span class="line">CREATE INDEX idx_no_name</span><br><span class="line">ON customer(customer_no,customer_name); </span><br><span class="line">#åˆ é™¤ç´¢å¼•ï¼š</span><br><span class="line">DROP INDEX idx_no_name  on customer ;</span><br></pre></td></tr></table></figure></code></pre><ol><li><p>å…¨æ–‡ç´¢å¼•</p><ol><li><p>åœ¨ç‰¹å®šçš„æ•°æ®åº“å¼•æ“ä¸‹æ‰æœ‰çš„ï¼ŒmyIsam</p></li><li><p>å¿«é€Ÿå®šä½æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- ç´¢å¼•çš„ä½¿ç”¨</span><br><span class="line">-- åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™ç»™å­—æ®µå¢åŠ ç´¢å¼•</span><br><span class="line">-- åˆ›å»ºå®Œæ¯•åï¼Œå¢åŠ ç´¢å¼•</span><br><span class="line"></span><br><span class="line">-- æ˜¾ç¤ºæ‰€æœ‰çš„ç´¢å¼•ä¿¡æ¯</span><br><span class="line">show index from student;</span><br><span class="line"></span><br><span class="line">-- å¢åŠ ä¸€ä¸ªå…¨æ–‡ç´¢å¼•ï¼ˆç´¢å¼•åï¼‰ åˆ—å</span><br><span class="line">alter table school.student</span><br><span class="line">add fulltext </span><br><span class="line">index studentName(studentName);</span><br><span class="line"></span><br><span class="line">-- explain åˆ†æmysqlæ‰§è¡Œçš„çŠ¶å†µ</span><br><span class="line">explain select * from student ; -- éå…¨æ–‡ç´¢å¼•</span><br><span class="line"></span><br><span class="line">select * from student</span><br><span class="line">where match(studentName) against(&#x27;åˆ˜&#x27;)ï¼›</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•</p><ol><li>èšé›†ç´¢å¼•ï¼šæŒ‡ç´¢å¼•é¡¹çš„æ’åºæ–¹å¼å’Œè¡¨ä¸­æ•°æ®è®°å½•æ’åºæ–¹å¼ä¸€è‡´çš„ç´¢å¼•ã€‚ </li><li>éèšé›†ç´¢å¼•ï¼šä¸èšé›†ç´¢å¼•ç›¸åï¼Œç´¢å¼•é¡ºåºä¸ç‰©ç†å­˜å‚¨é¡ºåºä¸ä¸€è‡´ </li></ol></li></ol></li></ol><h4 id="ç´¢å¼•æµ‹è¯•"><a href="#ç´¢å¼•æµ‹è¯•" class="headerlink" title="ç´¢å¼•æµ‹è¯•"></a>ç´¢å¼•æµ‹è¯•</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">-- æˆ‘ä»¬åœ¨åˆ›å»ºç´¢å¼•çš„æ—¶å€™ä¸€èˆ¬ä½¿ç”¨  primary  key (åˆ—å)äº‹å®ä¸Šè¿™å°±æ˜¯è®¾ç½®ä¸»é”®ï¼Œä½†æ˜¯è¿™ä¸ªä¹Ÿå°±æ˜¯åˆ›å»ºäº†å”¯ä¸€ç´¢å¼•</span><br><span class="line">create table if not exists yyl(</span><br><span class="line">id int(10) not null primary key auto_increment comment &#x27;ä¸»é”®&#x27;,</span><br><span class="line">    name varchar(20) default null comment  &#x27;å§“å&#x27;,</span><br><span class="line">    pwd varchar(50) not null default &#x27;123321&#x27; comment &#x27;å¯†ç &#x27;,</span><br><span class="line">    age int (10) not null default &#x27;0&#x27; comment &#x27;å¹´é¾„&#x27;</span><br><span class="line">)engine = innodb default charset = utf8;</span><br><span class="line"></span><br><span class="line">-- æ’å…¥100ä¸‡æ•°æ®</span><br><span class="line">delimiter $$ -- å†™æ•°æ®ä¹‹å‰å¿…é¡»è¦å†™ï¼Œæ ‡å¿—</span><br><span class="line">create function mock_data()</span><br><span class="line">returns int</span><br><span class="line">begin</span><br><span class="line">declare num int default 1000000;</span><br><span class="line">declare i int default 0;</span><br><span class="line">while i &lt; num do</span><br><span class="line">-- æ’å…¥è¯­å¥</span><br><span class="line"></span><br><span class="line">insert into yyl (name,pwd,age) </span><br><span class="line">value(concat(&#x27;ç”¨æˆ·&#x27;,i),UUID(),floor(rand()*100));</span><br><span class="line">set i = i + 1;</span><br><span class="line">end while;</span><br><span class="line">return i;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">-- æ‰§è¡Œä¸€ä¸‹</span><br><span class="line">select mock_data();</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">select mock_data();</span><br><span class="line">å—å½±å“çš„è¡Œ: 0</span><br><span class="line">æ—¶é—´: 42.708ms</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">-- æ’å…¥è¡¨æ•°æ®</span><br><span class="line">insert into yyl (name,pwd,age) </span><br><span class="line">value(concat(&#x27;ç”¨æˆ·&#x27;,i),UUID(),floor(rand()*100));</span><br><span class="line"></span><br><span class="line">-- ç”±äºæ’å…¥äº†1000000æ¡æ•°æ®ï¼Œé‚£ä¹ˆæŸ¥è¯¢ä¸€ä¸ªå€¼</span><br><span class="line">select * from yyl where name = &#x27;ç”¨æˆ·99999&#x27;;</span><br><span class="line">/*</span><br><span class="line">æ²¡åˆ›å»ºç´¢å¼•çš„æ—¶å€™å»æŸ¥è¯¢æ•°æ®</span><br><span class="line">[SQL] select * from yyl where name = &#x27;ç”¨æˆ·99999&#x27;;</span><br><span class="line">å—å½±å“çš„è¡Œ: 0</span><br><span class="line">æ—¶é—´: 0.744ms</span><br><span class="line">æˆ‘ä»¬å‘ç°æ—¶é—´æ¯”è¾ƒé•¿</span><br><span class="line">*/</span><br><span class="line">explain select * from yyl where name = &#x27;ç”¨æˆ·99999&#x27;; -- rows 1000539æ¬¡</span><br><span class="line"></span><br><span class="line">-- åˆ›å»ºç´¢å¼• id_è¡¨å_å­—æ®µå on ç´¢å¼•å on è¡¨ï¼ˆå­—æ®µï¼‰</span><br><span class="line">create index id_yyl_name on yyl(name);</span><br><span class="line"></span><br><span class="line">-- åˆ é™¤ç´¢å¼•</span><br><span class="line">drop index id_yyl_name ;</span><br><span class="line">/*</span><br><span class="line">åˆ›å»ºç´¢å¼•åå†å»æŸ¥è¯¢æ•°æ®éå¸¸å¿«</span><br><span class="line">[SQL] select * from yyl where name = &#x27;ç”¨æˆ·99999&#x27;; </span><br><span class="line">å—å½±å“çš„è¡Œ: 0</span><br><span class="line">æ—¶é—´: 0.009ms</span><br><span class="line">*/</span><br><span class="line">-- æ­¤æ—¶explain   rows =1;</span><br><span class="line">explain select * from yyl where name = &#x27;ç”¨æˆ·99999&#x27;;</span><br></pre></td></tr></table></figure><p>==åˆ›å»ºç´¢å¼•==</p><p>â€‹    ==create index id <em> è¡¨å</em> å­—æ®µå on ç´¢å¼•å è¡¨(å­—æ®µ)ï¼›==</p><p>==ç´¢å¼•åœ¨å°æ•°æ®é‡çš„æ—¶å€™ï¼Œç”¨å¤„ä¸å¤§ï¼Œä½†æ˜¯åœ¨å¤§æ•°æ®çš„æ—¶å€™ï¼ŒåŒºåˆ«ååˆ†æ˜æ˜¾ã€‚==</p><h4 id="ç´¢å¼•åŸåˆ™"><a href="#ç´¢å¼•åŸåˆ™" class="headerlink" title="ç´¢å¼•åŸåˆ™"></a>ç´¢å¼•åŸåˆ™</h4><ul><li>ç´¢å¼•ä¸æ˜¯è¶Šå¤šè¶Šå¥½</li><li>ä¸è¦å¯¹è¿›ç¨‹å˜åŠ¨æ•°æ®åŠ ç´¢å¼•</li><li>å°æ•°æ®é‡çš„è¡¨ä¸éœ€è¦åŠ ç´¢å¼•</li><li>ç´¢å¼•ä¸€èˆ¬åŠ åœ¨å¸¸å¸¸ç”¨æ¥æŸ¥è¯¢çš„å­—æ®µä¸Šï¼</li></ul><p>ç´¢å¼•çš„æ•°æ®ç»“æ„ï¼š</p><ul><li>Hash ç±»å‹çš„ç´¢å¼•</li><li>B+æ ‘ï¼šinnodbçš„é»˜è®¤æ•°æ®ç»“æ„</li></ul><h5 id="è®¨è®ºä¸ºå•¥Innodbè¦ä½¿ç”¨B-æ ‘è€Œä¸ä½¿ç”¨å…¶ä»–æ•°æ®ç»“æ„å‘¢ï¼Ÿ"><a href="#è®¨è®ºä¸ºå•¥Innodbè¦ä½¿ç”¨B-æ ‘è€Œä¸ä½¿ç”¨å…¶ä»–æ•°æ®ç»“æ„å‘¢ï¼Ÿ" class="headerlink" title="è®¨è®ºä¸ºå•¥Innodbè¦ä½¿ç”¨B+æ ‘è€Œä¸ä½¿ç”¨å…¶ä»–æ•°æ®ç»“æ„å‘¢ï¼Ÿ"></a>è®¨è®ºä¸ºå•¥Innodbè¦ä½¿ç”¨B+æ ‘è€Œä¸ä½¿ç”¨å…¶ä»–æ•°æ®ç»“æ„å‘¢ï¼Ÿ</h5><ul><li><p>â€‹    B-æ ‘ï¼šï¼ˆä¸æ˜¯äºŒåˆ†æŸ¥æ‰¾ï¼Œå´ç›¸ä¼¼äºäºŒåˆ†æŸ¥æ‰¾ï¼‰</p><ul><li>B-æ ‘æ˜¯ä¸€ç§å¤šè·¯è‡ªå¹³è¡¡çš„æœç´¢æ ‘ï¼Œå®ƒç±»ä¼¼æ™®é€šçš„å¹³è¡¡äºŒå‰æ ‘ï¼Œä¸åŒçš„ä¸€ç‚¹æ˜¯B-æ ‘å…è®¸æ¯ä¸ªèŠ‚ç‚¹æœ‰æ›´å¤šçš„å­èŠ‚ç‚¹ã€‚B-Treeç›¸å¯¹äºAVLTreeç¼©å‡äº†èŠ‚ç‚¹ä¸ªæ•°ï¼Œä½¿æ¯æ¬¡ç£ç›˜I/Oå–åˆ°å†…å­˜çš„æ•°æ®éƒ½å‘æŒ¥äº†ä½œç”¨ï¼Œä»è€Œæé«˜äº†æŸ¥è¯¢æ•ˆç‡ã€‚</li><li>å­˜åœ¨é—®é¢˜ï¼š<ul><li>æ¯ä¸ªèŠ‚ç‚¹ä¸­æœ‰keyï¼Œä¹Ÿæœ‰dataï¼Œè€Œæ¯ä¸€ä¸ªé¡µçš„å­˜å‚¨ç©ºé—´æ˜¯æœ‰é™çš„ï¼Œå¦‚æœdataæ•°æ®è¾ƒå¤§æ—¶å°†ä¼šå¯¼è‡´æ¯ä¸ªèŠ‚ç‚¹ï¼ˆå³ä¸€ä¸ªé¡µï¼‰èƒ½å­˜å‚¨çš„keyçš„æ•°é‡å¾ˆå°ã€‚ å½“å­˜å‚¨çš„æ•°æ®é‡å¾ˆå¤§æ—¶åŒæ ·ä¼šå¯¼è‡´B-Treeçš„æ·±åº¦è¾ƒå¤§ï¼Œå¢å¤§æŸ¥è¯¢æ—¶çš„ç£ç›˜I/Oæ¬¡æ•°ï¼Œè¿›è€Œå½±å“æŸ¥è¯¢æ•ˆç‡ </li></ul></li></ul></li><li><p>B+æ ‘ï¼š</p><ul><li>B+Treeæ˜¯åœ¨B-TreeåŸºç¡€ä¸Šçš„ä¸€ç§ä¼˜åŒ–ï¼ŒInnoDBå­˜å‚¨å¼•æ“å°±æ˜¯ç”¨B+Treeå®ç°å…¶ç´¢å¼•ç»“æ„ã€‚</li><li>å®ƒå¸¦æ¥çš„å˜åŒ–ç‚¹ï¼š<ul><li>B+æ ‘æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥åŒ…å«æ›´å¤šçš„èŠ‚ç‚¹ï¼Œè¿™æ ·åšæœ‰ä¸¤ä¸ªåŸå› ï¼Œä¸€ä¸ªæ˜¯é™ä½æ ‘çš„é«˜åº¦ã€‚å¦å¤–ä¸€ä¸ªæ˜¯å°†æ•°æ®èŒƒå›´å˜ä¸ºå¤šä¸ªåŒºé—´ï¼ŒåŒºé—´è¶Šå¤šï¼Œæ•°æ®æ£€ç´¢è¶Šå¿«</li><li>éå¶å­èŠ‚ç‚¹å­˜å‚¨keyï¼Œå¶å­èŠ‚ç‚¹å­˜å‚¨keyå’Œæ•°æ®å¶å­èŠ‚ç‚¹ä¸¤ä¸¤æŒ‡é’ˆç›¸äº’é“¾æ¥ï¼ˆç¬¦åˆç£ç›˜çš„é¢„è¯»ç‰¹æ€§ï¼‰ï¼Œé¡ºåºæŸ¥è¯¢æ€§èƒ½æ›´é«˜</li></ul></li><li>é€šå¸¸åœ¨B+Treeä¸Šæœ‰ä¸¤ä¸ªå¤´æŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡å‘æ ¹èŠ‚ç‚¹ï¼Œå¦ä¸€ä¸ªæŒ‡å‘å…³é”®å­—æœ€å°çš„å¶å­èŠ‚ç‚¹ï¼Œè€Œä¸”æ‰€æœ‰å¶å­èŠ‚ç‚¹ï¼ˆå³æ•°æ®èŠ‚ç‚¹ï¼‰ä¹‹é—´æ˜¯ä¸€ç§é“¾å¼ç¯ç»“æ„ã€‚</li><li>å› æ­¤å¯ä»¥å¯¹B+Treeè¿›è¡Œä¸¤ç§æŸ¥æ‰¾è¿ç®—ï¼š<ul><li>ä¸€ç§æ˜¯å¯¹äºä¸»é”®çš„èŒƒå›´æŸ¥æ‰¾çš„åˆ†é¡µæŸ¥æ‰¾ã€‚</li><li>å¦ä¸€ç§æ˜¯ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œè¿›è¡ŒéšæœºæŸ¥æ‰¾ã€‚ </li></ul></li></ul><p><strong>Bæ ‘å’ŒB+æ ‘çš„åŒºåˆ«ï¼š</strong></p><blockquote><p>B+æ ‘å†…èŠ‚ç‚¹ä¸å­˜å‚¨æ•°æ®ï¼Œæ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨å¶èŠ‚ç‚¹å¯¼è‡´æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦å›ºå®šä¸ºlog n<br>B-æ ‘æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦ä¸å›ºå®šï¼Œä¸Keyåœ¨æ ‘ä¸­çš„ä½ç½®æœ‰å…³ï¼Œæœ€å¥½ä¸ºO(1)<br>B+æ ‘å¶èŠ‚ç‚¹ä¸¤ä¸¤ç›¸è¿å¯å¤§å¤§å¢åŠ åŒºé—´è®¿é—®æ€§ï¼Œå¯ä½¿ç”¨åœ¨èŒƒå›´æŸ¥è¯¢ç­‰<br>B+æ ‘æ›´é€‚åˆå¤–éƒ¨å­˜å‚¨ï¼ˆå­˜å‚¨ç£ç›˜æ•°æ®ï¼‰ã€‚ç”±äºå†…èŠ‚ç‚¹æ— dataåŸŸï¼Œæ¯ä¸ªèŠ‚ç‚¹èƒ½ç´¢å¼•çš„èŒƒå›´æ›´å¤§æ›´ç²¾ç¡®ã€‚</p></blockquote></li></ul><h3 id="DCLï¼ˆæ•°æ®åº“æ§åˆ¶è¯­è¨€ï¼‰ï¼š"><a href="#DCLï¼ˆæ•°æ®åº“æ§åˆ¶è¯­è¨€ï¼‰ï¼š" class="headerlink" title="DCLï¼ˆæ•°æ®åº“æ§åˆ¶è¯­è¨€ï¼‰ï¼š"></a>DCLï¼ˆæ•°æ®åº“æ§åˆ¶è¯­è¨€ï¼‰ï¼š</h3><p><strong>æ•°æ®æ§åˆ¶è¯­è¨€ ç”¨æˆ·æƒé™æ§åˆ¶ grantã€revoke</strong> </p><h4 id="æƒé™ç®¡ç†"><a href="#æƒé™ç®¡ç†" class="headerlink" title="æƒé™ç®¡ç†"></a>æƒé™ç®¡ç†</h4><h5 id="ç”¨æˆ·ç®¡ç†"><a href="#ç”¨æˆ·ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç®¡ç†"></a>ç”¨æˆ·ç®¡ç†</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">-- åˆ›å»ºç”¨æˆ· create user ç”¨æˆ·å identified by &#x27;å¯†ç &#x27;</span><br><span class="line">create user xh identitied by &#x27;a&#x27;;</span><br><span class="line">-- ä¿®æ”¹å¯†ç </span><br><span class="line">set password = password(&#x27;123321&#x27;);</span><br><span class="line">-- ä¿®æ”¹å¯†ç ï¼ˆä¿®æ”¹æŒ‡å®šç”¨æˆ·å¯†ç ï¼‰</span><br><span class="line">set password from xh = password(&#x27;a&#x27;);</span><br><span class="line">-- é‡å‘½å</span><br><span class="line">rename user åŸæ¥å to æ–°åå­—;</span><br><span class="line">-- ç”¨æˆ·æˆæƒ</span><br><span class="line">-- all privileges é™¤äº†ç»™åˆ«äººæˆæƒï¼Œå…¶ä»–éƒ½èƒ½å¹²</span><br><span class="line">grant all privileges on *.* to xh;</span><br><span class="line">-- æŸ¥è¯¢æƒé™</span><br><span class="line">show grant for xh ; -- æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„æƒé™</span><br><span class="line">show grant for root@loaclhost</span><br><span class="line">-- rootç”¨æˆ·æƒé™ï¼šGrant all privileges on *.* to &#x27;root&#x27;@&#x27;localhost&#x27; with grant option </span><br><span class="line">Grant all privileges on *.* to &#x27;root&#x27;@&#x27;localhost&#x27; with grant option </span><br><span class="line">-- æ’¤é”€æƒé™ revoke å“ªäº›æƒé™ï¼Œåœ¨å“ªä¸ªåº“æ’¤é”€ï¼Œç»™è°æ’¤é”€</span><br><span class="line">revoke all privileges on *.* from xh;</span><br><span class="line">-- åˆ é™¤ç”¨æˆ·</span><br><span class="line">drop user xh;</span><br></pre></td></tr></table></figure><h4 id="MYSQLå¤‡ä»½"><a href="#MYSQLå¤‡ä»½" class="headerlink" title="MYSQLå¤‡ä»½"></a>MYSQLå¤‡ä»½</h4><p>ä¸ºå•¥è¦å¤‡ä»½ï¼š</p><ul><li><p>ä¿è¯é‡è¦æ•°æ®ä¸ä¸¢å¤±ã€‚</p></li><li><p>æ•°æ®è½¬ç§»ã€‚</p></li></ul><p>MYSQLæ•°æ®åº“å¤‡ä»½çš„æ–¹å¼ï¼š</p><ul><li>ç›´æ¥æ‹·è´ç‰©ç†æ–‡ä»¶</li><li>åœ¨å¯è§†åŒ–ç¼–è¾‘å™¨ä¸­æ‰‹åŠ¨å¯¼å‡º</li><li>ä½¿ç”¨å‘½ä»¤è¡Œå¯¼å‡º  mysqldump  å‘½ä»¤è¡Œå¯¼å‡ºã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¼å‡ºæ•°æ®åº“ï¼Œwindowsæˆ–è€…linuxå¯¼å‡º</span></span><br><span class="line"><span class="comment"># -p åå¯†ç  ï¼Œæ•°æ®åº“å ï¼Œè¡¨å &gt;D:/æ–‡ä»¶å.sql</span></span><br><span class="line">mysqldump -hlocalhost -uroot -pa <span class="built_in">test</span> test1 &gt;D:/a.sql</span><br><span class="line"><span class="comment"># å¯¼å…¥æ•°æ®åº“</span></span><br><span class="line">mysql -uroot -pa åº“å &lt; å¤‡ä»½æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">use <span class="built_in">test</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> d:/æ–‡ä»¶å.sql;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ•°æ®åº“è§„èŒƒ"><a href="#æ•°æ®åº“è§„èŒƒ" class="headerlink" title="æ•°æ®åº“è§„èŒƒ"></a>æ•°æ®åº“è§„èŒƒ</h4><h5 id="ä¸ºå•¥éœ€è¦è®¾è®¡ï¼Ÿ"><a href="#ä¸ºå•¥éœ€è¦è®¾è®¡ï¼Ÿ" class="headerlink" title="ä¸ºå•¥éœ€è¦è®¾è®¡ï¼Ÿ"></a>ä¸ºå•¥éœ€è¦è®¾è®¡ï¼Ÿ</h5><p>==å½“æ•°æ®åº“æ¯”è¾ƒå¤æ‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡==</p><p>ä¸€ä¸ªç³Ÿç³•çš„æ•°æ®åº“è®¾è®¡ï¼š</p><ul><li>å­˜åœ¨æ•°æ®æ²‰ä½™ï¼Œæµªè´¹ç©ºé—´</li><li>æ•°æ®æ’å…¥å’Œåˆ é™¤éƒ½ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œå¼‚å¸¸ã€å±è”½ä½¿ç”¨ç‰©ç†å¤–é”®ã€‘</li><li>ç¨‹åºçš„æ€§èƒ½å¾ˆå·®</li></ul><p>è‰¯å¥½çš„æ•°æ®åº“è®¾è®¡ï¼š</p><ul><li>èŠ‚çœå†…å­˜ç©ºé—´ã€‚</li><li>ä¿è¯æ•°æ®åº“çš„å®Œæ•´æ€§ã€‚</li><li>æ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œå¼€å‘ã€‚</li></ul><p>è½¯ä»¶å¼€å‘ä¸­ï¼Œå…³äºæ•°æ®åº“è®¾è®¡</p><ul><li>åˆ†æéœ€æ±‚ï¼šåˆ†æä¸šåŠ¡å’Œéœ€è¦å¤„ç†çš„æ•°æ®åº“çš„éœ€æ±‚ã€‚</li><li>æ¦‚è¦è®¾è®¡ï¼šè®¾è®¡å…³ç³»å›¾E-Rå›¾ã€‚</li></ul><p>ç”¨ä¸ªäººåšå®¢ï¼š</p><ul><li>æ”¶é›†ç”¨æˆ·ä¿¡æ¯ï¼š<ul><li>ç”¨æˆ·è¡¨ï¼ˆç”¨æˆ·ç™»å½•æ³¨å†Œï¼Œç”¨æˆ·ä¿¡æ¯ï¼Œå†™åšå®¢ï¼Œåˆ›å»ºåˆ†ç±»ï¼‰</li><li>åˆ†ç±»è¡¨ï¼ˆç±»å‹ç¼–å·ï¼Œç±»å‹åï¼Œç±»å‹å›¾ç‰‡ï¼‰</li><li>æ–‡ç« è¡¨(æ–‡ç« id,æ–‡ç« åï¼Œæ–‡ç« ç±»å‹ï¼Œæ–‡ç« å†…å®¹ï¼Œä½œè€…)</li><li>å‹é“¾è¡¨ï¼ˆï¼‰</li><li>è‡ªå®šä¹‰è¡¨ï¼ˆï¼‰</li></ul></li></ul><h4 id="ä¸‰å¤§èŒƒå¼"><a href="#ä¸‰å¤§èŒƒå¼" class="headerlink" title="ä¸‰å¤§èŒƒå¼"></a>ä¸‰å¤§èŒƒå¼</h4><p>ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®è§„èŒƒåŒ–</p><ul><li>ä¿¡æ¯é‡å¤</li><li>æ›´æ–°å¼‚å¸¸</li><li>æ’å…¥å¼‚å¸¸<ul><li>æ— æ³•æ­£å¸¸æ˜¾ç¤ºä¿¡æ¯</li></ul></li><li>åˆ é™¤å¼‚å¸¸<ul><li>ä¸¢å¤±æœ‰æ•ˆçš„ä¿¡æ¯</li></ul></li></ul><blockquote><p>ä¸‰å¤§èŒƒå¼</p></blockquote><p>â€‹    ç¬¬ä¸€èŒƒå¼ï¼šä¿è¯åŸå­æ€§ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€åˆ—éƒ½ä¸å¯å†åˆ†ã€‚</p><p>â€‹    ç¬¬äºŒèŒƒå¼ï¼šå¿…é¡»å…ˆæ»¡è¶³ç¬¬ä¸€èŒƒå¼ï¼Œç„¶åæ‰èƒ½åˆ¤æ–­æ˜¯å¦æ»¡è¶³ç¬¬äºŒèŒƒå¼ï¼Œç¡®ä¿==æ¯å¼ è¡¨åªå¹²ä¸€ä»¶äº‹==</p><p>â€‹    </p><p>â€‹    ç¬¬ä¸‰èŒƒå¼ï¼šç¡®ä¿æ»¡è¶³ç¬¬äºŒèŒƒå¼çš„åŸºç¡€ä¸‹ï¼Œç¡®ä¿æ¯å¼ è¡¨æ¯ä¸€åˆ—çš„æ•°æ®éƒ½å’Œä¸»é”®ç›´æ¥ç›¸å…³ï¼Œè€Œä¸æ˜¯é—´æ¥ç›¸å…³ã€‚</p><p><strong>è§„èŒƒæ€§å’Œæ€§èƒ½é—®é¢˜</strong></p><p>å…³è”æŸ¥è¯¢çš„è¡¨ä¸å¾—è¶…è¿‡ä¸‰å¼ è¡¨</p><ul><li>åœ¨è€ƒè™‘å•†ä¸šåŒ–çš„éœ€æ±‚å’Œç›®æ ‡ï¼ˆæˆæœ¬å’Œç”¨æˆ·ä½“éªŒï¼ï¼‰æ•°æ®åº“çš„æ€§èƒ½æ›´åŠ é‡è¦</li><li>åœ¨è§„èŒƒæ€§èƒ½é—®é¢˜çš„æ—¶å€™ï¼Œéœ€è¦é€‚å½“è€ƒè™‘ä¸€ä¸‹è§„èŒƒæ€§ã€‚</li><li>æ•…æ„ç»™æŸäº›è¡¨å¢åŠ ä¸€äº›å†—ä½™çš„å­—æ®µï¼ˆä»å¤šè¡¨æŸ¥è¯¢ä¸­å˜ä¸ºå•è¡¨æŸ¥è¯¢ï¼Œé—®å°±æ˜¯å¢å¿«æŸ¥è¯¢æ•°æ®å‘—ï¼‰</li><li>æ•…æ„å¢åŠ ä¸€äº›è®¡ç®—åˆ—ï¼ˆä»å¤§æ•°æ®é‡é™ä¸ºå°æ•°æ®é‡ï¼šç´¢å¼•ï¼‰ã€‚</li></ul><h4 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h4><p>è¿æ¥æ•°æ®åº“çš„ä¸€ä¸ªåŒ…ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªåŒ…ï¼Œæˆ‘ä»¬é€šè¿‡åŒ…æä¾›çš„å°è£…ç±»ï¼Œå®Œæˆè¿æ¥æ•°æ®åº“æŒ‡ä»¤æ“ä½œã€‚</p><p>åˆ›å»ºä¸€ä¸ªJDBC</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿æ¥mysql</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBC</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String [] args)</span> <span class="keyword">throws</span> ClassNotFoundException&#123;</span><br><span class="line">        <span class="comment">//1åŠ è½½é©±åŠ¨</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);<span class="comment">//å›ºå®šè¯­æ³•ï¼ŒåŠ è½½é©±åŠ¨ï¼Œæ³¨æ„mysql5.0å’Œ8.0ç›´æ¥é©±åŠ¨è¿æ¥æœ‰å·®åˆ«.5.0çš„ä¸éœ€è¦æœ‰cjï¼Œä¹Ÿå°±æ˜¯com.mysql.jdbc.Driver,ä½†æ˜¯8.0çš„æ˜¯com.mysql.cj.jdbc.Driver</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//2ç”¨æˆ·ä¿¡æ¯ï¼Œurl</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/æ•°æ®åº“åï¼ŸuseUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span>; </span><br><span class="line">        <span class="comment">//3è¿æ¥æˆåŠŸ,æ•°æ®åº“å¯¹è±¡ Connection ä»£è¡¨æ•°æ®åº“</span></span><br><span class="line">       <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(url,username,password); </span><br><span class="line">        <span class="comment">//4æ‰§è¡Œsqlå¯¹è±¡  Statement æ‰§è¡Œsqlå¯¹è±¡çš„</span></span><br><span class="line">     <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();   </span><br><span class="line">        <span class="comment">//æ‰§è¡Œsqlå¯¹è±¡å»æ‰§è¡Œsqlçš„å¯èƒ½å­˜åœ¨çš„ç»“æœ</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;ä½ è¦å†™çš„sqlè¯­å¥&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="type">ResuletSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> statement.executeQuery(sql);<span class="comment">//è¿”å›ç»“æœé›†ï¼Œç»“æœé›†ä¸­å°è£…äº†æˆ‘ä»¬å…¨éƒ¨æŸ¥è¯¢å‡ºæ¥çš„ç»“æœ</span></span><br><span class="line">        <span class="keyword">while</span>(resultSet.next())&#123;</span><br><span class="line">            <span class="comment">//ä»¥ä¸‹å…¨ä¸ºè¡¨ä¸­çš„åˆ—å­—æ®µ</span></span><br><span class="line">            System.out.println(<span class="string">&quot;id= &quot;</span> resultSet.getObject(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">               System.out.println(<span class="string">&quot;name= &quot;</span> resultSet.getObject(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">               System.out.println(<span class="string">&quot;pwd= &quot;</span> resultSet.getObject(<span class="string">&quot;pwd&quot;</span>));</span><br><span class="line">               System.out.println(<span class="string">&quot;email= &quot;</span> resultSet.getObject(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">               System.out.println(<span class="string">&quot;birth= &quot;</span> resultSet.getObject(<span class="string">&quot;brithday&quot;</span>));</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">                <span class="comment">//é‡Šæ”¾è¿æ¥ï¼Œå…³é—­ã€‚</span></span><br><span class="line">        resultSet.close();</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¥éª¤æ€»ç»“ï¼š</p><ol><li>åŠ è½½é©±åŠ¨</li><li>è¿æ¥æ•°æ®åº“DriverManager</li><li>è·å–æ‰§è¡Œsqlçš„å¯¹è±¡Statement</li><li>è¿”å›è·å¾—çš„ç»“æœé›†ï¼ˆlistï¼‰</li><li>é‡Šæ”¾è¿æ¥</li></ol><blockquote><p>DriverManager</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">   <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(url,username,password);<span class="comment">//è¿æ¥æ•°æ®åº“</span></span><br><span class="line"><span class="comment">//äº‹åŠ¡ä»¥åŠè‡ªåŠ¨æäº¤éƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªæ“ä½œ</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>Url</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/æ•°æ®åº“å?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&quot;</span>;</span><br><span class="line"><span class="comment">// mysql 3306 </span></span><br><span class="line"><span class="comment">// jdbc:mysql://ä¸»æœºåœ°å€ï¼šç«¯å£å·/æ•°æ®åº“åï¼Ÿå‚æ•°1&amp;å‚æ•°2.ã€‚ã€‚ã€‚</span></span><br><span class="line"><span class="comment">//oracle 1521</span></span><br><span class="line"><span class="comment">//jdbc:oracle:thin:@localhost:1521:è¡¨åï¼Ÿ</span></span><br></pre></td></tr></table></figure><blockquote><p>Statement</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//4æ‰§è¡Œsqlå¯¹è±¡  Statement æ‰§è¡Œsqlå¯¹è±¡çš„</span></span><br><span class="line">    <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();   </span><br><span class="line">statement.executeQuery();<span class="comment">// æŸ¥è¯¢æ“ä½œè¿”å›ResultSet</span></span><br><span class="line">statement.execute();<span class="comment">//æ‰§è¡Œä»»ä½•Sql</span></span><br><span class="line">statement.executeUpdate()ï¼›<span class="comment">//æ›´æ–°ï¼Œæ’å…¥åˆ é™¤ï¼Œéƒ½æ˜¯é€šè¿‡è¿™ä¸ªã€‚</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>ResultSetæŸ¥è¯¢çš„ç»“æœé›†ï¼šå°è£…äº†æ‰€æœ‰çš„æŸ¥è¯¢ç»“æœ</p></blockquote><p>è·å¾—æŒ‡å®šçš„æ•°æ®ç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">   <span class="type">ResuletSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> statement.executeQuery(sql);<span class="comment">//è¿”å›ç»“æœé›†ï¼Œç»“æœé›†ä¸­å°è£…äº†æˆ‘ä»¬å…¨éƒ¨æŸ¥è¯¢å‡ºæ¥çš„ç»“æœ</span></span><br><span class="line"><span class="comment">//å¦‚æœä¸çŸ¥é“åˆ—ç±»å‹çš„è¯æˆ‘ä»¬å°±ä½¿ç”¨</span></span><br><span class="line">resultSet.getObject();</span><br><span class="line"><span class="comment">//çŸ¥é“çš„è¯</span></span><br><span class="line">resultSet.getString();</span><br><span class="line">resultSet.getInt();</span><br><span class="line">resultSet.getFloat();</span><br><span class="line">....</span><br></pre></td></tr></table></figure><p>éå†æŒ‡é’ˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">resultSet.beforeFirst();<span class="comment">//ç§»åŠ¨åˆ°æœ€å‰è¾¹</span></span><br><span class="line">resultSet.afterLast();<span class="comment">//ç§»åŠ¨åˆ°æœ€åè¾¹</span></span><br><span class="line">resultSet.next();<span class="comment">//ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªæ•°æ®</span></span><br><span class="line">resultSet.previous();<span class="comment">//ç§»åŠ¨åˆ°å‰ä¸€è¡Œ</span></span><br><span class="line">resultSet.absolute(row)ï¼›<span class="comment">//ç§»åŠ¨åˆ°æŒ‡å®šè¡Œ</span></span><br></pre></td></tr></table></figure><blockquote><p>é‡Šæ”¾èµ„æº:å¿…é¡»è¦åšçš„</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">resultSet.close();</span><br><span class="line">statement.close();</span><br><span class="line">connection.close();</span><br></pre></td></tr></table></figure><h5 id="å·¥å…·ç±»"><a href="#å·¥å…·ç±»" class="headerlink" title="å·¥å…·ç±»"></a>å·¥å…·ç±»</h5><p>åˆ›å»ºä¸€ä¸ªJDBCé“¾æ¥çš„å·¥å…·ç±»ï¼ˆoracleï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSetMetaData;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DBHelper</span> &#123;</span><br><span class="line"><span class="comment">//åŠ è½½æˆåŠŸï¼Œåœ¨æ•´ä¸ªç¨‹åºä¸­ï¼Œåªéœ€è¦åŠ è½½åœ¨ä¸€æ¬¡å°±å¥½äº†</span></span><br><span class="line">    <span class="comment">//æ”¾åˆ°é™æ€å¿«é‡Œè¾¹ï¼šå› ä¸ºé™æ€å¿«ï¼Œè‡ªåŠ¨æ‰§è¡Œï¼Œå¹¶ä¸”åªæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Class.forName(MyProperties.getInstance().getProperty(<span class="string">&quot;driverClass&quot;</span>));</span><br><span class="line">&#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;<span class="comment">//é™æ€æ–¹æ³•ï¼Œå¯ä»¥ä¸å®ä¾‹åŒ–ï¼Œè€Œç›´æ¥è°ƒç”¨</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–è¿æ¥è¿™ä¸€æ®µä»£ç ï¼Œå¤ªé•¿äº†ï¼Œå¯¹æ­¤æˆ‘ä»¬å°è£…ä¸€ä¸‹</span></span><br><span class="line"><span class="keyword">public</span> Connection <span class="title function_">getCon</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="comment">//åœ¨è¿™é‡Œï¼Œè¿æ¥åœ°å€ï¼Œç”¨æˆ·åï¼Œå’Œå¯†ç ï¼Œå¯¹äºä¸åŒçš„ç”¨æˆ·ï¼Œå¯èƒ½ä¸ä¸€æ ·</span></span><br><span class="line"><span class="comment">//æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªä¸‰ä¸ªä¸œè¥¿ï¼Œä½œä¸ºé…ç½®é¡¹ï¼Œé…ç½®åˆ°ç¨‹åºä¸­</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn = DriverManager.getConnection(MyProperties.getInstance().getProperty(<span class="string">&quot;url&quot;</span>),</span><br><span class="line">MyProperties.getInstance());</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> conn;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¢åˆ æ”¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql è¦æ‰§è¡Œçš„è¯­å¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> params è¦æ³¨å…¥çš„å‚æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">doUpdate</span><span class="params">(String sql,List&lt;Object&gt; params)</span> &#123;</span><br><span class="line"><span class="comment">//å®šä¹‰è¿”å›å€¼</span></span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//è·å–è¿æ¥</span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> getCon();</span><br><span class="line"><span class="comment">//åˆ›å»ºé¢„å¤„ç†è¯­å¥å¯¹è±¡</span></span><br><span class="line"><span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line"><span class="comment">//å¦‚æœæœ‰é—®å·ï¼Œæœ‰å‚æ•°ï¼Œè¦æ³¨å…¥å‚æ•°</span></span><br><span class="line">doParams(ps,params);</span><br><span class="line"><span class="comment">//æ‰§è¡Œ</span></span><br><span class="line">result = ps.executeUpdate();</span><br><span class="line"><span class="comment">//å…³é—­å„ç§è¿æ¥ï¼Œæ¥å£</span></span><br><span class="line">closeAll(conn,<span class="literal">null</span>,ps);</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ€ç»ˆè¿”å›æ•°æ®</span></span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢è¯­å¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> params</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String,Object&gt;&gt; <span class="title function_">findAll</span><span class="params">(String sql,List&lt;Object&gt;params)</span>&#123;</span><br><span class="line">List&lt;Map&lt;String,Object&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Map&lt;String,Object&gt;&gt;();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//è·å–è¿æ¥</span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> getCon();</span><br><span class="line"><span class="comment">//åˆ›å»ºé¢„å¤„ç†è¯­å¥å¯¹è±¡</span></span><br><span class="line"><span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line"><span class="comment">//å¦‚æœæœ‰é—®å·ï¼Œæœ‰å‚æ•°ï¼Œè¦æ³¨å…¥å‚æ•°</span></span><br><span class="line">doParams(ps, params);</span><br><span class="line"><span class="comment">//æ‰§è¡Œè¿™é‡Œå¼€å§‹ä¸ä¸€æ ·</span></span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> ps.executeQuery();</span><br><span class="line"><span class="comment">//æˆ‘ä»¬è¦å°†resultSeté‡Œè¾¹çš„å€¼ï¼Œè½¬åŒ–ä¸ºList&lt;Map&lt;String,Object&gt;&gt;</span></span><br><span class="line"><span class="comment">//Map&lt;String,Object&gt; é”®å€¼å¯¹     é”®  ï¼š è¡¨çš„å­—æ®µ  å€¼:è¿™ä¸ªå­—æ®µå¯¹åº”çš„å€¼</span></span><br><span class="line"><span class="type">ResultSetMetaData</span> <span class="variable">rsmd</span> <span class="operator">=</span>rs.getMetaData();</span><br><span class="line"><span class="comment">//æˆ‘ä»¬å°†æ‰€æœ‰çš„åˆ—åï¼Œå­˜åˆ°ä¸€ä¸ªæ•°ç»„ä¸­</span></span><br><span class="line">String [] cnames = <span class="keyword">new</span> <span class="title class_">String</span> [rsmd.getColumnCount()];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">0</span> ;i&lt;cnames.length;i++) &#123;</span><br><span class="line">cnames[i] = rsmd.getColumnName(i+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¼€å§‹è·å¾—æ•°æ®</span></span><br><span class="line"><span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºmapå¯¹è±¡</span></span><br><span class="line">Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">0</span>;i&lt;cnames.length;i++) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(rs.getObject(cnames[i])== <span class="literal">null</span>)&#123;</span><br><span class="line">map.put(cnames[i].toLowerCase(), <span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;oracle.sql.BLOB&quot;</span>.equals(rs.getObject(cnames[i]).getClass().getName()))&#123;</span><br><span class="line">map.put(cnames[i].toLowerCase(), rs.getBytes(cnames[i]));</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//é”®  è½¬æ¢ä¸ºå°å†™     å€¼  </span></span><br><span class="line">map.put(cnames[i].toLowerCase(),rs.getObject(cnames[i]));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å°†mapæ·»åŠ åˆ°listä¸­</span></span><br><span class="line">list.add(map);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å…³é—­</span></span><br><span class="line">closeAll(conn,rs,ps);</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String,Object&gt;&gt; <span class="title function_">findAll</span><span class="params">(String sql,Object...params)</span>&#123;</span><br><span class="line">List&lt;Map&lt;String,Object&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Map&lt;String,Object&gt;&gt;();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//è·å–è¿æ¥</span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> getCon();</span><br><span class="line"><span class="comment">//åˆ›å»ºé¢„å¤„ç†è¯­å¥å¯¹è±¡</span></span><br><span class="line"><span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line"><span class="comment">//å¦‚æœæœ‰é—®å·ï¼Œæœ‰å‚æ•°ï¼Œè¦æ³¨å…¥å‚æ•°</span></span><br><span class="line">doParams(ps, params);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰§è¡Œè¿™é‡Œå¼€å§‹ä¸ä¸€æ ·</span></span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> ps.executeQuery();</span><br><span class="line"><span class="comment">//æˆ‘ä»¬è¦å°†resultSeté‡Œè¾¹çš„å€¼ï¼Œè½¬åŒ–ä¸ºList&lt;Map&lt;String,Object&gt;&gt;</span></span><br><span class="line"><span class="comment">//Map&lt;String,Object&gt; é”®å€¼å¯¹     é”®  ï¼š è¡¨çš„å­—æ®µ  å€¼:è¿™ä¸ªå­—æ®µå¯¹åº”çš„å€¼</span></span><br><span class="line"><span class="type">ResultSetMetaData</span> <span class="variable">rsmd</span> <span class="operator">=</span>rs.getMetaData();</span><br><span class="line"><span class="comment">//æˆ‘ä»¬å°†æ‰€æœ‰çš„åˆ—åï¼Œå­˜åˆ°ä¸€ä¸ªæ•°ç»„ä¸­</span></span><br><span class="line">String [] cnames = <span class="keyword">new</span> <span class="title class_">String</span> [rsmd.getColumnCount()];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">0</span> ;i&lt;cnames.length;i++) &#123;</span><br><span class="line">cnames[i] = rsmd.getColumnName(i+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¼€å§‹è·å¾—æ•°æ®</span></span><br><span class="line"><span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºmapå¯¹è±¡</span></span><br><span class="line">Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">0</span>;i&lt;cnames.length;i++) &#123;</span><br><span class="line"><span class="comment">// é”®          è½¬ä¸ºå°å†™    å€¼</span></span><br><span class="line"><span class="comment">//å¯¹äºblob çš„å€¼ï¼Œæˆ‘ä»¬è¿™é‡Œè¦åŒºåˆ†ä¸€ä¸‹</span></span><br><span class="line"><span class="keyword">if</span>(rs.getObject(cnames[i])== <span class="literal">null</span>)&#123;</span><br><span class="line">map.put(cnames[i].toLowerCase(), <span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//System.out.println(rs.getObject(cnames[i]).getClass().getName());</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;oracle.sql.BLOB&quot;</span>.equals(rs.getObject(cnames[i]).getClass().getName()))&#123;</span><br><span class="line">map.put(cnames[i].toLowerCase(), rs.getBytes(cnames[i]));</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//é”®  è½¬æ¢ä¸ºå°å†™     å€¼  </span></span><br><span class="line">map.put(cnames[i].toLowerCase(),rs.getObject(cnames[i]));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å°†mapæ·»åŠ åˆ°listä¸­</span></span><br><span class="line">list.add(map);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨å…¥å‚æ•°</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doParams</span><span class="params">(PreparedStatement ps, List&lt;Object&gt; params)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(ps != <span class="literal">null</span> &amp;&amp;params!= <span class="literal">null</span>&amp;&amp; params.size()&gt;<span class="number">0</span>) &#123;</span><br><span class="line"><span class="comment">//å¾ªç¯æ³¨å…¥</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i&lt;params.size();i++) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">ps.setObject(i+<span class="number">1</span>, params.get(i));</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡è½½                                                                                                                      ...é‡è¯å‚æ•°  ä»£è¡¨ä»»æ„ä¸ªå‚æ•° æœ¬è´¨æ˜¯æ•°ç»„</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doParams</span><span class="params">(PreparedStatement ps, Object...params)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(ps != <span class="literal">null</span> &amp;&amp; params.length&gt;<span class="number">0</span>) &#123;</span><br><span class="line"><span class="comment">//å¾ªç¯æ³¨å…¥</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i&lt;params.length;i++) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">ps.setObject(i+<span class="number">1</span>, params[i]);</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">doUpdate</span><span class="params">(String sql,Object... params)</span> &#123;</span><br><span class="line"><span class="comment">//å®šä¹‰è¿”å›å€¼</span></span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//è·å–è¿æ¥</span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> getCon();</span><br><span class="line"><span class="comment">//åˆ›å»ºé¢„å¤„ç†è¯­å¥å¯¹è±¡</span></span><br><span class="line"><span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line"><span class="comment">//å¦‚æœæœ‰é—®å·ï¼Œæœ‰å‚æ•°ï¼Œè¦æ³¨å…¥å‚æ•°</span></span><br><span class="line">doParams(ps,params);</span><br><span class="line"><span class="comment">//æ‰§è¡Œ</span></span><br><span class="line">result = ps.executeUpdate();</span><br><span class="line"><span class="comment">//å…³é—­å„ç§è¿æ¥ï¼Œæ¥å£</span></span><br><span class="line">closeAll(conn,<span class="literal">null</span>,ps);</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e1) &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">e1.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ€ç»ˆè¿”å›æ•°æ®</span></span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">closeAll</span><span class="params">(Connection conn, ResultSet rs, PreparedStatement ps)</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(conn != <span class="literal">null</span> ) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">conn.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span>(rs != <span class="literal">null</span> ) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">rs.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span>(ps != <span class="literal">null</span> ) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">ps.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">      &#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="å·¥å…·ç±»ï¼ˆå•ä¾‹ï¼‰-Oracle"><a href="#å·¥å…·ç±»ï¼ˆå•ä¾‹ï¼‰-Oracle" class="headerlink" title="å·¥å…·ç±»ï¼ˆå•ä¾‹ï¼‰(Oracle)"></a>å·¥å…·ç±»ï¼ˆå•ä¾‹ï¼‰(Oracle)</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyProperties</span> <span class="keyword">extends</span> <span class="title class_">Properties</span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> MyProperties myProperties;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•°ç§æœ‰åŒ–  å•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="comment">//å•ä¾‹  åªæœ‰ä¸€ä¸ªå®ä¾‹</span></span><br><span class="line"><span class="keyword">private</span> <span class="title function_">MyProperties</span><span class="params">()</span>&#123;<span class="comment">//è£…è½½é€šè¿‡æ•°æ®æµè·å¾—çš„èµ„æºé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> MyProperties.class.getClassLoader().getResourceAsStream(<span class="string">&quot;db.properties&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//load è£…è½½é…ç½®æ–‡ä»¶  void java.util.Properties.load(InputStream inStream) throws IOException</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.load(is);</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å•ä¾‹æ¨¡å¼è®¾è®¡ä¹‹å ï¼Œä¸€å®šè¦æœ‰ä¸€ä¸ªå…¬æœ‰çš„æ–¹æ³•ï¼Œè®©å…¶ä»–å¯¹è±¡è®¿é—®åˆ°è¿™ä¸ªå±æ€§</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> MyProperties <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="keyword">if</span>( myProperties  == <span class="literal">null</span> )&#123;</span><br><span class="line">myProperties = <span class="keyword">new</span> <span class="title class_">MyProperties</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> myProperties;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="db-properties"><a href="#db-properties" class="headerlink" title="db.properties"></a>db.properties</h5><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#db.properties</span></span><br><span class="line"><span class="attr">driverClass</span>=oracle.jdbc.OracleDriver</span><br><span class="line"><span class="attr">url</span>=jdbc:oracle:thin:@<span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">1521</span>:orcl</span><br><span class="line"><span class="attr">user</span>=scott</span><br><span class="line"><span class="attr">password</span>=a</span><br><span class="line"></span><br><span class="line"><span class="comment">#mysqlè¿æ¥æ–¹å¼</span></span><br><span class="line"><span class="comment">#driverClass=com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="comment">#url=jdbc:mysql://127.0.0.1:3306/res</span></span><br><span class="line"><span class="comment">#user=root</span></span><br><span class="line"><span class="comment">#password=a</span></span><br></pre></td></tr></table></figure><h5 id="å·¥å…·ç±»ï¼ˆMysql-DBHelperï¼‰"><a href="#å·¥å…·ç±»ï¼ˆMysql-DBHelperï¼‰" class="headerlink" title="å·¥å…·ç±»ï¼ˆMysql,DBHelperï¼‰"></a>å·¥å…·ç±»ï¼ˆMysql,DBHelperï¼‰</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°è£…  æ•°æ®åº“æ“ä½œçš„å·¥å…·ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 38929</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>  2021å¹´5æœˆ29æ—¥ ä¸‹åˆ4:43:06</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DBHelper</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="comment">//ORACLE</span></span><br><span class="line"><span class="comment">//private static String driverClassName = &quot;oracle.jdbc.driver.OracleDriver&quot;;</span></span><br><span class="line"><span class="comment">//private String url = &quot;jdbc:oracle:thin:@localhost:1521:ORCL&quot;;</span></span><br><span class="line"><span class="comment">//private String user = &quot;scott&quot;;</span></span><br><span class="line"><span class="comment">//private String password = &quot;a&quot;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//MySQL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç›¸å…³å¯¹è±¡</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">//è¿æ¥å¯¹è±¡</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">//é¢„ç¼–è¯‘</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">//ç»“æœé›†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åªåœ¨ç±»ä¸­ç¬¬ä¸€æ¬¡åŠ è½½æ‰æ‰§è¡Œ ä¸” æ‰§è¡Œä¸€æ¬¡      -&gt;   å½“ä½¿ç”¨JNDIè¿æ¥æ•°æ®åº“æ—¶  å¯ä»¥æ³¨é‡Šè¯¥é™æ€åŠ è½½ </span></span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line"><span class="comment">//2ã€åŠ è½½å¹¶æ³¨å†Œä¾èµ–oracle.jdbc.driver.OracleDriver.class</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Class.forName( ReadConfig.getInstance().getProperty(<span class="string">&quot;driverClassName&quot;</span>));</span><br><span class="line">&#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å»ºç«‹è¿æ¥</span></span><br><span class="line"><span class="keyword">private</span> Connection <span class="title function_">getConn</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//3ã€å»ºç«‹è¿æ¥     url  uname  pwd</span></span><br><span class="line"><span class="comment">//url ç»Ÿä¸€èµ„æºå®šä½ç¬¦   jdbc:oracle:thin:@æ•°æ®åº“çš„IPåœ°å€:1521:å®ä¾‹å    127.0.0.1 | localhost:1521:ORCL </span></span><br><span class="line"><span class="comment">//ctrl 1 + 2 -&gt; L</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//conn = DriverManager.getConnection(&quot;jdbc:oracle:thin:@localhost:1521:ORCL&quot;, &quot;scott&quot;, &quot;a&quot;);</span></span><br><span class="line">conn = DriverManager.getConnection(ReadConfig.getInstance().getProperty(<span class="string">&quot;url&quot;</span>), ReadConfig.getInstance());</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»æœåŠ¡å™¨ context.xml ä¸­ ä¸Šä¸‹æ–‡è·å–é…ç½®çš„DataSource  </span></span><br><span class="line"><span class="comment">//Context context= new InitialContext();</span></span><br><span class="line"><span class="comment">//ä»å‘½åç›®å½•æ¥å£ä¸­æ ¹æ®èµ„æºåæŸ¥è¯¢  å‰é¢ java:comp/env/blog å›ºå®šçš„   ç±»ä¼¼äºåè®®</span></span><br><span class="line"><span class="comment">//DataSource dataSource =  (DataSource)context.lookup(&quot;java:comp/env/blog&quot;);</span></span><br><span class="line"><span class="comment">//ä»æ•°æ®åº“è¿æ¥æ± è·å–ä¸€ä¸ªç©ºé—²çš„è¿æ¥ </span></span><br><span class="line"><span class="comment">//conn = dataSource.getConnection();</span></span><br><span class="line"><span class="comment">/*&#125; catch (NamingException e) &#123;</span></span><br><span class="line"><span class="comment">e.printStackTrace();*/</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> conn;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…³é—­èµ„æº</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pstmt</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> conn</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&quot;unused&quot;)</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">closeAll</span><span class="params">(ResultSet rs, PreparedStatement pstmt, Connection conn)</span> &#123;</span><br><span class="line"><span class="comment">//7ã€å…³é—­èµ„æº  å…ˆå¼€å¯çš„åå…³é—­  åå¼€å¯çš„å…ˆå…³é—­  ç»“æœé›† -&gt; è¯­å¥å— -&gt; è¿æ¥</span></span><br><span class="line"><span class="keyword">if</span>( rs != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">rs.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>( pstmt != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">pstmt.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>( conn != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ›´æ–°æ“ä½œ   Object ... params  ä¸å®šå‚æ•°   ç±»ä¼¼äºæ•°ç»„  ä¸‡ç‰©çš†å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql  è¦æ‰§è¡Œçš„æ›´æ–°è¯­å¥   å¯ä»¥ insert update delete </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> params è¦æ‰§è¡Œçš„SQLè¯­å¥ä¸­çš„å ä½ç¬¦ï¼Ÿ æ‰€å¯¹åº”å‚æ•°çš„å€¼ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(String sql, Object ... params)</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> -<span class="number">1</span>;<span class="comment">//å®šä¹‰é»˜è®¤çš„èŒƒå›´å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn = <span class="built_in">this</span>.getConn();<span class="comment">//è·å–è¿æ¥</span></span><br><span class="line">pstmt = conn.prepareStatement(sql);<span class="comment">//é¢„ç¼–è¯‘å¯¹è±¡è£…è½½SQL</span></span><br><span class="line"><span class="built_in">this</span>.setParams(pstmt, params);<span class="comment">//éœ€è¦ç»™å ä½ç¬¦æ³¨å…¥å‚æ•°</span></span><br><span class="line">result = pstmt.executeUpdate();<span class="comment">//æ‰§è¡Œæ›´æ–°è¯­å¥</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»™é¢„ç¼–è¯‘è¯­å¥å—ä¸­å ä½ç¬¦ èµ‹å€¼ è®¾ç½®å‚æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pstmt   é¢„ç¼–è¯‘å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> params  è¦æ‰§è¡Œçš„SQLè¯­å¥ä¸­çš„å ä½ç¬¦ï¼Ÿ æ‰€å¯¹åº”å‚æ•°çš„å€¼ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setParams</span><span class="params">(PreparedStatement pstmt, Object ... params)</span> &#123;</span><br><span class="line"><span class="comment">//å»ç©ºåˆ¤æ–­  è¯´æ˜æ²¡æœ‰å‚æ•°ç»™æˆ‘   ä¹Ÿå°±æ˜¯æ‰§è¡Œçš„SQLè¯­å¥ä¸­æ²¡æœ‰å ä½ç¬¦</span></span><br><span class="line"><span class="keyword">if</span>( <span class="literal">null</span> == params || params.length &lt;= <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ‰å‚æ•° åˆ™å¾ªç¯å‚æ•°  ç»™é¢„ç¼–è¯‘è¯­å¥å—ä¸­å ä½ç¬¦ èµ‹å€¼</span></span><br><span class="line"><span class="comment">//å…ˆè·å–å‚æ•°çš„é•¿åº¦  èŠ‚çœèµ„æº æé«˜æ€§èƒ½</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, len = params.length; i &lt; len; i++) &#123;</span><br><span class="line"><span class="comment">//æˆ‘ä¸æ¸…æ¥šå ä½ç¬¦ å¯¹åº”çš„è¯¦ç»†æ•°æ®ç±»å‹    ä¸‡ç‰©çš†å¯¹è±¡</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">pstmt.setObject( i + <span class="number">1</span>, params[i]);<span class="comment">// % +v+ %</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line"><span class="comment">//é¡¹ç›®å¯ä»¥ä½¿ç”¨æ—¥å¿—æ¥è®°å½•</span></span><br><span class="line">System.out.println(<span class="string">&quot;ç¬¬&quot;</span> + (i+<span class="number">1</span>) + <span class="string">&quot;ä¸ªå‚æ•°æ³¨å€¼å¤±è´¥...&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å•æ¡æŸ¥è¯¢ è¿”å›ä¸€æ¡è®°å½•   select * from userinfo where user_name = ? and user_pwd = ?</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql  æŸ¥è¯¢SQL  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> params æŸ¥è¯¢å‚æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> map  ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title function_">findSingle</span><span class="params">(String sql, Object ... params)</span>&#123;</span><br><span class="line">Map&lt;String, Object&gt; map = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn = <span class="built_in">this</span>.getConn();<span class="comment">//è·å–è¿æ¥</span></span><br><span class="line">pstmt = conn.prepareStatement(sql);<span class="comment">//é¢„ç¼–è¯‘å¯¹è±¡è£…è½½SQL</span></span><br><span class="line"><span class="built_in">this</span>.setParams(pstmt, params);<span class="comment">//éœ€è¦ç»™å ä½ç¬¦æ³¨å…¥å‚æ•°</span></span><br><span class="line">rs = pstmt.executeQuery();<span class="comment">//æ‰§è¡Œæ›´æ–°è¯­å¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç°è·å–æ‰€æœ‰çš„åˆ—å</span></span><br><span class="line">List&lt;String&gt; columnNames = <span class="built_in">this</span>.getAllColumnNames(rs);</span><br><span class="line"><span class="keyword">if</span>( rs.next()) &#123; <span class="comment">//å¤„ç†ç»“æœé›†</span></span><br><span class="line">map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line"><span class="comment">//map.put(&quot;user_id&quot;, rs.getInt(&quot;user_id&quot;));</span></span><br><span class="line"><span class="comment">//map.put(&quot;user_name&quot;, rs.getString(&quot;user_name&quot;));</span></span><br><span class="line"><span class="comment">//map.put(&quot;user_pwd&quot;, rs.getString(&quot;user_pwd&quot;));</span></span><br><span class="line"><span class="comment">//å¦‚æœæ¢äº†æŸ¥è¯¢çš„è¡¨  è¿˜ä¼šæœ‰è¿™äº›åˆ—å—ï¼Ÿ  select * from emp; </span></span><br><span class="line"><span class="comment">//å¦‚ä½•æŸ¥è¯¢è¡¨æ‰€å¯¹åº”å„ä¸ªåˆ—çš„åç§°ï¼Ÿ  è¯·å»API å…ˆè¡ŒæŸ¥çœ‹ rs.getMetaData()</span></span><br><span class="line"></span><br><span class="line"><span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">//åˆ—æ‰€å¯¹åº”çš„å€¼</span></span><br><span class="line"><span class="type">String</span> <span class="variable">type</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;<span class="comment">//åˆ—æ‰€å¯¹åº”çš„å€¼çš„ç±»å‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¢å¼ºfor</span></span><br><span class="line"><span class="keyword">for</span>(String columnName : columnNames) &#123;</span><br><span class="line"><span class="comment">//åˆ—å¯¹åº”çš„ç±»å‹ä¸ç¡®å®š</span></span><br><span class="line"><span class="comment">//map.put(columnName, rs.getObject(columnName));</span></span><br><span class="line">value = rs.getObject(columnName);</span><br><span class="line"><span class="comment">//åˆ¤ç©º</span></span><br><span class="line"><span class="keyword">if</span>( <span class="literal">null</span> == value) &#123;</span><br><span class="line">map.put(columnName, value);</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">type = value.getClass().getName(); <span class="comment">//è·å–ç±»å‹</span></span><br><span class="line"><span class="comment">//System.out.println(type); //oracle.sql.BLOB   java.math.BigDecimal</span></span><br><span class="line"><span class="comment">//åˆ¤æ–­ç±»å‹</span></span><br><span class="line"><span class="comment">//TODO å¦‚æœæ˜¯Blobç±»å‹ è¯¥æ€ä¹ˆåŠ ?  å›¾ç‰‡çš„å¤„ç†ï¼Ÿï¼Ÿ? æƒ³åŠæ³•è·å–å¯¹åº”çš„æ•°æ®ç±»å‹ï¼Ÿ</span></span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;oracle.sql.BLOB&quot;</span>.equals(type)) &#123;</span><br><span class="line"><span class="comment">//è·å–å¯¹åº”ç±»å‹æ•°æ®</span></span><br><span class="line"><span class="type">Blob</span> <span class="variable">blob</span> <span class="operator">=</span> rs.getBlob(columnName);</span><br><span class="line"><span class="comment">//è·å–å¯¹åº”äºŒè¿›åˆ¶æµæ“ä½œ</span></span><br><span class="line"><span class="keyword">try</span>(<span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> blob.getBinaryStream())&#123;</span><br><span class="line"><span class="type">byte</span> [] bt = <span class="keyword">new</span> <span class="title class_">byte</span>[ (<span class="type">int</span>)blob.length()];</span><br><span class="line">is.read(bt);</span><br><span class="line">map.put(columnName, bt);<span class="comment">//å­˜å…¥å­—èŠ‚æ•°ç»„</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">map.put(columnName, value);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * JDBC2.0 è·å–æ‰€æœ‰çš„åˆ—å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> rs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getAllColumnNames</span><span class="params">(ResultSet rs)</span>&#123;</span><br><span class="line"><span class="comment">//å­˜å‚¨åˆ—çš„é›†åˆ</span></span><br><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//getMetaData() è·å–æ­¤ ResultSet å¯¹è±¡çš„åˆ—çš„ç¼–å·ã€ç±»å‹å’Œå±æ€§</span></span><br><span class="line"><span class="type">ResultSetMetaData</span> <span class="variable">rsmd</span> <span class="operator">=</span> rs.getMetaData();</span><br><span class="line"><span class="comment">//è·å–åˆ—çš„æ•°é‡</span></span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> rsmd.getColumnCount();</span><br><span class="line"><span class="comment">//åˆ—çš„èŒƒå›´ç¡®å®š å¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= count; i++)&#123;</span><br><span class="line"><span class="comment">//è·å–å¯¹åº”åˆ—çš„åˆ—å</span></span><br><span class="line">list.add(rsmd.getColumnName(i).toLowerCase());</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¤šè¡ŒæŸ¥è¯¢ è¿”å›å¤šæ¡  select * from emp; </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql  æŸ¥è¯¢SQL  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> params æŸ¥è¯¢å‚æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> list </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">findMultiple</span><span class="params">(String sql, Object ... params)</span>&#123;</span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Map&lt;String,Object&gt;&gt;();</span><br><span class="line">Map&lt;String, Object&gt; map = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn = <span class="built_in">this</span>.getConn();<span class="comment">//è·å–è¿æ¥</span></span><br><span class="line">pstmt = conn.prepareStatement(sql);<span class="comment">//é¢„ç¼–è¯‘å¯¹è±¡è£…è½½SQL</span></span><br><span class="line"><span class="built_in">this</span>.setParams(pstmt, params);<span class="comment">//éœ€è¦ç»™å ä½ç¬¦æ³¨å…¥å‚æ•°</span></span><br><span class="line">rs = pstmt.executeQuery();<span class="comment">//æ‰§è¡Œæ›´æ–°è¯­å¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç°è·å–æ‰€æœ‰çš„åˆ—å</span></span><br><span class="line">List&lt;String&gt; columnNames = <span class="built_in">this</span>.getAllColumnNames(rs);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>( rs.next()) &#123; <span class="comment">//å¤„ç†ç»“æœé›†</span></span><br><span class="line">map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line"><span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">//åˆ—æ‰€å¯¹åº”çš„å€¼</span></span><br><span class="line"><span class="type">String</span> <span class="variable">type</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;<span class="comment">//åˆ—æ‰€å¯¹åº”çš„å€¼çš„ç±»å‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¢å¼ºfor</span></span><br><span class="line"><span class="keyword">for</span>(String columnName : columnNames) &#123;</span><br><span class="line"><span class="comment">//åˆ—å¯¹åº”çš„ç±»å‹ä¸ç¡®å®š</span></span><br><span class="line"><span class="comment">//map.put(columnName, rs.getObject(columnName));</span></span><br><span class="line">value = rs.getObject(columnName);</span><br><span class="line"><span class="comment">//åˆ¤ç©º</span></span><br><span class="line"><span class="keyword">if</span>( <span class="literal">null</span> == value) &#123;</span><br><span class="line">map.put(columnName, value);</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">type = value.getClass().getName(); <span class="comment">//è·å–ç±»å‹</span></span><br><span class="line"><span class="comment">//System.out.println(type); //oracle.sql.BLOB   java.math.BigDecimal</span></span><br><span class="line"><span class="comment">//åˆ¤æ–­ç±»å‹</span></span><br><span class="line"><span class="comment">//TODO å¦‚æœæ˜¯Blobç±»å‹ è¯¥æ€ä¹ˆåŠ ?  å›¾ç‰‡çš„å¤„ç†ï¼Ÿï¼Ÿ? æƒ³åŠæ³•è·å–å¯¹åº”çš„æ•°æ®ç±»å‹ï¼Ÿ</span></span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;oracle.sql.BLOB&quot;</span>.equals(type)) &#123;</span><br><span class="line"><span class="comment">//è·å–å¯¹åº”ç±»å‹æ•°æ®</span></span><br><span class="line"><span class="type">Blob</span> <span class="variable">blob</span> <span class="operator">=</span> rs.getBlob(columnName);</span><br><span class="line"><span class="comment">//è·å–å¯¹åº”äºŒè¿›åˆ¶æµæ“ä½œ</span></span><br><span class="line"><span class="keyword">try</span>(<span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> blob.getBinaryStream())&#123;</span><br><span class="line"><span class="type">byte</span> [] bt = <span class="keyword">new</span> <span class="title class_">byte</span>[ (<span class="type">int</span>)blob.length()];</span><br><span class="line">is.read(bt);</span><br><span class="line">map.put(columnName, bt);<span class="comment">//å­˜å…¥å­—èŠ‚æ•°ç»„</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">map.put(columnName, value);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">list.add(map);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  ä»¥å¯¹è±¡çš„æ–¹å¼ å°†å°†æŸ¥è¯¢ç»“æœè¿”å›</span></span><br><span class="line"><span class="comment"> *   c.newInstance() -&gt; new AdminInfo() </span></span><br><span class="line"><span class="comment"> *   m.invoke(obj, value)  æ¿€æ´»mæ–¹æ³•</span></span><br><span class="line"><span class="comment"> *   è·å–å½“å‰classå®ä¾‹ä¸­æ‰€æœ‰çš„æ–¹æ³•å’Œå±æ€§</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> c</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt; é™å®šç±»å‹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql  æŸ¥è¯¢SQL </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> params æ³¨å…¥çš„å‚æ•° </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> &lt;T&gt;List&lt;T&gt; <span class="title function_">findMultiple</span><span class="params">(Class c,String sql, Object ... params)</span>&#123;</span><br><span class="line">List&lt;T&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;T&gt;();</span><br><span class="line">System.out.println(<span class="number">1111</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn = <span class="built_in">this</span>.getConn();<span class="comment">//è·å–è¿æ¥</span></span><br><span class="line">pstmt = conn.prepareStatement(sql);<span class="comment">//é¢„ç¼–è¯‘å¯¹è±¡è£…è½½SQL</span></span><br><span class="line"><span class="built_in">this</span>.setParams(pstmt, params);<span class="comment">//éœ€è¦ç»™å ä½ç¬¦æ³¨å…¥å‚æ•°</span></span><br><span class="line">rs = pstmt.executeQuery();<span class="comment">//æ‰§è¡Œæ›´æ–°è¯­å¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç°è·å–æ‰€æœ‰çš„åˆ—å</span></span><br><span class="line">List&lt;String&gt; columnNames = <span class="built_in">this</span>.getAllColumnNames(rs);</span><br><span class="line"></span><br><span class="line"><span class="type">T</span> <span class="variable">t</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">//å£°æ˜ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">//åˆ—æ‰€å¯¹åº”çš„å€¼</span></span><br><span class="line"><span class="type">String</span> <span class="variable">typeName</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;<span class="comment">//åˆ—æ‰€å¯¹åº”çš„å€¼çš„ç±»å‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡åå°„æ¥è·å–ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³• methods</span></span><br><span class="line">Method [] methods = c.getDeclaredMethods();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>( rs.next()) &#123; <span class="comment">//å¤„ç†ç»“æœé›†</span></span><br><span class="line"><span class="comment">//åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">t =  (T)c.newInstance();<span class="comment">//è°ƒç”¨æ— å‚æ•°çš„æ„é€ æ–¹æ³•  AdminInfo admin = new AdminInfo();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¢å¼ºfor  åˆ—</span></span><br><span class="line"><span class="keyword">for</span>(String columnName : columnNames) &#123;</span><br><span class="line"><span class="comment">//åˆ—å¯¹åº”çš„ç±»å‹ä¸ç¡®å®š</span></span><br><span class="line">value = rs.getObject(columnName);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤ç©º</span></span><br><span class="line"><span class="keyword">if</span>( <span class="literal">null</span> == value) &#123; <span class="comment">// æ•°æ®åº“æ— æ•°æ®</span></span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¾ªç¯ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">for</span>(Method method : methods) &#123;</span><br><span class="line"><span class="comment">//æ˜¯å¦æœ‰å¯¹åº”setXXX æ–¹æ³•å   set + columnName -&gt; methodçš„åå­—</span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;set&quot;</span> + columnName;</span><br><span class="line"><span class="comment">//è·å–åˆ—å¯¹åº”å€¼çš„ç±»å‹</span></span><br><span class="line">typeName = value.getClass().getName();</span><br><span class="line"><span class="comment">//System.out.println( typeName );</span></span><br><span class="line"><span class="comment">//æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•å</span></span><br><span class="line"><span class="keyword">if</span>( name.equalsIgnoreCase( method.getName())) &#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;java.math.BigDecimal&quot;</span>.equals(typeName)) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">method.invoke( t, rs.getDouble( columnName ));</span><br><span class="line">&#125;<span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">method.invoke( t, rs.getString( columnName ));</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;java.lang.String&quot;</span>.equals(typeName)) &#123;</span><br><span class="line">method.invoke( t, rs.getString( columnName ));</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;java.lang.Double&quot;</span>.equals(typeName)) &#123;</span><br><span class="line">method.invoke( t, rs.getDouble( columnName ));</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;java.lang.Integer&quot;</span>.equals(typeName)) &#123;</span><br><span class="line">method.invoke( t, rs.getInt( columnName ));</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;java.lang.Date&quot;</span>.equals(typeName)) &#123;</span><br><span class="line"><span class="comment">//MySQL ä¸­date æ•°æ®ç±»å‹ è½¬æ¢æˆJavaBean å¯¹è±¡ä¸­ä½¿ç”¨String </span></span><br><span class="line">method.invoke( t, rs.getString( columnName ));</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;oracle.sql.BLOB&quot;</span>.equals(typeName)) &#123;  <span class="comment">//TODO å¦‚æœæ˜¯Blobç±»å‹ è¯¥æ€ä¹ˆåŠ ?  å›¾ç‰‡çš„å¤„ç†ï¼Ÿï¼Ÿ? æƒ³åŠæ³•è·å–å¯¹åº”çš„æ•°æ®ç±»å‹ï¼Ÿ</span></span><br><span class="line"><span class="comment">//è·å–å¯¹åº”ç±»å‹æ•°æ®</span></span><br><span class="line"><span class="type">Blob</span> <span class="variable">blob</span> <span class="operator">=</span> rs.getBlob(columnName);</span><br><span class="line"><span class="comment">//è·å–å¯¹åº”äºŒè¿›åˆ¶æµæ“ä½œ</span></span><br><span class="line"><span class="keyword">try</span>(<span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> blob.getBinaryStream())&#123;</span><br><span class="line"><span class="type">byte</span> [] bt = <span class="keyword">new</span> <span class="title class_">byte</span>[ (<span class="type">int</span>)blob.length()];</span><br><span class="line">is.read(bt);</span><br><span class="line">method.invoke( t, bt);</span><br><span class="line">&#125;<span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;oracle.sql.CLOB&quot;</span>.equals(typeName))&#123;</span><br><span class="line"><span class="type">Reader</span> <span class="variable">in</span> <span class="operator">=</span> rs.getCharacterStream(columnName);</span><br><span class="line"><span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>( in );</span><br><span class="line"><span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span>  <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> br.readLine();<span class="comment">//æ¯æ¬¡è¯»å–ä¸€è¡Œæ•°æ®</span></span><br><span class="line"><span class="keyword">while</span>( <span class="literal">null</span> != str ) &#123;</span><br><span class="line">sb.append( str );</span><br><span class="line">str = br.readLine();</span><br><span class="line">&#125;</span><br><span class="line">method.invoke( t, sb.toString());</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//TODO åæœŸéœ€è¦ è‡ªè¡Œæ‰©å±•</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">list.add(t); <span class="comment">//è®¾ç½®å¯¹è±¡åˆ°listé›†åˆä¸­</span></span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;<span class="keyword">catch</span> (InstantiationException | IllegalAccessException | IllegalArgumentException | InvocationTargetException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  ä»¥å¯¹è±¡çš„æ–¹å¼ å°†å°†æŸ¥è¯¢ç»“æœè¿”å›</span></span><br><span class="line"><span class="comment"> *   c.newInstance() -&gt; new AdminInfo() </span></span><br><span class="line"><span class="comment"> *   m.invoke(obj, value)  æ¿€æ´»mæ–¹æ³•</span></span><br><span class="line"><span class="comment"> *   è·å–å½“å‰classå®ä¾‹ä¸­æ‰€æœ‰çš„æ–¹æ³•å’Œå±æ€§</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> c</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt; é™å®šç±»å‹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql  æŸ¥è¯¢SQL </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> params æ³¨å…¥çš„å‚æ•° </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> &lt;T&gt; T <span class="title function_">findSingle</span><span class="params">(Class c,String sql, Object ... params)</span>&#123;</span><br><span class="line"><span class="type">T</span> <span class="variable">t</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">//å£°æ˜ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn = <span class="built_in">this</span>.getConn();<span class="comment">//è·å–è¿æ¥</span></span><br><span class="line">pstmt = conn.prepareStatement(sql);<span class="comment">//é¢„ç¼–è¯‘å¯¹è±¡è£…è½½SQL</span></span><br><span class="line"><span class="built_in">this</span>.setParams(pstmt, params);<span class="comment">//éœ€è¦ç»™å ä½ç¬¦æ³¨å…¥å‚æ•°</span></span><br><span class="line">rs = pstmt.executeQuery();<span class="comment">//æ‰§è¡Œæ›´æ–°è¯­å¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç°è·å–æ‰€æœ‰çš„åˆ—å</span></span><br><span class="line">List&lt;String&gt; columnNames = <span class="built_in">this</span>.getAllColumnNames(rs);</span><br><span class="line"></span><br><span class="line"><span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">//åˆ—æ‰€å¯¹åº”çš„å€¼</span></span><br><span class="line"><span class="type">String</span> <span class="variable">typeName</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;<span class="comment">//åˆ—æ‰€å¯¹åº”çš„å€¼çš„ç±»å‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡åå°„æ¥è·å–ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³• methods</span></span><br><span class="line">Method [] methods = c.getDeclaredMethods();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( rs.next()) &#123; <span class="comment">//å¤„ç†ç»“æœé›†</span></span><br><span class="line"><span class="comment">//åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">t =  (T)c.newInstance();<span class="comment">//è°ƒç”¨æ— å‚æ•°çš„æ„é€ æ–¹æ³•  AdminInfo admin = new AdminInfo();</span></span><br><span class="line"><span class="comment">//å¢å¼ºfor  åˆ—</span></span><br><span class="line"><span class="keyword">for</span>(String columnName : columnNames) &#123;</span><br><span class="line"><span class="comment">//åˆ—å¯¹åº”çš„ç±»å‹ä¸ç¡®å®š</span></span><br><span class="line">value = rs.getObject(columnName);</span><br><span class="line"><span class="comment">//åˆ¤ç©º</span></span><br><span class="line"><span class="keyword">if</span>( <span class="literal">null</span> == value) &#123; <span class="comment">// æ•°æ®åº“æ— æ•°æ®</span></span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¾ªç¯ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">for</span>(Method method : methods) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ˜¯å¦æœ‰å¯¹åº”setXXX æ–¹æ³•å   set + columnName -&gt; methodçš„åå­—</span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;set&quot;</span> + columnName;</span><br><span class="line"><span class="comment">//è·å–åˆ—å¯¹åº”å€¼çš„ç±»å‹</span></span><br><span class="line">typeName = value.getClass().getName();</span><br><span class="line"><span class="comment">//System.out.println( name + &quot;--&quot; + typeName );</span></span><br><span class="line"><span class="comment">//æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•å</span></span><br><span class="line"><span class="keyword">if</span>( name.equalsIgnoreCase( method.getName())) &#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;java.math.BigDecimal&quot;</span>.equals(typeName)) &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">method.invoke( t, rs.getDouble( columnName ));</span><br><span class="line">&#125;<span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">method.invoke( t, rs.getString( columnName ));</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;java.lang.String&quot;</span>.equals(typeName)) &#123;</span><br><span class="line">method.invoke( t, rs.getString( columnName ));</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;java.lang.Double&quot;</span>.equals(typeName)) &#123;</span><br><span class="line">method.invoke( t, rs.getDouble( columnName ));</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;java.lang.Integer&quot;</span>.equals(typeName)) &#123;</span><br><span class="line">method.invoke( t, rs.getInt( columnName ));</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;java.lang.Date&quot;</span>.equals(typeName)) &#123;</span><br><span class="line"><span class="comment">//MySQL ä¸­date æ•°æ®ç±»å‹ è½¬æ¢æˆJavaBean å¯¹è±¡ä¸­ä½¿ç”¨String </span></span><br><span class="line">method.invoke( t, rs.getString( columnName ));</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;oracle.sql.BLOB&quot;</span>.equals(typeName)) &#123;  <span class="comment">//TODO å¦‚æœæ˜¯Blobç±»å‹ è¯¥æ€ä¹ˆåŠ ?  å›¾ç‰‡çš„å¤„ç†ï¼Ÿï¼Ÿ? æƒ³åŠæ³•è·å–å¯¹åº”çš„æ•°æ®ç±»å‹ï¼Ÿ</span></span><br><span class="line"><span class="comment">//è·å–å¯¹åº”ç±»å‹æ•°æ®</span></span><br><span class="line"><span class="type">Blob</span> <span class="variable">blob</span> <span class="operator">=</span> rs.getBlob(columnName);</span><br><span class="line"><span class="comment">//è·å–å¯¹åº”äºŒè¿›åˆ¶æµæ“ä½œ</span></span><br><span class="line"><span class="keyword">try</span>(<span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> blob.getBinaryStream())&#123;</span><br><span class="line"><span class="type">byte</span> [] bt = <span class="keyword">new</span> <span class="title class_">byte</span>[ (<span class="type">int</span>)blob.length()];</span><br><span class="line">is.read(bt);</span><br><span class="line">method.invoke( t, bt);</span><br><span class="line">&#125;<span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;oracle.sql.CLOB&quot;</span>.equals(typeName))&#123;</span><br><span class="line"><span class="type">Reader</span> <span class="variable">in</span> <span class="operator">=</span> rs.getCharacterStream(columnName);</span><br><span class="line"><span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>( in );</span><br><span class="line"><span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span>  <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> br.readLine();<span class="comment">//æ¯æ¬¡è¯»å–ä¸€è¡Œæ•°æ®</span></span><br><span class="line"><span class="keyword">while</span>( <span class="literal">null</span> != str ) &#123;</span><br><span class="line">sb.append( str );</span><br><span class="line">str = br.readLine();</span><br><span class="line">&#125;</span><br><span class="line">method.invoke( t, sb.toString());</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//TODO åæœŸéœ€è¦ è‡ªè¡Œæ‰©å±•</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;<span class="keyword">catch</span> (InstantiationException | IllegalAccessException | IllegalArgumentException | InvocationTargetException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">total</span><span class="params">(String sql,Object...params)</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn = <span class="built_in">this</span>.getConn();</span><br><span class="line">pstmt = conn.prepareStatement(sql);</span><br><span class="line"><span class="comment">//è®¾ç½®å‚æ•°</span></span><br><span class="line">setParams(pstmt,params);</span><br><span class="line"><span class="comment">//æ‰§è¡Œè¯­å¥å—</span></span><br><span class="line">rs= pstmt.executeQuery();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤„ç†ç»“æœé›†</span></span><br><span class="line"><span class="keyword">if</span>(rs.next()) &#123;</span><br><span class="line">result = rs.getInt(<span class="number">1</span>);<span class="comment">//åˆ—ç´¢å¼•ç¬¬ä¸€åˆ—</span></span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.closeAll(rs, pstmt, conn);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="å·¥å…·ç±»ï¼ˆmysql-ä¹Ÿæ˜¯å•ä¾‹ï¼‰"><a href="#å·¥å…·ç±»ï¼ˆmysql-ä¹Ÿæ˜¯å•ä¾‹ï¼‰" class="headerlink" title="å·¥å…·ç±»ï¼ˆmysql,ä¹Ÿæ˜¯å•ä¾‹ï¼‰"></a>å·¥å…·ç±»ï¼ˆmysql,ä¹Ÿæ˜¯å•ä¾‹ï¼‰</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReadConfig</span> <span class="keyword">extends</span> <span class="title class_">Properties</span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1560020482133144083L</span>;</span><br><span class="line"><span class="comment">//é¥¿æ±‰å•ä¾‹   æå‰å®ä¾‹åŒ–å¯¹ï¿½?</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">ReadConfig</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReadConfig</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ æ–¹æ³•ç§æœ‰åŒ–  </span></span><br><span class="line"><span class="keyword">private</span> <span class="title function_">ReadConfig</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//æƒ³åŠæ³•è¯»å–è‡ªå·±çš„é…ç½®æ–‡ä»¶   </span></span><br><span class="line"><span class="comment">//JDK1.7 ä¼šè‡ªåŠ¨å…³é—­ä¸”ï¿½?å®šå…³é—­èµ„ï¿½?   try - with -resources</span></span><br><span class="line"><span class="keyword">try</span>(<span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getClassLoader().getResourceAsStream(<span class="string">&quot;db.properties&quot;</span>))&#123;</span><br><span class="line"><span class="comment">//ä¸šåŠ¡ä»£ç   æµå¤„ï¿½? </span></span><br><span class="line"><span class="built_in">this</span>.load(is); <span class="comment">//è¯»å–é…ç½®æ–‡ä»¶</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å› ä¸ºæ„ï¿½?ï¿½ç§æœ‰åŒ–å°±æ„å‘³ç€å¤–éƒ¨æ— æ³•å®ä¾‹åŒ–è¯¥å¯¹è±¡ å¿…é¡»å¯¹å¤–æä¾›ï¿½?ä¸ªè·å–å®ä¾‹çš„æ–¹æ³•  å¹¶åœ¨å†…éƒ¨æå‰å®ä¾‹ï¿½? </span></span><br><span class="line"><span class="comment">//åˆå› ä¸ºå¤–éƒ¨æ— æ³•æ˜¯å®ä¾‹ï¿½? åªèƒ½é€šè¿‡ç±»åæ–¹æ³• è¯¥æ–¹ï¿½? ï¿½?å£°æ˜ä¸ºé™æ€çš„ </span></span><br><span class="line"><span class="keyword">public</span>  <span class="keyword">static</span> ReadConfig <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="db-properties-1"><a href="#db-properties-1" class="headerlink" title="db.properties"></a>db.properties</h5><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#MySQL5</span></span><br><span class="line"><span class="comment">#driverClassName=com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="comment">#url=jdbc:mysql://localhost:3306/blog</span></span><br><span class="line"><span class="comment">#user=root</span></span><br><span class="line"><span class="comment">#password=a</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#MySQL8</span></span><br><span class="line"><span class="attr">driverClassName</span>=com.mysql.cj.jdbc.Driver</span><br><span class="line"></span><br><span class="line"><span class="attr">url</span>=jdbc:mysql://<span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">3306</span>/æ•°æ®åº“?useOldAliasMetadataBehavior=<span class="literal">true</span>&amp;useSSL=<span class="literal">false</span>&amp;useUnicode=<span class="literal">true</span>&amp;characterEncoding=utf8&amp;serverTimezone=GMT%<span class="number">2</span>B8</span><br><span class="line"><span class="attr">user</span>=root</span><br><span class="line"><span class="attr">password</span>=a</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#Oracle</span></span><br><span class="line"><span class="comment">#driverClassName=oracle.jdbc.driver.OracleDriver</span></span><br><span class="line"><span class="comment">#url=jdbc:oracle:thin:@localhost:1521:orcl</span></span><br><span class="line"><span class="comment">#user=scott</span></span><br><span class="line"><span class="comment">#password=a</span></span><br></pre></td></tr></table></figure><h4 id="SQLæ³¨å…¥"><a href="#SQLæ³¨å…¥" class="headerlink" title="SQLæ³¨å…¥"></a>SQLæ³¨å…¥</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminInfoDAOImpl</span> <span class="keyword">implements</span> <span class="title class_">IAdminInfoDAO</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> AdminInfo <span class="title function_">login</span><span class="params">(String aname, String pwd)</span> &#123;</span><br><span class="line">         <span class="type">DBHelper</span> <span class="variable">db</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DBHelper</span>();</span><br><span class="line">         <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from admininfo where aname = ? and pwd = md5(?)&quot;</span>;</span><br><span class="line">         <span class="keyword">return</span> db.findSingle(AdminInfo.class,sql,aname,pwd);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(String aname, String pwd, String photo)</span> &#123;</span><br><span class="line"><span class="type">DBHelper</span> <span class="variable">db</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DBHelper</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into admininfo value(0,?,md5(?),?)&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> db.update(sql, aname,pwd,photo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é»˜è®¤ä¸æŸ¥è¯¢å¯†ç  å¦‚æœéœ€è¦æŸ¥è¯¢ å°†æ¥ç•Œé¢æ¸²æŸ“å¯†ç   å¿…é¡»æ‘˜ç æ˜¾ç¤º 123456 -&gt; 1***6</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;AdminInfo&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">DBHelper</span> <span class="variable">db</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DBHelper</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select aid,aname,photo from admininfo order by aid desc&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> db.findMultiple(AdminInfo.class, sql);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>==sqlæ³¨å…¥æ¼æ´ä¹Ÿå°±æ˜¯sqlæ‹¼æ¥==</p><p>PreparedStatementï¼šå¯ä»¥é¢„é˜²SQLæ³¨å…¥</p><p>ä¸Šè¿°æˆ‘ä»¬ä½¿ç”¨çš„å·¥å…·ç±»å°±æ˜¯ä½¿ç”¨PreparedStatementæ¥çš„ã€‚</p><p>äº‹åŠ¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ›´æ–°æ“ä½œ   Object ... params  ä¸å®šå‚æ•°   ç±»ä¼¼äºæ•°ç»„  ä¸‡ç‰©çš†å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sql  è¦æ‰§è¡Œçš„æ›´æ–°è¯­å¥   å¯ä»¥ insert update delete </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> params è¦æ‰§è¡Œçš„SQLè¯­å¥ä¸­çš„å ä½ç¬¦ï¼Ÿ æ‰€å¯¹åº”å‚æ•°çš„å€¼ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(String sql, Object ... params)</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> -<span class="number">1</span>;<span class="comment">//å®šä¹‰é»˜è®¤çš„èŒƒå›´å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">conn = <span class="built_in">this</span>.getConn();<span class="comment">//è·å–è¿æ¥</span></span><br><span class="line"><span class="comment">//å¼€å¯äº‹åŠ¡   conn.setAutoCommit(false);</span></span><br><span class="line">pstmt = conn.prepareStatement(sql);<span class="comment">//é¢„ç¼–è¯‘å¯¹è±¡è£…è½½SQL</span></span><br><span class="line"><span class="built_in">this</span>.setParams(pstmt, params);<span class="comment">//éœ€è¦ç»™å ä½ç¬¦æ³¨å…¥å‚æ•°</span></span><br><span class="line">result = pstmt.executeUpdate();<span class="comment">//æ‰§è¡Œæ›´æ–°è¯­å¥</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//äº‹åŠ¡æäº¤conn.commit();</span></span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line"><span class="comment">//å¦‚æœå¤±è´¥äº‹åŠ¡æäº¤å¤±è´¥åˆ™å›æ»š</span></span><br><span class="line"><span class="comment">/*try &#123;</span></span><br><span class="line"><span class="comment">conn.rollback();</span></span><br><span class="line"><span class="comment">&#125;catch(SQLException e)&#123;</span></span><br><span class="line"><span class="comment">e.printStackTrace();</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®åº“é“¾æ¥æ± ï¼Œæ± åŒ–æŠ€æœ¯"><a href="#æ•°æ®åº“é“¾æ¥æ± ï¼Œæ± åŒ–æŠ€æœ¯" class="headerlink" title="æ•°æ®åº“é“¾æ¥æ± ï¼Œæ± åŒ–æŠ€æœ¯"></a>æ•°æ®åº“é“¾æ¥æ± ï¼Œæ± åŒ–æŠ€æœ¯</h3><p>æ•°æ®åº“é“¾æ¥â€”æ‰§è¡Œå®Œæ¯•â€”é‡Šæ”¾</p><p>è¿æ¥â€”é‡Šæ”¾ååˆ†æµªè´¹èµ„æº</p><p>æ± åŒ–æŠ€æœ¯ï¼š</p><p>å‡†å¤‡ä¸€äº›é¢„å…ˆçš„èµ„æºï¼Œè¿‡æ¥å°±è¿æ¥é¢„å…ˆå‡†å¤‡å¥½çš„</p><p>éœ€è¦çš„åŒ…ä¸‹è½½ï¼š<a href="https://blog.csdn.net/qq_51178489/article/details/118805942">https://blog.csdn.net/qq_51178489/article/details/118805942</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbcp2.BasicDataSourceFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCUtils_C3P0</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource dataSource=<span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//xmlæ•°æ®æºç›´æ¥åŠ è½½ä¸ç”¨åå°„</span></span><br><span class="line"><span class="comment">//            dataSource= new ComboPooledDataSource();     //æ— å‚æ•°æ—¶ç”¨é»˜è®¤æ•°æ®æº</span></span><br><span class="line">            dataSource=<span class="keyword">new</span> <span class="title class_">ComboPooledDataSource</span>(<span class="string">&quot;MySQL&quot;</span>); <span class="comment">//ç”¨é…ç½®name=&quot;MySQL&quot;çš„æ•°æ®æº   ä¹Ÿå¯ä»¥datasource.setMaxPoolSize();ç­‰</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;     <span class="comment">//æä¾›è¿æ¥</span></span><br><span class="line">        <span class="keyword">return</span> dataSource.getConnection();         <span class="comment">//æ•°æ®æºä¸­è·å–è¿æ¥ï¼Œè‡ªåŠ¨è£…å¥½å‚æ•°æ¯”å¦‚è´¦å·å¯†ç url</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">release</span><span class="params">(Connection con, PreparedStatement st, ResultSet re)</span>&#123;   <span class="comment">//æä¾›å…³é—­</span></span><br><span class="line">        <span class="keyword">if</span>(re!=<span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                re.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(st!=<span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                st.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(con!=<span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                con.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">c3p0-config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é»˜è®¤é…ç½®ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåˆ™ä½¿ç”¨è¿™ä¸ªé…ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">default-config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>a<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span>&gt;</span>jdbc:mysql://localhost:3306/school<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;checkoutTimeout&quot;</span>&gt;</span>30000<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;idleConnectionTestPeriod&quot;</span>&gt;</span>30<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialPoolSize&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxIdleTime&quot;</span>&gt;</span>30<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span>&gt;</span>100<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minPoolSize&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxStatements&quot;</span>&gt;</span>200<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">default-config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å‘½åçš„é…ç½®,å¯ä»¥é€šè¿‡æ–¹æ³•è°ƒç”¨å®ç° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">named-config</span> <span class="attr">name</span>=<span class="string">&quot;MySQL&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span>&gt;</span>jdbc:mysql://localhost:3306/school<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¦‚æœæ± ä¸­æ•°æ®è¿æ¥ä¸å¤Ÿæ—¶ä¸€æ¬¡å¢é•¿å¤šå°‘ä¸ª --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;acquireIncrement&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åˆå§‹åŒ–æ•°æ®åº“è¿æ¥æ± æ—¶è¿æ¥çš„æ•°é‡ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialPoolSize&quot;</span>&gt;</span>20<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ•°æ®åº“è¿æ¥æ± ä¸­çš„æœ€å¤§çš„æ•°æ®åº“è¿æ¥æ•° --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span>&gt;</span>25<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ•°æ®åº“è¿æ¥æ± ä¸­çš„æœ€å°çš„æ•°æ®åº“è¿æ¥æ•° --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minPoolSize&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">named-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c3p0-config</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">åšä¸»å¯¹mySQLåˆæ­¥å­¦ä¹ çš„äº†è§£ï¼Œæš‚æ—¶æ²¡æœ‰æ·±å…¥äº†è§£ï¼Œæœ¬æ–‡å°†ä¼šæŒç»­è·Ÿæ–°ï¼Œå¹¶ä»¥å¤šæ–‡æ¡£è¿›è¡Œï¼Œç¼–ç¨‹ä¹‹è·¯å¾ˆé•¿å¾ˆé•¿ï¼Œæˆ‘å¾—å­¦ä¼šè¾¹èµ°è¾¹çœ‹çœ‹é£æ™¯</summary>
    
    
    
    <category term="æ•°æ®åº“" scheme="https://www.blog.909111.xyz/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MySQL" scheme="https://www.blog.909111.xyz/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQLçš„å¸¸ç”¨è¯­å¥çºªå½•</title>
    <link href="https://www.blog.909111.xyz/posts/a9be6930.html"/>
    <id>https://www.blog.909111.xyz/posts/a9be6930.html</id>
    <published>2023-11-09T02:50:23.335Z</published>
    <updated>2024-04-22T08:16:27.439Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MySQLåŸºç¡€"><a href="#MySQLåŸºç¡€" class="headerlink" title="MySQLåŸºç¡€"></a>MySQLåŸºç¡€</h1><h2 id="MySqlåŸºæœ¬æŒ‡ä»¤"><a href="#MySqlåŸºæœ¬æŒ‡ä»¤" class="headerlink" title="MySqlåŸºæœ¬æŒ‡ä»¤"></a>MySqlåŸºæœ¬æŒ‡ä»¤</h2><h3 id="1ã€MySQLå¸¸ç”¨å‘½ä»¤"><a href="#1ã€MySQLå¸¸ç”¨å‘½ä»¤" class="headerlink" title="1ã€MySQLå¸¸ç”¨å‘½ä»¤"></a>1ã€MySQLå¸¸ç”¨å‘½ä»¤</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># åˆ›å»ºæ•°æ®åº“</span><br><span class="line">create database name;  </span><br><span class="line">#é€‰æ‹©æ•°æ®åº“</span><br><span class="line">use databasename;</span><br><span class="line">#ç›´æ¥åˆ é™¤æ•°æ®åº“ï¼Œä¸æé†’</span><br><span class="line">drop database name ;</span><br><span class="line">#æ˜¾ç¤ºè¡¨</span><br><span class="line">show tables; </span><br><span class="line">#è¡¨çš„è¯¦ç»†æè¿°</span><br><span class="line">describe tablename; </span><br><span class="line"></span><br><span class="line">select ä¸­åŠ ä¸Šdistinctå»é™¤é‡å¤å­—æ®µ</span><br><span class="line"></span><br><span class="line">#åˆ é™¤æ•°æ®åº“å‰ï¼Œæœ‰æç¤ºã€‚</span><br><span class="line">mysqladmin drop databasename </span><br><span class="line"></span><br><span class="line">#æ˜¾ç¤ºå½“å‰mysqlç‰ˆæœ¬å’Œå½“å‰æ—¥æœŸ</span><br><span class="line"></span><br><span class="line">select version(),current_date;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2ã€ä¿®æ”¹mysqlä¸­rootçš„å¯†ç ï¼š"><a href="#2ã€ä¿®æ”¹mysqlä¸­rootçš„å¯†ç ï¼š" class="headerlink" title="2ã€ä¿®æ”¹mysqlä¸­rootçš„å¯†ç ï¼š"></a>2ã€ä¿®æ”¹mysqlä¸­rootçš„å¯†ç ï¼š</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">shell&gt;</span><span class="language-bash">mysql -u root -p</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">update user <span class="built_in">set</span> password=password(â€xueok654123â€³) <span class="built_in">where</span> user=â€™rootâ€™;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">flush privileges //åˆ·æ–°æ•°æ®åº“</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">mysql&gt;</span><span class="language-bash">use dbnameï¼› æ‰“å¼€æ•°æ®åº“ï¼š</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">mysql&gt;</span><span class="language-bash">show databases; æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">mysql&gt;</span><span class="language-bash">show tables; æ˜¾ç¤ºæ•°æ®åº“mysqlä¸­æ‰€æœ‰çš„è¡¨ï¼šå…ˆuse mysqlï¼›ç„¶å</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">mysql&gt;</span><span class="language-bash">describe user; æ˜¾ç¤ºè¡¨mysqlæ•°æ®åº“ä¸­userè¡¨çš„åˆ—ä¿¡æ¯)ï¼›</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3ã€grantæˆæƒ"><a href="#3ã€grantæˆæƒ" class="headerlink" title="3ã€grantæˆæƒ"></a>3ã€grantæˆæƒ</h3><p>åˆ›å»ºä¸€ä¸ªå¯ä»¥ä»ä»»ä½•åœ°æ–¹è¿æ¥æœåŠ¡å™¨çš„ä¸€ä¸ªå®Œå…¨çš„è¶…çº§ç”¨æˆ·ï¼Œä½†æ˜¯å¿…é¡»ä½¿ç”¨ä¸€ä¸ªå£ä»¤somethingåšè¿™ä¸ª</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; grant all privileges on *.* to user@localhost identified by â€™somethingâ€™ with</span><br></pre></td></tr></table></figure><p>å¢åŠ æ–°ç”¨æˆ·</p><p><strong>æ ¼å¼ï¼šgrant select on æ•°æ®åº“.* to ç”¨æˆ·å@ç™»å½•ä¸»æœº identified by â€œå¯†ç â€</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON *.* TO monty@localhost IDENTIFIED BY â€™somethingâ€™ WITH GRANT OPTION;</span><br><span class="line">GRANT ALL PRIVILEGES ON . TO monty@â€%â€ IDENTIFIED BY â€™somethingâ€™ WITH GRANT OPTION;</span><br></pre></td></tr></table></figure><p><strong>åˆ é™¤æˆæƒï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; revoke all privileges on . from root@â€%â€;</span><br><span class="line"></span><br><span class="line">mysql&gt; delete from user <span class="built_in">where</span> user=â€rootâ€ and host=â€%â€;</span><br><span class="line"></span><br><span class="line">mysql&gt; flush privileges;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>åˆ›å»ºä¸€ä¸ªç”¨æˆ·customåœ¨ç‰¹å®šå®¢æˆ·ç«¯it363.comç™»å½•ï¼Œå¯è®¿é—®ç‰¹å®šæ•°æ®åº“fangchandb</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql &gt;grant select, insert, update, delete, create,drop on fangchandb.* to custom@ it363.com identified by â€˜ passwdâ€™</span><br></pre></td></tr></table></figure><p><strong>é‡å‘½åè¡¨:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql &gt; alter table t1 rename t2;</span><br></pre></td></tr></table></figure><h3 id="4ã€mysqldump"><a href="#4ã€mysqldump" class="headerlink" title="4ã€mysqldump"></a>4ã€mysqldump</h3><p><strong>å¤‡ä»½æ•°æ®åº“</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; mysqldump -h host -u root -p dbname &gt;dbname_backup.sql</span><br></pre></td></tr></table></figure><p><strong>æ¢å¤æ•°æ®åº“</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; mysqladmin -h myhost -u root -p create dbname</span><br><span class="line">shell&gt; mysqldump -h host -u root -p dbname &lt; dbname_backup.sql</span><br></pre></td></tr></table></figure><p><strong>å¦‚æœåªæƒ³å¸å‡ºå»ºè¡¨æŒ‡ä»¤ï¼Œåˆ™å‘½ä»¤å¦‚ä¸‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; mysqladmin -u root -p -d databasename &gt; a.sql</span><br></pre></td></tr></table></figure><p>å¦‚æœåªæƒ³å¸å‡ºæ’å…¥æ•°æ®çš„sqlå‘½ä»¤ï¼Œè€Œä¸éœ€è¦å»ºè¡¨å‘½ä»¤ï¼Œåˆ™å‘½ä»¤å¦‚ä¸‹ï¼š</p><p>shell&gt; mysqladmin -u root -p -t databasename &gt; a.sql</p><p>é‚£ä¹ˆå¦‚æœæˆ‘åªæƒ³è¦æ•°æ®ï¼Œè€Œä¸æƒ³è¦ä»€ä¹ˆsqlå‘½ä»¤æ—¶ï¼Œåº”è¯¥å¦‚ä½•æ“ä½œå‘¢ï¼Ÿ</p><p>mysqldump -T./ phptest driver</p><p>å…¶ä¸­ï¼Œåªæœ‰æŒ‡å®šäº†-Tå‚æ•°æ‰å¯ä»¥å¸å‡ºçº¯æ–‡æœ¬æ–‡ä»¶ï¼Œè¡¨ç¤ºå¸å‡ºæ•°æ®çš„ç›®å½•ï¼Œ./è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œå³ä¸mysqldumpåŒä¸€ç›®å½•ã€‚å¦‚æœä¸æŒ‡å®šdriver è¡¨ï¼Œåˆ™å°†å¸å‡ºæ•´ä¸ªæ•°æ®åº“çš„æ•°æ®ã€‚æ¯ä¸ªè¡¨ä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªä¸º.sqlæ–‡ä»¶ï¼ŒåŒ…å«å»ºè¡¨æ‰§è¡Œã€‚å¦ä¸€ä¸ªä¸º.txtæ–‡ä»¶ï¼ŒåªåŒ…å«æ•°æ®ï¼Œä¸”æ²¡æœ‰sqlæŒ‡ä»¤ã€‚</p><h3 id="5ã€å¯å°†æŸ¥è¯¢å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å¹¶å‘Šè¯‰mysqlä»æ–‡ä»¶ä¸­è¯»å–æŸ¥è¯¢è€Œä¸æ˜¯ç­‰å¾…é”®ç›˜è¾“å…¥ã€‚å¯åˆ©ç”¨å¤–å£³ç¨‹åºé”®å…¥é‡å®šå‘å®ç”¨ç¨‹åºæ¥å®Œæˆè¿™é¡¹å·¥ä½œã€‚"><a href="#5ã€å¯å°†æŸ¥è¯¢å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å¹¶å‘Šè¯‰mysqlä»æ–‡ä»¶ä¸­è¯»å–æŸ¥è¯¢è€Œä¸æ˜¯ç­‰å¾…é”®ç›˜è¾“å…¥ã€‚å¯åˆ©ç”¨å¤–å£³ç¨‹åºé”®å…¥é‡å®šå‘å®ç”¨ç¨‹åºæ¥å®Œæˆè¿™é¡¹å·¥ä½œã€‚" class="headerlink" title="5ã€å¯å°†æŸ¥è¯¢å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å¹¶å‘Šè¯‰mysqlä»æ–‡ä»¶ä¸­è¯»å–æŸ¥è¯¢è€Œä¸æ˜¯ç­‰å¾…é”®ç›˜è¾“å…¥ã€‚å¯åˆ©ç”¨å¤–å£³ç¨‹åºé”®å…¥é‡å®šå‘å®ç”¨ç¨‹åºæ¥å®Œæˆè¿™é¡¹å·¥ä½œã€‚"></a>5ã€å¯å°†æŸ¥è¯¢å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å¹¶å‘Šè¯‰mysqlä»æ–‡ä»¶ä¸­è¯»å–æŸ¥è¯¢è€Œä¸æ˜¯ç­‰å¾…é”®ç›˜è¾“å…¥ã€‚å¯åˆ©ç”¨å¤–å£³ç¨‹åºé”®å…¥é‡å®šå‘å®ç”¨ç¨‹åºæ¥å®Œæˆè¿™é¡¹å·¥ä½œã€‚</h3><p>ä¾‹å¦‚ï¼Œå¦‚æœåœ¨æ–‡ä»¶my_file.sql ä¸­å­˜æ”¾æœ‰æŸ¥è¯¢ï¼Œå¯å¦‚ä¸‹æ‰§è¡Œè¿™äº›æŸ¥è¯¢ï¼š</p><p>ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³å°†å»ºè¡¨è¯­å¥æå‰å†™åœ¨sql.txtä¸­:</p><p>mysql &gt; mysql -h myhost -u root -p database &lt; sql.txt</p><p>è½¬ mysqlå‘½ä»¤</p><h2 id="ä¸€-å®‰è£…ä¸é…ç½®MYSQL"><a href="#ä¸€-å®‰è£…ä¸é…ç½®MYSQL" class="headerlink" title="ä¸€ . å®‰è£…ä¸é…ç½®MYSQL"></a>ä¸€ . å®‰è£…ä¸é…ç½®MYSQL</h2><p>è¿™ä¸ªå°±ä¸è¯´äº†ï¼Œä¸€èˆ¬åˆ†ä¸ºWindowså®‰è£…å’ŒLinuxå®‰è£…</p><h2 id="äºŒ-å¸¸ç”¨mysqlå‘½ä»¤è¡Œå‘½ä»¤"><a href="#äºŒ-å¸¸ç”¨mysqlå‘½ä»¤è¡Œå‘½ä»¤" class="headerlink" title="äºŒ . å¸¸ç”¨mysqlå‘½ä»¤è¡Œå‘½ä»¤"></a>äºŒ . å¸¸ç”¨mysqlå‘½ä»¤è¡Œå‘½ä»¤</h2><p>1 .mysqlçš„å¯åŠ¨ä¸åœæ­¢</p><p>å¯åŠ¨MYSQLæœåŠ¡ <code>net start mysql</code></p><p>åœæ­¢MYSQLæœåŠ¡ <code>net stop mysql</code></p><p>2 .<code>netstat â€“na | findstr 3306</code> æŸ¥çœ‹è¢«ç›‘å¬çš„ç«¯å£ , findstrç”¨äºæŸ¥æ‰¾åé¢çš„ç«¯å£æ˜¯å¦å­˜åœ¨</p><p>3 . åœ¨å‘½ä»¤è¡Œä¸­ç™»é™†MYSQLæ§åˆ¶å° , å³ä½¿ç”¨ <code>MYSQL COMMEND LINE TOOL</code></p><p>è¯­æ³•æ ¼å¼ <code>mysql â€“user=root â€“password=123456 db_name</code></p><p>æˆ– <code>mysql â€“u root â€“p123456 db_name</code></p><p>4 . è¿›å…¥MYSQLå‘½ä»¤è¡Œå·¥å…·å , ä½¿ç”¨<code>status;</code>æˆ–/s æŸ¥çœ‹è¿è¡Œç¯å¢ƒä¿¡æ¯</p><p>5 . åˆ‡æ¢è¿æ¥æ•°æ®åº“çš„è¯­æ³• :<code>use new_dbname;</code></p><p>6 . æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“ : <code>show databases;</code></p><p>7 . æ˜¾ç¤ºæ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨ :<code>show tables;</code></p><p>8 . æ˜¾ç¤ºæŸä¸ªè¡¨åˆ›å»ºæ—¶çš„å…¨éƒ¨ä¿¡æ¯ : <code>show create table table_name;</code></p><p>9 . æŸ¥çœ‹è¡¨çš„å…·ä½“å±æ€§ä¿¡æ¯åŠè¡¨ä¸­å„å­—æ®µçš„æè¿°</p><p><code>Describe table_name;</code> ç¼©å†™å½¢å¼ : <code>desc table_name;</code></p><h2 id="ä¸‰-MySqlä¸­çš„SQLè¯­å¥"><a href="#ä¸‰-MySqlä¸­çš„SQLè¯­å¥" class="headerlink" title="ä¸‰ . MySqlä¸­çš„SQLè¯­å¥"></a>ä¸‰ . MySqlä¸­çš„SQLè¯­å¥</h2><ol><li><p>æ•°æ®åº“åˆ›å»º : <code>Create database db_name;</code></p><p>æ•°æ®åº“åˆ é™¤ : <code>Drop database db_name;</code> åˆ é™¤æ—¶å¯å…ˆåˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼Œå†™æˆ : <code>drop database if exits db_name</code></p></li><li><p>å»ºè¡¨ : åˆ›å»ºæ•°æ®è¡¨çš„è¯­æ³• :<code>create table table_name (å­—æ®µ1 æ•°æ®ç±»å‹ , å­—æ®µ2 æ•°æ®ç±»å‹);</code></p><p>ä¾‹ : create table mytable (id int , username char(20));</p></li><li><p>åˆ è¡¨ :<code>drop table table_name;</code>ä¾‹ : drop table mytable;</p></li><li><p>æ·»åŠ æ•°æ® : <code>Insert into è¡¨å [(å­—æ®µ1 , å­—æ®µ2 , â€¦.)] values (å€¼1 , å€¼2 , â€¦..);</code></p><p>å¦‚æœå‘è¡¨ä¸­çš„æ¯ä¸ªå­—æ®µéƒ½æ’å…¥ä¸€ä¸ªå€¼,é‚£ä¹ˆå‰é¢ [ ] æ‹¬å·å†…å­—æ®µåå¯å†™ä¹Ÿå¯ä¸å†™</p><p>ä¾‹ : insert into mytable (id,username) values (1,â€™zhangsanâ€™);</p></li><li><p>æŸ¥è¯¢ : æŸ¥è¯¢æ‰€æœ‰æ•°æ® : <code>select * from table_name;</code></p><p>æŸ¥è¯¢æŒ‡å®šå­—æ®µçš„æ•°æ® :<code>select å­—æ®µ1 , å­—æ®µ2 from table_name;</code></p><p>ä¾‹ : select id,username from mytable where id=1 order by desc;å¤šè¡¨æŸ¥è¯¢è¯­å¥â€”â€”â€”â€”â€”â€”å‚ç…§ç¬¬17æ¡å®ä¾‹</p></li><li><p>æ›´æ–°æŒ‡å®šæ•°æ® , æ›´æ–°æŸä¸€ä¸ªå­—æ®µçš„æ•°æ®(æ³¨æ„ï¼Œä¸æ˜¯æ›´æ–°å­—æ®µçš„åå­—)</p></li></ol><p><code>Update table_name set å­—æ®µå=â€™æ–°å€¼â€™ [, å­—æ®µ2 =â€™æ–°å€¼â€™ , â€¦..][where id=id_num] [order by å­—æ®µ é¡ºåº]</code></p><p>â€‹    ä¾‹ : update mytable set username=â€™lisiâ€™ where id=1;</p><p>â€‹    Orderè¯­å¥æ˜¯æŸ¥è¯¢çš„é¡ºåº , å¦‚ : <code>order by id desc(æˆ–asc)</code> , é¡ºåºæœ‰ä¸¤ç§ : descå€’åº(100â€”1,å³ä»æœ€æ–°æ•°æ®å¾€åæŸ¥è¯¢),asc(ä»1-100)ï¼ŒWhereå’Œorderè¯­å¥ä¹Ÿå¯ç”¨äºæŸ¥è¯¢select ä¸åˆ é™¤delete</p><ol><li><p>åˆ é™¤è¡¨ä¸­çš„ä¿¡æ¯ :</p><p>åˆ é™¤æ•´ä¸ªè¡¨ä¸­çš„ä¿¡æ¯ : <code>delete from table_name;</code></p><p>åˆ é™¤è¡¨ä¸­æŒ‡å®šæ¡ä»¶çš„è¯­å¥ : <code>delete from table_name where æ¡ä»¶è¯­å¥ ;</code> æ¡ä»¶è¯­å¥å¦‚ : id=3;</p></li><li><p>åˆ›å»ºæ•°æ®åº“ç”¨æˆ·</p><p>ä¸€æ¬¡å¯ä»¥åˆ›å»ºå¤šä¸ªæ•°æ®åº“ç”¨æˆ·å¦‚ï¼š</p><p><code>CREATE USER username1 identified BY â€˜passwordâ€™ , username2 IDENTIFIED BY â€˜passwordâ€™â€¦.</code></p></li><li><p>ç”¨æˆ·çš„æƒé™æ§åˆ¶ï¼šgrantåº“ï¼Œè¡¨çº§çš„æƒé™æ§åˆ¶ : å°†æŸä¸ªåº“ä¸­çš„æŸä¸ªè¡¨çš„æ§åˆ¶æƒèµ‹äºˆæŸä¸ªç”¨æˆ·</p><p><code>Grant all ON db_name.table_name TO user_name [ indentified by â€˜passwordâ€™ ];</code></p></li><li><p>è¡¨ç»“æ„çš„ä¿®æ”¹</p><p>(1)å¢åŠ ä¸€ä¸ªå­—æ®µæ ¼å¼ï¼š</p><p>â€‹    <code>alter table table_name add column (å­—æ®µå å­—æ®µç±»å‹); ----æ­¤æ–¹æ³•å¸¦æ‹¬å·</code></p><p>(2)æŒ‡å®šå­—æ®µæ’å…¥çš„ä½ç½®ï¼š</p><p>â€‹    <code>alter table table_name add column å­—æ®µå å­—æ®µç±»å‹ after æŸå­—æ®µï¼›</code></p><p>åˆ é™¤ä¸€ä¸ªå­—æ®µï¼š</p><p>â€‹    <code>alter table table_name dropå­—æ®µå;</code></p><p>(3)ä¿®æ”¹å­—æ®µåç§°/ç±»å‹</p><p>â€‹    <code>alter table table_name change æ—§å­—æ®µå æ–°å­—æ®µå æ–°å­—æ®µçš„ç±»å‹;</code></p><p>(4)æ”¹è¡¨çš„åå­—</p><p>â€‹    <code>alter table table_name rename to new_table_name;</code></p><p>(5)ä¸€æ¬¡æ€§æ¸…ç©ºè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®</p><p>â€‹    <code>truncate table table_name; æ­¤æ–¹æ³•ä¹Ÿä¼šä½¿è¡¨ä¸­çš„å–å·å™¨(ID)ä»1å¼€å§‹</code></p></li><li><p>å¢åŠ ä¸»é”®ï¼Œå¤–é”®ï¼Œçº¦æŸï¼Œç´¢å¼•ã€‚ã€‚ã€‚ã€‚(ä½¿ç”¨æ–¹æ³•è§17å®ä¾‹)</p><p>â‘  <strong>çº¦æŸ(ä¸»é”®Primary keyã€å”¯ä¸€æ€§Uniqueã€éç©ºNot Null)</strong></p><p>â‘¡ <strong>è‡ªåŠ¨å¢å¼  auto_increment</strong></p><p>â‘¢<strong>å¤–é”®Foreign keyâ€”â€”-ä¸reference table_name(col_nameåˆ—å)é…åˆä½¿ç”¨ï¼Œå»ºè¡¨æ—¶å•ç‹¬ä½¿ç”¨</strong></p><p>â‘£ <strong>åˆ é™¤å¤šä¸ªè¡¨ä¸­æœ‰å…³è”çš„æ•°æ®â€”â€”è®¾ç½®foreign key ä¸ºset null â€”-å…·ä½“è®¾ç½®å‚è€ƒå¸®åŠ©æ–‡æ¡£</strong></p></li><li><p>æŸ¥çœ‹æ•°æ®åº“å½“å‰å¼•æ“</p><p><code>`SHOW CREATE TABLE table_name;</code></p></li><li><p>ä¿®æ”¹æ•°æ®åº“å¼•æ“</p><p><code>ALTER TABLE table_name ENGINE=MyISAM | InnoDB;</code></p></li><li><p>SQLè¯­å¥è¿ç”¨å®ä¾‹:</p><p><strong>â€”1 å»ºusersè¡¨</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table users (</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">nikename varchar(20) not null unique,</span><br><span class="line">password varchar(100) not null,</span><br><span class="line">address varchar(200), </span><br><span class="line">reg_date timestamp not null default CURRENT_TIMESTAMP</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li></ol><pre><code>**--2 å»ºarticlesè¡¨,åœ¨å»ºè¡¨æ—¶è®¾ç½®å¤–é”®**<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table articles (</span><br><span class="line">    id int primary key auto_increment,</span><br><span class="line">    content longtext not null,</span><br><span class="line">    userid int,</span><br><span class="line">    constraint foreign key (userid) references users(id) on delete set null</span><br><span class="line">);</span><br></pre></td></tr></table></figure>â€‹    **--2.1 å»ºarticlesè¡¨,å»ºè¡¨æ—¶ä¸è®¾ç½®å¤–é”®**<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table articles (</span><br><span class="line">    id int primary key auto_increment,</span><br><span class="line">    content longtext not null,</span><br><span class="line">    userid int</span><br><span class="line">);</span><br></pre></td></tr></table></figure>â€‹    -**-2.2 ç»™articlesè¡¨è®¾ç½®å¤–é”®**â€‹    `alter table articles add constraint foreign key (userid) references users(id) on delete set null;`**--3. å‘usersè¡¨ä¸­æ’å…¥æ•°æ®,åŒæ—¶æ’å…¥å¤šæ¡**`insert into users (id,nikename,password,address) values (1,&#39;lyh1&#39;,&#39;1234&#39;,null),(10,&#39;lyh22&#39;,&#39;4321&#39;,&#39;æ¹–åŒ—æ­¦æ±‰&#39;),(null,&#39;lyh333&#39;,&#39;5678&#39;, &#39;åŒ—äº¬æµ·æ·€&#39;);`</code></pre><p>â€‹    <strong>â€”4. å‘articleä¸­æ’å…¥ä¸‰æ¡æ•°æ®</strong></p><p>â€‹    <code>insert into articles (id,content,userid) values (2,&#39;hahahahahaha&#39;,11),(null,&#39;xixixixixix&#39;,10),(13,&#39;aiaiaiaiaiaiaiaiaiaiaiaia&#39;,1),(14,&#39;hohoahaoaoooooooooo&#39;,10);</code></p><p>â€‹    <strong>â€”5. è¿›è¡Œå¤šè¡¨æŸ¥è¯¢ï¼Œé€‰æ‹©usersè¡¨ä¸­ID=10çš„ç”¨æˆ·å‘å¸ƒçš„æ‰€æœ‰ç•™è¨€åŠè¯¥ç”¨æˆ·çš„æ‰€æœ‰ä¿¡æ¯</strong></p><p>â€‹    <code>select articles.id,articles.content,users.* from users,articles where users.id=10 and articles.userid=users.id order by articles.id desc;</code></p><p>â€‹    <strong>â€”6. æŸ¥çœ‹æ•°æ®åº“å¼•æ“ç±»å‹</strong></p><p>â€‹    <code>show create table users;</code></p><p>â€‹    <strong>â€”7. ä¿®æ”¹æ•°æ®åº“å¼•æ“ç±»å‹</strong></p><p>â€‹    <code>alter table users engine=MyISAM;</code>â€”-å› ä¸ºusersè¡¨ä¸­IDè¢«è®¾ç½®æˆå¤–é”®ï¼Œæ‰§è¡Œæ­¤å¥ä¼šå‡ºé”™</p><p>â€‹    -<strong>-8. åŒè¡¨æŸ¥è¯¢,å·²çŸ¥ä¸€ä¸ªæ¡ä»¶çš„æƒ…å†µä¸‹.æŸ¥è¯¢IDå·å¤§äºç”¨æˆ·lyh1çš„IDå·çš„æ‰€æœ‰ç”¨æˆ·</strong></p><p>â€‹    <code>select a.id,a.nikename,a.address from users a,users b where b.nikename=&#39;lyh1&#39; and a.id&gt;b.id;</code></p><p>â€‹    â€”â€”â€”ä¹Ÿå¯å†™æˆ</p><p>â€‹    <code>select id,nikename,address from users where id&gt;(select id from users where nikename=&#39;lyh1&#39;);</code></p><h3 id="ä¹ é¢˜ï¼š"><a href="#ä¹ é¢˜ï¼š" class="headerlink" title="ä¹ é¢˜ï¼š"></a>ä¹ é¢˜ï¼š</h3><ol><li><strong>æ˜¾ç¤ºå¹´é¾„æ¯”é¢†å¯¼è¿˜å¤§çš„å‘˜å·¥ï¼š</strong></li></ol><p><code>select a.name from users a,users b where a.managerid=b.id and a.age&gt;b.age;</code></p><ol><li><p><strong>æŸ¥è¯¢ç¼–å·ä¸º2çš„å‘å¸–äºº: å…ˆæŸ¥articlesè¡¨,å¾—åˆ°å‘å¸–äººçš„ç¼–å·,å†æ ¹æ®ç¼–å·æŸ¥userså¾—åˆ°çš„ç”¨æˆ·åã€‚</strong></p><p><strong>æ¥ç€ç”¨å…³è”æŸ¥è¯¢.</strong></p><ol><li><code>select * from articles,users</code>å¾—åˆ°ç¬›å¡å„¿ç§¯,å†åŠ <code>order by articles.id</code>ä»¥ä¾¿è§‚å¯Ÿ</li><li>ä½¿ç”¨<code>select * from articles,users where articles.id=2</code> ç­›é€‰å‡º2å·å¸–å­ä¸æ¯ä¸ªç”¨æˆ·çš„ç»„åˆè®°å½•</li><li>å†ä½¿ç”¨<code>select * from articles,users where articles.id=2 and articles.userid=users.id</code>é€‰å‡ºusers.idç­‰äº2å·å¸–çš„å‘å¸–äººidçš„è®°å½•.</li><li>åªå–ç”¨æˆ·å:select user where user.id=(select userid from articles where article.id =2)</li></ol></li><li><p><strong>æ‰¾å‡ºå¹´é¾„æ¯”å°ç‹è¿˜å¤§çš„äºº:å‡è®¾å°ç‹æ˜¯28å²,å…ˆæƒ³æ‰¾å‡ºå¹´é¾„å¤§äº28çš„äºº</strong></p><p><code>select * from users where age&gt;(select age from users where name=&#39;xiaowang&#39;);</code></p></li></ol><p>   <strong>è¦æŸ¥è¯¢çš„è®°å½•éœ€è¦å‚ç…§è¡¨é‡Œé¢çš„å…¶ä»–è®°å½•:</strong></p><p><code>select a.name from users a,users b where b.name=&#39;xiaowang&#39; and a.age&gt;b.age</code></p><p>è¡¨é‡Œçš„æ¯ä¸ªç”¨æˆ·éƒ½æƒ³pkä¸€ä¸‹.<code>select a.nickname,b.nickname from users a,users b where a.id&gt;b.id ;</code></p><p>æ›´ä¿é™©çš„è¯­å¥:<code>select a.nickname,b.nickname from (select * from users order by id) a,(select * from users order by id) b where a.id&gt;b.id ;</code></p><p>å†æŸ¥è¯¢æŸä¸ªäººå‘çš„æ‰€æœ‰å¸–å­.</p><p><code>select b.* from articles a , articles b where a.id=2 and a.userid=b.userid</code></p><p>è¯´æ˜: è¡¨ä¹‹é—´å­˜åœ¨ç€å…³ç³»ï¼ŒERæ¦‚å¿µçš„è§£é‡Šï¼Œç”¨accessä¸­çš„ç¤ºä¾‹æ•°æ®åº“æ¼”ç¤ºè¡¨ä¹‹é—´çš„å…³ç³».<strong>åªæœ‰innodbå¼•æ“æ‰æ”¯æŒforeign keyï¼Œmysqlçš„ä»»ä½•å¼•æ“ç›®å‰éƒ½ä¸æ”¯æŒcheckçº¦æŸã€‚</strong></p><h2 id="å››-å­—ç¬¦é›†å‡ºç°é”™è¯¯è§£å†³åŠæ³•"><a href="#å››-å­—ç¬¦é›†å‡ºç°é”™è¯¯è§£å†³åŠæ³•" class="headerlink" title="å››. å­—ç¬¦é›†å‡ºç°é”™è¯¯è§£å†³åŠæ³•"></a><strong>å››. å­—ç¬¦é›†å‡ºç°é”™è¯¯è§£å†³åŠæ³•</strong></h2><p>å‡ºç°çš„é—®é¢˜ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update <span class="built_in">users</span></span><br><span class="line">-&gt; <span class="built_in">set</span> username=<span class="string">&#x27;å…³ç¾½&#x27;</span></span><br><span class="line">-&gt; <span class="built_in">where</span> userid=2;</span><br><span class="line"></span><br><span class="line">ERROR 1366 (HY000): Incorrect string value: <span class="string">&#x27;/xB9/xD8/xD3/xF0&#x27;</span> <span class="keyword">for</span> column <span class="string">&#x27;username&#x27;</span> at row 1</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å‘è¡¨ä¸­æ’å…¥ä¸­æ–‡å­—ç¬¦æ—¶ï¼Œå‡ºç°é”™è¯¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from <span class="built_in">users</span>;</span><br><span class="line">+--------+----------+</span><br><span class="line">| userid | username |</span><br><span class="line">+--------+----------+</span><br><span class="line">| 2 | ???? |</span><br><span class="line">| 3 | ???? |</span><br><span class="line">| 4 | ?Ã­?Ã¹ |</span><br><span class="line">+--------+----------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¡¨ä¸­çš„ä¸­æ–‡å­—ç¬¦ä½ä¹±ç ã€‚</p><p>è§£å†³åŠæ³•ï¼š</p><p>ä½¿ç”¨å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; status;</span><br><span class="line">mysql Ver 14.12 Distrib 5.0.45, <span class="keyword">for</span> Win32 (ia32)</span><br><span class="line">Connection <span class="built_in">id</span>: 8</span><br><span class="line">Current database: <span class="built_in">test</span></span><br><span class="line">Current user: root@localhost</span><br><span class="line">SSL: Not <span class="keyword">in</span> use</span><br><span class="line">Using delimiter: ;</span><br><span class="line">Server version: 5.0.45-community-nt MySQL Community Edition (GPL)</span><br><span class="line">Protocol version: 10</span><br><span class="line">Connection: localhost via TCP/IP</span><br><span class="line">Server characterset: latin1</span><br><span class="line">Db characterset: latin1</span><br><span class="line">Client characterset: gbk</span><br><span class="line">Conn. characterset: gbk</span><br><span class="line">TCP port: 3306</span><br><span class="line">Uptime: 7 hours 39 min 19 sec</span><br><span class="line">Threads: 2 Questions: 174 Slow queries: 0 Opens: 57 Flush tables: 1 Open ta</span><br><span class="line">bles: 1 Queries per second avg: 0.006</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹mysqlå‘ç°<strong>Server charactersetï¼ŒDb charactersetçš„å­—ç¬¦é›†è®¾æˆäº†latin1</strong>ï¼Œæ‰€ä»¥å‡ºç°ä¸­æ–‡ä¹±ç ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show tables;</span><br><span class="line">+----------------+</span><br><span class="line">| Tables_in_test |</span><br><span class="line">+----------------+</span><br><span class="line">| <span class="built_in">users</span> |</span><br><span class="line">+----------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p>æ›´æ”¹è¡¨çš„å­—ç¬¦é›†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table <span class="built_in">users</span> character <span class="built_in">set</span> GBK;</span><br><span class="line">Query OK, 3 rows affected (0.08 sec)</span><br><span class="line">Records: 3 Duplicates: 0 Warnings: 0</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹è¡¨çš„ç»“æ„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show create <span class="built_in">users</span>;</span><br><span class="line"></span><br><span class="line">ERROR 1064 (42000): You have an error <span class="keyword">in</span> your SQL syntax; check the manual that corresponds to your MySQL server version <span class="keyword">for</span> the right syntax to use near <span class="string">&#x27;users&#x27;</span> at line 1</span><br><span class="line">mysql&gt; show create table <span class="built_in">users</span>;</span><br><span class="line"></span><br><span class="line">| Table | Create Table|| <span class="built_in">users</span> | </span><br><span class="line">CREATE TABLE <span class="built_in">users</span> (</span><br><span class="line">userid int(11) default NULL,</span><br><span class="line">username char(20) character <span class="built_in">set</span> latin1 default NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=gbk |</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc <span class="built_in">users</span>;</span><br><span class="line"></span><br><span class="line">+----------+----------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+----------+----------+------+-----+---------+-------+</span><br><span class="line">| userid | int(11) | YES | | NULL | |</span><br><span class="line">| username | char(20) | YES | | NULL | |</span><br><span class="line">+----------+----------+------+-----+---------+-------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.02 sec)</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å‘è¡¨ä¸­æ’å…¥ä¸­æ–‡ç„¶åæœ‰é”™è¯¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into <span class="built_in">users</span> values(88,<span class="string">&#x27;ä¸­æ–‡&#x27;</span>);</span><br><span class="line"></span><br><span class="line">ERROR 1366 (HY000): Incorrect string value: <span class="string">&#x27;/xD6/xD0/xCE/xC4&#x27;</span> <span class="keyword">for</span> column <span class="string">&#x27;username&#x27;</span> at row 1</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into <span class="built_in">users</span> values(88,<span class="string">&#x27;ä¸­æ–‡&#x27;</span>);</span><br><span class="line">ERROR 1366 (HY000): Incorrect string value: <span class="string">&#x27;/xD6/xD0/xCE/xC4&#x27;</span> <span class="keyword">for</span> column <span class="string">&#x27;username&#x27;</span> at row 1</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿˜è¦æ›´æ”¹usersè¡¨çš„usernameçš„å­—ç¬¦é›†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table <span class="built_in">users</span> modify username char(20) character <span class="built_in">set</span> gbk;</span><br><span class="line"></span><br><span class="line">ERROR 1366 (HY000): Incorrect string value: <span class="string">&#x27;/xC0/xEE/xCB/xC4&#x27;</span> <span class="keyword">for</span> column <span class="string">&#x27;username&#x27;</span> at row 1</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table <span class="built_in">users</span> modify username char(20) character <span class="built_in">set</span> gbk;</span><br><span class="line"></span><br><span class="line">ERROR 1366 (HY000): Incorrect string value: <span class="string">&#x27;/xC0/xEE/xCB/xC4&#x27;</span> <span class="keyword">for</span> column <span class="string">&#x27;username&#x27;</span> at row 1</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å› ä¸ºè¡¨ä¸­å·²ç»æœ‰æ•°æ®ï¼Œæ‰€ä»¥æ›´æ”¹usernameå­—ç¬¦é›†çš„æ“ä½œæ²¡æœ‰æˆåŠŸ</p><p>æ¸…ç©ºusersè¡¨ä¸­çš„æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="built_in">truncate</span> table <span class="built_in">users</span>;</span><br><span class="line">Query OK, 3 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure><p>é‡æ–°æ›´æ”¹userè¡¨ä¸­usernameçš„å­—ç¬¦é›†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table <span class="built_in">users</span> modify username char(20) character <span class="built_in">set</span> gbk;</span><br><span class="line"></span><br><span class="line">Query OK, 0 rows affected (0.06 sec)</span><br><span class="line">Records: 0 Duplicates: 0 Warnings: 0</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å†æ’å…¥ä¸­æ–‡å­—ç¬¦ï¼Œæ’å…¥æˆåŠŸã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into <span class="built_in">users</span> values(88,<span class="string">&#x27;ä¸­æ–‡&#x27;</span>);</span><br><span class="line"></span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line">mysql&gt; select * from <span class="built_in">users</span>;</span><br><span class="line">+--------+----------+</span><br><span class="line">| userid | username |</span><br><span class="line">+--------+----------+</span><br><span class="line">| 88 | ä¸­æ–‡ |</span><br><span class="line">+--------+----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line">mysql&gt;<span class="built_in">exit</span>;</span><br></pre></td></tr></table></figure><p><strong>å­¦ä¹ MySQLå¸¸ç”¨æ“ä½œå‘½ä»¤</strong></p><p><strong>1ã€å¯åŠ¨MySQLæœåŠ¡å™¨</strong></p><p>å®é™…ä¸Šä¸Šç¯‡å·²è®²åˆ°å¦‚ä½•å¯åŠ¨MySQLã€‚ä¸¤ç§æ–¹æ³•ï¼š <strong>ä¸€æ˜¯ç”¨winmysqladminï¼Œå¦‚æœæœºå™¨å¯åŠ¨æ—¶å·²è‡ªåŠ¨è¿è¡Œï¼Œåˆ™å¯ç›´æ¥è¿›å…¥ä¸‹ä¸€æ­¥æ“ä½œã€‚ äºŒæ˜¯åœ¨DOSæ–¹å¼ä¸‹è¿è¡Œ d:mysqlbinmysqld</strong></p><p><strong>2ã€è¿›å…¥mysqläº¤äº’æ“ä½œç•Œé¢</strong></p><p>åœ¨DOSæ–¹å¼ä¸‹ï¼Œè¿è¡Œï¼š <code>d:mysqlbinmysql</code></p><p>å‡ºç°: mysql çš„æç¤ºç¬¦ï¼Œæ­¤æ—¶å·²è¿›å…¥mysqlçš„äº¤äº’æ“ä½œæ–¹å¼ã€‚</p><p>å¦‚æœå‡ºç° â€œERROR 2003: Canâ€²t connect to MySQL server on â€²localhostâ€² (10061)â€œï¼Œ</p><p>è¯´æ˜ä½ çš„MySQLè¿˜æ²¡æœ‰å¯åŠ¨ã€‚</p><p><strong>3ã€é€€å‡ºMySQLæ“ä½œç•Œé¢</strong></p><p>åœ¨mysql&gt;æç¤ºç¬¦ä¸‹è¾“å…¥quitå¯ä»¥éšæ—¶é€€å‡ºäº¤äº’æ“ä½œç•Œé¢ï¼š</p><p><code>mysql&gt; quit</code></p><p>Bye</p><p>ä½ ä¹Ÿå¯ä»¥ç”¨control-Dé€€å‡ºã€‚</p><p><strong>4ã€ç¬¬ä¸€æ¡å‘½ä»¤</strong></p><p><code>mysql&gt; select version(),current_date();</code></p><p>+â€”â€”â€”â€”â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”-+</p><p>| version() | current_date() |</p><p>+â€”â€”â€”â€”â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”-+</p><p>| 3.23.25a-debug | 2001-05-17 |</p><p>+â€”â€”â€”â€”â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”-+</p><p>1 row in set (0.01 sec)</p><p>mysql&gt;</p><p>æ­¤å‘½ä»¤è¦æ±‚mysqlæœåŠ¡å™¨å‘Šè¯‰ä½ å®ƒçš„ç‰ˆæœ¬å·å’Œå½“å‰æ—¥æœŸã€‚å°è¯•ç”¨ä¸åŒå¤§å°å†™æ“ä½œä¸Šè¿°å‘½ä»¤ï¼Œçœ‹ç»“æœå¦‚ä½•ã€‚ç»“æœè¯´æ˜mysqlå‘½ä»¤çš„å¤§å°å†™ç»“æœæ˜¯ä¸€è‡´çš„ã€‚</p><p>ç»ƒä¹ å¦‚ä¸‹æ“ä½œï¼š</p><p><code>mysql&gt;Select (20+5)*4;</code></p><p><code>mysql&gt;Select (20+5)*4,sin(pi()/3);</code></p><p><code>mysql&gt;Select (20+5)*4 AS Result,sin(pi()/3);</code> (AS: æŒ‡å®šå‡åä¸ºResult)</p><p><strong>5ã€å¤šè¡Œè¯­å¥</strong></p><p>ä¸€æ¡å‘½ä»¤å¯ä»¥åˆ†æˆå¤šè¡Œè¾“å…¥ï¼Œç›´åˆ°å‡ºç°åˆ†å·â€œï¼›â€ä¸ºæ­¢ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> mysql&gt; select</span><br><span class="line">-&gt; USER()</span><br><span class="line">-&gt; ,</span><br><span class="line">-&gt; now()</span><br><span class="line">-&gt;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">+--------------------+---------------------+</span><br><span class="line">| USER() | now() |</span><br><span class="line">+--------------------+---------------------+</span><br><span class="line">| ODBC@localhost | 2001-05-17 22:59:15 |</span><br><span class="line">+--------------------+---------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.06 sec)</span><br><span class="line">mysql&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„ä¸­é—´çš„é€—å·å’Œæœ€åçš„åˆ†å·çš„ä½¿ç”¨æ–¹æ³•ã€‚</p><p><strong>6ã€ä¸€è¡Œå¤šå‘½ä»¤</strong></p><p>è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT USER(); SELECT NOW();</span><br><span class="line">+------------------+</span><br><span class="line">| USER() |</span><br><span class="line">+------------------+</span><br><span class="line">| ODBC@localhost |</span><br><span class="line">+------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line">+---------------------+</span><br><span class="line">| NOW() |</span><br><span class="line">+---------------------+</span><br><span class="line">| 2001-05-17 23:06:15 |</span><br><span class="line">+---------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ä¸­é—´çš„åˆ†å·ï¼Œå‘½ä»¤ä¹‹é—´ç”¨åˆ†å·éš”å¼€ã€‚</p><p><strong>7ã€æ˜¾ç¤ºå½“å‰å­˜åœ¨çš„æ•°æ®åº“</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show databases;</span><br><span class="line">+----------+</span><br><span class="line">| Database |</span><br><span class="line">+----------+</span><br><span class="line">| mysql |</span><br><span class="line">| <span class="built_in">test</span> |</span><br><span class="line">+----------+</span><br><span class="line">2 row <span class="keyword">in</span> <span class="built_in">set</span> (0.06 sec)</span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p><strong>8ã€é€‰æ‹©æ•°æ®åº“å¹¶æ˜¾ç¤ºå½“å‰é€‰æ‹©çš„æ•°æ®åº“</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; USE mysql</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt;</span><br><span class="line">(USE å’Œ QUIT å‘½ä»¤ä¸éœ€è¦åˆ†å·ç»“æŸã€‚)</span><br><span class="line">mysql&gt; select database();</span><br><span class="line">Â±--------------+</span><br><span class="line">| database() |</span><br><span class="line">Â±--------------+</span><br><span class="line">| mysql |</span><br><span class="line">Â±--------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p><strong>9ã€æ˜¾ç¤ºå½“å‰æ•°æ®åº“ä¸­å­˜åœ¨çš„è¡¨</strong></p><p><code>mysql&gt; SHOW TABLES;</code></p><p><strong>10ã€æ˜¾ç¤ºè¡¨(db)çš„å†…å®¹</strong></p><p><code>mysql&gt;select * from db;</code></p><p><strong>11ã€å‘½ä»¤çš„å–æ¶ˆ</strong></p><p>å½“å‘½ä»¤è¾“å…¥é”™è¯¯è€Œåˆæ— æ³•æ”¹å˜(å¤šè¡Œè¯­å¥æƒ…å½¢)æ—¶ï¼Œåªè¦åœ¨åˆ†å·å‡ºç°å‰å°±å¯ä»¥ç”¨ cæ¥å–æ¶ˆè¯¥æ¡å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select</span><br><span class="line">-&gt; user()</span><br><span class="line">-&gt; c</span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€äº›æœ€å¸¸ç”¨çš„æœ€åŸºæœ¬çš„æ“ä½œå‘½ä»¤ï¼Œé€šè¿‡å¤šæ¬¡ç»ƒä¹ å°±å¯ä»¥ç‰¢ç‰¢æŒæ‚äº†</p><p>==========================================================================</p><h2 id="äº”-mysqlå‘½ä»¤"><a href="#äº”-mysqlå‘½ä»¤" class="headerlink" title="äº”. mysqlå‘½ä»¤"></a>äº”. mysqlå‘½ä»¤</h2><p>æµ‹è¯•ç¯å¢ƒï¼šmysql 5.0.45</p><p>ã€æ³¨ï¼šå¯ä»¥åœ¨mysqlä¸­é€šè¿‡mysql&gt; SELECT VERSION();æ¥æŸ¥çœ‹æ•°æ®åº“ç‰ˆæœ¬ã€‘</p><p>æ•´ç†ï¼šleo</p><h3 id="ä¸€ã€è¿æ¥MYSQLã€‚"><a href="#ä¸€ã€è¿æ¥MYSQLã€‚" class="headerlink" title="ä¸€ã€è¿æ¥MYSQLã€‚"></a>ä¸€ã€è¿æ¥MYSQLã€‚</h3><p>æ ¼å¼ï¼š <code>mysql -hä¸»æœºåœ°å€ -uç”¨æˆ·å ï¼pç”¨æˆ·å¯†ç </code></p><h4 id="1ã€è¿æ¥åˆ°æœ¬æœºä¸Šçš„MYSQLã€‚"><a href="#1ã€è¿æ¥åˆ°æœ¬æœºä¸Šçš„MYSQLã€‚" class="headerlink" title="1ã€è¿æ¥åˆ°æœ¬æœºä¸Šçš„MYSQLã€‚"></a><strong>1ã€è¿æ¥åˆ°æœ¬æœºä¸Šçš„MYSQLã€‚</strong></h4><p>é¦–å…ˆæ‰“å¼€DOSçª—å£ï¼Œç„¶åè¿›å…¥ç›®å½•mysql/binï¼Œå†é”®å…¥å‘½ä»¤<code>mysql -u root -p</code>ï¼Œå›è½¦åæç¤ºä½ è¾“å¯†ç .æ³¨æ„ç”¨æˆ·åå‰å¯ä»¥æœ‰ç©ºæ ¼ä¹Ÿå¯ä»¥æ²¡æœ‰ç©ºæ ¼ï¼Œä½†æ˜¯å¯†ç å‰å¿…é¡»æ²¡æœ‰ç©ºæ ¼ï¼Œå¦åˆ™è®©ä½ é‡æ–°è¾“å…¥å¯†ç .</p><p>å¦‚æœåˆšå®‰è£…å¥½MYSQLï¼Œè¶…çº§ç”¨æˆ·rootæ˜¯æ²¡æœ‰å¯†ç çš„ï¼Œæ•…ç›´æ¥å›è½¦å³å¯è¿›å…¥åˆ°MYSQLä¸­äº†ï¼ŒMYSQLçš„æç¤ºç¬¦æ˜¯ï¼š mysql&gt;</p><h4 id="2ã€è¿æ¥åˆ°è¿œç¨‹ä¸»æœºä¸Šçš„MYSQLã€‚"><a href="#2ã€è¿æ¥åˆ°è¿œç¨‹ä¸»æœºä¸Šçš„MYSQLã€‚" class="headerlink" title="2ã€è¿æ¥åˆ°è¿œç¨‹ä¸»æœºä¸Šçš„MYSQLã€‚"></a><strong>2ã€è¿æ¥åˆ°è¿œç¨‹ä¸»æœºä¸Šçš„MYSQLã€‚</strong></h4><p>å‡è®¾è¿œç¨‹ä¸»æœºçš„IPä¸ºï¼š110.110.110.110ï¼Œç”¨æˆ·åä¸ºroot,å¯†ç ä¸ºabcd123ã€‚åˆ™é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><p><code>mysql -h110.110.110.110 -u root -p abcd123;</code> (æ³¨:uä¸rootä¹‹é—´å¯ä»¥ä¸ç”¨åŠ ç©ºæ ¼ï¼Œå…¶å®ƒä¹Ÿä¸€æ ·)</p><p><strong>3ã€é€€å‡ºMYSQLå‘½ä»¤ï¼š exit (å›è½¦)</strong></p><h3 id="äºŒã€ä¿®æ”¹å¯†ç ã€‚"><a href="#äºŒã€ä¿®æ”¹å¯†ç ã€‚" class="headerlink" title="äºŒã€ä¿®æ”¹å¯†ç ã€‚"></a><strong>äºŒã€ä¿®æ”¹å¯†ç ã€‚</strong></h3><p>æ ¼å¼ï¼š<code>mysqladmin -uç”¨æˆ·å -pæ—§å¯†ç  password æ–°å¯†ç </code></p><h4 id="1ã€ç»™rootåŠ ä¸ªå¯†ç ab12ã€‚"><a href="#1ã€ç»™rootåŠ ä¸ªå¯†ç ab12ã€‚" class="headerlink" title="1ã€ç»™rootåŠ ä¸ªå¯†ç ab12ã€‚"></a>1ã€ç»™rootåŠ ä¸ªå¯†ç ab12ã€‚</h4><p>é¦–å…ˆåœ¨DOSä¸‹è¿›å…¥ç›®å½•mysql/binï¼Œç„¶åé”®å…¥ä»¥ä¸‹å‘½ä»¤</p><p><code>mysqladmin -u root -password ab12</code></p><p>æ³¨ï¼šå› ä¸ºå¼€å§‹æ—¶rootæ²¡æœ‰å¯†ç ï¼Œæ‰€ä»¥-pæ—§å¯†ç ä¸€é¡¹å°±å¯ä»¥çœç•¥äº†ã€‚</p><h4 id="2ã€å†å°†rootçš„å¯†ç æ”¹ä¸ºdjg345ã€‚"><a href="#2ã€å†å°†rootçš„å¯†ç æ”¹ä¸ºdjg345ã€‚" class="headerlink" title="2ã€å†å°†rootçš„å¯†ç æ”¹ä¸ºdjg345ã€‚"></a>2ã€å†å°†rootçš„å¯†ç æ”¹ä¸ºdjg345ã€‚</h4><p><code>mysqladmin -u root -p ab12 password djg345</code></p><h3 id="ä¸‰ã€å¢åŠ æ–°ç”¨æˆ·ã€‚"><a href="#ä¸‰ã€å¢åŠ æ–°ç”¨æˆ·ã€‚" class="headerlink" title="ä¸‰ã€å¢åŠ æ–°ç”¨æˆ·ã€‚"></a>ä¸‰ã€å¢åŠ æ–°ç”¨æˆ·ã€‚</h3><p>(æ³¨æ„ï¼šå’Œä¸Šé¢ä¸åŒï¼Œä¸‹é¢çš„å› ä¸ºæ˜¯MYSQLç¯å¢ƒä¸­çš„å‘½ä»¤ï¼Œæ‰€ä»¥åé¢éƒ½å¸¦ä¸€ä¸ªåˆ†å·ä½œä¸ºå‘½ä»¤ç»“æŸç¬¦)</p><p>æ ¼å¼ï¼š<code>grant select on æ•°æ®åº“.* to ç”¨æˆ·å@ç™»å½•ä¸»æœº identified by â€œå¯†ç â€</code></p><p>1ã€å¢åŠ ä¸€ä¸ªç”¨æˆ·test1å¯†ç ä¸ºabcï¼Œè®©ä»–å¯ä»¥åœ¨ä»»ä½•ä¸»æœºä¸Šç™»å½•ï¼Œå¹¶å¯¹æ‰€æœ‰æ•°æ®åº“æœ‰æŸ¥è¯¢ã€æ’å…¥ã€ä¿®æ”¹ã€åˆ é™¤çš„æƒé™ã€‚é¦–å…ˆç”¨rootç”¨æˆ·è¿å…¥MYSQLï¼Œç„¶åé”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><p><code>grant select,insert,update,delete on *.* to [email=test1@â€%]test1@â€%[/email]â€ Identified by â€œabcâ€;</code></p><p><strong>ä½†å¢åŠ çš„ç”¨æˆ·æ˜¯ååˆ†å±é™©çš„ï¼Œä½ æƒ³å¦‚æŸä¸ªäººçŸ¥é“test1çš„å¯†ç ï¼Œé‚£ä¹ˆä»–å°±å¯ä»¥åœ¨internetä¸Šçš„ä»»ä½•ä¸€å°ç”µè„‘ä¸Šç™»å½•ä½ çš„mysqlæ•°æ®åº“å¹¶å¯¹ä½ çš„æ•°æ®å¯ä»¥ä¸ºæ‰€æ¬²ä¸ºäº†ï¼Œè§£å†³åŠæ³•è§2ã€‚</strong></p><p>2ã€å¢åŠ ä¸€ä¸ªç”¨æˆ·test2å¯†ç ä¸ºabc,è®©ä»–åªå¯ä»¥åœ¨localhostä¸Šç™»å½•ï¼Œå¹¶å¯ä»¥å¯¹æ•°æ®åº“mydbè¿›è¡ŒæŸ¥è¯¢ã€æ’å…¥ã€ä¿®æ”¹ã€åˆ é™¤çš„æ“ä½œ(localhostæŒ‡æœ¬åœ°ä¸»æœºï¼Œå³MYSQLæ•°æ®åº“æ‰€åœ¨çš„é‚£å°ä¸»æœº)ï¼Œ</p><p>è¿™æ ·ç”¨æˆ·å³ä½¿ç”¨çŸ¥é“test2çš„å¯†ç ï¼Œä»–ä¹Ÿæ— æ³•ä»internetä¸Šç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œ<strong>åªèƒ½é€šè¿‡MYSQLä¸»æœºä¸Šçš„webé¡µæ¥è®¿é—®äº†ã€‚</strong></p><p><code>grant select,insert,update,delete on mydb.* to [email=test2@localhost]test2@localhost[/email] identified by â€œabcâ€;</code></p><p>å¦‚æœ<strong>ä½ ä¸æƒ³test2æœ‰å¯†ç ï¼Œå¯ä»¥å†æ‰“ä¸€ä¸ªå‘½ä»¤å°†å¯†ç æ¶ˆæ‰ã€‚</strong></p><p><code>grant select,insert,update,delete on mydb.* to [email=test2@localhost]test2@localhost[/email] identified by â€œâ€;</code></p><h2 id="å…­-MYSQLä¸­æœ‰å…³æ•°æ®åº“æ–¹é¢çš„æ“ä½œã€‚"><a href="#å…­-MYSQLä¸­æœ‰å…³æ•°æ®åº“æ–¹é¢çš„æ“ä½œã€‚" class="headerlink" title="å…­. MYSQLä¸­æœ‰å…³æ•°æ®åº“æ–¹é¢çš„æ“ä½œã€‚"></a>å…­. MYSQLä¸­æœ‰å…³æ•°æ®åº“æ–¹é¢çš„æ“ä½œã€‚</h2><p>æ³¨æ„ï¼šä½ å¿…é¡»é¦–å…ˆç™»å½•åˆ°MYSQLä¸­ï¼Œä»¥ä¸‹æ“ä½œéƒ½æ˜¯åœ¨MYSQLçš„æç¤ºç¬¦ä¸‹è¿›è¡Œçš„ï¼Œè€Œä¸”æ¯ä¸ªå‘½ä»¤ä»¥åˆ†å·ç»“æŸã€‚</p><h3 id="ä¸€ã€æ“ä½œæŠ€å·§"><a href="#ä¸€ã€æ“ä½œæŠ€å·§" class="headerlink" title="ä¸€ã€æ“ä½œæŠ€å·§"></a>ä¸€ã€æ“ä½œæŠ€å·§</h3><p>1ã€å¦‚æœä½ æ‰“å‘½ä»¤æ—¶ï¼Œå›è½¦åå‘ç°å¿˜è®°åŠ åˆ†å·ï¼Œä½ æ— é¡»é‡æ‰“ä¸€éå‘½ä»¤ï¼Œåªè¦æ‰“ä¸ªåˆ†å·å›è½¦å°±å¯ä»¥äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥æŠŠä¸€ä¸ªå®Œæ•´çš„å‘½ä»¤åˆ†æˆå‡ è¡Œæ¥æ‰“ï¼Œå®Œåç”¨åˆ†å·ä½œç»“æŸæ ‡å¿—å°±OKã€‚</p><p>2ã€ä½ å¯ä»¥ä½¿ç”¨å…‰æ ‡ä¸Šä¸‹é”®è°ƒå‡ºä»¥å‰çš„å‘½ä»¤ã€‚</p><h3 id="äºŒã€æ˜¾ç¤ºå‘½ä»¤"><a href="#äºŒã€æ˜¾ç¤ºå‘½ä»¤" class="headerlink" title="äºŒã€æ˜¾ç¤ºå‘½ä»¤"></a>äºŒã€æ˜¾ç¤ºå‘½ä»¤</h3><p>1ã€æ˜¾ç¤ºå½“å‰æ•°æ®åº“æœåŠ¡å™¨ä¸­çš„æ•°æ®åº“åˆ—è¡¨ï¼š</p><p><code>mysql&gt; SHOW DATABASES;</code></p><p>æ³¨æ„ï¼šmysqlåº“é‡Œé¢æœ‰MYSQLçš„ç³»ç»Ÿä¿¡æ¯ï¼Œæˆ‘ä»¬æ”¹å¯†ç å’Œæ–°å¢ç”¨æˆ·ï¼Œå®é™…ä¸Šå°±æ˜¯ç”¨è¿™ä¸ªåº“è¿›è¡Œæ“ä½œã€‚</p><p>2ã€æ˜¾ç¤ºæ•°æ®åº“ä¸­çš„æ•°æ®è¡¨ï¼š</p><p><code>mysql&gt; USE åº“åï¼›</code></p><p><code>mysql&gt; SHOW TABLES;</code></p><p>3ã€æ˜¾ç¤ºæ•°æ®è¡¨çš„ç»“æ„ï¼š</p><p><code>mysql&gt; DESCRIBE è¡¨å;</code></p><p>4ã€å»ºç«‹æ•°æ®åº“ï¼š</p><p><code>mysql&gt; CREATE DATABASE åº“å;</code></p><p>5ã€å»ºç«‹æ•°æ®è¡¨ï¼š</p><p><code>mysql&gt; USE åº“å;</code></p><p><code>mysql&gt; CREATE TABLE è¡¨å (å­—æ®µå VARCHAR(20), å­—æ®µå CHAR(1));</code></p><p>6ã€åˆ é™¤æ•°æ®åº“ï¼š</p><p><code>mysql&gt; DROP DATABASE åº“å;</code></p><p>7ã€åˆ é™¤æ•°æ®è¡¨ï¼š</p><p><code>mysql&gt; DROP TABLE è¡¨åï¼›</code></p><p>8ã€å°†è¡¨ä¸­è®°å½•æ¸…ç©ºï¼š</p><p><code>mysql&gt; DELETE FROM è¡¨å;</code></p><p>9ã€æ˜¾ç¤ºè¡¨ä¸­çš„è®°å½•ï¼š</p><p><code>mysql&gt; SELECT * FROM è¡¨å;</code></p><p>10ã€å¾€è¡¨ä¸­æ’å…¥è®°å½•ï¼š</p><p><code>mysql&gt; INSERT INTO è¡¨å VALUES (â€hyqâ€,â€Mâ€);</code></p><p>11ã€æ›´æ–°è¡¨ä¸­æ•°æ®ï¼š</p><p><code>mysql-&gt; UPDATE è¡¨å SET å­—æ®µå1=â€™a&#39;,å­—æ®µå2=â€™bâ€™ WHERE å­—æ®µå3=â€™c&#39;;</code></p><p>12ã€ç”¨æ–‡æœ¬æ–¹å¼å°†æ•°æ®è£…å…¥æ•°æ®è¡¨ä¸­ï¼š</p><p><code>mysql&gt; LOAD DATA LOCAL INFILE â€œD:/mysql.txtâ€ INTO TABLE è¡¨å;</code></p><p>13ã€å¯¼å…¥.sqlæ–‡ä»¶å‘½ä»¤ï¼š</p><p><code>mysql&gt; USE æ•°æ®åº“å;</code></p><p><code>mysql&gt; SOURCE d:/mysql.sql;</code></p><p>14ã€å‘½ä»¤è¡Œä¿®æ”¹rootå¯†ç ï¼š</p><p><code>mysql&gt; UPDATE mysql.user SET password=PASSWORD(â€™æ–°å¯†ç â€™) WHERE User=â€™rootâ€™;</code></p><p><code>mysql&gt; FLUSH PRIVILEGES;</code></p><p>15ã€æ˜¾ç¤ºuseçš„æ•°æ®åº“åï¼š</p><p><code>mysql&gt; SELECT DATABASE();</code></p><p>16ã€æ˜¾ç¤ºå½“å‰çš„userï¼š</p><p><code>mysql&gt; SELECT USER();</code></p><h3 id="ä¸‰ã€ä¸€ä¸ªå»ºåº“å’Œå»ºè¡¨ä»¥åŠæ’å…¥æ•°æ®çš„å®ä¾‹"><a href="#ä¸‰ã€ä¸€ä¸ªå»ºåº“å’Œå»ºè¡¨ä»¥åŠæ’å…¥æ•°æ®çš„å®ä¾‹" class="headerlink" title="ä¸‰ã€ä¸€ä¸ªå»ºåº“å’Œå»ºè¡¨ä»¥åŠæ’å…¥æ•°æ®çš„å®ä¾‹"></a>ä¸‰ã€ä¸€ä¸ªå»ºåº“å’Œå»ºè¡¨ä»¥åŠæ’å…¥æ•°æ®çš„å®ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">drop database if exists school; //å¦‚æœå­˜åœ¨SCHOOLåˆ™åˆ é™¤</span><br><span class="line">create database school;       //å»ºç«‹åº“SCHOOL</span><br><span class="line">use school; //æ‰“å¼€åº“SCHOOL</span><br><span class="line"></span><br><span class="line">create table teacher //å»ºç«‹è¡¨TEACHER(</span><br><span class="line">id int(3) auto_increment not null primary key,</span><br><span class="line">name char(10) not null,</span><br><span class="line">address varchar(50) default â€˜æ·±åœ³â€™,</span><br><span class="line">year date</span><br><span class="line">); //å»ºè¡¨ç»“æŸ</span><br><span class="line"></span><br><span class="line">//ä»¥ä¸‹ä¸ºæ’å…¥å­—æ®µ</span><br><span class="line">insert into teacher values(â€,â€™allenâ€™,&#x27;å¤§è¿ä¸€ä¸­â€™,&#x27;1976-10-10â€²);</span><br><span class="line">insert into teacher values(â€,â€™jackâ€™,&#x27;å¤§è¿äºŒä¸­â€™,&#x27;1975-12-23â€²);</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ åœ¨mysqlæç¤ºç¬¦é”®å…¥ä¸Šé¢çš„å‘½ä»¤ä¹Ÿå¯ä»¥ï¼Œä½†ä¸æ–¹ä¾¿è°ƒè¯•ã€‚</p><p>â€‹    (1)<strong>ä½ å¯ä»¥å°†ä»¥ä¸Šå‘½ä»¤åŸæ ·å†™å…¥ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œå‡è®¾ä¸ºschool.sqlï¼Œç„¶åå¤åˆ¶åˆ°c://ä¸‹ï¼Œå¹¶åœ¨DOSçŠ¶æ€è¿›å…¥ç›®å½•[url=file:mysql//bin]//mysql//bin[/url]ï¼Œç„¶åé”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</strong></p><p>â€‹    <code>mysql -uroot -på¯†ç  &lt; c://school.sql</code></p><p><strong>å¦‚æœæˆåŠŸï¼Œç©ºå‡ºä¸€è¡Œæ— ä»»ä½•æ˜¾ç¤ºï¼›å¦‚æœ‰é”™è¯¯ï¼Œä¼šæœ‰æç¤ºã€‚(ä»¥ä¸Šå‘½ä»¤å·²ç»è°ƒè¯•ï¼Œä½ åªè¦å°†//çš„æ³¨é‡Šå»æ‰å³å¯ä½¿ç”¨)ã€‚</strong></p><p>(2)æˆ–è€…è¿›å…¥å‘½ä»¤è¡Œåä½¿ç”¨ <code>mysql&gt; source c://school.sql;</code>ä¹Ÿå¯ä»¥å°†school.sqlæ–‡ä»¶å¯¼å…¥æ•°æ®åº“ä¸­ã€‚</p><h3 id="å››ã€å°†æ–‡æœ¬æ•°æ®è½¬åˆ°æ•°æ®åº“ä¸­"><a href="#å››ã€å°†æ–‡æœ¬æ•°æ®è½¬åˆ°æ•°æ®åº“ä¸­" class="headerlink" title="å››ã€å°†æ–‡æœ¬æ•°æ®è½¬åˆ°æ•°æ®åº“ä¸­"></a>å››ã€å°†æ–‡æœ¬æ•°æ®è½¬åˆ°æ•°æ®åº“ä¸­</h3><p>1ã€æ–‡æœ¬æ•°æ®åº”ç¬¦åˆçš„æ ¼å¼ï¼šå­—æ®µæ•°æ®ä¹‹é—´ç”¨<strong>tab</strong>é”®éš”å¼€ï¼Œnullå€¼ç”¨<code>[url=file:n]//n[/url]</code>æ¥ä»£æ›¿.ä¾‹ï¼š</p><p><code>3 rose å¤§è¿äºŒä¸­ 1976-10-10</code></p><p><code>4 mike å¤§è¿ä¸€ä¸­ 1975-12-23</code></p><p><strong>å‡è®¾ä½ æŠŠè¿™ä¸¤ç»„æ•°æ®å­˜ä¸ºschool.txtæ–‡ä»¶ï¼Œæ”¾åœ¨cç›˜æ ¹ç›®å½•ä¸‹ã€‚</strong></p><p>æ•°æ®ä¼ å…¥å‘½ä»¤ <code>load data local infile â€œc://school.txtâ€ into table è¡¨å;</code></p><p>æ³¨æ„ï¼šä½ æœ€å¥½å°†æ–‡ä»¶å¤åˆ¶åˆ°[url=file:mysql//bin]//mysql//bin[/url]ç›®å½•ä¸‹ï¼Œå¹¶ä¸”è¦å…ˆç”¨useå‘½ä»¤æ‰“è¡¨æ‰€åœ¨çš„åº“ã€‚</p><h3 id="äº”ã€å¤‡ä»½æ•°æ®åº“1-å¯¼å‡ºæ•´ä¸ªæ•°æ®åº“"><a href="#äº”ã€å¤‡ä»½æ•°æ®åº“1-å¯¼å‡ºæ•´ä¸ªæ•°æ®åº“" class="headerlink" title="äº”ã€å¤‡ä»½æ•°æ®åº“1.å¯¼å‡ºæ•´ä¸ªæ•°æ®åº“"></a>äº”ã€å¤‡ä»½æ•°æ®åº“1.å¯¼å‡ºæ•´ä¸ªæ•°æ®åº“</h3><p>å¯¼å‡ºæ–‡ä»¶é»˜è®¤æ˜¯å­˜åœ¨mysql/binç›®å½•ä¸‹</p><p><strong>mysqldump -u ç”¨æˆ·å -p æ•°æ®åº“å &gt; å¯¼å‡ºçš„æ–‡ä»¶å</strong></p><p><code>mysqldump -u user_name -p123456 database_name &gt; outfile_name.sql</code></p><p>2.å¯¼å‡ºä¸€ä¸ªè¡¨</p><p><strong>mysqldump -u ç”¨æˆ·å -p æ•°æ®åº“å è¡¨å&gt; å¯¼å‡ºçš„æ–‡ä»¶å</strong></p><p><code>mysqldump -u user_name -p database_name table_name &gt; outfile_name.sql</code></p><p>3.å¯¼å‡ºä¸€ä¸ªæ•°æ®åº“ç»“æ„</p><p><code>mysqldump -u user_name -p -d â€“add-drop-table database_name &gt; outfile_name.sql</code></p><p><strong>-d æ²¡æœ‰æ•°æ® â€“add-drop-table åœ¨æ¯ä¸ªcreateè¯­å¥ä¹‹å‰å¢åŠ ä¸€ä¸ªdrop table</strong></p><p>4.å¸¦è¯­è¨€å‚æ•°å¯¼å‡º</p><p><code>mysqldump -uroot -p â€“default-character-set=latin1 â€“set-charset=gbk â€“skip-opt database_name &gt; outfile_name.sql</code></p><h3 id="å…­ã€å¯¼å…¥æ•°æ®åº“"><a href="#å…­ã€å¯¼å…¥æ•°æ®åº“" class="headerlink" title="å…­ã€å¯¼å…¥æ•°æ®åº“"></a>å…­ã€å¯¼å…¥æ•°æ®åº“</h3><p>ä¾‹å¦‚ï¼šæ•°æ®åº“åä¸º dbTest</p><p>é¦–å…ˆï¼Œè¿›å…¥mysql</p><p><code>mysql -uroot -p123456</code></p><p>ç„¶åï¼Œåˆ›å»ºæ•°æ®åº“</p><p><code>create dbTest</code></p><p><code>exit</code></p><p>æœ€åï¼Œå¯¼å…¥æ•°æ®åº“</p><p><code>mysql -uroot -p123456 dbTest</code></p><p>æ•°æ®åº“åŠè¡¨å¯¼å‡ºå¯¼å…¥ç¤ºä¾‹ï¼š</p><p>å¯¼å‡ºæ•°æ®åº“</p><p><code>mysqldump -u root -p123456 gameTop &gt; gameTop_db.sql</code></p><p>å¯¼å‡ºæ•°æ®åº“çš„è¡¨</p><p><code>mysqldump -u -p123456 root gameTop gametop800 &gt; gameTop_table.sql</code></p><p>å¯¼å‡ºæ•°æ®åº“çš„ç‰¹å®šè¡¨</p><p><code>mysqldump -u root -p123456  gameTop --table gametop800  &gt; gameTop_table.sql</code></p><p>å¯¼å‡ºæ•°æ®åº“(åªå¯¼ç»“æ„ï¼Œä¸è¦æ•°æ®)</p><p><code>mysqldump -u root -p123456 --opt -d gameTop &gt; gameTop_db.sql</code></p><p>æˆ–è€…</p><p><code>mysqldump -u root -p123456  -d gameTop &gt; gameTop_db.sql</code></p><p>å¯¼å‡ºæ•°æ®åº“(åªå¯¼æ•°æ®ï¼Œä¸è¦ç»“æ„)</p><p><code>mysqldump -u root -p123456  -t gameTop &gt; gameTop_db.sql</code></p><p>æ³¨ï¼šä¸åŠ  -d å’Œ -t åˆ™æ—¢å¯¼å‡ºç»“æ„ï¼Œä¹Ÿå¯¼å‡ºæ•°æ®</p><p>mysqldumpå¯¼å‡ºæŠ›å‡ºå¼‚å¸¸ï¼š</p><p><code>mysqldump: Got error: 1044: Access denied for user &#39;username&#39;@&#39;%&#39; to database &#39;dbname&#39; when using LOCK TABLES</code></p><p>è§£å†³åŠæ³•ï¼Œæ·»åŠ å‚æ•° â€”skip-lock-tablesï¼š</p><p><code>mysqldump --skip-lock-tables -h172.88.12.102 -username-pAnJnVs3C2tYXyTwV dbname&gt; dbname_bk.sql</code></p><p>å¯¼å…¥æ•°æ®åº“ï¼š</p><p>ç™»å½•MySQL:      <code>mysql -uroot -p123456</code></p><p>åˆ›å»ºæ•°æ®åº“ï¼š    <code>create database gameTop;</code></p><p>å¯¼å…¥æ•°æ®åº“ï¼š</p><p><code>mysql -uroot -p123456 gameTop</code></p><p>å¯¼å…¥æ•°æ®åº“è¡¨ï¼š</p><p><code>mysql -uroot -p123456 gameTop  gametop800 &lt;  gameTop_table.sql</code></p><p>å¯¼å…¥æ•°æ®åº“è¡¨ï¼š</p><p><code>mysql -uroot -p123456 gameTop</code></p><p>1:ä½¿ç”¨SHOWè¯­å¥æ‰¾å‡ºåœ¨æœåŠ¡å™¨ä¸Šå½“å‰å­˜åœ¨ä»€ä¹ˆæ•°æ®åº“ï¼š</p><p><code>mysql&gt; SHOW DATABASES;</code></p><p>2:åˆ›å»ºä¸€ä¸ªæ•°æ®åº“MYSQLDATA</p><p><code>mysql&gt; CREATE DATABASE MYSQLDATA;</code></p><p>3:é€‰æ‹©ä½ æ‰€åˆ›å»ºçš„æ•°æ®åº“</p><p><code>mysql&gt; USE MYSQLDATA;</code> (æŒ‰å›è½¦é”®å‡ºç°Database changed æ—¶è¯´æ˜æ“ä½œæˆåŠŸï¼)</p><p>4:æŸ¥çœ‹ç°åœ¨çš„æ•°æ®åº“ä¸­å­˜åœ¨ä»€ä¹ˆè¡¨</p><p><code>mysql&gt; SHOW TABLES;</code></p><p>5:åˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¡¨</p><p><code>mysql&gt; CREATE TABLE MYTABLE (name VARCHAR(20), sex CHAR(1));</code></p><p>6:æ˜¾ç¤ºè¡¨çš„ç»“æ„ï¼š</p><p><code>mysql&gt; DESCRIBE MYTABLE;</code></p><p>7:å¾€è¡¨ä¸­åŠ å…¥è®°å½•</p><p><code>mysql&gt; insert into MYTABLE values (â€hyqâ€,â€Mâ€);</code></p><p>8:ç”¨æ–‡æœ¬æ–¹å¼å°†æ•°æ®è£…å…¥æ•°æ®åº“è¡¨ä¸­(ä¾‹å¦‚D:/mysql.txt)</p><p><code>mysql&gt; LOAD DATA LOCAL INFILE â€œD:/mysql.txtâ€ INTO TABLE MYTABLE;</code></p><p>9:å¯¼å…¥.sqlæ–‡ä»¶å‘½ä»¤(ä¾‹å¦‚D:/mysql.sql)</p><p><code>mysql&gt;use database;</code></p><p><code>mysql&gt;source d:/mysql.sql;</code></p><p>10:åˆ é™¤è¡¨</p><p><code>mysql&gt;drop TABLE MYTABLE;</code></p><p>11:æ¸…ç©ºè¡¨</p><p><code>mysql&gt;delete from MYTABLE;</code></p><p>12:æ›´æ–°è¡¨ä¸­æ•°æ®</p><p><code>mysql&gt;update MYTABLE set sex=â€fâ€ where name=â€™hyqâ€™;</code></p><p>ä»¥ä¸‹æ˜¯æ— æ„ä¸­åœ¨ç½‘ç»œçœ‹åˆ°çš„ä½¿ç”¨MySqlçš„ç®¡ç†å¿ƒå¾—,</p><ul><li><p>åœ¨windowsä¸­MySqlä»¥æœåŠ¡å½¢å¼å­˜åœ¨ï¼Œåœ¨ä½¿ç”¨å‰åº”ç¡®ä¿æ­¤æœåŠ¡å·²ç»å¯åŠ¨ï¼Œæœªå¯åŠ¨å¯ç”¨net start mysqlå‘½ä»¤å¯åŠ¨ã€‚è€ŒLinuxä¸­å¯åŠ¨æ—¶å¯ç”¨â€œ/etc/rc.d/init.d/mysqld startâ€å‘½ä»¤ï¼Œæ³¨æ„å¯åŠ¨è€…åº”å…·æœ‰ç®¡ç†å‘˜æƒé™ã€‚</p></li><li><p>åˆšå®‰è£…å¥½çš„MySqlåŒ…å«ä¸€ä¸ªå«ç©ºå¯†ç çš„rootå¸æˆ·å’Œä¸€ä¸ªåŒ¿åå¸æˆ·ï¼Œè¿™æ˜¯å¾ˆå¤§çš„å®‰å…¨éšæ‚£ï¼Œå¯¹äºä¸€äº›é‡è¦çš„åº”ç”¨æˆ‘ä»¬åº”å°†å®‰å…¨æ€§å°½å¯èƒ½æé«˜ï¼Œåœ¨è¿™é‡Œåº”æŠŠåŒ¿åå¸æˆ·åˆ é™¤ã€ rootå¸æˆ·è®¾ç½®å¯†ç ï¼Œå¯ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line">delete from User <span class="built_in">where</span> User=â€<span class="string">&quot;;</span></span><br><span class="line"><span class="string">update User set Password=PASSWORD(â€™newpasswordâ€™) where User=â€™rootâ€™;</span></span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœè¦å¯¹ç”¨æˆ·æ‰€ç”¨çš„ç™»å½•ç»ˆç«¯è¿›è¡Œé™åˆ¶ï¼Œå¯ä»¥æ›´æ–°Userè¡¨ä¸­ç›¸åº”ç”¨æˆ·çš„Hostå­—æ®µï¼Œåœ¨è¿›è¡Œäº†ä»¥ä¸Šæ›´æ”¹ååº”é‡æ–°å¯åŠ¨æ•°æ®åº“æœåŠ¡ï¼Œæ­¤æ—¶ç™»å½•æ—¶å¯ç”¨å¦‚ä¸‹ç±»ä¼¼å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p;</span><br><span class="line">mysql -uroot -pnewpassword;</span><br><span class="line">mysql mydb -uroot -p;</span><br><span class="line">mysql mydb -uroot -pnewpassword;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤å‚æ•°æ˜¯å¸¸ç”¨å‚æ•°çš„ä¸€éƒ¨åˆ†ï¼Œè¯¦ç»†æƒ…å†µå¯å‚è€ƒæ–‡æ¡£ã€‚æ­¤å¤„çš„mydbæ˜¯è¦ç™»å½•çš„æ•°æ®åº“çš„åç§°ã€‚</p></li><li><p>åœ¨ è¿›è¡Œå¼€å‘å’Œå®é™…åº”ç”¨ä¸­ï¼Œç”¨æˆ·ä¸åº”è¯¥åªç”¨rootç”¨æˆ·è¿›è¡Œè¿æ¥æ•°æ®åº“ï¼Œè™½ç„¶ä½¿ç”¨rootç”¨æˆ·è¿›è¡Œæµ‹è¯•æ—¶å¾ˆæ–¹ä¾¿ï¼Œä½†ä¼šç»™ç³»ç»Ÿå¸¦æ¥é‡å¤§å®‰å…¨éšæ‚£ï¼Œä¹Ÿä¸åˆ©äºç®¡ç†æŠ€ æœ¯çš„æé«˜ã€‚æˆ‘ä»¬ç»™ä¸€ä¸ªåº”ç”¨ä¸­ä½¿ç”¨çš„ç”¨æˆ·èµ‹äºˆæœ€æ°å½“çš„æ•°æ®åº“æƒé™ã€‚å¦‚ä¸€ä¸ªåªè¿›è¡Œæ•°æ®æ’å…¥çš„ç”¨æˆ·ä¸åº”èµ‹äºˆå…¶åˆ é™¤æ•°æ®çš„æƒé™ã€‚</p></li><li><p>MySqlçš„ç”¨æˆ·ç®¡ç†æ˜¯é€šè¿‡ Userè¡¨æ¥å®ç°çš„ï¼Œæ·»åŠ æ–°ç”¨æˆ·å¸¸ç”¨çš„æ–¹æ³•æœ‰ä¸¤ä¸ªï¼Œä¸€æ˜¯åœ¨Userè¡¨æ’å…¥ç›¸åº”çš„æ•°æ®è¡Œï¼ŒåŒæ—¶è®¾ç½®ç›¸åº”çš„æƒé™ï¼›äºŒæ˜¯é€šè¿‡GRANTå‘½ä»¤åˆ›å»ºå…·æœ‰æŸç§æƒé™çš„ç”¨ æˆ·ã€‚å…¶ä¸­GRANTçš„å¸¸ç”¨ç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">grant all on mydb.* to NewUserName@HostName identified by â€œpasswordâ€ ;</span><br><span class="line">grant usage on . to NewUserName@HostName identified by â€œpasswordâ€;</span><br><span class="line">grant select,insert,update on mydb.* to NewUserName@HostName identified by â€œpasswordâ€;</span><br><span class="line">grant update,delete on mydb.TestTable to NewUserName@HostName identified by â€œpasswordâ€;</span><br></pre></td></tr></table></figure></li></ul><ul><li>è‹¥ è¦ç»™æ­¤ç”¨æˆ·èµ‹äºˆä»–åœ¨ç›¸åº”å¯¹è±¡ä¸Šçš„æƒé™çš„ç®¡ç†èƒ½åŠ›ï¼Œå¯åœ¨GRANTåé¢æ·»åŠ WITH GRANT OPTIONé€‰é¡¹ã€‚è€Œå¯¹äºç”¨æ’å…¥Userè¡¨æ·»åŠ çš„ç”¨æˆ·ï¼ŒPasswordå­—æ®µåº”ç”¨PASSWORD å‡½æ•°è¿›è¡Œæ›´æ–°åŠ å¯†ï¼Œä»¥é˜²ä¸è½¨ä¹‹äººçªƒçœ‹å¯†ç ã€‚å¯¹äºé‚£äº›å·²ç»ä¸ç”¨çš„ç”¨æˆ·åº”ç»™äºˆæ¸…é™¤ï¼Œæƒé™è¿‡ç•Œçš„ç”¨æˆ·åº”åŠæ—¶å›æ”¶æƒé™ï¼Œå›æ”¶æƒé™å¯ä»¥é€šè¿‡æ›´æ–°Userè¡¨ç›¸åº”å­—æ®µï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨REVOKEæ“ä½œã€‚</li></ul><p>ä¸‹é¢ç»™å‡ºæœ¬äººä»å…¶å®ƒèµ„æ–™(www.cn-Java.com)è·å¾—çš„å¯¹å¸¸ç”¨æƒé™çš„è§£é‡Šï¼š</p><h2 id="ä¸ƒ-å…¨å±€ç®¡ç†æƒé™ï¼š"><a href="#ä¸ƒ-å…¨å±€ç®¡ç†æƒé™ï¼š" class="headerlink" title="ä¸ƒ. å…¨å±€ç®¡ç†æƒé™ï¼š"></a>ä¸ƒ. å…¨å±€ç®¡ç†æƒé™ï¼š</h2><ol><li><strong>FILE: åœ¨MySQLæœåŠ¡å™¨ä¸Šè¯»å†™æ–‡ä»¶ã€‚</strong></li><li><strong>PROCESS: æ˜¾ç¤ºæˆ–æ€æ­»å±äºå…¶å®ƒç”¨æˆ·çš„æœåŠ¡çº¿ç¨‹ã€‚</strong></li><li><strong>RELOAD: é‡è½½è®¿é—®æ§åˆ¶è¡¨ï¼Œåˆ·æ–°æ—¥å¿—ç­‰ã€‚</strong></li><li><strong>SHUTDOWN: å…³é—­MySQLæœåŠ¡ã€‚</strong></li><li><strong>æ•°æ®åº“/æ•°æ®è¡¨/æ•°æ®åˆ—æƒé™ï¼š</strong></li><li><strong>ALTER: ä¿®æ”¹å·²å­˜åœ¨çš„æ•°æ®è¡¨(ä¾‹å¦‚å¢åŠ /åˆ é™¤åˆ—)å’Œç´¢å¼•ã€‚</strong></li><li><strong>CREATE: å»ºç«‹æ–°çš„æ•°æ®åº“æˆ–æ•°æ®è¡¨.</strong></li><li><strong>DELETE: åˆ é™¤è¡¨çš„è®°å½•ã€‚</strong></li><li><strong>DROP: åˆ é™¤æ•°æ®è¡¨æˆ–æ•°æ®åº“ã€‚</strong></li><li><strong>INDEX: å»ºç«‹æˆ–åˆ é™¤ç´¢å¼•ã€‚</strong></li><li><strong>INSERT: å¢åŠ è¡¨çš„è®°å½•ã€‚</strong></li><li><strong>SELECT: æ˜¾ç¤º/æœç´¢è¡¨çš„è®°å½•ã€‚</strong></li><li><strong>UPDATE: ä¿®æ”¹è¡¨ä¸­å·²å­˜åœ¨çš„è®°å½•ã€‚</strong></li><li><strong>ç‰¹åˆ«çš„æƒé™ï¼šALL: å…è®¸åšä»»ä½•äº‹(å’Œrootä¸€æ ·)ã€‚</strong></li><li><strong>USAGE: åªå…è®¸ç™»å½•â€“å…¶å®ƒä»€ä¹ˆä¹Ÿä¸å…è®¸åšã€‚</strong></li></ol><p>çŸ¥è¯†æ‹“å±•ï¼š</p><p><code>mysql -uroot -p123456 gameTop  gametop800</code></p>]]></content>
    
    
    <summary type="html">ä½œä¸ºå½“ä»Šæœ€å—æ¬¢è¿çš„æ•°æ®åº“ï¼Œå…¶å› ä¸ºå…è´¹ï¼Œè½»é‡è€Œæˆä¸ºç›®å‰ä¼ä¸šçº§å¼€å‘çš„ä¸»è¦æ•°æ®åº“ã€‚</summary>
    
    
    
    <category term="æ•°æ®åº“" scheme="https://www.blog.909111.xyz/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="MySQL" scheme="https://www.blog.909111.xyz/tags/MySQL/"/>
    
  </entry>
  
</feed>
